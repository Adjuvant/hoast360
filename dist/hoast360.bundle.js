var hoast360=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=357)}([function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=void 0,t=[],n={},r={};function i(e,n){for(var r in t){var i=t[r];if(i.context===e&&i.name===n)return i.instance}return null}function a(e,t){return t[e]}function o(e,t,n){e in n&&(n[e]=t)}function s(t,n,r){var i=void 0,a=t.__dashjs_factory_name,o=n[a];if(o){var s=o.instance;if(!o.override)return s.apply({context:n,factory:e},r);for(var u in i=t.apply({context:n},r),s=s.apply({context:n,factory:e,parent:i},r))i.hasOwnProperty(u)&&(i[u]=s[u])}else i=t.apply({context:n},r);return i.getClassName=function(){return a},i}return e={extend:function(e,t,n,r){!r[e]&&t&&(r[e]={instance:t,override:n})},getSingletonInstance:i,setSingletonInstance:function(e,n,r){for(var i in t){var a=t[i];if(a.context===e&&a.name===n)return void(t[i].instance=r)}t.push({name:n,context:e,instance:r})},getSingletonFactory:function(e){var r=a(e.__dashjs_factory_name,n);return r||(r=function(n){var r=void 0;return void 0===n&&(n={}),{getInstance:function(){return r||(r=i(n,e.__dashjs_factory_name)),r||(r=s(e,n,arguments),t.push({name:e.__dashjs_factory_name,context:n,instance:r})),r}}},n[e.__dashjs_factory_name]=r),r},getSingletonFactoryByName:function(e){return a(e,n)},updateSingletonFactory:function(e,t){o(e,t,n)},getClassFactory:function(e){var t=a(e.__dashjs_factory_name,r);return t||(t=function(t){return void 0===t&&(t={}),{create:function(){return s(e,t,arguments)}}},r[e.__dashjs_factory_name]=t),t},getClassFactoryByName:function(e){return a(e,r)},updateClassFactory:function(e,t){o(e,t,r)}}}();t.default=r},function(e,t,n){(function(t){var r,i=void 0!==t?t:"undefined"!=typeof window?window:{},a=n(278);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=r}).call(this,n(13))},function(e,t){function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var n,a=String(e);return(n=r[a.toLowerCase()])?n:(n=i[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var a;if(a=r[t.toLowerCase()])return a===n;if(a=i[t.toLowerCase()])return a===n}else if("number"==typeof t)return t===n;return!1}};var r=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};
/*!
 * Programatically add the following
 */
for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var o=t.names=t.title={};for(a in r)o[r[a]]=a;for(var s in i)r[s]=i[s]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return r(e,[{key:"init",value:function(){this.STREAM="stream",this.VIDEO="video",this.AUDIO="audio",this.TEXT="text",this.FRAGMENTED_TEXT="fragmentedText",this.EMBEDDED_TEXT="embeddedText",this.MUXED="muxed",this.IMAGE="image",this.STPP="stpp",this.TTML="ttml",this.VTT="vtt",this.WVTT="wvtt",this.ABR_STRATEGY_DYNAMIC="abrDynamic",this.ABR_STRATEGY_BOLA="abrBola",this.ABR_STRATEGY_THROUGHPUT="abrThroughput",this.MOVING_AVERAGE_SLIDING_WINDOW="slidingWindow",this.MOVING_AVERAGE_EWMA="ewma",this.BAD_ARGUMENT_ERROR="Invalid Arguments",this.MISSING_CONFIG_ERROR="Missing config parameter(s)",this.LOCATION="Location",this.INITIALIZE="initialize",this.TEXT_SHOWING="showing",this.TEXT_HIDDEN="hidden",this.CC1="CC1",this.CC3="CC3",this.UTF8="utf-8",this.SCHEME_ID_URI="schemeIdUri",this.START_TIME="starttime",this.SERVICE_DESCRIPTION_LL_SCHEME="urn:dvb:dash:lowlatency:scope:2019",this.SUPPLEMENTAL_PROPERTY_LL_SCHEME="urn:dvb:dash:lowlatency:critical:2019"}}]),e}());t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e={};function t(t,n,r){var i=-1;return e[t]?(e[t].some((function(e,t){if(e&&e.callback===n&&(!r||r===e.scope))return i=t,!0})),i):i}return{on:function(n,r,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!n)throw new Error("event type cannot be null or undefined");if(!r||"function"!=typeof r)throw new Error("listener must be a function: "+r);if(!(t(n,r,i)>=0)){e[n]=e[n]||[];var o={callback:r,scope:i,priority:a},s=e[n].some((function(t,r){if(t&&a>t.priority)return e[n].splice(r,0,o),!0}));s||e[n].push(o)}},off:function(n,r,i){if(n&&r&&e[n]){var a=t(n,r,i);a<0||(e[n][a]=null)}},trigger:function(t,n){if(t&&e[t]){if((n=n||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");n.type=t,e[t]=e[t].filter((function(e){return e})),e[t].forEach((function(e){return e&&e.callback.call(e.scope,n)}))}},reset:function(){e={}}}}o.__dashjs_factory_name="EventBus";var s=a.default.getSingletonFactory(o);s.EVENT_PRIORITY_LOW=0,s.EVENT_PRIORITY_HIGH=5e3,a.default.updateSingletonFactory(o.__dashjs_factory_name,s),t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(5)),i=o(n(7)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var s=1,u=2,l=3,c=4,d=5;function h(e){e=e||{};var t,n=this.context,a=(0,r.default)(n).getInstance(),o=e.settings,h=[],f=void 0,p=void 0,g=void 0;function m(e){return e&&e.bind?e.bind(window.console):window.console.log.bind(window.console)}function v(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[s,this].concat(t))}function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[u,this].concat(t))}function _(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[l,this].concat(t))}function T(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[c,this].concat(t))}function E(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];M.apply(void 0,[d,this].concat(t))}function M(e,t){var n="",r=null;f&&(r=(new Date).getTime(),n+="["+(r-g)+"]"),p&&t&&t.getClassName&&(n+="["+t.getClassName()+"]",t.getType&&(n+="["+t.getType()+"]")),n.length>0&&(n+=" ");for(var s=arguments.length,u=Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];Array.apply(null,u).forEach((function(e){n+=e+" "})),h[e]&&o.get().debug.logLevel>=e&&h[e](n),a.trigger(i.default.LOG,{message:n,level:e})}return t={getLogger:function(e){return{fatal:v.bind(e),error:y.bind(e),warn:_.bind(e),info:T.bind(e),debug:E.bind(e)}},setLogTimestampVisible:function(e){f=e},setCalleeNameVisible:function(e){p=e}},f=!0,p=!0,g=(new Date).getTime(),"undefined"!=typeof window&&window.console&&(h[s]=m(window.console.error),h[u]=m(window.console.error),h[l]=m(window.console.warn),h[c]=m(window.console.info),h[d]=m(window.console.debug)),t}h.__dashjs_factory_name="Debug";var f=a.default.getSingletonFactory(h);f.LOG_LEVEL_NONE=0,f.LOG_LEVEL_FATAL=s,f.LOG_LEVEL_ERROR=u,f.LOG_LEVEL_WARNING=l,f.LOG_LEVEL_INFO=c,f.LOG_LEVEL_DEBUG=d,a.default.updateSingletonFactory(h.__dashjs_factory_name,f),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(124);function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=new(function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default));t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.code=t||null,this.message=n||null,this.data=r||null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(86);var a=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,e.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,e.SEGMENTS_UPDATE_FAILED_ERROR_CODE=13,e.SEGMENTS_UNAVAILABLE_ERROR_CODE=14,e.SEGMENT_BASE_LOADER_ERROR_CODE=15,e.TIME_SYNC_FAILED_ERROR_CODE=16,e.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,e.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,e.APPEND_ERROR_CODE=20,e.REMOVE_ERROR_CODE=21,e.DATA_UPDATE_FAILED_ERROR_CODE=22,e.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,e.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,e.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,e.DOWNLOAD_ERROR_ID_SIDX_CODE=26,e.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,e.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,e.DOWNLOAD_ERROR_ID_XLINK_CODE=29,e.MANIFEST_ERROR_ID_CODEC_CODE=30,e.MANIFEST_ERROR_ID_PARSE_CODE=31,e.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,e.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,e.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,e.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,e.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",e.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",e.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",e.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",e.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",e.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segments",e.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize time",e.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",e.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",e.APPEND_ERROR_MESSAGE="chunk is not defined",e.REMOVE_ERROR_MESSAGE="buffer is not defined",e.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",e.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",e.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",e.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",e.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default));t.default=a},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this._stream=null,this._tfinish=null,this._mediaduration=null,this._quality=null,this._responseHeaders=null,this._serviceLocation=null};i.GET="GET",i.HEAD="HEAD",i.MPD_TYPE="MPD",i.XLINK_EXPANSION_TYPE="XLinkExpansion",i.INIT_SEGMENT_TYPE="InitializationSegment",i.INDEX_SEGMENT_TYPE="IndexSegment",i.MEDIA_SEGMENT_TYPE="MediaSegment",i.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",i.OTHER_TYPE="other",t.HTTPRequest=i,t.HTTPRequestTrace=function e(){r(this,e),this.s=null,this.d=null,this.b=[]}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(292),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,a.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return r(e,[{key:"init",value:function(){this.TCP_CONNECTION="TcpList",this.HTTP_REQUEST="HttpList",this.TRACK_SWITCH="RepSwitchList",this.BUFFER_LEVEL="BufferLevel",this.BUFFER_LOADED="bufferLoaded",this.ABANDON_LOAD="abandonload",this.ALLOW_LOAD="allowload",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_STATE="BufferState",this.DVR_INFO="DVRInfo",this.DROPPED_FRAMES="DroppedFrames",this.SCHEDULING_INFO="SchedulingInfo",this.REQUESTS_QUEUE="RequestsQueue",this.MANIFEST_UPDATE="ManifestUpdate",this.MANIFEST_UPDATE_STREAM_INFO="ManifestUpdatePeriodInfo",this.MANIFEST_UPDATE_TRACK_INFO="ManifestUpdateRepresentationInfo",this.PLAY_LIST="PlayList",this.DVB_ERRORS="DVBErrors"}}]),e}());t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return r(e,[{key:"init",value:function(){this.BASE_URL="BaseURL",this.SEGMENT_BASE="SegmentBase",this.SEGMENT_TEMPLATE="SegmentTemplate",this.SEGMENT_LIST="SegmentList",this.SEGMENT_URL="SegmentURL",this.SEGMENT_TIMELINE="SegmentTimeline",this.SEGMENT_PROFILES="segmentProfiles",this.ADAPTATION_SET="AdaptationSet",this.REPRESENTATION="Representation",this.REPRESENTATION_INDEX="RepresentationIndex",this.SUB_REPRESENTATION="SubRepresentation",this.INITIALIZATION="Initialization",this.INITIALIZATION_MINUS="initialization",this.MPD="MPD",this.PERIOD="Period",this.ASSET_IDENTIFIER="AssetIdentifier",this.EVENT_STREAM="EventStream",this.ID="id",this.PROFILES="profiles",this.SERVICE_LOCATION="serviceLocation",this.RANGE="range",this.INDEX="index",this.MEDIA="media",this.BYTE_RANGE="byteRange",this.INDEX_RANGE="indexRange",this.MEDIA_RANGE="mediaRange",this.VALUE="value",this.CONTENT_TYPE="contentType",this.MIME_TYPE="mimeType",this.BITSTREAM_SWITCHING="BitstreamSwitching",this.BITSTREAM_SWITCHING_MINUS="bitstreamSwitching",this.CODECS="codecs",this.DEPENDENCY_ID="dependencyId",this.MEDIA_STREAM_STRUCTURE_ID="mediaStreamStructureId",this.METRICS="Metrics",this.METRICS_MINUS="metrics",this.REPORTING="Reporting",this.WIDTH="width",this.HEIGHT="height",this.SAR="sar",this.FRAMERATE="frameRate",this.AUDIO_SAMPLING_RATE="audioSamplingRate",this.MAXIMUM_SAP_PERIOD="maximumSAPPeriod",this.START_WITH_SAP="startWithSAP",this.MAX_PLAYOUT_RATE="maxPlayoutRate",this.CODING_DEPENDENCY="codingDependency",this.SCAN_TYPE="scanType",this.FRAME_PACKING="FramePacking",this.AUDIO_CHANNEL_CONFIGURATION="AudioChannelConfiguration",this.CONTENT_PROTECTION="ContentProtection",this.ESSENTIAL_PROPERTY="EssentialProperty",this.SUPPLEMENTAL_PROPERTY="SupplementalProperty",this.INBAND_EVENT_STREAM="InbandEventStream",this.ACCESSIBILITY="Accessibility",this.ROLE="Role",this.RATING="Rating",this.CONTENT_COMPONENT="ContentComponent",this.SUBSET="Subset",this.LANG="lang",this.VIEWPOINT="Viewpoint",this.ROLE_ASARRAY="Role_asArray",this.ACCESSIBILITY_ASARRAY="Accessibility_asArray",this.AUDIOCHANNELCONFIGURATION_ASARRAY="AudioChannelConfiguration_asArray",this.CONTENTPROTECTION_ASARRAY="ContentProtection_asArray",this.MAIN="main",this.DYNAMIC="dynamic",this.MEDIA_PRESENTATION_DURATION="mediaPresentationDuration",this.MINIMUM_UPDATE_PERIOD="minimumUpdatePeriod",this.CODEC_PRIVATE_DATA="codecPrivateData",this.BANDWITH="bandwidth",this.SOURCE_URL="sourceURL",this.TIMESCALE="timescale",this.DURATION="duration",this.START_NUMBER="startNumber",this.PRESENTATION_TIME_OFFSET="presentationTimeOffset",this.AVAILABILITY_START_TIME="availabilityStartTime",this.AVAILABILITY_END_TIME="availabilityEndTime",this.TIMESHIFT_BUFFER_DEPTH="timeShiftBufferDepth",this.MAX_SEGMENT_DURATION="maxSegmentDuration",this.PRESENTATION_TIME="presentationTime",this.MIN_BUFFER_TIME="minBufferTime",this.MAX_SUBSEGMENT_DURATION="maxSubsegmentDuration",this.START="start",this.AVAILABILITY_TIME_OFFSET="availabilityTimeOffset",this.AVAILABILITY_TIME_COMPLETE="availabilityTimeComplete",this.CENC_DEFAULT_KID="cenc:default_KID",this.DVB_PRIORITY="dvb:priority",this.DVB_WEIGHT="dvb:weight",this.SUGGESTED_PRESENTATION_DELAY="suggestedPresentationDelay",this.SERVICE_DESCRIPTION="ServiceDescription",this.SERVICE_DESCRIPTION_SCOPE="Scope",this.SERVICE_DESCRIPTION_LATENCY="Latency",this.SERVICE_DESCRIPTION_PLAYBACK_RATE="PlaybackRate"}}]),e}());t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};var o={DEFAULT:.5,STRONG:1,WEAK:0};function s(e,t,n){return{quality:void 0===e?-1:e,reason:void 0===t?null:t,priority:function(e){var t=o.DEFAULT;return e!==o.DEFAULT&&e!==o.STRONG&&e!==o.WEAK||(t=e),t}(n)}}s.__dashjs_factory_name="SwitchRequest";var u=a.default.getClassFactory(s);u.NO_CHANGE=-1,u.PRIORITY=o,a.default.updateClassFactory(s.__dashjs_factory_name,u),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.checkParameterType=function(e,t){if((void 0===e?"undefined":r(e))!==t)throw o.default.BAD_ARGUMENT_ERROR},t.checkInteger=function(e){if(null===e||isNaN(e)||e%1!=0)throw o.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"},t.checkRange=function(e,t,n){if(e<t||e>n)throw o.default.BAD_ARGUMENT_ERROR+" : argument out of range"},t.checkIsVideoOrAudioType=function(e){if("string"!=typeof e||e!==o.default.AUDIO&&e!==o.default.VIDEO)throw o.default.BAD_ARGUMENT_ERROR};var i,a=n(4),o=(i=a)&&i.__esModule?i:{default:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e=void 0,t=/^[a-z][a-z0-9+\-.]*:/i,n=/^https?:\/\//i,r=/^https:\/\//i,i=/^([a-z][a-z0-9+\-.]*:\/\/[^\/]+)\/?/i,a=function(e,t){try{return new window.URL(e,t).toString()}catch(t){return e}},o=function(e,t){var n=s;if(!t)return e;if(!c(e))return e;d(e)&&(n=u),h(e)&&(n=l);var r=n(t),i="/"!==r.charAt(r.length-1)&&"/"!==e.charAt(0)?"/":"";return[r,e].join(i)};function s(e){var t=e.indexOf("/"),n=e.lastIndexOf("/");return-1!==t?n===t+1?e:(-1!==e.indexOf("?")&&(e=e.substring(0,e.indexOf("?"))),e.substring(0,n+1)):""}function u(e){var t=e.match(i);return t?t[1]:""}function l(e){var n=e.match(t);return n?n[0]:""}function c(e){return!t.test(e)}function d(e){return c(e)&&"/"===e.charAt(0)}function h(e){return 0===e.indexOf("//")}return function(){try{new window.URL("x","http://y");e=a}catch(e){}finally{e=e||o}}(),{parseBaseUrl:s,parseOrigin:u,parseScheme:l,isRelative:c,isPathAbsolute:d,isSchemeRelative:h,isHTTPURL:function(e){return n.test(e)},isHTTPS:function(e){return r.test(e)},resolve:function(t,n){return e(t,n)}}}o.__dashjs_factory_name="URLUtils",t.default=a.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(11);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.action=e.ACTION_DOWNLOAD,this.startTime=NaN,this.mediaType=null,this.mediaInfo=null,this.type=null,this.duration=NaN,this.timescale=NaN,this.range=null,this.url=null,this.serviceLocation=null,this.requestStartDate=null,this.firstByteDate=null,this.requestEndDate=null,this.quality=NaN,this.index=NaN,this.availabilityStartTime=null,this.availabilityEndTime=null,this.wallStartTime=null,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.responseType="arraybuffer",this.representationId=null}return r(e,[{key:"isInitializationRequest",value:function(){return this.type&&this.type===i.HTTPRequest.INIT_SEGMENT_TYPE}},{key:"setInfo",value:function(e){this.type=e&&e.init?i.HTTPRequest.INIT_SEGMENT_TYPE:i.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=e&&e.url?e.url:null,this.range=e&&e.range?e.range.start+"-"+e.range.end:null,this.mediaType=e&&e.mediaType?e.mediaType:null}}]),e}();a.ACTION_DOWNLOAD="download",a.ACTION_COMPLETE="complete",t.default=a},function(e,t,n){"use strict";var r=n(37),i=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var a=Object.create(n(28));a.inherits=n(23);var o=n(82),s=n(54);a.inherits(d,o);for(var u=i(s.prototype),l=0;l<u.length;l++){var c=u[l];d.prototype[c]||(d.prototype[c]=s.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),r.nextTick(t,e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init()}return r(e,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),e}());t.default=i},function(e,t,n){"use strict";var r,i,a,o,s,u,l=n(107).toUnsigned,c=n(107).toHexString;r=function(e,t){var n,a,o,s,u,c=[];if(!t.length)return null;for(n=0;n<e.byteLength;)a=l(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),o=i(e.subarray(n+4,n+8)),s=a>1?n+a:e.byteLength,o===t[0]&&(1===t.length?c.push(e.subarray(n+8,s)):(u=r(e.subarray(n+8,s),t.slice(1))).length&&(c=c.concat(u))),n=s;return c},i=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3])},a=function(e){return r(e,["moov","trak"]).reduce((function(e,t){var n,i,a,o,s;return(n=r(t,["tkhd"])[0])?(i=n[0],o=l(n[a=0===i?12:20]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]),(s=r(t,["mdia","mdhd"])[0])?(a=0===(i=s[0])?12:20,e[o]=l(s[a]<<24|s[a+1]<<16|s[a+2]<<8|s[a+3]),e):null):null}),{})},o=function(e,t){var n,i,a;return n=r(t,["moof","traf"]),i=[].concat.apply([],n.map((function(t){return r(t,["tfhd"]).map((function(n){var i,a;return i=l(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),a=e[i]||9e4,(r(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=l(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=l(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0]||1/0)/a}))}))),a=Math.min.apply(null,i),isFinite(a)?a:0},s=function(e){var t=r(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=r(e,["mdia","hdlr"]),a=r(e,["tkhd"]);t.forEach((function(e,t){var r,o,s=i(e.subarray(8,12)),u=a[t];"vide"===s&&(o=0===(r=new DataView(u.buffer,u.byteOffset,u.byteLength)).getUint8(0)?r.getUint32(12):r.getUint32(20),n.push(o))}))})),n},u=function(e){var t=r(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,a,o={},s=r(e,["tkhd"])[0];s&&(a=(t=new DataView(s.buffer,s.byteOffset,s.byteLength)).getUint8(0),o.id=0===a?t.getUint32(12):t.getUint32(20));var u=r(e,["mdia","hdlr"])[0];if(u){var d=i(u.subarray(8,12));o.type="vide"===d?"video":"soun"===d?"audio":d}var h=r(e,["mdia","minf","stbl","stsd"])[0];if(h){var f=h.subarray(8);o.codec=i(f.subarray(4,8));var p,g=r(f,[o.codec])[0];g&&(/^[a-z]vc[1-9]$/i.test(o.codec)?(p=g.subarray(78),"avcC"===i(p.subarray(4,8))&&p.length>11?(o.codec+=".",o.codec+=c(p[9]),o.codec+=c(p[10]),o.codec+=c(p[11])):o.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(o.codec)&&(p=g.subarray(28),"esds"===i(p.subarray(4,8))&&p.length>20&&0!==p[19]?(o.codec+="."+c(p[19]),o.codec+="."+c(p[20]>>>2&63).replace(/^0/,"")):o.codec="mp4a.40.2"))}var m=r(e,["mdia","mdhd"])[0];if(m&&s){var v=0===a?12:20;o.timescale=l(m[v]<<24|m[v+1]<<16|m[v+2]<<8|m[v+3])}n.push(o)})),n},e.exports={findBox:r,parseType:i,timescale:a,startTime:o,videoTrackIds:s,tracks:u}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unescapeDollarsInTemplate=function(e){return e?e.split("$$").join("$"):e},t.replaceIDForTemplate=function(e,t){if(!t||!e||-1===e.indexOf("$RepresentationID$"))return e;var n=t.toString();return e.split("$RepresentationID$").join(n)},t.replaceTokenForTemplate=s,t.getIndexBasedSegment=function(e,t,n,r){var i,a,o=void 0;o=n.segmentDuration,isNaN(o)&&(o=n.adaptation.period.duration);i=parseFloat((n.adaptation.period.start+r*o).toFixed(5)),a=parseFloat((i+o).toFixed(5));var s=u(n,o,i,e.calcMediaTimeFromPresentationTime(i,n),e.calcAvailabilityStartTimeFromPresentationTime(i,n.adaptation.period.mpd,t),e,a,t,r);if(!l(e,n,s,t))return null;return s},t.getTimeBasedSegment=function(e,t,n,r,i,a,o,c,d,h){var f,p,g=r/a,m=Math.min(i/a,n.adaptation.period.mpd.maxSegmentDuration),v=void 0;if(f=e.calcPresentationTimeFromMediaTime(g,n),p=f+m,v=u(n,m,f,g,n.adaptation.period.mpd.manifest.loadedTime,e,p,t,d),!l(e,n,v,t))return null;return v.replacementTime=h||r,o=s(o,"Number",v.replacementNumber),o=s(o,"Time",v.replacementTime),v.media=o,v.mediaRange=c,v};var r,i=n(59),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){for(;e.length<t;)e="0"+e;return e}function s(e,t,n){var r=void 0,i=void 0,a=void 0,s=void 0,u=void 0,l=void 0,c=t.length,d="%0".length;if(!e)return e;for(;;){if((r=e.indexOf("$"+t))<0)return e;if((i=e.indexOf("$",r+c))<0)return e;if((a=e.indexOf("%0",r+c))>r&&a<i)switch(s=e.charAt(i-1),u=parseInt(e.substring(a+d,i-1),10),s){case"d":case"i":case"u":l=o(n.toString(),u);break;case"x":l=o(n.toString(16),u);break;case"X":l=o(n.toString(16),u).toUpperCase();break;case"o":l=o(n.toString(8),u);break;default:return e}else l=n;e=e.substring(0,r)+l+e.substring(i+1)}}function u(e,t,n,r,i,o,s,u,l){var c,d=new a.default;return d.representation=e,d.duration=t,d.presentationStartTime=n,d.mediaStartTime=r,d.availabilityStartTime=i,d.availabilityEndTime=o.calcAvailabilityEndTimeFromPresentationTime(s,e.adaptation.period.mpd,u),d.wallStartTime=o.calcWallTimeForSegment(d,u),d.replacementNumber=(c=l,d.representation.startNumber+c),d.availabilityIdx=l,d}function l(e,t,n,r){var i=e.getPeriodEnd(t,r),a=e.calcPeriodRelativeTimeFromMpdRelativeTime(t,i);return!(e.calcPeriodRelativeTimeFromMpdRelativeTime(t,n.presentationStartTime)>=a)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"findCencContentProtection",value:function(e){for(var t=null,n=0;n<e.length;++n){var r=e[n];"urn:mpeg:dash:mp4protection:2011"===r.schemeIdUri.toLowerCase()&&"cenc"===r.value.toLowerCase()&&(t=r)}return t}},{key:"getPSSHData",value:function(e){var t=8,n=new DataView(e),r=n.getUint8(t);return t+=20,r>0&&(t+=4+16*n.getUint32(t)),t+=4,e.slice(t)}},{key:"getPSSHForKeySystem",value:function(t,n){var r=e.parsePSSHList(n);return t&&r.hasOwnProperty(t.uuid.toLowerCase())?r[t.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(e,t){return"pssh"in e?t.decodeArray(e.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(e){if(null==e)return[];for(var t=new DataView(e.buffer||e),n={},r=0;;){var i,a,o=void 0,s=r;if(r>=t.buffer.byteLength)break;if(i=r+t.getUint32(r),r+=4,1886614376===t.getUint32(r))if(r+=4,0===(a=t.getUint8(r))||1===a){r++,r+=3,o="";var u=void 0,l=void 0;for(u=0;u<4;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=4,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<2;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;for(r+=2,o+="-",u=0;u<6;u++)o+=1===(l=t.getUint8(r+u).toString(16)).length?"0"+l:l;r+=6,o=o.toLowerCase(),t.getUint32(r),r+=4,n[o]=t.buffer.slice(s,i),r=i}else r=i;else r=i}return n}}]),e}();t.default=i},function(e,t,n){var r=n(68),i=function(e,t){for(var n,r,i,a=new Array(e.length),o=0;o<e.length;o++)n=Math.atan2(e[o][1],e[o][0]),r=Math.atan2(e[o][2],Math.sqrt(e[o][0]*e[o][0]+e[o][1]*e[o][1])),1==t?a[o]=[n,r]:(i=Math.sqrt(e[o][0]*e[o][0]+e[o][1]*e[o][1]+e[o][2]*e[o][2]),a[o]=[n,r,i]);return a},a=function(e,t){for(var n=new Array(t.length),i=new Array(t.length),a=0;a<t.length;a++)n[a]=t[a][0],i[a]=t[a][1];var u,l,c,d,h,f=new Array(2*e+1),p=(n.length,(e+1)*(e+1)),g=0,m=0,v=r.sin(i),y=0,_=new Array(p);for(a=0;a<2*e+1;a++)f[a]=o(a);for(var T=0;T<e+1;T++){if(0==T){var E=new Array(n.length);E.fill(1),_[T]=E,y=1}else{u=s(T,v,g,m),l=Math.sqrt(2*T+1);for(var M=0;M<T+1;M++)0==M?_[y+T]=r.mul(l,u[M]):(c=l*Math.sqrt(2*f[T-M]/f[T+M]),d=r.cos(r.mul(M,n)),h=r.sin(r.mul(M,n)),_[y+T-M]=r.mul(c,r.mul(u[M],h)),_[y+T+M]=r.mul(c,r.mul(u[M],d)));y=y+2*T+1}m=g,g=u}return _},o=function(e){return 0===e?1:e*o(e-1)},s=function(e,t,n,i){var a=new Array(e+1);switch(e){case 1:var o=r.mul(t,t),s=t,u=r.sqrt(r.sub(1,o));a[0]=s,a[1]=u;break;case 2:o=r.mul(t,t);var l=r.mul(3,o);l=r.sub(l,1),l=r.div(l,2);var c=r.sub(1,o);c=r.sqrt(c),c=r.mul(3,c),c=r.mul(c,t);var d=r.sub(1,o);d=r.mul(3,d),a[0]=l,a[1]=c,a[2]=d;break;default:o=r.mul(t,t);var h=r.sub(1,o),f=2*e-1,p=1;if(f%2==0)for(var g=1;g<f/2+1;g++)p=2*p*g;else for(g=1;g<(f+1)/2+1;g++)p*=2*g-1;a[e]=r.mul(p,r.pow(h,e/2)),a[e-1]=r.mul(2*e-1,r.mul(t,n[e-1]));for(var m=0;m<e-1;m++){var v=r.mul(2*e-1,r.mul(t,n[m])),y=r.mul(e+m-1,i[m]);a[m]=r.div(r.sub(v,y),e-m)}}return a},u=function(e){var t=r.transpose(e);return r.dot(r.inv(r.dot(t,e)),t)};function l(e,t,n,r,i){return h(0,e,t,n,r,i)}function c(e,t,n,r,i){var a,o,s,u;return 0==t?s=(a=h(1,e,1,n,r,i))+(o=h(-1,e,-1,n,r,i)):t>0?(u=1==t?1:0,a=h(1,e,t-1,n,r,i),o=h(-1,e,1-t,n,r,i),s=a*Math.sqrt(1+u)-o*(1-u)):(u=-1==t?1:0,s=(a=h(1,e,t+1,n,r,i))*(1-u)+(o=h(-1,e,-t-1,n,r,i))*Math.sqrt(1+u)),s}function d(e,t,n,r,i){var a;return 0==t?console.error("should not be called"):a=t>0?h(1,e,t+1,n,r,i)+h(-1,e,-t-1,n,r,i):h(1,e,t-1,n,r,i)-h(-1,e,1-t,n,r,i),a}function h(e,t,n,r,i,a){var o,s,u;return o=i[e+1][2],s=i[e+1][0],u=i[e+1][1],r==-t?o*a[n+t-1][0]+s*a[n+t-1][2*t-2]:r==t?o*a[n+t-1][2*t-2]-s*a[n+t-1][0]:u*a[n+t-1][r+t-1]}e.exports.forwardSHT=function(e,t,n,o){var s,l=t.length,c=[,];(e+1)*(e+1)>l&&console.log("The SHT degree is too high for the number of data points"),0==n&&(t=i(t));for(var d=0;d<t.length;d++)c[d]=t[d][2];return Y_N=a(e,t),s=0==o?r.mul(1/l,Y_N):u(r.transpose(Y_N)),r.dotMV(s,c)},e.exports.inverseSHT=function(e,t){for(var n=t,i=Math.sqrt(e.length)-1,o=a(i,t),s=r.dotVM(e,o),u=0;u<t.length;u++)n[u][2]=s[u];return n},e.exports.print2Darray=function(e){for(var t=0;t<e.length;t++)console.log(e[t])},e.exports.convertCart2Sph=i,e.exports.convertSph2Cart=function(e){for(var t,n,r,i=new Array(e.length),a=0;a<e.length;a++)t=Math.cos(e[a][0])*Math.cos(e[a][1]),n=Math.sin(e[a][0])*Math.cos(e[a][1]),r=Math.sin(e[a][1]),2==e[0].length?i[a]=[t,n,r]:3==e[0].length&&(i[a]=[e[a][2]*t,e[a][2]*n,e[a][2]*r]);return i},e.exports.computeRealSH=a,e.exports.factorial=o,e.exports.recurseLegendrePoly=s,e.exports.pinv_svd=function(e){for(var t=r.svd(e),n=t.S[0],i=t.U,a=t.S,o=t.V,s=e.length,u=e[0].length,l=Math.max(s,u)*r.epsilon*n,c=a.length,d=new Array(c),h=c-1;-1!==h;h--)a[h]>l?d[h]=1/a[h]:d[h]=0;return r.dot(r.dot(o,r.diag(d)),r.transpose(i))},e.exports.pinv_direct=u,e.exports.getSHrotMtx=function(e,t){var n=(t+1)*(t+1),i=r.rep([n,n],0);i[0][0]=1;var a=r.rep([3,3],0);a[0][0]=e[1][1],a[0][1]=e[1][2],a[0][2]=e[1][0],a[1][0]=e[2][1],a[1][1]=e[2][2],a[1][2]=e[2][0],a[2][0]=e[0][1],a[2][1]=e[0][2],a[2][2]=e[0][0],i=r.setBlock(i,[1,1],[3,3],a);for(var o=a,s=3,u=2;u<t+1;u++){for(var h=r.rep([2*u+1,2*u+1],0),f=-u;f<u+1;f++)for(var p=-u;p<u+1;p++){var g,m,v,y,_;g=0==f?1:0,m=Math.abs(p)==u?2*u*(2*u-1):u*u-p*p,v=Math.sqrt((u*u-f*f)/m),y=Math.sqrt((1+g)*(u+Math.abs(f)-1)*(u+Math.abs(f))/m)*(1-2*g)*.5,_=Math.sqrt((u-Math.abs(f)-1)*(u-Math.abs(f))/m)*(1-g)*-.5,0!=v&&(v*=l(u,f,p,a,o)),0!=y&&(y*=c(u,f,p,a,o)),0!=_&&(_*=d(u,f,p,a,o)),h[f+u][p+u]=v+y+_}i=r.setBlock(i,[s+1,s+1],[s+2*u+1,s+2*u+1],h),o=h,s=s+2*u+1}return i},e.exports.yawPitchRoll2Rzyx=function(e,t,n){var i,a,o;i=0==n?[[1,0,0],[0,1,0],[0,0,1]]:[[1,0,0],[0,Math.cos(n),Math.sin(n)],[0,-Math.sin(n),Math.cos(n)]],a=0==t?[[1,0,0],[0,1,0],[0,0,1]]:[[Math.cos(t),0,-Math.sin(t)],[0,1,0],[Math.sin(t),0,Math.cos(t)]],o=0==e?[[1,0,0],[0,1,0],[0,0,1]]:[[Math.cos(e),Math.sin(e),0],[-Math.sin(e),Math.cos(e),0],[0,0,1]];var s=r.dotMMsmall(a,o);return s=r.dotMMsmall(i,s)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(6)),i=u(n(130)),a=u(n(1)),o=u(n(48)),s=u(n(132));function u(e){return e&&e.__esModule?e:{default:e}}function l(){var e=void 0,t=void 0,n=this.context;function a(e){if(!e)return null;void 0===e.fileStart&&(e.fileStart=0);var t=o.default.parseBuffer(e),r=(0,i.default)(n).create();return r.setData(t),r}function u(e,t){return e[t+3]>>>0|e[t+2]<<8>>>0|e[t+1]<<16>>>0|e[t]<<24>>>0}function l(e,t){return String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t++])+String.fromCharCode(e[t])}return t={parse:a,findLastTopIsoBoxCompleted:function(e,t,n){if(void 0===n&&(n=0),!t||n+8>=t.byteLength)return new s.default(0,!1);for(var r=t instanceof ArrayBuffer?new Uint8Array(t):t,i=void 0,a=0;n<r.byteLength;){var o=u(r,n),c=l(r,n+4);if(0===o)break;n+o<=r.byteLength&&(e.indexOf(c)>=0?i=new s.default(n,!0,o):a=n+o),n+=o}return i||new s.default(a,!1)},getMediaTimescaleFromMoov:function(e){var t=a(e),n=t?t.getBox("mdhd"):void 0;return n?n.timescale:NaN},getSamplesInfo:function(e){if(!e||0===e.byteLength)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};var t,n,r=a(e),i=r.getBoxes("moof"),o=r.getBoxes("mfhd"),s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0;n=r.getBoxes("moof").length,t=o[o.length-1].sequence_number,u=0,d=[];var E=-1,M=-1;for(m=0;m<i.length;m++){var b=i[m],A=b.getChildBoxes("traf");for(p=0;p<A.length;p++){var w=A[p],S=w.getChildBox("tfhd"),x=w.getChildBox("tfdt");c=x.baseMediaDecodeTime;var D=w.getChildBoxes("trun"),I=w.getChildBoxes("subs");for(g=0;g<D.length;g++){var C=D[g];for(u=C.sample_count,_=(S.base_data_offset||0)+(C.data_offset||0),f=0;f<u;f++){s=void 0!==(h=C.samples[f]).sample_duration?h.sample_duration:S.default_sample_duration,l=void 0!==h.sample_size?h.sample_size:S.default_sample_size;var N={dts:c,cts:c+(void 0!==h.sample_composition_time_offset?h.sample_composition_time_offset:0),duration:s,offset:b.offset+_,size:l,subSizes:[l]};if(I)for(v=0;v<I.length;v++){var L=I[v];if(E<L.entry_count-1&&f>M&&(E++,M+=L.entries[E].sample_delta),f==M){N.subSizes=[];var O=L.entries[E];for(y=0;y<O.subsample_count;y++)N.subSizes.push(O.subsamples[y].subsample_size)}}d.push(N),_+=l,c+=s}}T=c-x.baseMediaDecodeTime}}return{sampleList:d,lastSequenceNumber:t,totalDuration:T,numSequences:n}},findInitRange:function(t){var n=null,r=a(t);if(!r)return n;var i=r.getBox("ftyp"),o=r.getBox("moov");return e.debug("Searching for initialization."),o&&o.isComplete&&(n=(i?i.offset:o.offset)+"-"+(o.offset+o.size-1),e.debug("Found the initialization.  Range: "+n)),n}},e=(0,r.default)(n).getInstance().getLogger(t),t}l.__dashjs_factory_name="BoxParser",t.default=a.default.getSingletonFactory(l)},function(e,t,n){(function(e){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=e.isBuffer}).call(this,n(51).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(60)),i=l(n(177)),a=n(11),o=l(n(1)),s=l(n(9)),u=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){e=e||{};var t,n,o=this.context,l=e.errHandler,d=e.dashMetrics,h=e.mediaPlayerModel,f=e.requestModifier,p=e.boxParser,g=e.useFetch||!1,m=void 0,v=void 0,y=void 0,_=void 0;return t={load:function(e){e.request?function e(t,n){var s=t.request,c=[],T=!0,E=!0,M=new Date,b=M,A=0,w=void 0;if(!f||!d||!l)throw new Error("config object is not correct or missing");var S=function(e){E=!1,s.requestStartDate=M,s.requestEndDate=new Date,s.firstByteDate=s.firstByteDate||M,s.checkExistenceOnly||(d.addHttpRequest(s,w.response?w.response.responseURL:null,w.response?w.response.status:null,w.response&&w.response.getAllResponseHeaders?w.response.getAllResponseHeaders():w.response?w.response.responseHeaders:[],e?c:null),s.type===a.HTTPRequest.MPD_TYPE&&d.addManifestUpdate(s.type,s.requestStartDate,s.requestEndDate))},x=function(){if(-1!==m.indexOf(w)&&(m.splice(m.indexOf(w),1),E))if(S(!1),n>0){n--;var r={config:t};y.push(r),r.timeout=setTimeout((function(){-1!==y.indexOf(r)&&(y.splice(y.indexOf(r),1),e(t,n))}),h.getRetryIntervalsForType(s.type))}else l.error(new u.default(_[s.type],s.url+" is not available",{request:s,response:w.response})),t.error&&t.error(s,"error",w.response.statusText),t.complete&&t.complete(s,w.response.statusText)},D=void 0;D=g&&window.fetch&&"arraybuffer"===s.responseType&&s.type===a.HTTPRequest.MEDIA_SEGMENT_TYPE?(0,i.default)(o).create({requestModifier:f,boxParser:p}):(0,r.default)(o).create({requestModifier:f});var I=f.modifyRequestURL(s.url),C=s.checkExistenceOnly?a.HTTPRequest.HEAD:a.HTTPRequest.GET,N=h.getXHRWithCredentialsForType(s.type);w={url:I,method:C,withCredentials:N,request:s,onload:function(){w.response.status>=200&&w.response.status<=299&&(S(!0),t.success&&t.success(w.response.response,w.response.statusText,w.response.responseURL),t.complete&&t.complete(s,w.response.statusText))},onend:x,onerror:x,progress:function(e){var n=new Date;T&&(T=!1,(!e.lengthComputable||e.lengthComputable&&e.total!==e.loaded)&&(s.firstByteDate=n)),e.lengthComputable&&(s.bytesLoaded=e.loaded,s.bytesTotal=e.total),e.noTrace||(c.push({s:b,d:e.time?e.time:n.getTime()-b.getTime(),b:[e.loaded?e.loaded-A:0]}),b=n,A=e.loaded),t.progress&&e&&t.progress(e)},onabort:function(){t.abort&&t.abort(s)},loader:D};var L=(new Date).getTime();if(isNaN(s.delayLoadingTime)||L>=s.delayLoadingTime)m.push(w),D.load(w);else{var O={httpRequest:w};v.push(O),O.delayTimeout=setTimeout((function(){if(-1!==v.indexOf(O)){v.splice(v.indexOf(O),1);try{M=new Date,b=M,m.push(O.httpRequest),D.load(O.httpRequest)}catch(e){O.httpRequest.onerror()}}}),s.delayLoadingTime-L)}}(e,h.getRetryAttemptsForType(e.request.type)):e.error&&e.error(e.request,"error")},abort:function(){y.forEach((function(e){clearTimeout(e.timeout),e.config.request&&e.config.abort&&e.config.abort(e.config.request)})),y=[],v.forEach((function(e){return clearTimeout(e.delayTimeout)})),v=[],m.forEach((function(e){e.onloadend=e.onerror=e.onprogress=void 0,e.loader.abort(e)})),m=[]}},m=[],v=[],y=[],c(n={},a.HTTPRequest.MPD_TYPE,s.default.DOWNLOAD_ERROR_ID_MANIFEST_CODE),c(n,a.HTTPRequest.XLINK_EXPANSION_TYPE,s.default.DOWNLOAD_ERROR_ID_XLINK_CODE),c(n,a.HTTPRequest.INIT_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE),c(n,a.HTTPRequest.MEDIA_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),c(n,a.HTTPRequest.INDEX_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),c(n,a.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),c(n,a.HTTPRequest.OTHER_TYPE,s.default.DOWNLOAD_ERROR_ID_CONTENT_CODE),_=n,t}d.__dashjs_factory_name="HTTPLoader";var h=o.default.getClassFactory(d);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(86);var a=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.MEDIA_KEYERR_CODE=100,e.MEDIA_KEYERR_UNKNOWN_CODE=101,e.MEDIA_KEYERR_CLIENT_CODE=102,e.MEDIA_KEYERR_SERVICE_CODE=103,e.MEDIA_KEYERR_OUTPUT_CODE=104,e.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,e.MEDIA_KEYERR_DOMAIN_CODE=106,e.MEDIA_KEY_MESSAGE_ERROR_CODE=107,e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,e.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,e.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,e.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,e.KEY_SESSION_CREATED_ERROR_CODE=113,e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,e.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",e.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",e.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",e.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",e.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",e.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",e.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",e.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",e.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",e.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",e.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",e.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",e.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",e.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deg2rad=o,t.rad2deg=s,t.getAmbisonicDecMtx=u,t.createNearestLookup=c,t.findNearest=d,t.getTdesign=h;var r=n(68),i=n(26),a=n(311);function o(e){for(var t=[],n=Math.PI/180,r=0;r<e.length;r++)3==e[0].length?t.push([e[r][0]*n,e[r][1]*n,e[r][2]]):2==e[0].length&&t.push([e[r][0]*n,e[r][1]*n]);return t}function s(e){for(var t=[],n=180/Math.PI,r=0;r<e.length;r++)3==e[0].length?t.push([e[r][0]*n,e[r][1]*n,e[r][2]]):2==e[0].length&&t.push([e[r][0]*n,e[r][1]*n]);return t}function u(e,t){for(var n=o(e),s=i.convertSph2Cart(n),u=a(s),c=u.length,d=n.length,f=new Array(c),p=0;p<c;p++){for(var g=new Array(3),m=0;m<3;m++)g[m]=s[u[p][m]];for(var v=r.inv(g),y=[],_=0;_<3;_++)for(var T=0;T<3;T++)y.push(v[T][_]);f[p]=y}var E=o(h(2*t)),M=l(E,u,f,d);M=r.transpose(M);var b=i.computeRealSH(t,E);b=r.transpose(b);var A=E.length,w=r.dotMMsmall(M,b);return w=r.mul(1/A,w)}var l=function(e,t,n,a){var o=e.length,s=a,u=t.length;for(var l,c=new Array(o),d=i.convertSph2Cart(e),h=0;h<o;h++){var f=d[h],p=new Array(s);p.fill(0);for(var g=0;g<u;g++){var m=[],v=[n[g][0],n[g][1],n[g][2]];if(m[0]=r.dotVV(v,f),v=[n[g][3],n[g][4],n[g][5]],m[1]=r.dotVV(v,f),v=[n[g][6],n[g][7],n[g][8]],m[2]=r.dotVV(v,f),l=m,Math.min.apply(null,l)>-.001){for(var y=Math.sqrt(r.sum(r.pow(m,2))),_=r.div(m,y),T=0;T<3;T++)p[t[g][T]]=_[T];break}}var E=Math.sqrt(r.sum(r.pow(p,2))),M=r.div(p,E);c[h]=M}return c};function c(e,t){var n=e.length,a=i.convertSph2Cart(o(e)),s=Math.round(360/t[0])+1,u=Math.round(180/t[1])+1,l=new Array(s);l[0]=-180;for(var c=1;c<s;c++)l[c]=l[c-1]+t[0];for(var d=s*u,h=new Array(d),f=0;f<d;f++)for(var p=[[f%s*t[0]-180,Math.floor(f/s)*t[1]-90]],g=i.convertSph2Cart(o(p)),m=1e3,v=0;v<n;v++){var y=r.sum(r.pow(r.sub(g[0],a[v]),2));y<m&&(h[f]=v,m=y)}return h}function d(e,t,n){for(var i=e.length,a=[],o=[],s=0;s<i;s++)a.push(e[s][0]+180),o.push(e[s][1]+90);for(var u=Math.round(360/n[0])+1,l=r.round(r.div(r.mod(a,360),n[0])),c=r.round(r.div(o,n[1])),d=r.add(r.mul(c,u),l,1),h=[],f=0;f<i;f++)h.push(t[d[f]]);return h}function h(e){if(e>21)throw new Error("Designs of order greater than 21 are not implemented");if(e<1)throw new Error("Order should be at least 1");return[[[0,0,1],[180,0,1]],[[45,35.26,1],[-45,-35.26,1],[135,-35.26,1],[-135,35.26,1]],[[0,0,1],[180,0,1],[90,0,1],[-90,0,1],[0,90,1],[0,-90,1]],[[0,-31.72,1],[-58.28,0,1],[-90,58.28,1],[0,31.72,1],[-121.72,0,1],[90,-58.28,1],[180,-31.72,1],[121.72,0,1],[90,58.28,1],[180,31.72,1],[58.28,0,1],[-90,-58.28,1]],[[0,-31.72,1],[-58.28,0,1],[-90,58.28,1],[0,31.72,1],[-121.72,0,1],[90,-58.28,1],[180,-31.72,1],[121.72,0,1],[90,58.28,1],[180,31.72,1],[58.28,0,1],[-90,-58.28,1]],[[26,15.46,1],[-26,-15.46,1],[17.11,-24.99,1],[-17.11,24.99,1],[154,-15.46,1],[-154,15.46,1],[162.89,24.99,1],[-162.89,-24.99,1],[72.89,24.99,1],[107.11,-24.99,1],[116,15.46,1],[64,-15.46,1],[-107.11,24.99,1],[-72.89,-24.99,1],[-64,15.46,1],[-116,-15.46,1],[32.25,60.03,1],[-147.75,60.03,1],[-57.75,60.03,1],[122.25,60.03,1],[-32.25,-60.03,1],[147.75,-60.03,1],[57.75,-60.03,1],[-122.25,-60.03,1]],[[26,15.46,1],[-26,-15.46,1],[17.11,-24.99,1],[-17.11,24.99,1],[154,-15.46,1],[-154,15.46,1],[162.89,24.99,1],[-162.89,-24.99,1],[72.89,24.99,1],[107.11,-24.99,1],[116,15.46,1],[64,-15.46,1],[-107.11,24.99,1],[-72.89,-24.99,1],[-64,15.46,1],[-116,-15.46,1],[32.25,60.03,1],[-147.75,60.03,1],[-57.75,60.03,1],[122.25,60.03,1],[-32.25,-60.03,1],[147.75,-60.03,1],[57.75,-60.03,1],[-122.25,-60.03,1]],[[-31.11,53.65,1],[110.82,30.5,1],[148.89,53.65,1],[32.21,-17.83,1],[69.18,-30.5,1],[-32.21,17.83,1],[-69.18,30.5,1],[-147.79,-17.83,1],[-110.82,-30.5,1],[147.79,17.83,1],[31.11,-53.65,1],[-148.89,-53.65,1],[-21.25,-47.78,1],[-108.2,38.78,1],[158.75,-47.78,1],[139.77,-14.09,1],[-71.8,-38.78,1],[-139.77,14.09,1],[71.8,38.78,1],[-40.23,-14.09,1],[108.2,-38.78,1],[40.23,14.09,1],[21.25,47.78,1],[-158.75,47.78,1],[106.65,-2.55,1],[-2.66,-16.63,1],[-73.35,-2.55,1],[-98.84,73.16,1],[-177.34,16.63,1],[98.84,-73.16,1],[177.34,-16.63,1],[81.16,73.16,1],[2.66,16.63,1],[-81.16,-73.16,1],[-106.65,2.55,1],[73.35,2.55,1]],[[20.75,-3.55,1],[-20.75,3.55,1],[-3.8,-20.7,1],[3.8,20.7,1],[159.25,3.55,1],[-159.25,-3.55,1],[-176.2,20.7,1],[176.2,-20.7,1],[93.8,20.7,1],[86.2,-20.7,1],[110.75,-3.55,1],[69.25,3.55,1],[-86.2,20.7,1],[-93.8,-20.7,1],[-69.25,-3.55,1],[-110.75,3.55,1],[-9.94,68.97,1],[170.06,68.97,1],[-99.94,68.97,1],[80.06,68.97,1],[9.94,-68.97,1],[-170.06,-68.97,1],[99.94,-68.97,1],[-80.06,-68.97,1],[42.15,17.57,1],[-42.15,-17.57,1],[23.12,-39.77,1],[-23.12,39.77,1],[137.85,-17.57,1],[-137.85,17.57,1],[156.88,39.77,1],[-156.88,-39.77,1],[66.88,39.77,1],[113.12,-39.77,1],[132.15,17.57,1],[47.85,-17.57,1],[-113.12,39.77,1],[-66.88,-39.77,1],[-47.85,17.57,1],[-132.15,-17.57,1],[25.26,44.98,1],[-154.74,44.98,1],[-64.74,44.98,1],[115.26,44.98,1],[-25.26,-44.98,1],[154.74,-44.98,1],[64.74,-44.98,1],[-115.26,-44.98,1]],[[144.09,-21.45,1],[-33.81,-48.92,1],[-35.91,-21.45,1],[-115.87,33.09,1],[-146.19,48.92,1],[115.87,-33.09,1],[146.19,-48.92,1],[64.13,33.09,1],[33.81,48.92,1],[-64.13,-33.09,1],[-144.09,21.45,1],[35.91,21.45,1],[-45.53,1.95,1],[177.26,44.44,1],[134.47,1.95,1],[87.21,-45.49,1],[2.74,-44.44,1],[-87.21,45.49,1],[-2.74,44.44,1],[-92.79,-45.49,1],[-177.26,-44.44,1],[92.79,45.49,1],[45.53,-1.95,1],[-134.47,-1.95,1],[15.59,-73.34,1],[-85.4,16.04,1],[-164.41,-73.34,1],[163.92,4.42,1],[-94.6,-16.04,1],[-163.92,-4.42,1],[94.6,16.04,1],[-16.08,4.42,1],[85.4,-16.04,1],[16.08,-4.42,1],[-15.59,73.34,1],[164.41,73.34,1],[-60.02,25.27,1],[151.41,26.86,1],[119.98,25.27,1],[46.63,-51.57,1],[28.59,-26.86,1],[-46.63,51.57,1],[-28.59,26.86,1],[-133.37,-51.57,1],[-151.41,-26.86,1],[133.37,51.57,1],[60.02,-25.27,1],[-119.98,-25.27,1],[-109.94,6.91,1],[172.65,-19.79,1],[70.06,6.91,1],[-70.44,-68.94,1],[7.35,19.79,1],[70.44,68.94,1],[-7.35,-19.79,1],[109.56,-68.94,1],[-172.65,19.79,1],[-109.56,68.94,1],[109.94,-6.91,1],[-70.06,-6.91,1]],[[132.93,7.69,1],[-83.93,-23.73,1],[8.47,23.51,1],[-113.34,70.42,1],[-103.27,-9.9,1],[-33.24,-70.75,1],[21.86,-26.46,1],[-156.54,47.78,1],[-64.26,-7.72,1],[165.78,44.53,1],[-25.2,26.39,1],[-97,-44.66,1],[27.85,9.77,1],[153.21,-47.71,1],[-155.06,7.45,1],[-11.84,-23.59,1],[80.54,23.72,1],[-42.06,70.44,1],[-31.22,-9.84,1],[38.84,-70.5,1],[93.76,-26.29,1],[-84.76,47.61,1],[7.76,-7.52,1],[-122.28,44.29,1],[46.8,26.64,1],[-24.77,-44.57,1],[99.89,9.91,1],[-134.78,-47.96,1],[-83.09,7.3,1],[60.13,-23.34,1],[152.64,23.64,1],[29.76,70.68,1],[40.78,-9.58,1],[110.18,-70.39,1],[165.65,-26.43,1],[-12.99,47.75,1],[79.74,-7.31,1],[-50.52,44.26,1],[118.92,26.71,1],[47.22,-44.31,1],[171.93,9.76,1],[-62.51,-48.04,1],[-11.12,7.44,1],[132.02,-23.33,1],[-135.36,23.39,1],[102.37,70.82,1],[112.74,-9.49,1],[-178.3,-70.58,1],[-122.32,-26.67,1],[59.08,48,1],[151.7,-7.38,1],[21.38,44.5,1],[-169.01,26.5,1],[118.98,-44.25,1],[-116.09,9.52,1],[9.65,-47.83,1],[60.89,7.68,1],[-156.02,-23.57,1],[-63.46,23.31,1],[174.93,70.66,1],[-175.29,-9.68,1],[-105.95,-70.8,1],[-50.19,-26.7,1],[131.36,48.01,1],[-136.3,-7.64,1],[93.56,44.67,1],[-97.08,26.3,1],[-169.16,-44.46,1],[-44.13,9.52,1],[81.48,-47.62,1]],[[-154.47,7.9,1],[162.15,-63.36,1],[25.53,7.9,1],[-81.26,-25.27,1],[17.85,63.36,1],[81.26,25.27,1],[-17.85,-63.36,1],[98.74,-25.27,1],[-162.15,63.36,1],[-98.74,25.27,1],[154.47,-7.9,1],[-25.53,-7.9,1],[1.3,-10.47,1],[-83.01,79.45,1],[-178.7,-10.47,1],[100.48,1.28,1],[-96.99,-79.45,1],[-100.48,-1.28,1],[96.99,79.45,1],[-79.52,1.28,1],[83.01,-79.45,1],[79.52,-1.28,1],[-1.3,10.47,1],[178.7,10.47,1],[157.24,13.15,1],[31.14,-63.89,1],[-22.76,13.15,1],[-75.78,22.13,1],[148.86,63.89,1],[75.78,-22.13,1],[-148.86,-63.89,1],[104.22,22.13,1],[-31.14,63.89,1],[-104.22,-22.13,1],[-157.24,-13.15,1],[22.76,-13.15,1],[110.44,-60.62,1],[-62.18,-9.87,1],[-69.56,-60.62,1],[-168.88,27.37,1],[-117.82,9.87,1],[168.88,-27.37,1],[117.82,-9.87,1],[11.12,27.37,1],[62.18,9.87,1],[-11.12,-27.37,1],[-110.44,60.62,1],[69.56,60.62,1],[-125.93,-47.4,1],[-126.67,-23.4,1],[54.07,-47.4,1],[-151.65,-33.24,1],[-53.33,23.4,1],[151.65,33.24,1],[53.33,-23.4,1],[28.35,-33.24,1],[126.67,23.4,1],[-28.35,33.24,1],[125.93,47.4,1],[-54.07,47.4,1],[61.41,37.54,1],[41.19,22.3,1],[-118.59,37.54,1],[31.92,44.13,1],[138.81,-22.3,1],[-31.92,-44.13,1],[-138.81,22.3,1],[-148.08,44.13,1],[-41.19,-22.3,1],[148.08,-44.13,1],[-61.41,-37.54,1],[118.59,-37.54,1],[132.92,4.73,1],[6.45,-42.74,1],[-47.08,4.73,1],[-83.07,46.87,1],[173.55,42.74,1],[83.07,-46.87,1],[-173.55,-42.74,1],[96.93,46.87,1],[-6.45,42.74,1],[-96.93,-46.87,1],[-132.92,-4.73,1],[47.08,-4.73,1]],[[-40.36,68.7,1],[61.12,65.68,1],[141.73,70.75,1],[-131.25,72.32,1],[-154.88,-12.62,1],[-66.2,-9.78,1],[26.36,-11.97,1],[114.95,-12.58,1],[37.02,51.13,1],[129.77,51.95,1],[-140.63,50.15,1],[-56.5,47.88,1],[-65.05,12.58,1],[25.12,12.62,1],[113.8,9.78,1],[-153.64,11.97,1],[-134.51,-9.73,1],[-46.23,-8.37,1],[47.91,-9.73,1],[141.51,-8.73,1],[-17.84,-44.1,1],[69.37,-43.27,1],[151.22,-42.67,1],[-106.78,-40.18,1],[-50.23,-51.95,1],[39.37,-50.15,1],[123.5,-47.88,1],[-142.98,-51.13,1],[-179.19,-60.75,1],[-84.57,-54.07,1],[5.39,-58.05,1],[89.5,-60.75,1],[-145.98,31.02,1],[-54.39,26.43,1],[28.92,32.51,1],[125.34,30.94,1],[168.71,-7.06,1],[-112.49,-10.38,1],[-21.96,-9.6,1],[73.11,-8.31,1],[95.68,.04,1],[-170.71,2.32,1],[-84.32,-.04,1],[9.29,-2.32,1],[9.19,-34.33,1],[98.21,-37.31,1],[-179.2,-40.48,1],[-77.81,-31.6,1],[-177.08,-21.74,1],[-93.77,-18.83,1],[-2.72,-19.8,1],[90.51,-20.91,1],[-106.89,8.31,1],[-11.29,7.06,1],[67.51,10.38,1],[158.04,9.6,1],[-118.88,-65.68,1],[-38.27,-70.75,1],[48.75,-72.32,1],[139.64,-68.7,1],[-54.66,-30.94,1],[34.02,-31.02,1],[125.61,-26.43,1],[-151.08,-32.51,1],[-170.81,34.33,1],[-81.79,37.31,1],[.8,40.48,1],[102.19,31.6,1],[-28.78,42.67,1],[73.22,40.18,1],[162.16,44.1,1],[-110.63,43.27,1],[-89.49,20.91,1],[2.92,21.74,1],[86.23,18.83,1],[177.28,19.8,1],[133.77,8.37,1],[-132.09,9.73,1],[-38.49,8.73,1],[45.49,9.73,1],[-25.6,24.04,1],[55.12,30.23,1],[149.3,28.05,1],[-118.71,26.06,1],[.81,60.75,1],[95.43,54.07,1],[-174.61,58.05,1],[-90.5,60.75,1],[-124.88,-30.23,1],[-30.7,-28.05,1],[61.29,-26.06,1],[154.4,-24.04,1],[-132.92,-85.6,1],[47.08,85.6,1]],[[-129.19,8.11,1],[169.58,-38.73,1],[50.81,8.12,1],[-77.27,-50.11,1],[10.42,38.73,1],[77.3,50.12,1],[-10.41,-38.72,1],[102.71,-50.11,1],[-169.57,38.72,1],[-102.71,50.11,1],[129.19,-8.11,1],[-50.8,-8.11,1],[-4.59,-56.01,1],[-93.1,33.85,1],[175.39,-56.03,1],[146.11,-2.57,1],[-86.89,-33.86,1],[-146.1,2.56,1],[86.91,33.86,1],[-33.89,-2.57,1],[93.1,-33.85,1],[33.9,2.58,1],[4.6,56.03,1],[-175.38,56.01,1],[106.57,26.1,1],[27.07,-14.82,1],[-73.44,26.09,1],[-30.2,59.41,1],[152.94,14.83,1],[30.2,-59.4,1],[-152.93,-14.84,1],[149.82,59.41,1],[-27.06,14.83,1],[-149.8,-59.42,1],[-106.55,-26.1,1],[73.44,-26.09,1],[-171.42,77.45,1],[91.9,-12.4,1],[8.54,77.46,1],[-12.4,-1.85,1],[88.11,12.41,1],[12.41,1.86,1],[-88.1,-12.41,1],[167.6,-1.86,1],[-91.89,12.4,1],[-167.59,1.84,1],[171.43,-77.46,1],[-8.52,-77.45,1],[-122.73,-10.44,1],[-167.65,-32.13,1],[57.27,-10.43,1],[-108.8,-55.83,1],[-12.35,32.13,1],[108.83,55.83,1],[12.36,-32.12,1],[71.19,-55.82,1],[167.66,32.12,1],[-71.19,55.82,1],[122.74,10.44,1],[-57.27,10.44,1],[-135.84,-23.05,1],[-148.58,-41.32,1],[44.16,-23.04,1],[-120.66,-39.88,1],[-31.41,41.31,1],[120.68,39.87,1],[31.42,-41.3,1],[59.33,-39.86,1],[148.6,41.31,1],[-59.33,39.87,1],[135.85,23.05,1],[-44.16,23.05,1],[-161.55,20.62,1],[130.04,-62.6,1],[18.45,20.64,1],[-68.35,-17.23,1],[49.96,62.61,1],[68.36,17.23,1],[-49.93,-62.6,1],[111.65,-17.22,1],[-130.05,62.59,1],[-111.64,17.22,1],[161.56,-20.63,1],[-18.44,-20.62,1],[-105.23,-3.38,1],[-176.5,-15.21,1],[74.77,-3.37,1],[-102.64,-74.41,1],[-3.5,15.21,1],[102.69,74.41,1],[3.51,-15.2,1],[77.33,-74.4,1],[176.51,15.2,1],[-77.36,74.4,1],[105.24,3.38,1],[-74.76,3.37,1],[-142.39,25.42,1],[142.08,-45.69,1],[37.61,25.43,1],[-59.02,-33.44,1],[37.92,45.69,1],[59.04,33.45,1],[-37.91,-45.68,1],[120.97,-33.44,1],[-142.07,45.68,1],[-120.96,33.44,1],[142.4,-25.43,1],[-37.6,-25.42,1]],[[-30.6,6.94,1],[166.56,58.69,1],[149.4,6.96,1],[81.95,-30.36,1],[13.48,-58.69,1],[-81.93,30.36,1],[-13.46,58.68,1],[-98.06,-30.37,1],[-166.54,-58.68,1],[98.07,30.37,1],[30.62,-6.95,1],[-149.38,-6.95,1],[106.69,-22.68,1],[-23.57,-15.36,1],[-73.31,-22.69,1],[-145.5,62.1,1],[-156.41,15.36,1],[145.53,-62.1,1],[156.43,-15.35,1],[34.47,62.11,1],[23.58,15.36,1],[-34.46,-62.11,1],[-106.67,22.68,1],[73.33,22.69,1],[166.82,1.39,1],[6.09,-76.74,1],[-13.19,1.38,1],[-88.57,13.18,1],[173.99,76.74,1],[88.59,-13.18,1],[-173.97,-76.73,1],[91.43,13.2,1],[-6.07,76.73,1],[-91.42,-13.2,1],[-166.8,-1.38,1],[13.2,-1.39,1],[-74.67,48.11,1],[130.86,10.16,1],[105.32,48.13,1],[13.34,-40.08,1],[49.16,-10.15,1],[-13.32,40.07,1],[-49.14,10.15,1],[-166.67,-40.08,1],[-130.84,-10.16,1],[166.69,40.08,1],[74.7,-48.11,1],[-105.31,-48.13,1],[-126.99,26.55,1],[147.96,-32.57,1],[53,26.56,1],[-50.28,-45.59,1],[32.05,32.58,1],[50.3,45.59,1],[-32.03,-32.58,1],[129.71,-45.58,1],[-147.94,32.57,1],[-129.69,45.58,1],[127.02,-26.55,1],[-52.98,-26.56,1],[-171.93,30.37,1],[103.47,-58.68,1],[8.07,30.36,1],[-59.38,-6.96,1],[76.54,58.69,1],[59.4,6.95,1],[-76.53,-58.69,1],[120.62,-6.94,1],[-103.44,58.68,1],[-120.6,6.95,1],[171.94,-30.36,1],[-8.05,-30.37,1],[40.86,10.16,1],[15.32,48.12,1],[-139.14,10.16,1],[76.68,40.09,1],[164.69,-48.12,1],[-76.67,-40.09,1],[-164.67,48.12,1],[-103.31,40.07,1],[-15.3,-48.13,1],[103.34,-40.07,1],[-40.84,-10.16,1],[139.16,-10.15,1],[103.2,-1.38,1],[-1.41,-13.19,1],[-76.8,-1.39,1],[-96.02,76.73,1],[-178.57,13.19,1],[96.07,-76.73,1],[178.58,-13.19,1],[83.94,76.74,1],[1.43,13.19,1],[-83.95,-76.74,1],[-103.18,1.38,1],[76.81,1.39,1],[37.02,-26.56,1],[-39.7,45.58,1],[-142.99,-26.56,1],[122.05,32.58,1],[-140.29,-45.59,1],[-122.04,-32.58,1],[140.31,45.59,1],[-57.95,32.57,1],[39.72,-45.58,1],[57.97,-32.57,1],[-37,26.55,1],[143,26.56,1],[163.33,22.69,1],[55.55,-62.1,1],[-16.67,22.68,1],[-66.41,15.35,1],[124.49,62.11,1],[66.43,-15.35,1],[-124.48,-62.11,1],[113.58,15.36,1],[-55.52,62.1,1],[-113.57,-15.36,1],[-163.31,-22.68,1],[16.69,-22.69,1]],[[-10.57,-17.35,1],[-120.42,69.76,1],[169.43,-17.35,1],[107.63,-10.08,1],[-59.57,-69.78,1],[-107.63,10.08,1],[59.57,69.78,1],[-72.37,-10.09,1],[120.42,-69.76,1],[72.37,10.09,1],[10.57,17.35,1],[-169.43,17.35,1],[-30.77,68.25,1],[101.53,18.57,1],[149.25,68.26,1],[18.92,-10.92,1],[78.47,-18.56,1],[-18.92,10.92,1],[-78.47,18.56,1],[-161.09,-10.92,1],[-101.53,-18.56,1],[161.09,10.92,1],[30.78,-68.26,1],[-149.26,-68.26,1],[56.46,41.26,1],[46.46,24.54,1],[-123.53,41.26,1],[32.19,38.8,1],[133.53,-24.53,1],[-32.19,-38.8,1],[-133.53,24.53,1],[-147.8,38.8,1],[-46.46,-24.54,1],[147.8,-38.8,1],[-56.46,-41.27,1],[123.53,-41.26,1],[84.74,27.31,1],[27.41,4.68,1],[-95.26,27.3,1],[10.06,62.23,1],[152.59,-4.67,1],[-10.06,-62.23,1],[-152.59,4.67,1],[-169.92,62.23,1],[-27.4,-4.68,1],[169.92,-62.22,1],[-84.74,-27.31,1],[95.26,-27.3,1],[136.27,-.73,1],[-1.05,-46.27,1],[-43.73,-.74,1],[-91.01,43.72,1],[-178.94,46.27,1],[91.01,-43.72,1],[178.94,-46.27,1],[88.99,43.73,1],[1.05,46.27,1],[-88.99,-43.73,1],[-136.27,.73,1],[43.73,.73,1],[55.23,10.82,1],[13.09,34.07,1],[-124.77,10.81,1],[71.48,53.8,1],[166.91,-34.06,1],[-71.48,-53.8,1],[-166.9,34.06,1],[-108.52,53.79,1],[-13.09,-34.06,1],[108.52,-53.79,1],[-55.23,-10.82,1],[124.77,-10.81,1],[-105.49,-68.13,1],[-111.15,-5.71,1],[74.52,-68.12,1],[-173.89,-21.04,1],[-68.85,5.7,1],[173.89,21.04,1],[68.85,-5.7,1],[6.12,-21.04,1],[111.15,5.71,1],[-6.12,21.04,1],[105.49,68.13,1],[-74.52,68.12,1],[35.28,-15.18,1],[-25.17,51.98,1],[-144.72,-15.19,1],[108.39,33.88,1],[-154.84,-51.99,1],[-108.39,-33.88,1],[154.84,51.99,1],[-71.61,33.87,1],[25.17,-51.98,1],[71.61,-33.87,1],[-35.28,15.18,1],[144.72,15.19,1],[-125.28,-28.56,1],[-146.32,-30.49,1],[54.72,-28.55,1],[-133.29,-45.82,1],[-33.69,30.48,1],[133.3,45.82,1],[33.68,-30.48,1],[46.71,-45.81,1],[146.32,30.49,1],[-46.71,45.81,1],[125.28,28.56,1],[-54.72,28.54,1],[-144.4,54.71,1],[112.38,-28.01,1],[35.58,54.72,1],[-29.92,-19.65,1],[67.62,28.02,1],[29.92,19.65,1],[-67.62,-28.02,1],[150.08,-19.64,1],[-112.38,28.01,1],[-150.08,19.64,1],[144.4,-54.71,1],[-35.58,-54.72,1],[68.53,-52.85,1],[-54.82,12.76,1],[-111.46,-52.87,1],[164.51,34.19,1],[-125.18,-12.77,1],[-164.51,-34.19,1],[125.18,12.77,1],[-15.5,34.19,1],[54.82,-12.76,1],[15.49,-34.19,1],[-68.53,52.85,1],[111.47,52.86,1],[91.48,-7.37,1],[-7.38,-1.47,1],[-88.52,-7.38,1],[-168.69,82.47,1],[-172.62,1.47,1],[168.69,-82.47,1],[172.62,-1.46,1],[11.22,82.48,1],[7.38,1.47,1],[-11.21,-82.48,1],[-91.48,7.37,1],[88.52,7.38,1]],[[-110.97,-81.34,1],[-98.09,-3.09,1],[69.03,-81.34,1],[-176.88,-8.08,1],[-81.91,3.09,1],[176.88,8.08,1],[81.91,-3.09,1],[3.12,-8.08,1],[98.09,3.09,1],[-3.12,8.08,1],[110.97,81.34,1],[-69.03,81.34,1],[145.76,30.52,1],[46.33,-45.41,1],[-34.24,30.52,1],[-54.51,28.99,1],[133.67,45.41,1],[54.51,-28.99,1],[-133.67,-45.41,1],[125.49,28.99,1],[-46.33,45.41,1],[-125.49,-28.99,1],[-145.76,-30.52,1],[34.24,-30.52,1],[159.58,41.4,1],[68.4,-44.67,1],[-20.42,41.4,1],[-46.75,15.18,1],[111.6,44.67,1],[46.75,-15.18,1],[-111.6,-44.67,1],[133.25,15.18,1],[-68.4,44.67,1],[-133.25,-15.18,1],[-159.58,-41.4,1],[20.42,-41.4,1],[85.43,-37.93,1],[-38.02,3.6,1],[-94.57,-37.93,1],[174.17,51.83,1],[-141.98,-3.6,1],[-174.17,-51.83,1],[141.98,3.6,1],[-5.83,51.83,1],[38.02,-3.6,1],[5.83,-51.83,1],[-85.43,37.93,1],[94.57,37.93,1],[21.18,27.17,1],[54.86,56.05,1],[-158.82,27.17,1],[61.17,18.75,1],[125.14,-56.05,1],[-61.17,-18.75,1],[-125.14,56.05,1],[-118.83,18.75,1],[-54.86,-56.05,1],[118.83,-18.75,1],[-21.18,-27.17,1],[158.82,-27.17,1],[104.66,-9.56,1],[-9.88,-14.45,1],[-75.34,-9.56,1],[-123.65,72.56,1],[-170.12,14.45,1],[123.65,-72.56,1],[170.12,-14.45,1],[56.35,72.56,1],[9.88,14.45,1],[-56.35,-72.56,1],[-104.66,9.56,1],[75.34,9.56,1],[25.94,-16.83,1],[-34.66,59.4,1],[-154.06,-16.83,1],[108.59,24.75,1],[-145.34,-59.41,1],[-108.59,-24.75,1],[145.34,59.41,1],[-71.41,24.75,1],[34.66,-59.41,1],[71.41,-24.75,1],[-25.94,16.83,1],[154.06,16.83,1],[-100.89,26.49,1],[153.1,-9.74,1],[79.11,26.49,1],[-20.77,-61.51,1],[26.9,9.74,1],[20.77,61.51,1],[-26.9,-9.74,1],[159.23,-61.51,1],[-153.1,9.74,1],[-159.23,61.51,1],[100.89,-26.49,1],[-79.11,-26.49,1],[44.31,12.28,1],[17.3,44.36,1],[-135.69,12.28,1],[73.08,43.05,1],[162.7,-44.36,1],[-73.08,-43.05,1],[-162.7,44.36,1],[-106.92,43.05,1],[-17.3,-44.36,1],[106.92,-43.05,1],[-44.31,-12.28,1],[135.69,-12.28,1],[-169.08,-24.53,1],[-112.54,-63.29,1],[10.92,-24.53,1],[-114.93,-9.92,1],[-67.46,63.28,1],[114.93,9.92,1],[67.46,-63.29,1],[65.07,-9.92,1],[112.54,63.29,1],[-65.07,9.92,1],[169.08,24.53,1],[-10.92,24.53,1],[93.2,-57.39,1],[-57.43,-1.73,1],[-86.8,-57.39,1],[-177.95,32.55,1],[-122.57,1.73,1],[177.95,-32.55,1],[122.57,-1.73,1],[2.05,32.55,1],[57.43,1.73,1],[-2.05,-32.55,1],[-93.2,57.39,1],[86.8,57.39,1],[-17.59,3.04,1],[170.04,72.16,1],[162.41,3.04,1],[86.81,-17.56,1],[9.96,-72.16,1],[-86.81,17.56,1],[-9.96,72.16,1],[-93.19,-17.56,1],[-170.04,-72.16,1],[93.19,17.56,1],[17.59,-3.04,1],[-162.41,-3.04,1],[39.38,44.26,1],[56.93,33.61,1],[-140.62,44.26,1],[38.42,27.03,1],[123.07,-33.61,1],[-38.42,-27.03,1],[-123.07,33.61,1],[-141.58,27.03,1],[-56.93,-33.61,1],[141.58,-27.03,1],[-39.38,-44.26,1],[140.62,-44.26,1]],[[165.52,26.52,1],[63.39,-60.04,1],[-14.48,26.52,1],[-62.74,12.93,1],[116.61,60.04,1],[62.74,-12.93,1],[-116.61,-60.04,1],[117.26,12.93,1],[-63.39,60.04,1],[-117.26,-12.93,1],[-165.52,-26.52,1],[14.48,-26.52,1],[-150.22,-21.62,1],[-141.41,-53.79,1],[29.78,-21.62,1],[-114.55,-27.5,1],[-38.59,53.79,1],[114.55,27.5,1],[38.59,-53.79,1],[65.45,-27.5,1],[141.41,53.79,1],[-65.45,27.5,1],[150.22,21.62,1],[-29.78,21.62,1],[-163.47,81.91,1],[92.31,-7.75,1],[16.53,81.91,1],[-7.76,-2.29,1],[87.69,7.75,1],[7.76,2.29,1],[-87.69,-7.75,1],[172.24,-2.29,1],[-92.31,7.75,1],[-172.24,2.29,1],[163.47,-81.91,1],[-16.53,-81.91,1],[-79.91,-73.49,1],[-106.27,2.85,1],[100.09,-73.49,1],[177.03,-16.24,1],[-73.73,-2.85,1],[-177.03,16.24,1],[73.73,2.85,1],[-2.97,-16.24,1],[106.27,-2.85,1],[2.97,16.24,1],[79.91,73.49,1],[-100.09,73.49,1],[-43.19,73.63,1],[101.37,11.86,1],[136.81,73.63,1],[12.09,-11.12,1],[78.63,-11.86,1],[-12.09,11.12,1],[-78.63,11.86,1],[-167.91,-11.12,1],[-101.37,-11.86,1],[167.91,11.12,1],[43.19,-73.63,1],[-136.81,-73.63,1],[109.86,-34.83,1],[-36.5,-16.19,1],[-70.14,-34.83,1],[-153.97,50.53,1],[-143.5,16.19,1],[153.97,-50.53,1],[143.5,-16.19,1],[26.03,50.53,1],[36.5,16.19,1],[-26.03,-50.53,1],[-109.86,34.83,1],[70.14,34.83,1],[-23.31,-6.54,1],[-163.84,65.83,1],[156.69,-6.54,1],[97.12,-23.15,1],[-16.16,-65.83,1],[-97.12,23.15,1],[16.16,65.83,1],[-82.88,-23.15,1],[163.84,-65.83,1],[82.88,23.15,1],[23.31,6.54,1],[-156.69,6.54,1],[-.87,-31.92,1],[-91.4,58.07,1],[179.13,-31.92,1],[121.93,-.74,1],[-88.6,-58.07,1],[-121.93,.74,1],[88.6,58.07,1],[-58.07,-.74,1],[91.4,-58.07,1],[58.07,.74,1],[.87,31.92,1],[-179.13,31.92,1],[163.12,43.35,1],[72.9,-44.1,1],[-16.88,43.35,1],[-45.39,12.19,1],[107.1,44.1,1],[45.39,-12.19,1],[-107.1,-44.1,1],[134.61,12.19,1],[-72.9,44.1,1],[-134.61,-12.19,1],[-163.12,-43.35,1],[16.88,-43.35,1],[-114.23,50.37,1],[127.06,-15.17,1],[65.77,50.37,1],[-18.77,-35.57,1],[52.94,15.17,1],[18.77,35.57,1],[-52.94,-15.17,1],[161.23,-35.57,1],[-127.06,15.17,1],[-161.23,35.57,1],[114.23,-50.37,1],[-65.77,-50.37,1],[54.17,30.16,1],[35.63,30.41,1],[-125.83,30.16,1],[45.21,44.51,1],[144.37,-30.41,1],[-45.21,-44.51,1],[-144.37,30.41,1],[-134.79,44.51,1],[-35.63,-30.41,1],[134.79,-44.51,1],[-54.17,-30.16,1],[125.83,-30.16,1],[126.2,41.73,1],[47.86,-26.15,1],[-53.8,41.73,1],[-33.51,37.03,1],[132.14,26.15,1],[33.51,-37.03,1],[-132.14,-26.15,1],[146.49,37.03,1],[-47.86,26.15,1],[-146.49,-37.03,1],[-126.2,-41.73,1],[53.8,-41.73,1],[-161.75,20.38,1],[130.12,-62.91,1],[18.25,20.38,1],[-68.63,-17.07,1],[49.88,62.91,1],[68.63,17.07,1],[-49.88,-62.91,1],[111.37,-17.07,1],[-130.12,62.91,1],[-111.37,17.07,1],[161.75,-20.38,1],[-18.25,-20.38,1],[2.71,48.49,1],[87.6,41.45,1],[-177.29,48.49,1],[41.48,1.8,1],[92.4,-41.45,1],[-41.48,-1.8,1],[-92.4,41.45,1],[-138.52,1.8,1],[-87.6,-41.45,1],[138.52,-1.8,1],[-2.71,-48.49,1],[177.29,-48.49,1],[-98.15,-27.54,1],[-152.22,-7.22,1],[81.85,-27.54,1],[-164.79,-61.37,1],[-27.78,7.22,1],[164.79,61.37,1],[27.78,-7.22,1],[15.21,-61.37,1],[152.22,7.22,1],[-15.21,61.37,1],[98.15,27.54,1],[-81.85,27.54,1]],[[-40.48,43.36,1],[124.51,33.58,1],[139.52,43.36,1],[38.85,-28.17,1],[55.49,-33.58,1],[-38.85,28.17,1],[-55.49,33.58,1],[-141.15,-28.17,1],[-124.51,-33.58,1],[141.15,28.17,1],[40.48,-43.36,1],[-139.52,-43.36,1],[56.01,17.18,1],[20.46,32.29,1],[-123.99,17.18,1],[61.05,52.38,1],[159.54,-32.29,1],[-61.05,-52.38,1],[-159.54,32.29,1],[-118.95,52.38,1],[-20.46,-32.29,1],[118.95,-52.38,1],[-56.01,-17.18,1],[123.99,-17.18,1],[-179.51,-8.95,1],[-93.08,-81.04,1],[.49,-8.95,1],[-98.95,-.48,1],[-86.92,81.04,1],[98.95,.48,1],[86.92,-81.04,1],[81.05,-.48,1],[93.08,81.04,1],[-81.05,.48,1],[179.51,8.95,1],[-.49,8.95,1],[12.04,-13.56,1],[-49.15,71.95,1],[-167.96,-13.56,1],[103.85,11.7,1],[-130.85,-71.95,1],[-103.85,-11.7,1],[130.85,71.95,1],[-76.15,11.7,1],[49.15,-71.95,1],[76.15,-11.7,1],[-12.04,13.56,1],[167.96,13.56,1],[-13.62,-58.2,1],[-98.3,30.8,1],[166.38,-58.2,1],[148.93,-7.13,1],[-81.7,-30.8,1],[-148.93,7.13,1],[81.7,30.8,1],[-31.07,-7.13,1],[98.3,-30.8,1],[31.07,7.13,1],[13.62,58.2,1],[-166.38,58.2,1],[65.26,-20.55,1],[-22.43,23.07,1],[-114.74,-20.55,1],[131.85,58.26,1],[-157.57,-23.07,1],[-131.85,-58.26,1],[157.57,23.07,1],[-48.15,58.26,1],[22.43,-23.07,1],[48.15,-58.26,1],[-65.26,20.55,1],[114.74,20.55,1],[-135.39,26.5,1],[144.63,-39.58,1],[44.61,26.5,1],[-55,-38.94,1],[35.37,39.58,1],[55,38.94,1],[-35.37,-39.58,1],[125,-38.94,1],[-144.63,39.58,1],[-125,38.94,1],[135.39,-26.5,1],[-44.61,-26.5,1],[114.95,-4.75,1],[-5.23,-24.86,1],[-65.05,-4.75,1],[-101.14,64.63,1],[-174.77,24.86,1],[101.14,-64.63,1],[174.77,-24.86,1],[78.86,64.63,1],[5.23,24.86,1],[-78.86,-64.63,1],[-114.95,4.75,1],[65.05,4.75,1],[35.85,52.64,1],[65.91,29.46,1],[-144.15,52.64,1],[31.75,20.82,1],[114.09,-29.46,1],[-31.75,-20.82,1],[-114.09,29.46,1],[-148.25,20.82,1],[-65.91,-29.46,1],[148.25,-20.82,1],[-35.85,-52.64,1],[144.15,-52.64,1],[86.45,11.52,1],[11.54,3.48,1],[-93.55,11.52,1],[16.9,77.95,1],[168.46,-3.48,1],[-16.9,-77.95,1],[-168.46,3.48,1],[-163.1,77.95,1],[-11.54,-3.48,1],[163.1,-77.95,1],[-86.45,-11.52,1],[93.55,-11.52,1],[135.24,4.02,1],[5.69,-45.1,1],[-44.76,4.02,1],[-84.35,44.62,1],[174.31,45.1,1],[84.35,-44.62,1],[-174.31,-45.1,1],[95.65,44.62,1],[-5.69,45.1,1],[-95.65,-44.62,1],[-135.24,-4.02,1],[44.76,-4.02,1],[-129.84,-18.16,1],[-156.86,-37.5,1],[50.16,-18.16,1],[-117.12,-46.85,1],[-23.14,37.5,1],[117.12,46.85,1],[23.14,-37.5,1],[62.88,-46.85,1],[156.86,37.5,1],[-62.88,46.85,1],[129.84,18.16,1],[-50.16,18.16,1],[-74.1,32.87,1],[146.1,13.3,1],[105.9,32.87,1],[22.97,-53.88,1],[33.9,-13.3,1],[-22.97,53.88,1],[-33.9,13.3,1],[-157.03,-53.88,1],[-146.1,-13.3,1],[157.03,53.88,1],[74.1,-32.87,1],[-105.9,-32.87,1],[-119.92,-5.64,1],[-173.5,-29.76,1],[60.08,-5.64,1],[-101.2,-59.6,1],[-6.5,29.76,1],[101.2,59.6,1],[6.5,-29.76,1],[78.8,-59.6,1],[173.5,29.76,1],[-78.8,59.6,1],[119.92,5.64,1],[-60.08,5.64,1],[73.14,16.13,1],[16.82,16.18,1],[-106.86,16.13,1],[45.09,66.83,1],[163.18,-16.18,1],[-45.09,-66.83,1],[-163.18,16.18,1],[-134.91,66.83,1],[-16.82,-16.18,1],[134.91,-66.83,1],[-73.14,-16.13,1],[106.86,-16.13,1],[-11.7,-43.38,1],[-102.11,45.38,1],[168.3,-43.38,1],[133.98,-8.47,1],[-77.89,-45.38,1],[-133.98,8.47,1],[77.89,45.38,1],[-46.02,-8.47,1],[102.11,-45.38,1],[46.02,8.47,1],[11.7,43.38,1],[-168.3,43.38,1],[-24.11,3.73,1],[170.94,65.63,1],[155.89,3.73,1],[85.92,-24.05,1],[9.06,-65.63,1],[-85.92,24.05,1],[-9.06,65.63,1],[-94.08,-24.05,1],[-170.94,-65.63,1],[94.08,24.05,1],[24.11,-3.73,1],[-155.89,-3.73,1]],[[104.6,-3.68,1],[-3.81,-14.57,1],[-75.4,-3.68,1],[-104.32,74.95,1],[-176.19,14.57,1],[104.32,-74.95,1],[176.19,-14.57,1],[75.68,74.95,1],[3.81,14.57,1],[-75.68,-74.95,1],[-104.6,3.68,1],[75.4,3.68,1],[153.77,-30.33,1],[-52.93,-50.74,1],[-26.23,-30.33,1],[-123.11,22.43,1],[-127.07,50.74,1],[123.11,-22.43,1],[127.07,-50.74,1],[56.89,22.43,1],[52.93,50.74,1],[-56.89,-22.43,1],[-153.77,30.33,1],[26.23,30.33,1],[35.99,-39.77,1],[-54.77,38.45,1],[-144.01,-39.77,1],[135.81,26.85,1],[-125.23,-38.45,1],[-135.81,-26.85,1],[125.23,38.45,1],[-44.19,26.85,1],[54.77,-38.45,1],[44.19,-26.85,1],[-35.99,39.77,1],[144.01,39.77,1],[71.82,-25.43,1],[-26.58,16.37,1],[-108.18,-25.43,1],[146.72,59.1,1],[-153.42,-16.37,1],[-146.72,-59.1,1],[153.42,16.37,1],[-33.28,59.1,1],[26.58,-16.37,1],[33.28,-59.1,1],[-71.82,25.43,1],[108.18,25.43,1],[-136.55,26.52,1],[144.03,-40.51,1],[43.45,26.52,1],[-55.5,-37.97,1],[35.97,40.51,1],[55.5,37.97,1],[-35.97,-40.51,1],[124.5,-37.97,1],[-144.03,40.51,1],[-124.5,37.97,1],[136.55,-26.52,1],[-43.45,-26.52,1],[-6.52,-1.08,1],[-170.58,83.4,1],[173.48,-1.08,1],[91.09,-6.52,1],[-9.42,-83.4,1],[-91.09,6.52,1],[9.42,83.4,1],[-88.91,-6.52,1],[170.58,-83.4,1],[88.91,6.52,1],[6.52,1.08,1],[-173.48,1.08,1],[-71.13,40.38,1],[138.05,14.26,1],[108.87,40.38,1],[20.82,-46.12,1],[41.95,-14.26,1],[-20.82,46.12,1],[-41.95,14.26,1],[-159.18,-46.12,1],[-138.05,-14.26,1],[159.18,46.12,1],[71.13,-40.38,1],[-108.87,-40.38,1],[-153.97,-27.97,1],[-129.57,-52.52,1],[26.03,-27.97,1],[-120.59,-22.81,1],[-50.43,52.52,1],[120.59,22.81,1],[50.43,-52.52,1],[59.41,-22.81,1],[129.57,52.52,1],[-59.41,22.81,1],[153.97,27.97,1],[-26.03,27.97,1],[-80.23,13.48,1],[166.33,9.49,1],[99.77,13.48,1],[35.29,-73.41,1],[13.67,-9.49,1],[-35.29,73.41,1],[-13.67,9.49,1],[-144.71,-73.41,1],[-166.33,-9.49,1],[144.71,73.41,1],[80.23,-13.48,1],[-99.77,-13.48,1],[55.43,-9,1],[-10.89,34.09,1],[-124.57,-9,1],[105.6,54.41,1],[-169.11,-34.09,1],[-105.6,-54.41,1],[169.11,34.09,1],[-74.4,54.41,1],[10.89,-34.09,1],[74.4,-54.41,1],[-55.43,9,1],[124.57,9,1],[68.32,-7.14,1],[-7.68,21.51,1],[-111.68,-7.14,1],[108.74,67.22,1],[-172.32,-21.51,1],[-108.74,-67.22,1],[172.32,21.51,1],[-71.26,67.22,1],[7.68,-21.51,1],[71.26,-67.22,1],[-68.32,7.14,1],[111.68,7.14,1],[-174.97,36.12,1],[96.85,-53.58,1],[5.03,36.12,1],[-53.77,-4.06,1],[83.15,53.58,1],[53.77,4.06,1],[-83.15,-53.58,1],[126.23,-4.06,1],[-96.85,53.58,1],[-126.23,4.06,1],[174.97,-36.12,1],[-5.03,-36.12,1],[-149.91,16.26,1],[149.81,-56.16,1],[30.09,16.26,1],[-71.37,-28.77,1],[30.19,56.16,1],[71.37,28.77,1],[-30.19,-56.16,1],[108.63,-28.77,1],[-149.81,56.16,1],[-108.63,28.77,1],[149.91,-16.26,1],[-30.09,-16.26,1],[2.52,-51.45,1],[-87.99,38.5,1],[-177.48,-51.45,1],[141.48,1.57,1],[-92.01,-38.5,1],[-141.48,-1.57,1],[92.01,38.5,1],[-38.52,1.57,1],[87.99,-38.5,1],[38.52,-1.57,1],[-2.52,51.45,1],[177.48,51.45,1],[161.12,-9.98,1],[-28.54,-68.73,1],[-18.88,-9.98,1],[-100.54,18.59,1],[-151.46,68.73,1],[100.54,-18.59,1],[151.46,-68.73,1],[79.46,18.59,1],[28.54,68.73,1],[-79.46,-18.59,1],[-161.12,9.98,1],[18.88,9.98,1],[12.84,24.97,1],[64.49,62.11,1],[-167.16,24.97,1],[64.47,11.62,1],[115.51,-62.11,1],[-64.47,-11.62,1],[-115.51,62.11,1],[-115.53,11.62,1],[-64.49,-62.11,1],[115.53,-11.62,1],[-12.84,-24.97,1],[167.16,-24.97,1],[74.13,41.65,1],[42.76,11.79,1],[-105.87,41.65,1],[17.09,45.95,1],[137.24,-11.79,1],[-17.09,-45.95,1],[-137.24,11.79,1],[-162.91,45.95,1],[-42.76,-11.79,1],[162.91,-45.95,1],[-74.13,-41.65,1],[105.87,-41.65,1],[154.04,1.27,1],[2.9,-64.01,1],[-25.96,1.27,1],[-88.59,25.96,1],[177.1,64.01,1],[88.59,-25.96,1],[-177.1,-64.01,1],[91.41,25.96,1],[-2.9,64.01,1],[-91.41,-25.96,1],[-154.04,-1.27,1],[25.96,-1.27,1]],[[24.8,-10.46,1],[-23.76,63.21,1],[-155.2,-10.46,1],[101.5,24.36,1],[-156.24,-63.21,1],[-101.5,-24.36,1],[156.24,63.21,1],[-78.5,24.36,1],[23.76,-63.21,1],[78.5,-24.36,1],[-24.8,10.46,1],[155.2,10.46,1],[-134.64,65.44,1],[108.01,-16.98,1],[45.36,65.44,1],[-17.8,-17.2,1],[71.99,16.98,1],[17.8,17.2,1],[-71.99,-16.98,1],[162.2,-17.2,1],[-108.01,16.98,1],[-162.2,17.2,1],[134.64,-65.44,1],[-45.36,-65.44,1],[177.6,54.85,1],[88.31,-35.12,1],[-2.4,54.85,1],[-35.13,1.38,1],[91.69,35.12,1],[35.13,-1.38,1],[-91.69,-35.12,1],[144.87,1.38,1],[-88.31,35.12,1],[-144.87,-1.38,1],[-177.6,-54.85,1],[2.4,-54.85,1],[157.93,82.01,1],[86.98,-7.4,1],[-22.07,82.01,1],[-7.41,2.99,1],[93.02,7.4,1],[7.41,-2.99,1],[-93.02,-7.4,1],[172.59,2.99,1],[-86.98,7.4,1],[-172.59,-2.99,1],[-157.93,-82.01,1],[22.07,-82.01,1],[42.48,-13.21,1],[-19.17,45.89,1],[-137.52,-13.21,1],[107.66,41.11,1],[-160.83,-45.89,1],[-107.66,-41.11,1],[160.83,45.89,1],[-72.34,41.11,1],[19.17,-45.89,1],[72.34,-41.11,1],[-42.48,13.21,1],[137.52,13.21,1],[28.48,10.9,1],[21.99,59.68,1],[-151.52,10.9,1],[77.65,27.92,1],[158.01,-59.68,1],[-77.65,-27.92,1],[-158.01,59.68,1],[-102.35,27.92,1],[-21.99,-59.68,1],[102.35,-27.92,1],[-28.48,-10.9,1],[151.52,-10.9,1],[-33.79,21.61,1],[144.53,50.59,1],[146.21,21.61,1],[64.51,-31.14,1],[35.47,-50.59,1],[-64.51,31.14,1],[-35.47,50.59,1],[-115.49,-31.14,1],[-144.53,-50.59,1],[115.49,31.14,1],[33.79,-21.61,1],[-146.21,-21.61,1],[-175.53,-31.74,1],[-97.19,-57.98,1],[4.47,-31.74,1],[-121.82,-3.8,1],[-82.81,57.98,1],[121.82,3.8,1],[82.81,-57.98,1],[58.18,-3.8,1],[97.19,57.98,1],[-58.18,3.8,1],[175.53,31.74,1],[-4.47,31.74,1],[89.4,19.43,1],[19.43,.56,1],[-90.6,19.43,1],[1.69,70.56,1],[160.57,-.56,1],[-1.69,-70.56,1],[-160.57,.56,1],[-178.31,70.56,1],[-19.43,-.56,1],[178.31,-70.56,1],[-89.4,-19.43,1],[90.6,-19.43,1],[-27.28,-27.88,1],[-130.91,51.78,1],[152.72,-27.88,1],[120.76,-23.9,1],[-49.09,-51.78,1],[-120.76,23.9,1],[49.09,51.78,1],[-59.24,-23.9,1],[130.91,-51.78,1],[59.24,23.9,1],[27.28,27.88,1],[-152.72,27.88,1],[139.9,-15.44,1],[-23.21,-47.5,1],[-40.1,-15.44,1],[-109.85,38.38,1],[-156.79,47.5,1],[109.85,-38.38,1],[156.79,-47.5,1],[70.15,38.38,1],[23.21,47.5,1],[-70.15,-38.38,1],[-139.9,15.44,1],[40.1,15.44,1],[-2.17,-43.33,1],[-92.29,46.62,1],[177.83,-43.33,1],[133.35,-1.58,1],[-87.71,-46.62,1],[-133.35,1.58,1],[87.71,46.62,1],[-46.65,-1.58,1],[92.29,-46.62,1],[46.65,1.58,1],[2.17,43.33,1],[-177.83,43.33,1],[41.12,27.96,1],[38.91,41.71,1],[-138.88,27.96,1],[54.83,35.51,1],[141.09,-41.71,1],[-54.83,-35.51,1],[-141.09,41.71,1],[-125.17,35.51,1],[-38.91,-41.71,1],[125.17,-35.51,1],[-41.12,-27.96,1],[138.88,-27.96,1],[-126.67,13.75,1],[163.04,-35.46,1],[53.33,13.75,1],[-67.73,-51.18,1],[16.96,35.46,1],[67.73,51.18,1],[-16.96,-35.46,1],[112.27,-51.18,1],[-163.04,35.46,1],[-112.27,51.18,1],[126.67,-13.75,1],[-53.33,-13.75,1],[6.02,-15.42,1],[-69.18,73.47,1],[-173.98,-15.42,1],[105.51,5.8,1],[-110.82,-73.47,1],[-105.51,-5.8,1],[110.82,73.47,1],[-74.49,5.8,1],[69.18,-73.47,1],[74.49,-5.8,1],[-6.02,15.42,1],[173.98,15.42,1],[160.08,33.45,1],[62.71,-51.67,1],[-19.92,33.45,1],[-54.9,16.52,1],[117.29,51.67,1],[54.9,-16.52,1],[-117.29,-51.67,1],[125.1,16.52,1],[-62.71,51.67,1],[-125.1,-16.52,1],[-160.08,-33.45,1],[19.92,-33.45,1],[80.34,6.51,1],[6.61,9.59,1],[-99.66,6.51,1],[55.76,78.37,1],[173.39,-9.59,1],[-55.76,-78.37,1],[-173.39,9.59,1],[-124.24,78.37,1],[-6.61,-9.59,1],[124.24,-78.37,1],[-80.34,-6.51,1],[99.66,-6.51,1],[6.25,24.64,1],[76.64,64.63,1],[-173.75,24.64,1],[65.23,5.68,1],[103.36,-64.63,1],[-65.23,-5.68,1],[-103.36,64.63,1],[-114.77,5.68,1],[-76.64,-64.63,1],[114.77,-5.68,1],[-6.25,-24.64,1],[173.75,-24.64,1],[51.41,-63.45,1],[-68.67,16.19,1],[-128.59,-63.45,1],[162.69,20.45,1],[-111.33,-16.19,1],[-162.69,-20.45,1],[111.33,16.19,1],[-17.31,20.45,1],[68.67,-16.19,1],[17.31,-20.45,1],[-51.41,63.45,1],[128.59,63.45,1],[-50.6,28.85,1],[144.51,33.77,1],[129.4,28.85,1],[49.04,-42.6,1],[35.49,-33.77,1],[-49.04,42.6,1],[-35.49,33.77,1],[-130.96,-42.6,1],[-144.51,-33.77,1],[130.96,42.6,1],[50.6,-28.85,1],[-129.4,-28.85,1]]][e-1]}e.exports.getAmbisonicDecMtx=u,e.exports.getTdesign=h,e.exports.deg2rad=o,e.exports.rad2deg=s,e.exports.createNearestLookup=c,e.exports.findNearest=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(5)),i=u(n(7)),a=u(n(1)),o=u(n(19)),s=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){e=e||{};var t=this.context,n=(0,r.default)(t).getInstance(),a=e.dashMetrics,u=e.fragmentLoader,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0;function p(e){var t;return!!e&&(t=!1,h.some((function(n){if(r=e,i=n,!isNaN(r.index)&&r.startTime===i.startTime&&r.adaptationIndex===i.adaptationIndex&&r.type===i.type||function(e,t){return isNaN(e.index)&&isNaN(t.index)&&e.quality===t.quality}(e,n)||function(e,t){return e.action===o.default.ACTION_COMPLETE&&e.action===t.action}(e,n))return t=!0;var r,i})),t)}function g(e){return isNaN(e.duration)?.25:Math.min(e.duration/8,.5)}function m(e){h=h.filter((function(t){var n=g(t);return isNaN(t.startTime)||void 0!==e&&t.startTime>=e-n}))}function v(e,t){t<=e+.5||(h=h.filter((function(n){var r=g(n);return isNaN(n.startTime)||n.startTime>=t-r||isNaN(n.duration)||n.startTime+n.duration<=e+r})))}function y(e,t,n){for(var r=e.length-1;r>=0;r--){var i=e[r],a=i.startTime,o=a+i.duration;if(n=isNaN(n)?g(i):n,!isNaN(a)&&!isNaN(o)&&t+n>=a&&t-n<o||isNaN(a)&&isNaN(t))return i}return null}function _(e,t){a.addSchedulingInfo(e,t),a.addRequestsQueue(e.mediaType,f,h)}function T(e){e.sender===u&&(f.splice(f.indexOf(e.request),1),e.response&&!e.error&&h.push(e.request),_(e.request,e.error?"failed":"executed"),n.trigger(i.default.FRAGMENT_LOADING_COMPLETED,{request:e.request,response:e.response,error:e.error,sender:this}))}function E(e){e.sender===u&&n.trigger(i.default.FRAGMENT_LOADING_PROGRESS,{request:e.request,response:e.response,error:e.error,sender:this})}function M(e){e.sender===u&&n.trigger(i.default.FRAGMENT_LOADING_ABANDONED,{streamProcessor:this.getStreamProcessor(),request:e.request,mediaType:e.mediaType})}function b(){h=[],f=[]}return l={setStreamProcessor:function(e){d=e},getStreamProcessor:function(){return d},getRequests:function(e){var t=e?e.state instanceof Array?e.state:[e.state]:[],n=[];return t.forEach((function(t){var r=function(e){var t=void 0;switch(e){case"loading":t=f;break;case"executed":t=h;break;default:t=[]}return t}(t);n=n.concat(function(e,t){if(t.hasOwnProperty("time"))return[y(e,t.time,t.threshold)];return e.filter((function(e){for(var n in t)if("state"!==n&&t.hasOwnProperty(n)&&e[n]!=t[n])return!1;return!0}))}(r,e))})),n},isFragmentLoaded:p,isFragmentLoadedOrPending:function(e){var t=!1,n=0,r=void 0;if(!(t=p(e)))for(n=0;n<f.length;n++)r=f[n],e.url===r.url&&e.startTime===r.startTime&&(t=!0);return t},removeExecutedRequestsBeforeTime:m,removeExecutedRequestsAfterTime:function(e){h=h.filter((function(t){return isNaN(t.startTime)||void 0!==e&&t.startTime<e}))},syncExecutedRequestsWithBufferedRange:function(e,t){if(e&&0!==e.length){for(var n=0,r=0,i=e.length;r<i;r++)v(n,e.start(r)),n=e.end(r);t>0&&v(n,t)}else m()},abortRequests:function(){u.abort(),f=[]},executeRequest:function(e){switch(e.action){case o.default.ACTION_COMPLETE:h.push(e),_(e,"executed"),c.debug("executeRequest trigger STREAM_COMPLETED"),n.trigger(i.default.STREAM_COMPLETED,{request:e,fragmentModel:this});break;case o.default.ACTION_DOWNLOAD:_(e,"loading"),f.push(e),function(e){n.trigger(i.default.FRAGMENT_LOADING_STARTED,{sender:l,request:e}),u.load(e)}(e);break;default:c.warn("Unknown request action.")}},reset:function(){n.off(i.default.LOADING_COMPLETED,T,this),n.off(i.default.LOADING_DATA_PROGRESS,E,this),n.off(i.default.LOADING_ABANDONED,M,this),u&&u.reset(),b()},addExecutedRequest:function(e){h.push(e)}},c=(0,s.default)(t).getInstance().getLogger(l),b(),n.on(i.default.LOADING_COMPLETED,T,l),n.on(i.default.LOADING_DATA_PROGRESS,E,l),n.on(i.default.LOADING_ABANDONED,M,l),l}l.__dashjs_factory_name="FragmentModel";var c=a.default.getClassFactory(l);c.FRAGMENT_MODEL_LOADING="loading",c.FRAGMENT_MODEL_EXECUTED="executed",c.FRAGMENT_MODEL_CANCELED="canceled",c.FRAGMENT_MODEL_FAILED="failed",a.default.updateClassFactory(l.__dashjs_factory_name,c),t.default=c},function(e,t,n){!function(e){e.ns_tt="http://www.w3.org/ns/ttml",e.ns_tts="http://www.w3.org/ns/ttml#styling",e.ns_ttp="http://www.w3.org/ns/ttml#parameter",e.ns_xml="http://www.w3.org/XML/1998/namespace",e.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",e.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",e.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",e.ns_ebutts="urn:ebu:tt:style"}(t)},function(e,t,n){!function(e){var t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,i={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};e.parseColor=function(e){var a,o=null,s=i[e.toLowerCase()];return void 0!==s?o=s:null!==(a=t.exec(e))?o=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16),void 0!==a[4]?parseInt(a[4],16):255]:null!==(a=n.exec(e))?o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),255]:null!==(a=r.exec(e))&&(o=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3]),parseInt(a[4])]),o};var a=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;e.parseLength=function(e){var t,n=null;return null!==(t=a.exec(e))&&(n={value:parseFloat(t[1]),unit:t[2]}),n},e.parseTextShadow=function(t){var n=t.split(","),r=[];for(var i in n){var a=n[i].split(" ");if(1===a.length&&"none"===a[0])return"none";if(a.length>1&&a.length<5){var o=[null,null,null,null],s=e.parseLength(a.shift());if(null===s)return null;if(o[0]=s,null===(s=e.parseLength(a.shift())))return null;if(o[1]=s,0===a.length){r.push(o);continue}if(null!==(s=e.parseLength(a[0]))&&(o[2]=s,a.shift()),0===a.length){r.push(o);continue}var u=e.parseColor(a[0]);if(null===u)return null;o[3]=u,r.push(o)}}return r},e.parsePosition=function(t){var n=t.split(" "),r=function(e){return"center"===e||"left"===e||"top"===e||"bottom"===e||"right"===e};if(n.length>4)return null;for(var i in n)if(!r(n[i])){var a=e.parseLength(n[i]);if(null===a)return null;n[i]=a}for(var o={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},s=0;s<n.length;){var u=n[s++];if(r(u)){var l={value:0,unit:"%"};2!==n.length&&s<n.length&&!r(n[s])&&(l=n[s++]),"right"===u?(o.h.edge=u,o.h.offset=l):"bottom"===u?(o.v.edge=u,o.v.offset=l):"left"===u?o.h.offset=l:"top"===u&&(o.v.offset=l)}else{if(1!==n.length&&2!==n.length)return null;1===s?o.h.offset=u:o.v.offset=u}}return o},e.ComputedLength=function(e,t){this.rw=e,this.rh=t},e.ComputedLength.prototype.toUsedLength=function(e,t){return e*this.rw+t*this.rh},e.ComputedLength.prototype.isZero=function(){return 0===this.rw&&0===this.rh},e.toComputedLength=function(t,n,r,i,a,o){return"%"===n&&i?new e.ComputedLength(i.rw*t/100,i.rh*t/100):"em"===n&&r?new e.ComputedLength(r.rw*t,r.rh*t):"c"===n&&a?new e.ComputedLength(t*a.rw,t*a.rh):"px"===n&&o?new e.ComputedLength(t*o.rw,t*o.rh):"rh"===n?new e.ComputedLength(0,t/100):"rw"===n?new e.ComputedLength(t/100,0):null}}(t)},function(e,t){var n,r,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,l=[],c=!1,d=-1;function h(){c&&u&&(c=!1,u.length?l=u.concat(l):d=-1,l.length&&f())}function f(){if(!c){var e=s(h);c=!0;for(var t=l.length;t;){for(u=l,l=[];++d<t;)u&&u[d].run();d=-1,t=l.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||c||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,n,r,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,r)}));case 4:return t.nextTick((function(){e.call(null,n,r,i)}));default:for(a=new Array(s-1),o=0;o<a.length;)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,n(36))},function(e,t,n){var r=n(51),i=r.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(a(r,t),t.Buffer=o),a(i,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){return{modifyRequestURL:function(e){return e},modifyRequestHeader:function(e){return e}}}o.__dashjs_factory_name="RequestModifier",t.default=a.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._test=t,this._converter=n}return r(e,[{key:"test",get:function(){return this._test}},{key:"converter",get:function(){return this._converter}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(32);var a=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",e.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(25)),i=f(n(265)),a=f(n(266)),o=f(n(267)),s=f(n(268)),u=f(n(269)),l=f(n(270)),c=f(n(271)),d=f(n(272)),h=f(n(21));function f(e){return e&&e.__esModule?e:{default:e}}function p(){var e=this.context,t=void 0,n=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return t={initialize:function(){p=[];var t=void 0;t=(0,s.default)(e).getInstance({BASE64:g}),p.push(t),t=(0,o.default)(e).getInstance({BASE64:g}),p.push(t),t=(0,i.default)(e).getInstance({BASE64:g}),p.push(t),m=t,t=(0,a.default)(e).getInstance({BASE64:g,debug:n}),p.push(t),v=t},setProtectionData:function(e){for(var t,n,r=0;r<p.length;r++){var i=p[r];i.hasOwnProperty("init")&&i.init((t=i.systemString,n=void 0,n=null,e&&(n=t in e?e[t]:null),n))}},isClearKey:function(e){return e===m||e===v},initDataEquals:function(e,t){if(e.byteLength===t.byteLength){for(var n=new Uint8Array(e),r=new Uint8Array(t),i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}return!1},getKeySystems:function(){return p},setKeySystems:function(e){p=e},getKeySystemBySystemString:function(e){for(var t=0;t<p.length;t++)if(p[t].systemString===e)return p[t];return null},getSupportedKeySystemsFromContentProtection:function(e){var t=void 0,n=void 0,r=void 0,i=void 0,a=[];if(e)for(r=0;r<p.length;++r)for(n=p[r],i=0;i<e.length;++i)if((t=e[i]).schemeIdUri.toLowerCase()===n.schemeIdURI){var o=n.getInitData(t);a.push({ks:p[r],initData:o,cdmData:n.getCDMData(),sessionId:n.getSessionId(t)})}return a},getSupportedKeySystems:function(e,t){for(var n=[],i=r.default.parsePSSHList(e),a=void 0,o=void 0,s=void 0,u=0;u<p.length;++u)o=(a=p[u]).systemString,s=!t||o in t,a.uuid in i&&s&&n.push({ks:a,initData:i[a.uuid],cdmData:a.getCDMData(),sessionId:a.getSessionId()});return n},getLicenseServer:function(t,n,r){if("license-release"===r||"individualization-request"===r)return null;var i=null;return n&&n.hasOwnProperty("drmtoday")?i=(0,u.default)(e).getInstance({BASE64:g}):t.systemString===h.default.WIDEVINE_KEYSTEM_STRING?i=(0,c.default)(e).getInstance():t.systemString===h.default.PLAYREADY_KEYSTEM_STRING?i=(0,l.default)(e).getInstance():t.systemString===h.default.CLEARKEY_KEYSTEM_STRING&&(i=(0,d.default)(e).getInstance()),i},processClearKeyLicenseRequest:function(e,t,n){try{return e.getClearKeysFromProtectionData(t,n)}catch(e){return f.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(e){e&&(e.debug&&(n=e.debug,f=n.getLogger(t)),e.BASE64&&(g=e.BASE64))}}}p.__dashjs_factory_name="ProtectionKeyController",t.default=dashjs.FactoryMaker.getSingletonFactory(p)},function(e,t,n){e.exports=!n(114)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),a=n(2),o=n.n(a),s=n(117),u=n.n(s),l=n(3),c=n.n(l),d=n(72),h=n.n(d),f=n(73),p=n.n(f),g=n(74),m=n.n(g);
/*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */
function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var _=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t,n,r,i=this.listeners[e];if(i)if(2===arguments.length)for(n=i.length,t=0;t<n;++t)i[t].call(this,arguments[1]);else for(r=Array.prototype.slice.call(arguments,1),n=i.length,t=0;t<n;++t)i[t].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),T=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return y(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(_),E=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r={},i=n.length;i--;)""!==n[i]&&((t=/([^=]*)=(.*)/.exec(n[i]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),r[t[0]]=t[1]);return r},M=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}y(t,e);var n=t.prototype;return n.push=function(e){var t,n,r=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var r=n(e);return r===e?t:t.concat([r])}),[e]).forEach((function(e){for(var i=0;i<r.customParsers.length;i++)if(r.customParsers[i].call(r,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))r.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void r.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"totalduration"},t[1]&&(n.duration=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void r.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void r.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"byterange"},t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),void r.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=E(t[1]);if(a.URI&&(n.uri=a.URI),a.BYTERANGE){var o=a.BYTERANGE.split("@"),s=o[0],u=o[1];n.byterange={},s&&(n.byterange.length=parseInt(s,10)),u&&(n.byterange.offset=parseInt(u,10))}}r.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=E(t[1]),n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION.split("x"),c={};l[0]&&(c.width=parseInt(l[0],10)),l[1]&&(c.height=parseInt(l[1],10)),n.attributes.RESOLUTION=c}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}r.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=E(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))r.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))r.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void r.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=E(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void r.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=E(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void r.trigger("data",n);r.trigger("data",{type:"tag",data:e.slice(4)})}}}else r.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,r=e.customType,i=e.dataParser,a=e.segment;"function"!=typeof i&&(i=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:i(e),customType:r,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(_);function b(e){for(var t=i.a.atob(e||""),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}var A=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new T,t.parseStream=new M,t.lineStream.pipe(t.parseStream);var n,r,i=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t),a=[],o={},s=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},l=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",(function(e){var t,c;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(this.trigger("info",{message:"defaulting offset to zero"}),e.offset=0)),"offset"in e&&(o.byterange=t,t.offset=e.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?void(this.manifest.contentProtection={"com.widevine.alpha":{attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:b(e.attributes.URI.split(",")[1])}}):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),r={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(r.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else r=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,l=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes?(o.attributes||(o.attributes={}),v(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||u,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(c={default:/yes/i.test(e.attributes.DEFAULT)}).default?c.autoselect=!0:c.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(c.language=e.attributes.LANGUAGE),e.attributes.URI&&(c.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(c.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(c.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(c.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=c}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){l+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):this.manifest.targetDuration=e.duration},totalduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid total duration: "+e.duration}):this.manifest.totalDuration=e.duration},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data}}[e.tagType]||s).call(i)},uri:function(){o.uri=e.uri,a.push(o),!this.manifest.targetDuration||"duration"in o||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),r&&(o.key=r),o.timeline=l,n&&(o.map=n),o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(i)})),t}y(t,e);var n=t.prototype;return n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(_),w=n(45),S=n(71),x=n.n(S),D=n(22),I=n.n(D),C=n(118),N=n.n(C),L=n(119),O=n.n(L);var R=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),P=null,k=function(){function e(t){R(this,e),P||(P=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],a=void 0,o=void 0,s=void 0,u=[],l=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=c||1,s=l[s]||1)for(h=(h=s^s<<1^s<<2^s<<3^s<<4)>>8^255&h^99,r[o]=h,i[h]=o,p=16843009*u[d=u[c=u[o]]]^65537*d^257*c^16843008*o,f=257*u[h]^16843008*h,a=0;a<4;a++)t[a][o]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}()),this._tables=[[P[0][0].slice(),P[0][1].slice(),P[0][2].slice(),P[0][3].slice(),P[0][4].slice()],[P[1][0].slice(),P[1][1].slice(),P[1][2].slice(),P[1][3].slice(),P[1][4].slice()]];var n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=this._tables[0][4],u=this._tables[1],l=t.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(a=t.slice(0),o=[],this._key=[a,o],n=l;n<4*l+28;n++)i=a[n-1],(n%l==0||8===l&&n%l==4)&&(i=s[i>>>24]<<24^s[i>>16&255]<<16^s[i>>8&255]<<8^s[255&i],n%l==0&&(i=i<<8^i>>>24^c<<24,c=c<<1^283*(c>>7))),a[n]=a[n-l]^i;for(r=0;n;r++,n--)i=a[3&r?n:n-4],o[r]=n<=4||r<4?i:u[0][s[i>>>24]]^u[1][s[i>>16&255]]^u[2][s[i>>8&255]]^u[3][s[255&i]]}return e.prototype.decrypt=function(e,t,n,r,i,a){var o=this._key[1],s=e^o[0],u=r^o[1],l=n^o[2],c=t^o[3],d=void 0,h=void 0,f=void 0,p=o.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],_=v[1],T=v[2],E=v[3],M=v[4];for(g=0;g<p;g++)d=y[s>>>24]^_[u>>16&255]^T[l>>8&255]^E[255&c]^o[m],h=y[u>>>24]^_[l>>16&255]^T[c>>8&255]^E[255&s]^o[m+1],f=y[l>>>24]^_[c>>16&255]^T[s>>8&255]^E[255&u]^o[m+2],c=y[c>>>24]^_[s>>16&255]^T[u>>8&255]^E[255&l]^o[m+3],m+=4,s=d,u=h,l=f;for(g=0;g<4;g++)i[(3&-g)+a]=M[s>>>24]<<24^M[u>>16&255]<<16^M[l>>8&255]<<8^M[255&c]^o[m++],d=s,s=u,u=l,l=c,c=d},e}(),U=function(){function e(){R(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},e.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,i)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),B=function(e){function t(){R(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,U));return n.jobs=[],n.delay=1,n.timeout_=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},t.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(U),F=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},z=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),i=new k(Array.prototype.slice.call(t)),a=new Uint8Array(e.byteLength),o=new Int32Array(a.buffer),s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0;for(s=n[0],u=n[1],l=n[2],c=n[3],g=0;g<r.length;g+=4)d=F(r[g]),h=F(r[g+1]),f=F(r[g+2]),p=F(r[g+3]),i.decrypt(d,h,f,p,o,g),o[g]=F(o[g]^s),o[g+1]=F(o[g+1]^u),o[g+2]=F(o[g+2]^l),o[g+3]=F(o[g+3]^c),s=d,u=h,l=f,c=p;return a},G=function(){function e(t,n,r,i){R(this,e);var a=e.STEP,o=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),u=0;for(this.asyncStream_=new B,this.asyncStream_.push(this.decryptChunk_(o.subarray(u,u+a),n,r,s)),u=a;u<o.length;u+=a)r=new Uint32Array([F(o[u-4]),F(o[u-3]),F(o[u-2]),F(o[u-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(u,u+a),n,r,s));this.asyncStream_.push((function(){var e;i(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=z(e,t,n);r.set(i,e.byteOffset)}},j(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),H=[];var Y=function e(t){var n,r="info",a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n("log",r,t)};return n=function(e,t){return function(n,r,a){var o=t.levels[r],s=new RegExp("^("+o+")$");if("log"!==n&&a.unshift(n.toUpperCase()+":"),a.unshift(e+":"),H&&H.push([].concat(a)),i.a.console){var u=i.a.console[n];u||"debug"!==n||(u=i.a.console.info||i.a.console.log),u&&o&&s.test(n)&&u[Array.isArray(a)?"apply":"call"](i.a.console,a)}}}(t,a),a.createLogger=function(n){return e(t+": "+n)},a.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},a.level=function(e){if("string"==typeof e){if(!a.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');r=e}return r},(a.history=function(){return H?[].concat(H):[]}).filter=function(e){return(H||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},a.history.clear=function(){H&&(H.length=0)},a.history.disable=function(){null!==H&&(H.length=0,H=null)},a.history.enable=function(){null===H&&(H=[])},a.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("error",r,t)},a.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("warn",r,t)},a.debug=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("debug",r,t)},a}("VIDEOJS"),V=Y.createLogger,Q=Object.prototype.toString,q=function(e){return K(e)?Object.keys(e):[]};function W(e,t){q(e).forEach((function(n){return t(e[n],n)}))}function X(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign?Object.assign.apply(Object,[e].concat(n)):(n.forEach((function(t){t&&W(t,(function(t,n){e[n]=t}))})),e)}function K(e){return!!e&&"object"==typeof e}function Z(e){return K(e)&&"[object Object]"===Q.call(e)&&e.constructor===Object}function J(e,t){if(!e||!t)return"";if("function"==typeof i.a.getComputedStyle){var n=i.a.getComputedStyle(e);return n?n.getPropertyValue(t)||n[t]:""}return""}function $(e){return"string"==typeof e&&/\S/.test(e)}function ee(e){if(/\s/.test(e))throw new Error("class has illegal whitespace characters")}function te(){return o.a===i.a.document}function ne(e){return K(e)&&1===e.nodeType}function re(){try{return i.a.parent!==i.a.self}catch(e){return!0}}function ie(e){return function(t,n){if(!$(t))return o.a[e](null);$(n)&&(n=o.a.querySelector(n));var r=ne(n)?n:o.a;return r[e]&&r[e](t)}}function ae(e,t,n,r){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var i=o.a.createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(Y.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),i.setAttribute(e,n)):"textContent"===e?oe(i,n):i[e]=n})),Object.getOwnPropertyNames(n).forEach((function(e){i.setAttribute(e,n[e])})),r&&we(i,r),i}function oe(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function se(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function ue(e,t){return ee(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function le(e,t){return e.classList?e.classList.add(t):ue(e,t)||(e.className=(e.className+" "+t).trim()),e}function ce(e,t){return e.classList?e.classList.remove(t):(ee(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e}function de(e,t,n){var r=ue(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!r),n!==r)return n?le(e,t):ce(e,t),e}function he(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var r=t[n];null==r||!1===r?e.removeAttribute(n):e.setAttribute(n,!0===r?"":r)}))}function fe(e){var t={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(e&&e.attributes&&e.attributes.length>0)for(var r=e.attributes,i=r.length-1;i>=0;i--){var a=r[i].name,o=r[i].value;"boolean"!=typeof e[a]&&-1===n.indexOf(","+a+",")||(o=null!==o),t[a]=o}return t}function pe(e,t){return e.getAttribute(t)}function ge(e,t,n){e.setAttribute(t,n)}function me(e,t){e.removeAttribute(t)}function ve(){o.a.body.focus(),o.a.onselectstart=function(){return!1}}function ye(){o.a.onselectstart=function(){return!0}}function _e(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(J(e,"height"))),n.width||(n.width=parseFloat(J(e,"width"))),n}}function Te(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var n=o.a.documentElement,r=o.a.body,a=n.clientLeft||r.clientLeft||0,s=i.a.pageXOffset||r.scrollLeft,u=t.left+s-a,l=n.clientTop||r.clientTop||0,c=i.a.pageYOffset||r.scrollTop,d=t.top+c-l;return{left:Math.round(u),top:Math.round(d)}}function Ee(e,t){var n={},r=Te(e),i=e.offsetWidth,a=e.offsetHeight,o=r.top,s=r.left,u=t.pageY,l=t.pageX;return t.changedTouches&&(l=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),n.y=Math.max(0,Math.min(1,(o-u+a)/a)),n.x=Math.max(0,Math.min(1,(l-s)/i)),n}function Me(e){return K(e)&&3===e.nodeType}function be(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function Ae(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),ne(e)||Me(e)?e:"string"==typeof e&&/\S/.test(e)?o.a.createTextNode(e):void 0})).filter((function(e){return e}))}function we(e,t){return Ae(t).forEach((function(t){return e.appendChild(t)})),e}function Se(e,t){return we(be(e),t)}function xe(e){return void 0===e.button&&void 0===e.buttons||(0===e.button&&void 0===e.buttons||("mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons))}var De,Ie=ie("querySelector"),Ce=ie("querySelectorAll"),Ne=Object.freeze({isReal:te,isEl:ne,isInFrame:re,createEl:ae,textContent:oe,prependTo:se,hasClass:ue,addClass:le,removeClass:ce,toggleClass:de,setAttributes:he,getAttributes:fe,getAttribute:pe,setAttribute:ge,removeAttribute:me,blockTextSelection:ve,unblockTextSelection:ye,getBoundingClientRect:_e,findPosition:Te,getPointerPosition:Ee,isTextNode:Me,emptyEl:be,normalizeContent:Ae,appendContent:we,insertContent:Se,isSingleLeftClick:xe,$:Ie,$$:Ce}),Le=!1,Oe=function(){if(te()&&!1!==De.options.autoSetup){var e=Array.prototype.slice.call(o.a.getElementsByTagName("video")),t=Array.prototype.slice.call(o.a.getElementsByTagName("audio")),n=Array.prototype.slice.call(o.a.getElementsByTagName("video-js")),r=e.concat(t,n);if(r&&r.length>0)for(var i=0,a=r.length;i<a;i++){var s=r[i];if(!s||!s.getAttribute){Re(1);break}void 0===s.player&&null!==s.getAttribute("data-setup")&&De(s)}else Le||Re(1)}};function Re(e,t){t&&(De=t),i.a.setTimeout(Oe,e)}function je(){Le=!0,i.a.removeEventListener("load",je)}te()&&("complete"===o.a.readyState?je():i.a.addEventListener("load",je));var Pe,ke=function(e){var t=o.a.createElement("style");return t.className=e,t},Ue=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Be=3;function Fe(){return Be++}i.a.WeakMap||(Pe=function(){function e(){this.vdata="vdata"+Math.floor(i.a.performance&&i.a.performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||Fe();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];Y("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var ze=i.a.WeakMap?new WeakMap:new Pe;function Ge(e,t){if(ze.has(e)){var n=ze.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&ze.delete(e)}}function He(e,t,n,r){n.forEach((function(n){e(t,n,r)}))}function Ye(e){function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped){var r=e||i.a.event;for(var a in e={},r)"layerX"!==a&&"layerY"!==a&&"keyLocation"!==a&&"webkitMovementX"!==a&&"webkitMovementY"!==a&&("returnValue"===a&&r.preventDefault||(e[a]=r[a]));if(e.target||(e.target=e.srcElement||o.a),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){r.preventDefault&&r.preventDefault(),e.returnValue=!1,r.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),e.cancelBubble=!0,r.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var s=o.a.documentElement,u=o.a.body;e.pageX=e.clientX+(s&&s.scrollLeft||u&&u.scrollLeft||0)-(s&&s.clientLeft||u&&u.clientLeft||0),e.pageY=e.clientY+(s&&s.scrollTop||u&&u.scrollTop||0)-(s&&s.clientTop||u&&u.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e}var Ve=!1;!function(){try{var e=Object.defineProperty({},"passive",{get:function(){Ve=!0}});i.a.addEventListener("test",null,e),i.a.removeEventListener("test",null,e)}catch(e){}}();var Qe=["touchstart","touchmove"];function qe(e,t,n){if(Array.isArray(t))return He(qe,e,t,n);ze.has(e)||ze.set(e,{});var r=ze.get(e);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=Fe()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(t,n){if(!r.disabled){t=Ye(t);var i=r.handlers[t.type];if(i)for(var a=i.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(e){Y.error(e)}}}),1===r.handlers[t].length)if(e.addEventListener){var i=!1;Ve&&Qe.indexOf(t)>-1&&(i={passive:!0}),e.addEventListener(t,r.dispatcher,i)}else e.attachEvent&&e.attachEvent("on"+t,r.dispatcher)}function We(e,t,n){if(ze.has(e)){var r=ze.get(e);if(r.handlers){if(Array.isArray(t))return He(We,e,t,n);var i=function(e,t){r.handlers[t]=[],Ge(e,t)};if(void 0!==t){var a=r.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);Ge(e,t)}else i(e,t)}else for(var s in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},s)&&i(e,s)}}}function Xe(e,t,n){var r=ze.has(e)?ze.get(e):{},i=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Ye(t),r.dispatcher&&r.dispatcher.call(e,t,n),i&&!t.isPropagationStopped()&&!0===t.bubbles)Xe.call(null,i,t,n);else if(!i&&!t.defaultPrevented&&t.target&&t.target[t.type]){ze.has(t.target)||ze.set(t.target,{});var a=ze.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function Ke(e,t,n){if(Array.isArray(t))return He(Ke,e,t,n);var r=function r(){We(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Fe(),qe(e,t,r)}function Ze(e,t,n){var r=function r(){We(e,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Fe(),qe(e,t,r)}var Je,$e=Object.freeze({fixEvent:Ye,on:qe,off:We,trigger:Xe,one:Ke,any:Ze}),et=function(e,t,n){t.guid||(t.guid=Fe());var r=t.bind(e);return r.guid=n?n+"_"+t.guid:t.guid,r},tt=function(e,t){var n=i.a.performance.now();return function(){var r=i.a.performance.now();r-n>=t&&(e.apply(void 0,arguments),n=r)}},nt=function(){};nt.prototype.allowedEvents_={},nt.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},qe(this,e,t),this.addEventListener=n},nt.prototype.addEventListener=nt.prototype.on,nt.prototype.off=function(e,t){We(this,e,t)},nt.prototype.removeEventListener=nt.prototype.off,nt.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ke(this,e,t),this.addEventListener=n},nt.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ze(this,e,t),this.addEventListener=n},nt.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Ye(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),Xe(this,e)},nt.prototype.dispatchEvent=nt.prototype.trigger,nt.prototype.queueTrigger=function(e){var t=this;Je||(Je=new Map);var n=e.type||e,r=Je.get(this);r||(r=new Map,Je.set(this,r));var a=r.get(n);r.delete(n),i.a.clearTimeout(a);var o=i.a.setTimeout((function(){0===r.size&&(r=null,Je.delete(t)),t.trigger(e)}),0);r.set(n,o)};var rt=function(e){return e instanceof nt||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},it=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},at=function(e){if(!e.nodeName&&!rt(e))throw new Error("Invalid target; must be a DOM node or evented object.")},ot=function(e){if(!it(e))throw new Error("Invalid event type; must be a non-empty string or array.")},st=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},ut=function(e,t){var n,r,i,a=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return a?(n=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],i=t[1]):(n=t[0],r=t[1],i=t[2]),at(n),ot(r),st(i),{isTargetingSelf:a,target:n,type:r,listener:i=et(e,i)}},lt=function(e,t,n,r){at(e),e.nodeName?$e[t](e,n,r):e[t](n,r)},ct={on:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ut(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,u=i.listener;if(lt(o,"on",s,u),!a){var l=function(){return e.off(o,s,u)};l.guid=u.guid;var c=function(){return e.off("dispose",l)};c.guid=u.guid,lt(this,"on","dispose",l),lt(o,"on","dispose",c)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ut(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,u=i.listener;if(a)lt(o,"one",s,u);else{var l=function t(){e.off(o,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)};l.guid=u.guid,lt(o,"one",s,l)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ut(this,n),a=i.isTargetingSelf,o=i.target,s=i.type,u=i.listener;if(a)lt(o,"any",s,u);else{var l=function t(){e.off(o,s,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];u.apply(null,r)};l.guid=u.guid,lt(o,"any",s,l)}},off:function(e,t,n){if(!e||it(e))We(this.eventBusEl_,e,t);else{var r=e,i=t;at(r),ot(i),st(n),n=et(this,n),this.off("dispose",n),r.nodeName?(We(r,i,n),We(r,"dispose",n)):rt(r)&&(r.off(i,n),r.off("dispose",n))}},trigger:function(e,t){return Xe(this.eventBusEl_,e,t)}};function dt(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=ae("span",{className:"vjs-event-bus"});return X(e,ct),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),i.a.setTimeout((function(){e.eventBusEl_=null}),0)})),e}var ht={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),W(e,(function(e,r){n.state[r]!==e&&((t=t||{})[r]={from:n.state[r],to:e}),n.state[r]=e})),t&&rt(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function ft(e,t){return X(e,ht),e.state=X({},e.state,t),"function"==typeof e.handleStateChanged&&rt(e)&&e.on("statechanged",e.handleStateChanged),e}var pt=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},gt=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function mt(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&W(t,(function(t,n){Z(t)?(Z(e[n])||(e[n]={}),e[n]=mt(e[n],t)):e[n]=t}))})),e}var vt=function(){function e(e,t,n){if(!e&&this.play?this.player_=e=this:this.player_=e,this.parentComponent_=null,this.options_=mt({},this.options_),t=this.options_=mt(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+Fe()}var a;this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&dt(this,{eventBusKey:this.el_?"el_":null}),ft(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},i.a.Set||(a=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}()),this.setTimeoutIds_=i.a.Set?new Set:new a,this.setIntervalIds_=i.a.Set?new Set:new a,this.rafIds_=i.a.Set?new Set:new a,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(this.trigger({type:"dispose",bubbles:!1}),this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),ze.has(this.el_)&&ze.delete(this.el_),this.el_=null),this.player_=null},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=mt(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return ae(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var r=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages(),a=i&&i[r],o=r&&r.split("-")[0],s=i&&i[o],u=n;return a&&a[e]?u=a[e]:s&&s[e]&&(u=s[e]),t&&(u=u.replace(/\{(\d+)\}/g,(function(e,n){var r=t[n-1],i=r;return void 0===r&&(i=e),i}))),u},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.addChild=function(t,n,r){var i,a;if(void 0===n&&(n={}),void 0===r&&(r=this.children_.length),"string"==typeof t){a=gt(t);var o=n.componentClass||a;n.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;i=new s(this.player_||this,n)}else i=t;if(i.parentComponent_&&i.parentComponent_.removeChild(i),this.children_.splice(r,0,i),i.parentComponent_=this,"function"==typeof i.id&&(this.childIndex_[i.id()]=i),(a=a||i.name&&gt(i.name()))&&(this.childNameIndex_[a]=i,this.childNameIndex_[pt(a)]=i),"function"==typeof i.el&&i.el()){var u=this.contentEl().children[r]||null;this.contentEl().insertBefore(i.el(),u)}return i},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[gt(e.name())]=null,this.childNameIndex_[pt(e.name())]=null;var r=e.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var r,i=this.options_,a=e.getComponent("Tech");(r=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!r.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var r,i;return"string"==typeof e?i=n[r=e]||t.options_[r]||{}:(r=e.name,i=e),{name:r,opts:i}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||gt(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,r=e.opts;if(void 0!==i[n]&&(r=i[n]),!1!==r){!0===r&&(r={}),r.playerOptions=t.options_.playerOptions;var a=t.addChild(n,r);a&&(t[n]=a)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return Ie(e,t||this.contentEl())},t.$$=function(e,t){return Ce(e,t||this.contentEl())},t.hasClass=function(e){return ue(this.el_,e)},t.addClass=function(e){le(this.el_,e)},t.removeClass=function(e){ce(this.el_,e)},t.toggleClass=function(e,t){de(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return pe(this.el_,e)},t.setAttribute=function(e,t){ge(this.el_,e,t)},t.removeAttribute=function(e){me(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var r=this.el_.style[e],i=r.indexOf("px");return-1!==i?parseInt(r.slice(0,i),10):parseInt(this.el_["offset"+gt(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=J(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+gt(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(r){1===r.touches.length&&(n={pageX:r.touches[0].pageX,pageY:r.touches[0].pageY},t=i.a.performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var r=t.touches[0].pageX-n.pageX,i=t.touches[0].pageY-n.pageY;Math.sqrt(r*r+i*i)>10&&(e=!1)}}));var r=function(){e=!1};this.on("touchleave",r),this.on("touchcancel",r),this.on("touchend",(function(r){(n=null,!0===e)&&(i.a.performance.now()-t<200&&(r.preventDefault(),this.trigger("tap")))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=et(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,r=this;return e=et(this,e),this.clearTimersOnDispose_(),n=i.a.setTimeout((function(){r.setTimeoutIds_.has(n)&&r.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),i.a.clearTimeout(e)),e},t.setInterval=function(e,t){e=et(this,e),this.clearTimersOnDispose_();var n=i.a.setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),i.a.clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=et(this,e),t=i.a.requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),i.a.cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],r=t[1];e[n].forEach(e[r],e)})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var r,i=e.getComponent("Tech"),a=i&&i.isTech(n),o=e===n||e.prototype.isPrototypeOf(n.prototype);if(a||!o)throw r=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+t+'"; '+r+".");t=gt(t),e.components_||(e.components_={});var s=e.getComponent("Player");if("Player"===t&&s&&s.players){var u=s.players,l=Object.keys(u);if(u&&l.length>0&&l.map((function(e){return u[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[pt(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function yt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Et(e,t,n){return(Et=Tt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_t(i,n.prototype),i}).apply(null,arguments)}function Mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}vt.prototype.supportsRaf_="function"==typeof i.a.requestAnimationFrame&&"function"==typeof i.a.cancelAnimationFrame,vt.registerComponent("Component",vt);var bt,At=i.a.navigator&&i.a.navigator.userAgent||"",wt=/AppleWebKit\/([\d.]+)/i.exec(At),St=wt?parseFloat(wt.pop()):null,xt=/iPad/i.test(At),Dt=/iPhone/i.test(At)&&!xt,It=/iPod/i.test(At),Ct=Dt||xt||It,Nt=(bt=At.match(/OS (\d+)_/i))&&bt[1]?bt[1]:null,Lt=/Android/i.test(At),Ot=function(){var e=At.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Rt=Lt&&Ot<5&&St<537,jt=/Firefox/i.test(At),Pt=/Edge/i.test(At),kt=!Pt&&(/Chrome/i.test(At)||/CriOS/i.test(At)),Ut=function(){var e=At.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Bt=function(){var e=/MSIE\s(\d+)\.\d/.exec(At),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(At)&&/rv:11.0/.test(At)&&(t=11),t}(),Ft=/Safari/i.test(At)&&!kt&&!Lt&&!Pt,zt=(Ft||Ct)&&!kt,Gt=/Windows/i.test(At),Ht=te()&&("ontouchstart"in i.a||i.a.navigator.maxTouchPoints||i.a.DocumentTouch&&i.a.document instanceof i.a.DocumentTouch),Yt=Object.freeze({IS_IPAD:xt,IS_IPHONE:Dt,IS_IPOD:It,IS_IOS:Ct,IOS_VERSION:Nt,IS_ANDROID:Lt,ANDROID_VERSION:Ot,IS_NATIVE_ANDROID:Rt,IS_FIREFOX:jt,IS_EDGE:Pt,IS_CHROME:kt,CHROME_VERSION:Ut,IE_VERSION:Bt,IS_SAFARI:Ft,IS_ANY_SAFARI:zt,IS_WINDOWS:Gt,TOUCH_ENABLED:Ht});function Vt(e,t,n,r){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,r,n.length-1),n[r][t]}function Qt(e){return void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:Vt.bind(null,"start",0,e),end:Vt.bind(null,"end",1,e)}}function qt(e,t){return Array.isArray(e)?Qt(e):void 0===e||void 0===t?Qt():Qt([[e,t]])}function Wt(e,t){var n,r,i=0;if(!t)return 0;e&&e.length||(e=qt(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(r=e.end(a))>t&&(r=t),i+=r-n;return i/t}for(var Xt,Kt={prefixed:!0},Zt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Jt=Zt[0],$t=0;$t<Zt.length;$t++)if(Zt[$t][1]in o.a){Xt=Zt[$t];break}if(Xt){for(var en=0;en<Xt.length;en++)Kt[Jt[en]]=Xt[en];Kt.prefixed=Xt[0]!==Jt[0]}function tn(e){if(e instanceof tn)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:K(e)&&("number"==typeof e.code&&(this.code=e.code),X(this,e)),this.message||(this.message=tn.defaultMessages[this.code]||"")}tn.prototype.code=0,tn.prototype.message="",tn.prototype.status=null,tn.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],tn.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var nn=0;nn<tn.errorTypes.length;nn++)tn[tn.errorTypes[nn]]=nn,tn.prototype[tn.errorTypes[nn]]=nn;function rn(e){return null!=e&&"function"==typeof e.then}function an(e){rn(e)&&e.then(null,(function(e){}))}var on=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,r){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},sn=function(e){var t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track}));return Array.prototype.map.call(t,(function(e){var t=on(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(on))},un=function(e,t){return e.forEach((function(e){var n=t.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return n.addCue(e)}))})),t.textTracks()},ln=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).opened_=r.hasBeenOpened_=r.hasBeenFilled_=!1,r.closeable(!r.options_.uncloseable),r.content(r.options_.content),r.contentEl_=ae("div",{className:"vjs-modal-dialog-content"},{role:"document"}),r.descEl_=ae("p",{className:"vjs-modal-dialog-description vjs-control-text",id:r.el().getAttribute("aria-describedby")}),oe(r.descEl_,r.description()),r.el_.appendChild(r.descEl_),r.el_.appendChild(r.contentEl_),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var r=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=r,this.on(n,"close",this.close)}!t&&n&&(this.off(n,"close",this.close),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,r=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),Se(t,e),this.trigger("modalfill"),r?n.insertBefore(t,r):n.appendChild(t);var i=this.getChild("closeButton");i&&n.appendChild(i.el_)},n.empty=function(){this.trigger("beforemodalempty"),be(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=o.a.activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),c.a.isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(c.a.isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),r=this.el_.querySelector(":focus"),i=0;i<n.length;i++)if(r===n[i]){t=i;break}o.a.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof i.a.HTMLAnchorElement||e instanceof i.a.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof i.a.HTMLInputElement||e instanceof i.a.HTMLSelectElement||e instanceof i.a.HTMLTextAreaElement||e instanceof i.a.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof i.a.HTMLIFrameElement||e instanceof i.a.HTMLObjectElement||e instanceof i.a.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(vt);ln.prototype.options_={pauseOnOpen:!0,temporary:!0},vt.registerComponent("ModalDialog",ln);var cn=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(Mt(n),"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)n.addTrack(t[r]);return n}yt(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this.tracks_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.tracks_[t]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this}))},n.removeTrack=function(e){for(var t,n=0,r=this.length;n<r;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},t}(nt);for(var dn in cn.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},cn.prototype.allowedEvents_)cn.prototype["on"+dn]=null;var hn=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},fn=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].enabled){hn(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,n}yt(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&hn(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,hn(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(cn),pn=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},gn=function(e){function t(t){var n;void 0===t&&(t=[]);for(var r=t.length-1;r>=0;r--)if(t[r].selected){pn(t,t[r]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(Mt(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}yt(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&pn(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,pn(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(cn),mn=function(e){function t(){return e.apply(this,arguments)||this}yt(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(cn),vn=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,r=this.trackElements_.length;n<r;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),yn=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,r=e.length;this.cues_=e,this.length_=e.length;var i=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<r)for(n=t;n<r;n++)i.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,r=this.length;n<r;n++){var i=this[n];if(i.id===e){t=i;break}}return t},e}(),_n={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Tn={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},En={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Mn={disabled:"disabled",hidden:"hidden",showing:"showing"},bn=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var r={id:t.id||"vjs_track_"+Fe(),kind:t.kind||"",label:t.label||"",language:t.language||""},i=function(e){Object.defineProperty(Mt(n),e,{get:function(){return r[e]},set:function(){}})};for(var a in r)i(a);return n}return yt(t,e),t}(nt),An=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=o.a.createElement("a");n.href=e;var r,a=""===n.host&&"file:"!==n.protocol;a&&((r=o.a.createElement("div")).innerHTML='<a href="'+e+'"></a>',n=r.firstChild,r.setAttribute("style","display:none; position:absolute;"),o.a.body.appendChild(r));for(var s={},u=0;u<t.length;u++)s[t[u]]=n[t[u]];return"http:"===s.protocol&&(s.host=s.host.replace(/:80$/,"")),"https:"===s.protocol&&(s.host=s.host.replace(/:443$/,"")),s.protocol||(s.protocol=i.a.location.protocol),a&&o.a.body.removeChild(r),s},wn=function(e){if(!e.match(/^https?:\/\//)){var t=o.a.createElement("div");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},Sn=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},xn=function(e){var t=i.a.location,n=An(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},Dn=Object.freeze({parseUrl:An,getAbsoluteURL:wn,getFileExtension:Sn,isCrossOrigin:xn}),In=function(e,t){var n=new i.a.WebVTT.Parser(i.a,i.a.vttjs,i.a.WebVTT.StringDecoder()),r=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){r.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),r.length>0&&(i.a.console&&i.a.console.groupCollapsed&&i.a.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach((function(e){return Y.error(e)})),i.a.console&&i.a.console.groupEnd&&i.a.console.groupEnd()),n.flush()},Cn=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var r=mt(t,{kind:En[t.kind]||"subtitles",language:t.language||t.srclang||""}),a=Mn[r.mode]||"disabled",o=r.default;"metadata"!==r.kind&&"chapters"!==r.kind||(a="hidden"),(n=e.call(this,r)||this).tech_=r.tech,n.cues_=[],n.activeCues_=[];var s=new yn(n.cues_),u=new yn(n.activeCues_),l=!1,c=et(Mt(n),(function(){this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1)}));return"disabled"!==a&&n.tech_.ready((function(){n.tech_.on("timeupdate",c)}),!0),Object.defineProperties(Mt(n),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(e){var t=this;Mn[e]&&("disabled"!==(a=e)?this.tech_.ready((function(){t.tech_.on("timeupdate",c)}),!0):this.tech_.off("timeupdate",c),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?s:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return u;for(var e=this.tech_.currentTime(),t=[],n=0,r=this.cues.length;n<r;n++){var i=this.cues[n];i.startTime<=e&&i.endTime>=e?t.push(i):i.startTime===i.endTime&&i.startTime<=e&&i.startTime+.5>=e&&t.push(i)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,u.setCues_(this.activeCues_),u},set:function(){}}}),r.src?(n.src=r.src,function(e,t){var n={uri:e},r=xn(e);r&&(n.cors=r),h()(n,et(this,(function(e,n,r){if(e)return Y.error(e,n);t.loaded_=!0,"function"!=typeof i.a.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return In(r,t);Y.error("vttjs failed to load, stopping trying to process "+t.src)})):In(r,t)})))}(r.src,Mt(n))):n.loaded_=!0,n}yt(t,e);var n=t.prototype;return n.addCue=function(e){var t=e;if(i.a.vttjs&&!(e instanceof i.a.vttjs.VTTCue)){for(var n in t=new i.a.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var r=this.tech_.textTracks(),a=0;a<r.length;a++)r[a]!==this&&r[a].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(bn);Cn.prototype.allowedEvents_={cuechange:"cuechange"};var Nn=function(e){function t(t){var n;void 0===t&&(t={});var r=mt(t,{kind:Tn[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(Mt(n),"enabled",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("enabledchange"))}}),r.enabled&&(n.enabled=r.enabled),n.loaded_=!0,n}return yt(t,e),t}(bn),Ln=function(e){function t(t){var n;void 0===t&&(t={});var r=mt(t,{kind:_n[t.kind]||""});n=e.call(this,r)||this;var i=!1;return Object.defineProperty(Mt(n),"selected",{get:function(){return i},set:function(e){"boolean"==typeof e&&e!==i&&(i=e,this.trigger("selectedchange"))}}),r.selected&&(n.selected=r.selected),n}return yt(t,e),t}(bn),On=function(e){function t(t){var n,r;void 0===t&&(t={}),n=e.call(this)||this;var i=new Cn(t);return n.kind=i.kind,n.src=i.src,n.srclang=i.language,n.label=i.label,n.default=i.default,Object.defineProperties(Mt(n),{readyState:{get:function(){return r}},track:{get:function(){return i}}}),r=0,i.addEventListener("loadeddata",(function(){r=2,n.trigger({type:"load",target:Mt(n)})})),n}return yt(t,e),t}(nt);On.prototype.allowedEvents_={load:"load"},On.NONE=0,On.LOADING=1,On.LOADED=2,On.ERROR=3;var Rn={audio:{ListClass:fn,TrackClass:Nn,capitalName:"Audio"},video:{ListClass:gn,TrackClass:Ln,capitalName:"Video"},text:{ListClass:mn,TrackClass:Cn,capitalName:"Text"}};Object.keys(Rn).forEach((function(e){Rn[e].getterName=e+"Tracks",Rn[e].privateName=e+"Tracks_"}));var jn={remoteText:{ListClass:mn,TrackClass:Cn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:vn,TrackClass:On,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Pn=mt(Rn,jn);jn.names=Object.keys(jn),Rn.names=Object.keys(Rn),Pn.names=[].concat(jn.names).concat(Rn.names);var kn=function(e){function t(t,n){var r;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(r=e.call(this,null,t,n)||this).hasStarted_=!1,r.on("playing",(function(){this.hasStarted_=!0})),r.on("loadstart",(function(){this.hasStarted_=!1})),Pn.names.forEach((function(e){var n=Pn[e];t&&t[n.getterName]&&(r[n.privateName]=t[n.getterName])})),r.featuresProgressEvents||r.manualProgressOn(),r.featuresTimeupdateEvents||r.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(r["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?r.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(r.featuresNativeTextTracks=!0),r.featuresNativeTextTracks||r.emulateTextTracks(),r.autoRemoteTextTracks_=new Pn.text.ListClass,r.initTrackListeners(),t.nativeControlsForTouch||r.emitTapEvents(),r.constructor&&(r.name_=r.constructor.name||"Unknown Tech"),r}yt(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange),this.manualProgress=!0,this.one("ready",this.trackProgress)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(et(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return qt(0,0)},n.bufferedPercent=function(){return Wt(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime),this.on("pause",this.stopTrackingCurrentTime)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime),this.off("pause",this.stopTrackingCurrentTime)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Rn.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],r=n.length;r--;){var i=n[r];"text"===e&&t.removeRemoteTextTrack(i),n.removeTrack(i)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.error=function(e){return void 0!==e&&(this.error_=new tn(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?qt(0,0):qt()},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Rn.names.forEach((function(t){var n=Rn[t],r=function(){e.trigger(t+"trackchange")},i=e[n.getterName]();i.addEventListener("removetrack",r),i.addEventListener("addtrack",r),e.on("dispose",(function(){i.removeEventListener("removetrack",r),i.removeEventListener("addtrack",r)}))}))},n.addWebVttScript_=function(){var e=this;if(!i.a.WebVTT)if(o.a.body.contains(this.el())){if(!this.options_["vtt.js"]&&Z(p.a)&&Object.keys(p.a).length>0)return void this.trigger("vttjsloaded");var t=o.a.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),i.a.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),r=function(e){return t.addTrack(e.track)},i=function(e){return t.removeTrack(e.track)};n.on("addtrack",r),n.on("removetrack",i),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",(function(){n.off("addtrack",r),n.off("removetrack",i),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++){t[e].removeEventListener("cuechange",a)}}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,r,i){void 0===i&&(i={});var a=e.textTracks();i.kind=t,n&&(i.label=n),r&&(i.language=r),i.tech=e;var o=new Pn.text.TrackClass(i);return a.addTrack(o),o}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=mt(e,{tech:this});return new jn.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var r=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(Y.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(r.track)})),r},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||i.a.Promise;if(e)return e.reject()},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=gt(e),t.techs_[e]=n,t.techs_[pt(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=gt(e),i.a&&i.a.videojs&&i.a.videojs[e]?(Y.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),i.a.videojs[e]):void 0)},t}(vt);Pn.names.forEach((function(e){var t=Pn[e];kn.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),kn.prototype.featuresVolumeControl=!0,kn.prototype.featuresMuteControl=!0,kn.prototype.featuresFullscreenResize=!1,kn.prototype.featuresPlaybackRate=!1,kn.prototype.featuresProgressEvents=!1,kn.prototype.featuresSourceset=!1,kn.prototype.featuresTimeupdateEvents=!1,kn.prototype.featuresNativeTextTracks=!1,kn.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var r=e.sourceHandlers;r||(r=e.sourceHandlers=[]),void 0===n&&(n=r.length),r.splice(n,0,t)},e.canPlayType=function(t){for(var n,r=e.sourceHandlers||[],i=0;i<r.length;i++)if(n=r[i].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var r=e.sourceHandlers||[],i=0;i<r.length;i++)if(r[i].canHandleSource(t,n))return r[i];return null},e.canPlaySource=function(t,n){var r=e.selectSourceHandler(t,n);return r?r.canHandleSource(t,n):""};["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:Y.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},vt.registerComponent("Tech",kn),kn.registerTech("Tech",kn),kn.defaultTechOrder_=[];var Un={},Bn={},Fn={};function zn(e,t,n){e.setTimeout((function(){return function e(t,n,r,i,a,o){void 0===t&&(t={});void 0===n&&(n=[]);void 0===a&&(a=[]);void 0===o&&(o=!1);var s=n,u=s[0],l=s.slice(1);if("string"==typeof u)e(t,Un[u],r,i,a,o);else if(u){var c=function(e,t){var n=Bn[e.id()],r=null;if(null==n)return r=t(e),Bn[e.id()]=[[t,r]],r;for(var i=0;i<n.length;i++){var a=n[i],o=a[0],s=a[1];o===t&&(r=s)}null===r&&(r=t(e),n.push([t,r]));return r}(i,u);if(!c.setSource)return a.push(c),e(t,l,r,i,a,o);c.setSource(X({},t),(function(n,s){if(n)return e(t,l,r,i,a,o);a.push(c),e(s,t.type===s.type?l:Un[s.type],r,i,a,o)}))}else l.length?e(t,l,r,i,a,o):o?r(t,a):e(t,Un["*"],r,i,a,!0)}(t,Un[t.type],n,e)}),1)}function Gn(e,t,n,r){void 0===r&&(r=null);var i="call"+gt(n),a=e.reduce(Qn(i),r),o=a===Fn,s=o?null:t[n](a);return function(e,t,n,r){for(var i=e.length-1;i>=0;i--){var a=e[i];a[t]&&a[t](r,n)}}(e,n,s,o),s}var Hn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1,volume:1},Yn={setCurrentTime:1,setVolume:1},Vn={play:1,pause:1};function Qn(e){return function(t,n){return t===Fn?Fn:n[e]?n[e](t):t}}var qn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Wn=function(e){void 0===e&&(e="");var t=Sn(e);return qn[t.toLowerCase()]||""};function Xn(e){if(!e.type){var t=Wn(e.src);t&&(e.type=t)}return e}var Kn=function(e){function t(t,n,r){var i,a=mt({createEl:!1},n);if(i=e.call(this,t,a,r)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,s=n.playerOptions.techOrder;o<s.length;o++){var u=gt(s[o]),l=kn.getTech(u);if(u||(l=vt.getComponent(u)),l&&l.isSupported()){t.loadTech_(u);break}}return i}return yt(t,e),t}(vt);vt.registerComponent("MediaLoader",Kn);var Zn=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).emitTapEvents(),r.enable(),r}yt(t,e);var n=t.prototype;return n.createEl=function(t,n,r){void 0===t&&(t="div"),void 0===n&&(n={}),void 0===r&&(r={}),n=X({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},n),"button"===t&&Y.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),r=X({role:"button"},r),this.tabIndex_=n.tabIndex;var i=e.prototype.createEl.call(this,t,n,r);return this.createControlTextEl(i),i},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=ae("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,oe(this.controlTextEl_,n),this.nonIconControl||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("keydown",this.handleKeyDown))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver),this.off("mouseout",this.handleMouseOut),this.off(["tap","click"],this.handleClick),this.off("keydown",this.handleKeyDown)},n.handleClick=function(e){},n.handleKeyDown=function(t){c.a.isEventKey(t,"Space")||c.a.isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(vt);vt.registerComponent("ClickableComponent",Zn);var Jn=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update(),t.on("posterchange",et(Mt(r),r.update)),r}yt(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update),e.prototype.dispose.call(this)},n.createEl=function(){return ae("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?an(this.player_.play()):this.player_.pause())},t}(Zn);vt.registerComponent("PosterImage",Jn);var $n={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function er(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function tr(e,t,n){try{e.style[t]=n}catch(e){return}}var nr=function(e){function t(t,n,r){var a;a=e.call(this,t,n,r)||this;var o=et(Mt(a),a.updateDisplay);return t.on("loadstart",et(Mt(a),a.toggleDisplay)),t.on("texttrackchange",o),t.on("loadedmetadata",et(Mt(a),a.preselectTrack)),t.ready(et(Mt(a),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",o),t.on("playerresize",o),i.a.addEventListener("orientationchange",o),t.on("dispose",(function(){return i.a.removeEventListener("orientationchange",o)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),a}yt(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,r={captions:1,subtitles:1},i=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<i.length;o++){var s=i[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in r?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in r&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof i.a.WebVTT&&i.a.WebVTT.processCues(i.a,[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],r=0;r<e.length;++r){var i=e[r];"showing"===i.mode&&n.push(i)}this.updateForTrack(n)}else{for(var a=null,o=null,s=e.length;s--;){var u=e[s];"showing"===u.mode&&("descriptions"===u.kind?a=u:o=u)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,r=n.length;r--;){var a=n[r];if(a){var o=a.displayState;if(t.color&&(o.firstChild.style.color=t.color),t.textOpacity&&tr(o.firstChild,"color",er(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(o.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&tr(o.firstChild,"backgroundColor",er(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?tr(o,"backgroundColor",er(t.windowColor,t.windowOpacity)):o.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var s=i.a.parseFloat(o.style.fontSize);o.style.fontSize=s*t.fontPercent+"px",o.style.height="auto",o.style.top="auto",o.style.bottom="2px"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=$n[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof i.a.WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],a=0;a<r.activeCues.length;++a)t.push(r.activeCues[a]);i.a.WebVTT.processCues(i.a,t,this.el_);for(var o=0;o<e.length;++o){for(var s=e[o],u=0;u<s.activeCues.length;++u){var l=s.activeCues[u].displayState;le(l,"vjs-text-track-cue"),le(l,"vjs-text-track-cue-"+(s.language?s.language:o))}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(vt);vt.registerComponent("TextTrackDisplay",nr);var rr=function(e){function t(){return e.apply(this,arguments)||this}return yt(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=ae("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[n])}),i=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return i.appendChild(r),i},t}(vt);vt.registerComponent("LoadingSpinner",rr);var ir=function(e){function t(){return e.apply(this,arguments)||this}yt(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={}),t=X({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},t),n=X({type:"button"},n);var r=vt.prototype.createEl.call(this,"button",t,n);return this.createControlTextEl(r),r},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return Y.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),vt.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){c.a.isEventKey(t,"Space")||c.a.isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(Zn);vt.registerComponent("Button",ir);var ar=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).mouseused_=!1,r.on("mousedown",r.handleMouseDown),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)return an(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var n=this.player_.getChild("controlBar"),r=n&&n.getChild("playToggle");if(r){var i=function(){return r.focus()};rn(t)?t.then(i,(function(){})):this.setTimeout(i,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(ir);ar.prototype.controlText_="Play Video",vt.registerComponent("BigPlayButton",ar);var or=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).controlText(n&&n.controlText||r.localize("Close")),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){c.a.isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(ir);vt.registerComponent("CloseButton",or);var sr=function(e){function t(t,n){var r;return void 0===n&&(n={}),r=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,r.on(t,"play",r.handlePlay),r.on(t,"pause",r.handlePause),n.replay&&r.on(t,"ended",r.handleEnded),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},t}(ir);sr.prototype.controlText_="Play",vt.registerComponent("PlayToggle",sr);var ur=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),r=Math.floor(e/60%60),i=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(i=r=n="-"),(i=i>0||o>0?i+":":"")+(r=((i||a>=10)&&r<10?"0"+r:r)+":")+(n=n<10?"0"+n:n)},lr=ur;function cr(e,t){return void 0===t&&(t=e),lr(e,t)}var dr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).throttledUpdateContent=tt(et(Mt(r),r.updateContent),30),r.on(t,"timeupdate",r.throttledUpdateContent),r}yt(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text" role="presentation">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=ae("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),this.updateTextNode_(),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=o.a.createTextNode(this.formattedTime_||this.formatTime_(0)),this.contentEl_.appendChild(this.textNode_)}},n.formatTime_=function(e){return cr(e)},n.updateFormattedTime_=function(e){var t=this.formatTime_(e);t!==this.formattedTime_&&(this.formattedTime_=t,this.requestAnimationFrame(this.updateTextNode_))},n.updateContent=function(e){},t}(vt);dr.prototype.labelText_="Time",dr.prototype.controlText_="Time",vt.registerComponent("TimeDisplay",dr);var hr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"ended",r.handleEnded),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(t)},n.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())},t}(dr);hr.prototype.labelText_="Current Time",hr.prototype.controlText_="Current Time",vt.registerComponent("CurrentTimeDisplay",hr);var fr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"durationchange",r.updateContent),r.on(t,"loadstart",r.updateContent),r.on(t,"loadedmetadata",r.throttledUpdateContent),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.duration_!==t&&(this.duration_=t,this.updateFormattedTime_(t))},t}(dr);fr.prototype.labelText_="Duration",fr.prototype.controlText_="Duration",vt.registerComponent("DurationDisplay",fr);var pr=function(e){function t(){return e.apply(this,arguments)||this}return yt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"},{"aria-hidden":!0})},t}(vt);vt.registerComponent("TimeDivider",pr);var gr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"durationchange",r.throttledUpdateContent),r.on(t,"ended",r.handleEnded),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore(ae("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){"number"==typeof this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},n.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)},t}(dr);gr.prototype.labelText_="Remaining Time",gr.prototype.controlText_="Remaining Time",vt.registerComponent("RemainingTimeDisplay",gr);var mr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateShowing(),r.on(r.player(),"durationchange",r.updateShowing),r}yt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ae("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+" </span>"+this.localize("LIVE")},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(vt);vt.registerComponent("LiveDisplay",mr);var vr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateLiveEdgeStatus(),r.player_.liveTracker&&r.on(r.player_.liveTracker,"liveedgechange",r.updateLiveEdgeStatus),r}yt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=ae("span",{className:"vjs-seek-to-live-text",innerHTML:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(e){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatus),this.textEl_=null,e.prototype.dispose.call(this)},t}(ir);vr.prototype.controlText_="Seek to live, currently playing live",vt.registerComponent("SeekToLive",vr);var yr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).bar=r.getChild(r.options_.barName),r.vertical(!!r.options_.vertical),r.enable(),r}yt(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown),this.on("touchstart",this.handleMouseDown),this.on("keydown",this.handleKeyDown),this.on("click",this.handleClick),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown),this.off("touchstart",this.handleMouseDown),this.off("keydown",this.handleKeyDown),this.off("click",this.handleClick),this.off(this.player_,"controlsvisible",this.update),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),n.className=n.className+" vjs-slider",n=X({tabIndex:0},n),r=X({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},r),e.prototype.createEl.call(this,t,n,r)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||kt||e.preventDefault(),ve(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchmove",this.handleMouseMove),this.on(t,"touchend",this.handleMouseUp),this.handleMouseMove(e)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;ye(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove),this.off(e,"mouseup",this.handleMouseUp),this.off(e,"touchmove",this.handleMouseMove),this.off(e,"touchend",this.handleMouseUp),this.update()},n.update=function(){if(this.el_){var e=this.getPercent(),t=this.bar;if(t){("number"!=typeof e||e!=e||e<0||e===1/0)&&(e=0);var n=(100*e).toFixed(2)+"%",r=t.el().style,i=this.vertical()?"height":"width";return r[i]!==n&&(r[i]=n),e}}},n.calculateDistance=function(e){var t=Ee(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){c.a.isEventKey(t,"Left")||c.a.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):c.a.isEventKey(t,"Right")||c.a.isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(vt);vt.registerComponent("Slider",yr);var _r=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).partEls_=[],r.on(t,"progress",r.update),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+'</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>'})},n.dispose=function(){this.partEls_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this.player_.liveTracker,n=this.player_.buffered(),r=t&&t.isLive()?t.seekableEnd():this.player_.duration(),i=this.player_.bufferedEnd(),a=this.partEls_,o=this.$(".vjs-control-text-loaded-percentage"),s=function(e,t,n){var r=e/t||0;return r=100*(r>=1?1:r),n&&(r=r.toFixed(2)),r+"%"};this.el_.style.width=s(i,r),oe(o,s(i,r,!0));for(var u=0;u<n.length;u++){var l=n.start(u),c=n.end(u),d=a[u];d||(d=this.el_.appendChild(ae()),a[u]=d),d.style.left=s(l,i),d.style.width=s(c-l,i)}for(var h=a.length;h>n.length;h--)this.el_.removeChild(a[h-1]);a.length=n.length},t}(vt);vt.registerComponent("LoadProgressBar",_r);var Tr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=tt(et(Mt(r),r.update),30),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var r=_e(this.el_),i=_e(this.player_.el()),a=e.width*t;if(i&&r){var o=e.left-i.left+a,s=e.width-a+(i.right-e.right),u=r.width/2;o<u?u+=u-o:s<u&&(u=s),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-"+u+"px",this.write(n)}},n.write=function(e){oe(this.el_,e)},n.updateTime=function(e,t,n,r){var i=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_),this.rafId_=this.requestAnimationFrame((function(){var a,o=i.player_.duration();if(i.player_.liveTracker&&i.player_.liveTracker.isLive()){var s=i.player_.liveTracker.liveWindow(),u=s-t*s;a=(u<1?"":"-")+cr(u,s)}else a=cr(n,o);i.update(e,t,a),r&&r()}))},t}(vt);vt.registerComponent("TimeTooltip",Tr);var Er=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=tt(et(Mt(r),r.update),30),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var r=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,r)}},t}(vt);Er.prototype.options_={children:[]},Ct||Lt||Er.prototype.options_.children.push("timeTooltip"),vt.registerComponent("PlayProgressBar",Er);var Mr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).update=tt(et(Mt(r),r.update),30),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,r=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,r,(function(){n.el_.style.left=e.width*t+"px"}))},t}(vt);Mr.prototype.options_={children:["timeTooltip"]},vt.registerComponent("MouseTimeDisplay",Mr);var br=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).setEventHandlers_(),r}yt(t,e);var n=t.prototype;return n.setEventHandlers_=function(){this.update=tt(et(this,this.update),30),this.on(this.player_,"timeupdate",this.update),this.on(this.player_,"ended",this.handleEnded),this.on(this.player_,"durationchange",this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.on(this.player_,["playing"],this.enableInterval_),this.on(this.player_,["ended","pause","waiting"],this.disableInterval_),"hidden"in o.a&&"visibilityState"in o.a&&this.on(o.a,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){o.a.hidden?this.disableInterval_(e):(this.enableInterval_(),this.requestAnimationFrame(this.update))},n.enableInterval_=function(){var e=this;this.clearInterval(this.updateInterval),this.updateInterval=this.setInterval((function(){e.requestAnimationFrame(e.update)}),30)},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&"ended"!==e.type||this.clearInterval(this.updateInterval)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update_=function(e,t){var n=this.player_.liveTracker,r=this.player_.duration();n&&n.isLive()&&(r=this.player_.liveTracker.liveCurrentTime()),this.el_.setAttribute("aria-valuenow",(100*t).toFixed(2)),this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[cr(e,r),cr(r,r)],"{1} of {2}")),this.bar&&this.bar.update(_e(this.el_),t)},n.update=function(t){if(null!==this.el().offsetParent){var n=e.prototype.update.call(this);return this.update_(this.getCurrentTime_(),n),n}},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.handleEnded=function(e){this.update_(this.player_.duration(),1)},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e>=1?1:e||0},n.handleMouseDown=function(t){xe(t)&&(t.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e){if(xe(e)){var t,n=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){var i=r.seekableStart(),a=r.liveCurrentTime();if((t=i+n*r.liveWindow())>=a&&(t=a),t<=i&&(t=i+.1),t===1/0)return}else(t=n*this.player_.duration())===this.player_.duration()&&(t-=.1);this.player_.currentTime(t)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying&&an(this.player_.play())},n.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)},n.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){if(c.a.isEventKey(t,"Space")||c.a.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(c.a.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(0);else if(c.a.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.duration());else if(/^[0-9]$/.test(c()(t))){t.preventDefault(),t.stopPropagation();var n=10*(c.a.codes[c()(t)]-c.a.codes[0])/100;this.player_.currentTime(this.player_.duration()*n)}else c.a.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()-60)):c.a.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.player_.currentTime(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},t}(yr);br.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ct||Lt||br.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),vt.registerComponent("SeekBar",br);var Ar=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).handleMouseMove=tt(et(Mt(r),r.handleMouseMove),30),r.throttledHandleMouseSeek=tt(et(Mt(r),r.handleMouseSeek),30),r.enable(),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("mouseTimeDisplay"),r=t.el(),i=_e(r),a=Ee(r,e).x;a>1?a=1:a<0&&(a=0),n&&n.update(i,a)}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},t}(vt);Ar.prototype.options_={children:["seekBar"]},vt.registerComponent("ProgressControl",Ar);var wr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],r.handlePictureInPictureChange),o.a.pictureInPictureEnabled||r.disable(),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture")},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(ir);wr.prototype.controlText_="Picture-in-Picture",vt.registerComponent("PictureInPictureToggle",wr);var Sr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"fullscreenchange",r.handleFullscreenChange),!1===o.a[t.fsApi_.fullscreenEnabled]&&r.disable(),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ir);Sr.prototype.controlText_="Fullscreen",vt.registerComponent("FullscreenToggle",Sr);var xr=function(e){function t(){return e.apply(this,arguments)||this}return yt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},t}(vt);vt.registerComponent("VolumeLevel",xr);var Dr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on("slideractive",r.updateLastVolume_),r.on(t,"volumechange",r.updateARIAAttributes),t.ready((function(){return r.updateARIAAttributes()})),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){xe(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){xe(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(yr);Dr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Dr.prototype.playerEvent="volumechange",vt.registerComponent("VolumeBar",Dr);var Ir=function(e){function t(t,n){var r;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||Z(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Mt(r=e.call(this,t,n)||this),t),r.throttledHandleMouseMove=tt(et(Mt(r),r.handleMouseMove),30),r.on("mousedown",r.handleMouseDown),r.on("touchstart",r.handleMouseDown),r.on(r.volumeBar,["focus","slideractive"],(function(){r.volumeBar.addClass("vjs-slider-active"),r.addClass("vjs-slider-active"),r.trigger("slideractive")})),r.on(r.volumeBar,["blur","sliderinactive"],(function(){r.volumeBar.removeClass("vjs-slider-active"),r.removeClass("vjs-slider-active"),r.trigger("sliderinactive")})),r}yt(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUp),this.on(t,"touchend",this.handleMouseUp)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUp),this.off(t,"touchend",this.handleMouseUp)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(vt);Ir.prototype.options_={children:["volumeBar"]},vt.registerComponent("VolumeControl",Ir);var Cr=function(e){function t(t,n){var r;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Mt(r=e.call(this,t,n)||this),t),r.on(t,["loadstart","volumechange"],r.update),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var r=n<.1?.1:n;this.player_.volume(r),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;Ct&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)ce(this.el_,"vjs-vol-"+n);le(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(ir);Cr.prototype.controlText_="Mute",vt.registerComponent("MuteToggle",Cr);var Nr=function(e){function t(t,n){var r;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||Z(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(r=e.call(this,t,n)||this).on(t,["loadstart"],r.volumePanelState_),r.on(r.muteToggle,"keyup",r.handleKeyPress),r.on(r.volumeControl,"keyup",r.handleVolumeControlKeyUp),r.on("keydown",r.handleKeyPress),r.on("mouseover",r.handleMouseOver),r.on("mouseout",r.handleMouseOut),r.on(r.volumeControl,["slideractive"],r.sliderActive_),r.on(r.volumeControl,["sliderinactive"],r.sliderInactive_),r}yt(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){c.a.isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),qe(o.a,"keyup",et(this,this.handleKeyPress))},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),We(o.a,"keyup",et(this,this.handleKeyPress))},n.handleKeyPress=function(e){c.a.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(vt);Nr.prototype.options_={children:["muteToggle","volumeControl"]},vt.registerComponent("VolumePanel",Nr);var Lr=function(e){function t(t,n){var r;return r=e.call(this,t,n)||this,n&&(r.menuButton_=n.menuButton),r.focusedChild_=-1,r.on("keydown",r.handleKeyDown),r.boundHandleBlur_=et(Mt(r),r.handleBlur),r.boundHandleTapClick_=et(Mt(r),r.handleTapClick),r}yt(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof vt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof vt&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=ae(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),qe(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||o.a.activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){c.a.isEventKey(e,"Left")||c.a.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(c.a.isEventKey(e,"Right")||c.a.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].className&&/vjs-menu-title/.test(t[0].className)&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(vt);vt.registerComponent("Menu",Lr);var Or=function(e){function t(t,n){var r;void 0===n&&(n={}),(r=e.call(this,t,n)||this).menuButton_=new ir(t,n),r.menuButton_.controlText(r.controlText_),r.menuButton_.el_.setAttribute("aria-haspopup","true");var i=ir.prototype.buildCSSClass();return r.menuButton_.el_.className=r.buildCSSClass()+" "+i,r.menuButton_.removeClass("vjs-control"),r.addChild(r.menuButton_),r.update(),r.enabled_=!0,r.on(r.menuButton_,"tap",r.handleClick),r.on(r.menuButton_,"click",r.handleClick),r.on(r.menuButton_,"keydown",r.handleKeyDown),r.on(r.menuButton_,"mouseenter",(function(){r.addClass("vjs-hover"),r.menu.show(),qe(o.a,"keyup",et(Mt(r),r.handleMenuKeyUp))})),r.on("mouseleave",r.handleMouseLeave),r.on("keydown",r.handleSubmenuKeyDown),r}yt(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var e=new Lr(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=ae("li",{className:"vjs-menu-title",innerHTML:gt(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;var n=new vt(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var r=0;r<this.items.length;r++)e.addItem(this.items[r]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+ir.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),We(o.a,"keyup",et(this,this.handleMenuKeyUp))},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){c.a.isEventKey(e,"Esc")||c.a.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),c.a.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(c.a.isEventKey(e,"Up")||c.a.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(c.a.isEventKey(e,"Esc")||c.a.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(c.a.isEventKey(e,"Esc")||c.a.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),c.a.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Ct&&re())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(vt);vt.registerComponent("MenuButton",Or);var Rr=function(e){function t(t,n){var r,i=n.tracks;if((r=e.call(this,t,n)||this).items.length<=1&&r.hide(),!i)return Mt(r);var a=et(Mt(r),r.update);return i.addEventListener("removetrack",a),i.addEventListener("addtrack",a),r.player_.on("ready",a),r.player_.on("dispose",(function(){i.removeEventListener("removetrack",a),i.removeEventListener("addtrack",a)})),r}return yt(t,e),t}(Or);vt.registerComponent("TrackButton",Rr);var jr=["Tab","Esc","Up","Down","Right","Left"],Pr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).selectable=n.selectable,r.isSelected_=n.selected||!1,r.multiSelectable=n.multiSelectable,r.selected(r.isSelected_),r.selectable?r.multiSelectable?r.el_.setAttribute("role","menuitemcheckbox"):r.el_.setAttribute("role","menuitemradio"):r.el_.setAttribute("role","menuitem"),r}yt(t,e);var n=t.prototype;return n.createEl=function(t,n,r){return this.nonIconControl=!0,e.prototype.createEl.call(this,"li",X({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},n),r)},n.handleKeyDown=function(t){jr.some((function(e){return c.a.isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Zn);vt.registerComponent("MenuItem",Pr);var kr=function(e){function t(t,n){var r,a=n.track,s=t.textTracks();n.label=a.label||a.language||"Unknown",n.selected="showing"===a.mode,(r=e.call(this,t,n)||this).track=a,r.kinds=(n.kinds||[n.kind||r.track.kind]).filter(Boolean);var u,l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(Mt(r),t)},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleSelectedLanguageChange.apply(Mt(r),t)};(t.on(["loadstart","texttrackchange"],l),s.addEventListener("change",l),s.addEventListener("selectedlanguagechange",c),r.on("dispose",(function(){t.off(["loadstart","texttrackchange"],l),s.removeEventListener("change",l),s.removeEventListener("selectedlanguagechange",c)})),void 0===s.onchange)&&r.on(["tap","click"],(function(){if("object"!=typeof i.a.Event)try{u=new i.a.Event("change")}catch(e){}u||(u=o.a.createEvent("Event")).initEvent("change",!0,!0),s.dispatchEvent(u)}));return r.handleTracksChange(),r}yt(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,r=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),r)for(var i=0;i<r.length;i++){var a=r[i];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(Pr);vt.registerComponent("TextTrackMenuItem",kr);var Ur=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}yt(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,r=0,i=t.length;r<i;r++){var a=t[r];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(kr);vt.registerComponent("OffTextTrackMenuItem",Ur);var Br=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return yt(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=kr),this.label_&&(n=this.label_+" off"),e.push(new Ur(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var r=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var i=0;i<r.length;i++){var a=r[i];if(this.kinds_.indexOf(a.kind)>-1){var o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},t}(Rr);vt.registerComponent("TextTrackButton",Br);var Fr=function(e){function t(t,n){var r,i=n.track,a=n.cue,o=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=o&&o<a.endTime,(r=e.call(this,t,n)||this).track=i,r.cue=a,i.addEventListener("cuechange",et(Mt(r),r.update)),r}yt(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(e){var t=this.cue,n=this.player_.currentTime();this.selected(t.startTime<=n&&n<t.endTime)},t}(Pr);vt.registerComponent("ChaptersTrackMenuItem",Fr);var zr=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){this.track_&&(!t||"addtrack"!==t.type&&"removetrack"!==t.type)||this.setTrack(this.findChaptersTrack()),e.prototype.update.call(this)},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(gt(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,r=t.length;n<r;n++){var i=t[n],a=new Fr(this.player_,{track:this.track_,cue:i});e.push(a)}return e},t}(Br);zr.prototype.kind_="chapters",zr.prototype.controlText_="Chapters",vt.registerComponent("ChaptersButton",zr);var Gr=function(e){function t(t,n,r){var i;i=e.call(this,t,n,r)||this;var a=t.textTracks(),o=et(Mt(i),i.handleTracksChange);return a.addEventListener("change",o),i.on("dispose",(function(){a.removeEventListener("change",o)})),i}yt(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,r=0,i=t.length;r<i;r++){var a=t[r];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Br);Gr.prototype.kind_="descriptions",Gr.prototype.controlText_="Descriptions",vt.registerComponent("DescriptionsButton",Gr);var Hr=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(Br);Hr.prototype.kind_="subtitles",Hr.prototype.controlText_="Subtitles",vt.registerComponent("SubtitlesButton",Hr);var Yr=function(e){function t(t,n){var r;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(r=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),r.controlText(", opens "+n.kind+" settings dialog"),r}return yt(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(kr);vt.registerComponent("CaptionSettingsMenuItem",Yr);var Vr=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Yr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(Br);Vr.prototype.kind_="captions",Vr.prototype.controlText_="Captions",vt.registerComponent("CaptionsButton",Vr);var Qr=function(e){function t(){return e.apply(this,arguments)||this}return yt(t,e),t.prototype.createEl=function(t,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"captions"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Captions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,X({innerHTML:i},n),r)},t}(kr);vt.registerComponent("SubsCapsMenuItem",Qr);var qr=function(e){function t(t,n){var r;return void 0===n&&(n={}),(r=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(r.player_.language_)>-1&&(r.label_="captions"),r.menuButton_.controlText(gt(r.label_)),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new Yr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=e.prototype.createItems.call(this,t,Qr)},t}(Br);qr.prototype.kinds_=["captions","subtitles"],qr.prototype.controlText_="Subtitles",vt.registerComponent("SubsCapsButton",qr);var Wr=function(e){function t(t,n){var r,i=n.track,a=t.audioTracks();n.label=i.label||i.language||"Unknown",n.selected=i.enabled,(r=e.call(this,t,n)||this).track=i,r.addClass("vjs-"+i.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.handleTracksChange.apply(Mt(r),t)};return a.addEventListener("change",o),r.on("dispose",(function(){a.removeEventListener("change",o)})),r}yt(t,e);var n=t.prototype;return n.createEl=function(t,n,r){var i='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);return"main-desc"===this.options_.track.kind&&(i+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      "),i+="</span>",e.prototype.createEl.call(this,t,X({innerHTML:i},n),r)},n.handleClick=function(t){var n=this.player_.audioTracks();e.prototype.handleClick.call(this,t);for(var r=0;r<n.length;r++){var i=n[r];i.enabled=i===this.track}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(Pr);vt.registerComponent("AudioTrackMenuItem",Wr);var Xr=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var r=t[n];e.push(new Wr(this.player_,{track:r,selectable:!0,multiSelectable:!1}))}return e},t}(Rr);Xr.prototype.controlText_="Audio Track",vt.registerComponent("AudioTrackButton",Xr);var Kr=function(e){function t(t,n){var r,i=n.rate,a=parseFloat(i,10);return n.label=i,n.selected=1===a,n.selectable=!0,n.multiSelectable=!1,(r=e.call(this,t,n)||this).label=i,r.rate=a,r.on(t,"ratechange",r.update),r}yt(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(Pr);Kr.prototype.contentElType="button",vt.registerComponent("PlaybackRateMenuItem",Kr);var Zr=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).updateVisibility(),r.updateLabel(),r.on(t,"loadstart",r.updateVisibility),r.on(t,"ratechange",r.updateLabel),r}yt(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelEl_=ae("div",{className:"vjs-playback-rate-value",innerHTML:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createMenu=function(){var e=new Lr(this.player()),t=this.playbackRates();if(t)for(var n=t.length-1;n>=0;n--)e.addChild(new Kr(this.player(),{rate:t[n]+"x"}));return e},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){for(var t=this.player().playbackRate(),n=this.playbackRates(),r=n[0],i=0;i<n.length;i++)if(n[i]>t){r=n[i];break}this.player().playbackRate(r)},n.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")},t}(Or);Zr.prototype.controlText_="Playback Rate",vt.registerComponent("PlaybackRateMenuButton",Zr);var Jr=function(e){function t(){return e.apply(this,arguments)||this}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},t}(vt);vt.registerComponent("Spacer",Jr);var $r=function(e){function t(){return e.apply(this,arguments)||this}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML=" ",t},t}(Jr);vt.registerComponent("CustomControlSpacer",$r);var ei=function(e){function t(){return e.apply(this,arguments)||this}return yt(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(vt);ei.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in o.a&&ei.prototype.options_.children.splice(ei.prototype.options_.children.length-1,0,"pictureInPictureToggle"),vt.registerComponent("ControlBar",ei);var ti=function(e){function t(t,n){var r;return(r=e.call(this,t,n)||this).on(t,"error",r.open),r}yt(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(ln);ti.prototype.options_=mt(ln.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),vt.registerComponent("ErrorDisplay",ti);var ni=["#000","Black"],ri=["#00F","Blue"],ii=["#0FF","Cyan"],ai=["#0F0","Green"],oi=["#F0F","Magenta"],si=["#F00","Red"],ui=["#FFF","White"],li=["#FF0","Yellow"],ci=["1","Opaque"],di=["0.5","Semi-Transparent"],hi=["0","Transparent"],fi={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ni,ui,si,ai,ri,li,oi,ii]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ci,di,hi]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[ui,ni,si,ai,ri,li,oi,ii]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ci,di]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[hi,di,ci]}};function pi(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}fi.windowColor.options=fi.backgroundColor.options;var gi=function(e){function t(t,n){var r;return n.temporary=!1,(r=e.call(this,t,n)||this).updateDisplay=et(Mt(r),r.updateDisplay),r.fill(),r.hasBeenOpened_=r.hasBeenFilled_=!0,r.endDialog=ae("p",{className:"vjs-control-text",textContent:r.localize("End of dialog window.")}),r.el().appendChild(r.endDialog),r.setDefaults(),void 0===n.persistTextTrackSettings&&(r.options_.persistTextTrackSettings=r.options_.playerOptions.persistTextTrackSettings),r.on(r.$(".vjs-done-button"),"click",(function(){r.saveSettings(),r.close()})),r.on(r.$(".vjs-default-button"),"click",(function(){r.setDefaults(),r.updateDisplay()})),W(fi,(function(e){r.on(r.$(e.selector),"change",r.updateDisplay)})),r.options_.persistTextTrackSettings&&r.restoreSettings(),r}yt(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var r=this;void 0===t&&(t=""),void 0===n&&(n="label");var i=fi[e],a=i.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(i.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(i.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',r.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return ae("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return ae("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return ae("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,r=this;return t=function(e,t,n){var i,a,o=(i=r.$(t.selector),a=t.parser,pi(i.options[i.options.selectedIndex].value,a));return void 0!==o&&(e[n]=o),e},void 0===(n={})&&(n=0),q(e=fi).reduce((function(n,r){return t(n,e[r],r)}),n)},n.setValues=function(e){var t=this;W(fi,(function(n,r){!function(e,t,n){if(t)for(var r=0;r<e.options.length;r++)if(pi(e.options[r].value,n)===t){e.selectedIndex=r;break}}(t.$(n.selector),e[r],n.parser)}))},n.setDefaults=function(){var e=this;W(fi,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(i.a.localStorage.getItem("vjs-text-track-settings"))}catch(e){Y.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?i.a.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):i.a.localStorage.removeItem("vjs-text-track-settings")}catch(e){Y.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(ln);vt.registerComponent("TextTrackSettings",gi);var mi=function(e){function t(t,n){var r,a=n.ResizeObserver||i.a.ResizeObserver;null===n.ResizeObserver&&(a=!1);var o=mt({createEl:!a,reportTouchActivity:!1},n);return(r=e.call(this,t,o)||this).ResizeObserver=n.ResizeObserver||i.a.ResizeObserver,r.loadListener_=null,r.resizeObserver_=null,r.debouncedHandler_=function(e,t,n,r){var a;void 0===r&&(r=i.a);var o=function(){var i=this,o=arguments,s=function(){a=null,s=null,n||e.apply(i,o)};!a&&n&&e.apply(i,o),r.clearTimeout(a),a=r.setTimeout(s,t)};return o.cancel=function(){r.clearTimeout(a),a=null},o}((function(){r.resizeHandler()}),100,!1,Mt(r)),a?(r.resizeObserver_=new r.ResizeObserver(r.debouncedHandler_),r.resizeObserver_.observe(t.el())):(r.loadListener_=function(){if(r.el_&&r.el_.contentWindow){var e=r.debouncedHandler_,t=r.unloadListener_=function(){We(this,"resize",e),We(this,"unload",t),t=null};qe(r.el_.contentWindow,"unload",t),qe(r.el_.contentWindow,"resize",e)}},r.one("load",r.loadListener_)),r}yt(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(vt);vt.registerComponent("ResizeManager",mi);var vi=function(e){function t(t,n){var r,i=mt({createEl:!1},n);return(r=e.call(this,t,i)||this).reset_(),r.on(r.player_,"durationchange",r.handleDurationchange),Bt&&"hidden"in o.a&&"visibilityState"in o.a&&r.on(o.a,"visibilitychange",r.handleVisibilityChange),r}yt(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(o.a.hidden?this.stopTracking():this.startTracking())},n.isBehind_=function(){if(!this.timeupdateSeen_)return!1;var e=this.liveCurrentTime(),t=this.player_.currentTime(),n=2*this.seekableIncrement_+.07;return e!==1/0&&e-n>=t},n.trackLive_=function(){this.pastSeekEnd_=this.pastSeekEnd_;var e=this.player_.seekable();if(e&&e.length){var t,n,r,i=this.seekableEnd();i!==this.lastSeekEnd_&&(this.lastSeekEnd_&&(this.seekableIncrementList_=this.seekableIncrementList_.slice(-11),this.seekableIncrementList_.push(Math.abs(i-this.lastSeekEnd_)),this.seekableIncrementList_.length>3&&(this.seekableIncrement_=(t=this.seekableIncrementList_,n=Math.floor(t.length/2),r=[].concat(t).sort((function(e,t){return e-t})),t.length%2!=0?r[n]:(r[n-1]+r[n])/2))),this.pastSeekEnd_=0,this.lastSeekEnd_=i,this.trigger("seekableendchange")),this.pastSeekEnd_=this.pastSeekEnd()+.03,this.isBehind_()!==this.behindLiveEdge()&&(this.behindLiveEdge_=this.isBehind_(),this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.player_.duration()===1/0?this.startTracking():this.stopTracking()},n.startTracking=function(){var e=this;this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLive_,30),this.trackLive_(),this.on(this.player_,"play",this.trackLive_),this.on(this.player_,"pause",this.trackLive_),this.timeupdateSeen_||(this.one(this.player_,"play",this.handlePlay),this.handleTimeupdate=function(){e.timeupdateSeen_=!0,e.handleTimeupdate=null},this.one(this.player_,"timeupdate",this.handleTimeupdate)))},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge)},n.reset_=function(){this.pastSeekEnd_=0,this.lastSeekEnd_=null,this.behindLiveEdge_=null,this.timeupdateSeen_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.seekableIncrement_=12,this.seekableIncrementList_=[],this.off(this.player_,"play",this.trackLive_),this.off(this.player_,"pause",this.trackLive_),this.off(this.player_,"play",this.handlePlay),this.off(this.player_,"timeupdate",this.seekToLiveEdge),this.handleTimeupdate&&(this.off(this.player_,"timeupdate",this.handleTimeupdate),this.handleTimeupdate=null)},n.stopTracking=function(){this.isTracking()&&this.reset_()},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?1/0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){return this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.atLiveEdge()||(this.player_.currentTime(this.liveCurrentTime()),this.player_.paused()&&this.player_.play())},n.dispose=function(){this.stopTracking(),e.prototype.dispose.call(this)},t}(vt);vt.registerComponent("LiveTracker",vi);var yi=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),r=[],i="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===r.indexOf(o)&&r.push(o)}return!!r.length&&(1===r.length&&(i=r[0]),e.triggerSourceset(i),!0)},_i=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=o.a.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=o.a.createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",i.a.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Ti=function(e,t){for(var n={},r=0;r<e.length&&!((n=Object.getOwnPropertyDescriptor(e[r],t))&&n.set&&n.get);r++);return n.enumerable=!0,n.configurable=!0,n},Ei=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},r=function(e){return Ti([e.el(),i.a.HTMLMediaElement.prototype,i.a.Element.prototype,_i],"innerHTML")}(e),a=function(n){return function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];var o=n.apply(t,i);return yi(e),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=a(n[e]))})),Object.defineProperty(t,"innerHTML",mt(r,{set:a(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},Mi=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?wn(i.a.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return i.a.Element.prototype.setAttribute.call(this,"src",e),e}}),bi=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return Ti([e.el(),i.a.HTMLMediaElement.prototype,Mi],"src")}(e),r=t.setAttribute,a=t.load;Object.defineProperty(t,"src",mt(n,{set:function(r){var i=n.set.call(t,r);return e.triggerSourceset(t.src),i}})),t.setAttribute=function(n,i){var a=r.call(t,n,i);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=a.call(t);return yi(e)||(e.triggerSourceset(""),Ei(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):yi(e)||Ei(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=a,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},Ai=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i=t.source,a=!1;if(i&&(r.el_.currentSrc!==i.src||t.tag&&3===t.tag.initNetworkState_)?r.setSource(i):r.handleLateInit_(r.el_),t.enableSourceset&&r.setupSourcesetHandling_(),r.el_.hasChildNodes()){for(var o=r.el_.childNodes,s=o.length,u=[];s--;){var l=o[s];"track"===l.nodeName.toLowerCase()&&(r.featuresNativeTextTracks?(r.remoteTextTrackEls().addTrackElement_(l),r.remoteTextTracks().addTrack(l.track),r.textTracks().addTrack(l.track),a||r.el_.hasAttribute("crossorigin")||!xn(l.src)||(a=!0)):u.push(l))}for(var c=0;c<u.length;c++)r.el_.removeChild(u[c])}return r.proxyNativeTracks_(),r.featuresNativeTextTracks&&a&&Y.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),r.restoreMetadataTracksInIOSNativePlayer_(),(Ht||Dt||Rt)&&!0===t.nativeControlsForTouch&&r.setControls(!0),r.proxyWebkitFullscreen_(),r.triggerReady(),r}yt(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){bi(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var r=t[n];"metadata"===r.kind&&e.push({track:r,storedMode:r.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var r=function n(){for(var r=0;r<e.length;r++){var i=e[r];"disabled"===i.track.mode&&i.track.mode!==i.storedMode&&(i.track.mode=i.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",r),t.addEventListener("change",r)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",r)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var r=e.toLowerCase();this[r+"TracksListeners_"]&&Object.keys(this[r+"TracksListeners_"]).forEach((function(e){n.el()[r+"Tracks"].removeEventListener(e,n[r+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[r+"TracksListeners_"]=null,this.proxyNativeTracksForType_(r)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=Rn[e],r=this.el()[n.getterName],i=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&r&&r.addEventListener){var a={change:function(e){i.trigger({type:"change",target:i,currentTarget:i,srcElement:i})},addtrack:function(e){i.addTrack(e.track)},removetrack:function(e){i.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<i.length;t++){for(var n=!1,a=0;a<r.length;a++)if(r[a]===i[t]){n=!0;break}n||e.push(i[t])}for(;e.length;)i.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];r.addEventListener(e,n),t.on("dispose",(function(t){return r.removeEventListener(e,n)}))})),this.on("loadstart",o),this.on("dispose",(function(e){return t.off("loadstart",o)}))}},n.proxyNativeTracks_=function(){var e=this;Rn.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=o.a.createElement("video");var r=mt({},this.options_.tag&&fe(this.options_.tag));Ht&&!0===this.options_.nativeControlsForTouch||delete r.controls,he(e,X(r,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&ge(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],a=0;a<i.length;a++){var s=i[a],u=this.options_[s];void 0!==u&&(u?ge(e,s,s):me(e,s),e[s]=u)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var r=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",r),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",r),t||this.trigger("loadstart")}))}var i=["loadstart"];i.push("loadedmetadata"),e.readyState>=2&&i.push("loadeddata"),e.readyState>=3&&i.push("canplay"),e.readyState>=4&&i.push("canplaythrough"),this.ready((function(){i.forEach((function(e){this.trigger(e)}),this)}))}},n.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(e){Y(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;if(this.el_.duration===1/0&&Lt&&kt&&0===this.el_.currentTime){return this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN}return this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=i.a.navigator&&i.a.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout((function(){e.pause(),e.webkitEnterFullScreen()}),0)):e.webkitEnterFullScreen()},n.exitFullScreen=function(){this.el_.webkitExitFullScreen()},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):e.prototype.addTextTrack.call(this,t,n,r)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=o.a.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var r=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),r=n.length;r--;)t!==n[r]&&t!==n[r].track||this.el().removeChild(n[r])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),i.a.performance&&"function"==typeof i.a.performance.now?e.creationTime=i.a.performance.now():i.a.performance&&i.a.performance.timing&&"number"==typeof i.a.performance.timing.navigationStart&&(e.creationTime=i.a.Date.now()-i.a.performance.timing.navigationStart),e},t}(kn);if(te()){Ai.TEST_VID=o.a.createElement("video");var wi=o.a.createElement("track");wi.kind="captions",wi.srclang="en",wi.label="English",Ai.TEST_VID.appendChild(wi)}Ai.isSupported=function(){try{Ai.TEST_VID.volume=.5}catch(e){return!1}return!(!Ai.TEST_VID||!Ai.TEST_VID.canPlayType)},Ai.canPlayType=function(e){return Ai.TEST_VID.canPlayType(e)},Ai.canPlaySource=function(e,t){return Ai.canPlayType(e.type)},Ai.canControlVolume=function(){try{var e=Ai.TEST_VID.volume;return Ai.TEST_VID.volume=e/2+.1,e!==Ai.TEST_VID.volume}catch(e){return!1}},Ai.canMuteVolume=function(){try{var e=Ai.TEST_VID.muted;return Ai.TEST_VID.muted=!e,Ai.TEST_VID.muted?ge(Ai.TEST_VID,"muted","muted"):me(Ai.TEST_VID,"muted"),e!==Ai.TEST_VID.muted}catch(e){return!1}},Ai.canControlPlaybackRate=function(){if(Lt&&kt&&Ut<58)return!1;try{var e=Ai.TEST_VID.playbackRate;return Ai.TEST_VID.playbackRate=e/2+.1,e!==Ai.TEST_VID.playbackRate}catch(e){return!1}},Ai.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(o.a.createElement("video"),"src",{get:e,set:e}),Object.defineProperty(o.a.createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(o.a.createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(o.a.createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},Ai.supportsNativeTextTracks=function(){return zt||Ct&&kt},Ai.supportsNativeVideoTracks=function(){return!(!Ai.TEST_VID||!Ai.TEST_VID.videoTracks)},Ai.supportsNativeAudioTracks=function(){return!(!Ai.TEST_VID||!Ai.TEST_VID.audioTracks)},Ai.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Ai.prototype.featuresVolumeControl=Ai.canControlVolume(),Ai.prototype.featuresMuteControl=Ai.canMuteVolume(),Ai.prototype.featuresPlaybackRate=Ai.canControlPlaybackRate(),Ai.prototype.featuresSourceset=Ai.canOverrideAttributes(),Ai.prototype.movingMediaElementInDOM=!Ct,Ai.prototype.featuresFullscreenResize=!0,Ai.prototype.featuresProgressEvents=!0,Ai.prototype.featuresTimeupdateEvents=!0,Ai.prototype.featuresNativeTextTracks=Ai.supportsNativeTextTracks(),Ai.prototype.featuresNativeVideoTracks=Ai.supportsNativeVideoTracks(),Ai.prototype.featuresNativeAudioTracks=Ai.supportsNativeAudioTracks();var Si=Ai.TEST_VID&&Ai.TEST_VID.constructor.prototype.canPlayType,xi=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Ai.patchCanPlayType=function(){Ot>=4&&!jt&&!kt&&(Ai.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&xi.test(e)?"maybe":Si.call(this,e)})},Ai.unpatchCanPlayType=function(){var e=Ai.TEST_VID.constructor.prototype.canPlayType;return Ai.TEST_VID.constructor.prototype.canPlayType=Si,e},Ai.patchCanPlayType(),Ai.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},Ai.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){Ai.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){Ai.prototype["set"+gt(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach((function(e){Ai.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach((function(e){Ai.prototype["set"+gt(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){Ai.prototype[e]=function(){return this.el_[e]()}})),kn.withSourceHandlers(Ai),Ai.nativeSourceHandler={},Ai.nativeSourceHandler.canPlayType=function(e){try{return Ai.TEST_VID.canPlayType(e)}catch(e){return""}},Ai.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return Ai.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Sn(e.src);return Ai.nativeSourceHandler.canPlayType("video/"+n)}return""},Ai.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},Ai.nativeSourceHandler.dispose=function(){},Ai.registerSourceHandler(Ai.nativeSourceHandler),kn.registerTech("Html5",Ai);var Di=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Ii={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Ci=["tiny","xsmall","small","medium","large","xlarge","huge"],Ni={};Ci.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Ni[e]="vjs-layout-"+t}));var Li={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Oi=function(e){function t(n,r,i){var a;if(n.id=n.id||r.id||"vjs_video_"+Fe(),(r=X(t.getTagSettings(n),r)).initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if("function"==typeof n.closest){var o=n.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var s=n;s&&1===s.nodeType;){if(fe(s).hasOwnProperty("lang")){r.language=s.getAttribute("lang");break}s=s.parentNode}if((a=e.call(this,null,r,i)||this).boundDocumentFullscreenChange_=et(Mt(a),a.documentFullscreenChange_),a.boundFullWindowOnEscKey_=et(Mt(a),a.fullWindowOnEscKey),a.log=V(a.id_),a.fsApi_=Kt,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&fe(n),a.language(a.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach((function(e){u[e.toLowerCase()]=r.languages[e]})),a.languages_=u}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=r.poster||"",a.controls_=!!r.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach((function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),dt(Mt(a),{eventBusKey:"el_"}),a.fluid_&&a.on("playerreset",a.updateStyleEl_);var l=mt(a.options_);r.plugins&&Object.keys(r.plugins).forEach((function(e){a[e](r.plugins[e])})),a.options_.playerOptions=l,a.middleware_=[],a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Ht&&a.addClass("vjs-touch-enabled"),Ct||a.addClass("vjs-workinghover"),t.players[a.id_]=Mt(a);var c="7.6.6".split(".")[0];return a.addClass("vjs-v"+c),a.userActive(!0),a.reportUserActivity(),a.one("play",a.listenForUserActivity_),a.on("stageclick",a.handleStageClick_),a.on("keydown",a.handleKeyDown),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a}yt(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),We(o.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),We(o.a,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Bn[this.id()]=null,Pn.names.forEach((function(e){var t=Pn[e],r=n[t.getterName]();r&&r.off&&r.off()})),e.prototype.dispose.call(this)},n.createEl=function(){var t,n=this.tag,r=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),a="video-js"===this.tag.tagName.toLowerCase();r?t=this.el_=n.parentNode:a||(t=this.el_=e.prototype.createEl.call(this,"div"));var s=fe(n);if(a){for(t=this.el_=n,n=this.tag=o.a.createElement("video");t.children.length;)n.appendChild(t.firstChild);ue(t,"video-js")||le(t,"video-js"),t.appendChild(n),r=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}if(n.setAttribute("tabindex","-1"),s.tabindex="-1",(Bt||kt&&Gt)&&(n.setAttribute("role","application"),s.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in s&&delete s.width,"height"in s&&delete s.height,Object.getOwnPropertyNames(s).forEach((function(e){a&&"class"===e||t.setAttribute(e,s[e]),a&&n.setAttribute(e,s[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==i.a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ke("vjs-styles-dimensions");var u=Ie(".vjs-styles-defaults"),l=Ie("head");l.insertBefore(this.styleEl_,u?u.nextSibling:l.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var c=n.getElementsByTagName("a"),d=0;d<c.length;d++){var h=c.item(d);le(h,"vjs-hidden"),h.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!r&&n.parentNode.insertBefore(t,n),se(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=t,t},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t)return this[n]=void 0,void this.updateStyleEl_();var r=parseFloat(t);isNaN(r)?Y.error('Improper value "'+t+'" supplied for for '+e):(this[n]=r,this.updateStyleEl_())},n.fluid=function(e){if(void 0===e)return!!this.fluid_;var t,n;this.fluid_=!!e,rt(this)&&this.off("playerreset",this.updateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),rt(t=function(){this.on("playerreset",this.updateStyleEl_)})?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==i.a.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,r=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),a=r[1]/r[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/a:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*a,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Ue(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*a+"%;\n      }\n    ")}else{var o="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,u=this.tech_&&this.tech_.el();u&&(o>=0&&(u.width=o),s>=0&&(u.height=s))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var r=gt(e),i=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==r&&this.tag&&(kn.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;var a={source:t,autoplay:"string"!=typeof this.autoplay()&&this.autoplay(),nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+i+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Pn.names.forEach((function(e){var t=Pn[e];a[t.getterName]=n[t.privateName]})),X(a,this.options_[r]),X(a,this.options_[i]),X(a,this.options_[e.toLowerCase()]),this.tag&&(a.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var o=kn.getTech(e);if(!o)throw new Error("No Tech named '"+r+"' exists! '"+r+"' should be registered using videojs.registerTech()'");this.tech_=new o(a),this.tech_.ready(et(this,this.handleTechReady_),!0),un(this.textTracksJson_||[],this.tech_),Di.forEach((function(e){n.on(n.tech_,e,n["handleTech"+gt(e)+"_"])})),Object.keys(Ii).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Ii[e]+"_"].bind(n),event:t}):n["handleTech"+Ii[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"sourceset",this.handleTechSourceset_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"enterpictureinpicture",this.handleTechEnterPictureInPicture_),this.on(this.tech_,"leavepictureinpicture",this.handleTechLeavePictureInPicture_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.on(this.tech_,"ratechange",this.handleTechRateChange_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===r&&this.tag||se(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e=this;Pn.names.forEach((function(t){var n=Pn[t];e[n.privateName]=e[n.getterName]()})),this.textTracksJson_=sn(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&Y.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"mouseup",this.handleTechClick_),this.on(this.tech_,"dblclick",this.handleTechDoubleClick_),this.on(this.tech_,"touchstart",this.handleTechTouchStart_),this.on(this.tech_,"touchmove",this.handleTechTouchMove_),this.on(this.tech_,"touchend",this.handleTechTouchEnd_),this.on(this.tech_,"tap",this.handleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_),this.off(this.tech_,"touchstart",this.handleTechTouchStart_),this.off(this.tech_,"touchmove",this.handleTechTouchMove_),this.off(this.tech_,"touchend",this.handleTechTouchEnd_),this.off(this.tech_,"mouseup",this.handleTechClick_),this.off(this.tech_,"dblclick",this.handleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,r=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var r=t.play();if(rn(r))return r.catch(n)};if("any"===e&&!0!==this.muted()?rn(n=this.play())&&(n=n.catch(r)):n="muted"===e&&!0!==this.muted()?r():this.play(),rn(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(n){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var r=e.$$("source"),i=0;i<r.length;i++){var a=r[i];if(a.type&&a.src&&a.src===t)return a.type}return Wn(t)}(this,t)),this.cache_.source=mt({},e,{src:t,type:n});for(var r=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),i=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var u=fe(a[s]);i.push(u),u.src&&u.src===t&&o.push(u.src)}o.length&&!r.length?this.cache_.sources=i:r.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},r=this.currentSource().src,i=e.src;r&&!/^blob:/.test(r)&&/^blob:/.test(i)&&(!this.lastSource_||this.lastSource_.tech!==i&&this.lastSource_.player!==r)&&(n=function(){}),n(i),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(Y.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){xe(e)&&this.controls_&&(this.paused()?an(this.play()):this.pause())},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=this.el(),n=o.a[this.fsApi_.fullscreenElement]===t;!n&&t.matches?n=t.matches(":"+this.fsApi_.fullscreen):!n&&t.msMatchesSelector&&(n=t.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(n),!1===this.isFullscreen()&&We(o.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed&&this.trigger("fullscreenchange")},n.handleTechFullscreenChange_=function(e,t){t&&this.isFullscreen(t.isFullscreen),this.trigger("fullscreenchange")},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in Yn)return function(e,t,n,r){return t[n](e.reduce(Qn(n),r))}(this.middleware_,this.tech_,e,t);if(e in Vn)return Gn(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw Y(e),e}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Hn)return function(e,t,n){return e.reduceRight(Qn(n),t[n]())}(this.middleware_,this.tech_,e);if(e in Vn)return Gn(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw Y("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw Y("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw Y(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||i.a.Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=an),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!zt&&!Ct||this.load());var r=this.techGet_("play");null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||qt(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),void this.techCall_("setCurrentTime",e)):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?(this.addClass("vjs-live"),this.options_.liveui&&this.player_.liveTracker&&this.addClass("vjs-liveui")):(this.removeClass("vjs-live"),this.removeClass("vjs-liveui")),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=qt(0,0)),e},n.bufferedPercent=function(){return Wt(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){return void 0!==e?(this.isFullscreen_=!!e,void this.toggleFullscreenClass_()):!!this.isFullscreen_},n.requestFullscreen=function(e){var t;this.isFullscreen(!0),this.fsApi_.requestFullscreen?(qe(o.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),an(this.el_[this.fsApi_.requestFullscreen](t))):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},n.exitFullscreen=function(){this.isFullscreen(!1),this.fsApi_.requestFullscreen?an(o.a[this.fsApi_.exitFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))},n.enterFullWindow=function(){this.isFullWindow=!0,this.docOrigOverflow=o.a.documentElement.style.overflow,qe(o.a,"keydown",this.boundFullWindowOnEscKey_),o.a.documentElement.style.overflow="hidden",le(o.a.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){c.a.isEventKey(e,"Esc")&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())},n.exitFullWindow=function(){this.isFullWindow=!1,We(o.a,"keydown",this.boundFullWindowOnEscKey_),o.a.documentElement.style.overflow=this.docOrigOverflow,ce(o.a.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in o.a)return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in o.a)return o.a.exitPictureInPicture()},n.handleKeyDown=function(e){var t=this.options_.userActions;if(t&&t.hotkeys){(function(e){var t=e.tagName.toLowerCase();if(e.isContentEditable)return!0;if("input"===t)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(e.type);return-1!==["textarea"].indexOf(t)})(this.el_.ownerDocument.activeElement)||("function"==typeof t.hotkeys?t.hotkeys.call(this,e):this.handleHotkeys(e))}},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,r=void 0===n?function(e){return c.a.isEventKey(e,"f")}:n,i=t.muteKey,a=void 0===i?function(e){return c.a.isEventKey(e,"m")}:i,s=t.playPauseKey,u=void 0===s?function(e){return c.a.isEventKey(e,"k")||c.a.isEventKey(e,"Space")}:s;if(r.call(this,e)){e.preventDefault(),e.stopPropagation();var l=vt.getComponent("FullscreenToggle");!1!==o.a[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else if(a.call(this,e)){e.preventDefault(),e.stopPropagation(),vt.getComponent("MuteToggle").prototype.handleClick.call(this,e)}else if(u.call(this,e)){e.preventDefault(),e.stopPropagation(),vt.getComponent("PlayToggle").prototype.handleClick.call(this,e)}},n.canPlayType=function(e){for(var t,n=0,r=this.options_.techOrder;n<r.length;n++){var i=r[n],a=kn.getTech(i);if(a||(a=vt.getComponent(i)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else Y.error('The "'+i+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n=this,r=this.options_.techOrder.map((function(e){return[e,kn.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(Y.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),i=function(e,t,n){var r;return e.some((function(e){return t.some((function(t){if(r=n(e,t))return!0}))})),r},a=function(e,t){var r=e[0];if(e[1].canPlaySource(t,n.options_[r.toLowerCase()]))return{source:t,tech:r}};return(this.options_.sourceOrder?i(e,r,(t=a,function(e,n){return t(n,e)})):i(r,e,a))||!1},n.src=function(e){var t=this;if(void 0===e)return this.cache_.src||"";var n=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):K(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[Xn({src:t})]:K(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[Xn(t)]:[];return t}(e);n.length?(this.changingSrc_=!0,this.cache_.sources=n,this.updateSourceCaches_(n[0]),zn(this,n[0],(function(e,r){var i,a;if(t.middleware_=r,t.cache_.sources=n,t.updateSourceCaches_(e),t.src_(e))return n.length>1?t.src(n.slice(1)):(t.changingSrc_=!1,t.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void t.triggerReady());i=r,a=t.tech_,i.forEach((function(e){return e.setTech&&e.setTech(a)}))}))):this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},n.src_=function(e){var t,n,r=this,i=this.selectSource([e]);return!i||(t=i.tech,n=this.techName_,gt(t)!==gt(n)?(this.changingSrc_=!0,this.loadTech_(i.tech,i.source),this.tech_.ready((function(){r.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||i.a.Promise;this.paused()||!t?this.doReset_():an(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),rt(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){if(void 0===e)return this.error_||null;if(this.options_.suppressNotSupportedError&&e&&e.message&&e.message===this.localize(this.options_.notSupportedMessage)){var t=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],t),void this.one("loadstart",(function(){this.off(["click","touchstart"],t)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new tn(e),this.addClass("vjs-error"),Y.error("(CODE:"+this.error_.code+" "+tn.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,r=et(this,this.reportUserActivity);this.on("mousedown",(function(){r(),this.clearInterval(e),e=this.setInterval(r,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,r())})),this.on("mouseup",(function(t){r(),this.clearInterval(e)}));var i,a=this.getChild("controlBar");!a||Ct||Lt||(a.on("mouseenter",(function(e){this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout,this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",r),this.on("keyup",r),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(i);var e=this.options_.inactivityTimeout;e<=0||(i=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()},n.languages=function(){return mt(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=mt(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var r=t[n];(r=mt(r)).player=void 0,e.tracks[n]=r}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var r=new ln(this,t);return this.addChild(r),r.on("dispose",(function(){n.removeChild(r)})),r.open(),r},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<Ci.length;n++){var r=Ci[n];if(t<=this.breakpoints_[r]){if(e===r)return;e&&this.removeClass(Ni[e]),this.addClass(Ni[r]),this.breakpoint_=r;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e?X(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=X({},Li,e),this.updateCurrentBreakpoint_(),X(this.breakpoints_))},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.updateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.updateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Ni[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=mt(e);var r=this.cache_.media,i=r.artwork,a=r.poster,o=r.src,s=r.textTracks;!i&&a&&(this.cache_.media.artwork=[{src:a,type:Wn(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:Wn(t.poster)}]),t}return mt(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=fe(e),r=n["data-setup"];if(ue(e,"vjs-fill")&&(n.fill=!0),ue(e,"vjs-fluid")&&(n.fluid=!0),null!==r){var i=u()(r||"{}"),a=i[0],o=i[1];a&&Y.error(a),X(n,o)}if(X(t,n),e.hasChildNodes())for(var s=e.childNodes,l=0,c=s.length;l<c;l++){var d=s[l],h=d.nodeName.toLowerCase();"source"===h?t.sources.push(fe(d)):"track"===h&&t.tracks.push(fe(d))}return t},n.flexNotSupported_=function(){var e=o.a.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},t}(vt);Pn.names.forEach((function(e){var t=Pn[e];Oi.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),Oi.players={};var Ri=i.a.navigator;Oi.prototype.options_={techOrder:kn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Ri&&(Ri.languages&&Ri.languages[0]||Ri.userLanguage||Ri.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){Oi.prototype[e]=function(){return this.techGet_(e)}})),Di.forEach((function(e){Oi.prototype["handleTech"+gt(e)+"_"]=function(){return this.trigger(e)}})),vt.registerComponent("Player",Oi);var ji={},Pi=function(e){return ji.hasOwnProperty(e)},ki=function(e){return Pi(e)?ji[e]:void 0},Ui=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},Bi=function(e,t,n){var r=(n?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},Fi=function(e,t){return t.prototype.name=e,function(){Bi(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=Et(t,[this].concat(r));return this[e]=function(){return a},Bi(this,a.getEventHash()),a}},zi=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,dt(this),delete this.trigger,ft(this,this.constructor.defaultState),Ui(t,this.name),this.dispose=et(this,this.dispose),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),Xe(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=Fi(e,ji[e])},e.isBasic=function(t){var n="string"==typeof t?ki(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(Pi(t))Y.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(Oi.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return ji[t]=n,"plugin"!==t&&(e.isBasic(n)?Oi.prototype[t]=function(e,t){var n=function(){Bi(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return Ui(this,e),Bi(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):Oi.prototype[t]=Fi(t,n)),n},e.deregisterPlugin=function(e){if("plugin"===e)throw new Error("Cannot de-register base plugin.");Pi(e)&&(delete ji[e],delete Oi.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(ji)),e.forEach((function(e){var n=ki(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=ki(e);return t&&t.VERSION||""},e}();zi.getPlugin=ki,zi.BASE_PLUGIN_NAME="plugin",zi.registerPlugin("plugin",zi),Oi.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},Oi.prototype.hasPlugin=function(e){return!!Pi(e)};var Gi=function(e){return 0===e.indexOf("#")?e.slice(1):e};function Hi(e,t,n){var r=Hi.getPlayer(e);if(r)return t&&Y.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&r.ready(n),r;var i="string"==typeof e?Ie("#"+Gi(e)):e;if(!ne(i))throw new TypeError("The element or ID supplied is not valid. (videojs)");i.ownerDocument.defaultView&&i.ownerDocument.body.contains(i)||Y.warn("The element supplied is not included in the DOM"),t=t||{},Hi.hooks("beforesetup").forEach((function(e){var n=e(i,mt(t));K(n)&&!Array.isArray(n)?t=mt(t,n):Y.error("please return an object in beforesetup hooks")}));var a=vt.getComponent("Player");return r=new a(i,t,n),Hi.hooks("setup").forEach((function(e){return e(r)})),r}if(Hi.hooks_={},Hi.hooks=function(e,t){return Hi.hooks_[e]=Hi.hooks_[e]||[],t&&(Hi.hooks_[e]=Hi.hooks_[e].concat(t)),Hi.hooks_[e]},Hi.hook=function(e,t){Hi.hooks(e,t)},Hi.hookOnce=function(e,t){Hi.hooks(e,[].concat(t).map((function(t){return function n(){return Hi.removeHook(e,n),t.apply(void 0,arguments)}})))},Hi.removeHook=function(e,t){var n=Hi.hooks(e).indexOf(t);return!(n<=-1)&&(Hi.hooks_[e]=Hi.hooks_[e].slice(),Hi.hooks_[e].splice(n,1),!0)},!0!==i.a.VIDEOJS_NO_DYNAMIC_STYLE&&te()){var Yi=Ie(".vjs-styles-defaults");if(!Yi){Yi=ke("vjs-styles-defaults");var Vi=Ie("head");Vi&&Vi.insertBefore(Yi,Vi.firstChild),Ue(Yi,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Re(1,Hi),Hi.VERSION="7.6.6",Hi.options=Oi.prototype.options_,Hi.getPlayers=function(){return Oi.players},Hi.getPlayer=function(e){var t,n=Oi.players;if("string"==typeof e){var r=Gi(e),i=n[r];if(i)return i;t=Ie("#"+r)}else t=e;if(ne(t)){var a=t,o=a.player,s=a.playerId;if(o||n[s])return o||n[s]}},Hi.getAllPlayers=function(){return Object.keys(Oi.players).map((function(e){return Oi.players[e]})).filter(Boolean)},Hi.players=Oi.players,Hi.getComponent=vt.getComponent,Hi.registerComponent=function(e,t){kn.isTech(t)&&Y.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),vt.registerComponent.call(vt,e,t)},Hi.getTech=kn.getTech,Hi.registerTech=kn.registerTech,Hi.use=function(e,t){Un[e]=Un[e]||[],Un[e].push(t)},Object.defineProperty(Hi,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Hi.middleware,"TERMINATOR",{value:Fn,writeable:!1,enumerable:!0}),Hi.browser=Yt,Hi.TOUCH_ENABLED=Ht,Hi.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},r={};for(var i in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),r=t):"function"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.super_=t)}(n,e),r)r.hasOwnProperty(i)&&(n.prototype[i]=r[i]);return n},Hi.mergeOptions=mt,Hi.bind=et,Hi.registerPlugin=zi.registerPlugin,Hi.deregisterPlugin=zi.deregisterPlugin,Hi.plugin=function(e,t){return Y.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),zi.registerPlugin(e,t)},Hi.getPlugins=zi.getPlugins,Hi.getPlugin=zi.getPlugin,Hi.getPluginVersion=zi.getPluginVersion,Hi.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Hi.options.languages=mt(Hi.options.languages,((n={})[e]=t,n)),Hi.options.languages[e]},Hi.log=Y,Hi.createLogger=V,Hi.createTimeRange=Hi.createTimeRanges=qt,Hi.formatTime=cr,Hi.setFormatTime=function(e){lr=e},Hi.resetFormatTime=function(){lr=ur},Hi.parseUrl=An,Hi.isCrossOrigin=xn,Hi.EventTarget=nt,Hi.on=qe,Hi.one=Ke,Hi.off=We,Hi.trigger=Xe,Hi.xhr=h.a,Hi.TextTrack=Cn,Hi.AudioTrack=Nn,Hi.VideoTrack=Ln,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){Hi[e]=function(){return Y.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),Ne[e].apply(null,arguments)}})),Hi.computedStyle=J,Hi.dom=Ne,Hi.url=Dn;
/**
 * @videojs/http-streaming
 * @version 1.10.6
 * @copyright 2019 Brightcove, Inc
 * @license Apache-2.0
 */
var Qi=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=m.a.buildAbsoluteURL(i.a.location.href,e)),m.a.buildAbsoluteURL(e,t))},qi=function(e,t,n){return e&&n.responseURL&&t!==n.responseURL?n.responseURL:t},Wi=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Xi=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Ki=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Zi=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ji=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},$i=Hi.mergeOptions,ea=Hi.EventTarget,ta=Hi.log,na=function(e,t){["AUDIO","SUBTITLES"].forEach((function(n){for(var r in e.mediaGroups[n])for(var i in e.mediaGroups[n][r]){var a=e.mediaGroups[n][r][i];t(a,n,r,i)}}))},ra=function(e,t){var n=$i(e,{}),r=n.playlists[t.uri];if(!r)return null;if(r.segments&&t.segments&&r.segments.length===t.segments.length&&r.endList===t.endList&&r.mediaSequence===t.mediaSequence)return null;var i=$i(r,t);r.segments&&(i.segments=function(e,t,n){var r=t.slice();n=n||0;for(var i=Math.min(e.length,t.length+n),a=n;a<i;a++)r[a-n]=$i(e[a],r[a-n]);return r}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)),i.segments.forEach((function(e){!function(e,t){e.resolvedUri||(e.resolvedUri=Qi(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=Qi(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=Qi(t,e.map.uri))}(e,i.resolvedUri)}));for(var a=0;a<n.playlists.length;a++)n.playlists[a].uri===t.uri&&(n.playlists[a]=i);return n.playlists[t.uri]=i,n},ia=function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];e.playlists[n.uri]=n,n.resolvedUri=Qi(e.uri,n.uri),n.id=t,n.attributes||(n.attributes={},ta.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},aa=function(e){na(e,(function(t){t.uri&&(t.resolvedUri=Qi(e.uri,t.uri))}))},oa=function(e,t){var n=e.segments[e.segments.length-1];return t&&n&&n.duration?1e3*n.duration:500*(e.targetDuration||10)},sa=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Wi(this,t);var i=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=r.withCredentials,o=void 0!==a&&a,s=r.handleManifestRedirects,u=void 0!==s&&s;i.srcUrl=e,i.hls_=n,i.withCredentials=o,i.handleManifestRedirects=u;var l=n.options_;if(i.customTagParsers=l&&l.customTagParsers||[],i.customTagMappers=l&&l.customTagMappers||[],!i.srcUrl)throw new Error("A non-empty playlist URL is required");return i.state="HAVE_NOTHING",i.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===i.state&&(i.state="HAVE_CURRENT_METADATA",i.request=i.hls_.xhr({uri:Qi(i.master.uri,i.media().uri),withCredentials:i.withCredentials},(function(e,t){if(i.request)return e?i.playlistRequestError(i.request,i.media().uri,"HAVE_METADATA"):void i.haveMetadata(i.request,i.media().uri)})))})),i}return Ki(t,e),Xi(t,[{key:"playlistRequestError",value:function(e,t,n){this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[t],status:e.status,message:"HLS playlist request error at URL: "+t+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"haveMetadata",value:function(e,t){var n=this;this.request=null,this.state="HAVE_METADATA";var r=new A;this.customTagParsers.forEach((function(e){return r.addParser(e)})),this.customTagMappers.forEach((function(e){return r.addTagMapper(e)})),r.push(e.responseText),r.end(),r.manifest.uri=t,r.manifest.attributes=r.manifest.attributes||{};var a=ra(this.master,r.manifest);this.targetDuration=r.manifest.targetDuration,a?(this.master=a,this.media_=this.master.playlists[r.manifest.uri]):this.trigger("playlistunchanged"),this.media().endList||(i.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=i.a.setTimeout((function(){n.trigger("mediaupdatetimeout")}),oa(this.media(),!!a))),this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest(),i.a.clearTimeout(this.mediaUpdateTimeout),i.a.clearTimeout(this.finalRenditionTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(i.a.clearTimeout(this.finalRenditionTimeout),t){var r=e.targetDuration/2*1e3||5e3;this.finalRenditionTimeout=i.a.setTimeout(this.media.bind(this,e,!1),r)}else{var a=this.state,o=!this.media_||e.uri!==this.media_.uri;if(this.master.playlists[e.uri].endList)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(o&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(o){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.hls_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,r){if(n.request){if(e.resolvedUri=qi(n.handleManifestRedirects,e.resolvedUri,r),t)return n.playlistRequestError(n.request,e.uri,a);n.haveMetadata(r,e.uri),"HAVE_MASTER"===a?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}}},{key:"pause",value:function(){this.stopRequest(),i.a.clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(e){var t=this;i.a.clearTimeout(this.mediaUpdateTimeout);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=i.a.setTimeout((function(){return t.load()}),r)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var e=this;this.started=!0,this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.srcUrl+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");var r=new A;return e.customTagParsers.forEach((function(e){return r.addParser(e)})),e.customTagMappers.forEach((function(e){return r.addTagMapper(e)})),r.push(n.responseText),r.end(),e.state="HAVE_MASTER",e.srcUrl=qi(e.handleManifestRedirects,e.srcUrl,n),r.manifest.uri=e.srcUrl,r.manifest.playlists?(e.master=r.manifest,ia(e.master),aa(e.master),e.trigger("loadedplaylist"),void(e.request||e.media(r.manifest.playlists[0]))):(e.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:i.a.location.href,playlists:[{uri:e.srcUrl,id:0,resolvedUri:e.srcUrl,attributes:{}}]},e.master.playlists[e.srcUrl]=e.master.playlists[0],e.haveMetadata(n,e.srcUrl),e.trigger("loadedmetadata"))}}))}}]),t}(ea),ua=Hi.createTimeRange,la=function(e,t,n){var r,i;return void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence?0:(r=function(e,t){var n=0,r=t-e.mediaSequence,i=e.segments[r];if(i){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;r--;){if(void 0!==(i=e.segments[r]).end)return{result:n+i.end,precise:!0};if(n+=i.duration,void 0!==i.start)return{result:n+i.start,precise:!0}}return{result:n,precise:!1}}(e,t)).precise?r.result:(i=function(e,t){for(var n=0,r=void 0,i=t-e.mediaSequence;i<e.segments.length;i++){if(void 0!==(r=e.segments[i]).start)return{result:r.start-n,precise:!0};if(n+=r.duration,void 0!==r.end)return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}}(e,t)).precise?i.result:r.result+n},ca=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return i.a.Infinity}return la(e,t,n)},da=function(e,t,n){var r=0;if(t>n){var i=[n,t];t=i[0],n=i[1]}if(t<0){for(var a=t;a<Math.min(0,n);a++)r+=e.targetDuration;t=0}for(var o=t;o<n;o++)r+=e.segments[o].duration;return r},ha=function(e){if(!e.segments.length)return 0;for(var t=e.segments.length-1,n=e.segments[t].duration||e.targetDuration,r=n+2*e.targetDuration;t--&&!((n+=e.segments[t].duration)>=r););return Math.max(0,t)},fa=function(e,t,n){if(!e||!e.segments)return null;if(e.endList)return ca(e);if(null===t)return null;t=t||0;var r=n?ha(e):e.segments.length;return la(e,e.mediaSequence+r,t)},pa=function(e){return e-Math.floor(e)==0},ga=function(e,t){if(pa(t))return t+.1*e;for(var n=t.toString().split(".")[1].length,r=1;r<=n;r++){var i=Math.pow(10,r),a=t*i;if(pa(a)||r===n)return(a+e)/i}},ma=ga.bind(null,1),va=ga.bind(null,-1),ya=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},_a=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Ta=function(e){var t=ya(e);return!e.disabled&&!t},Ea=function(e,t){return t.attributes&&t.attributes[e]},Ma=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Ta(e)&&(e.attributes.BANDWIDTH||0)<n})).length},ba={duration:ca,seekable:function(e,t){var n=t||0,r=fa(e,t,!0);return null===r?ua():ua(n,r)},safeLiveIndex:ha,getMediaInfoForTime:function(e,t,n,r){var i=void 0,a=void 0,o=e.segments.length,s=t-r;if(s<0){if(n>0)for(i=n-1;i>=0;i--)if(a=e.segments[i],(s+=va(a.duration))>0)return{mediaIndex:i,startTime:r-da(e,n,i)};return{mediaIndex:0,startTime:t}}if(n<0){for(i=n;i<0;i++)if((s-=e.targetDuration)<0)return{mediaIndex:0,startTime:t};n=0}for(i=n;i<o;i++)if(a=e.segments[i],(s-=ma(a.duration))<0)return{mediaIndex:i,startTime:r+da(e,n,i)};return{mediaIndex:o-1,startTime:t}},isEnabled:Ta,isDisabled:function(e){return e.disabled},isBlacklisted:ya,isIncompatible:_a,playlistEnd:fa,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].map)return!0;return!1},hasAttribute:Ea,estimateSegmentRequestTime:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!Ea("BANDWIDTH",n))return NaN;var i=e*n.attributes.BANDWIDTH;return(i-8*r)/t},isLowestEnabledRendition:Ma},Aa=Hi.xhr,wa=Hi.mergeOptions,Sa=function(){return function e(t,n){t=wa({timeout:45e3},t);var r=e.beforeRequest||Hi.Hls.xhr.beforeRequest;if(r&&"function"==typeof r){var i=r(t);i&&(t=i)}var a=Aa(t,(function(e,t){var r=a.response;!e&&r&&(a.responseTime=Date.now(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=r.byteLength||r.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t.headers&&(a.responseHeaders=t.headers),e&&"ETIMEDOUT"===e.code&&(a.timedout=!0),e||a.aborted||200===t.statusCode||206===t.statusCode||0===t.statusCode||(e=new Error("XHR Failed with a response of: "+(a&&(r||a.responseText)))),n(e,a)})),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a}},xa=function(e){var t,n,r={};return e.byterange&&(r.Range=(t=e.byterange,n=t.offset+t.length-1,"bytes="+t.offset+"-"+n)),r},Da=function(e,t){return e.start(t)+"-"+e.end(t)},Ia=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},Ca=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},Na=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];ArrayBuffer.isView(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t},La=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},Oa=function(e){return e.resolvedUri},Ra=function(e){for(var t=Array.prototype.slice.call(e),n="",r=0;r<t.length/16;r++)n+=t.slice(16*r,16*r+16).map(Ia).join("")+" "+t.slice(16*r,16*r+16).map(Ca).join("")+"\n";return n},ja=Object.freeze({createTransferableMessage:Na,initSegmentId:La,segmentKeyId:Oa,hexDump:Ra,tagDump:function(e){var t=e.bytes;return Ra(t)},textRanges:function(e){var t="",n=void 0;for(n=0;n<e.length;n++)t+=Da(e,n)+" ";return t}}),Pa=function(e){var t=e.playlist,n=e.time,r=void 0===n?void 0:n,i=e.callback;if(!i)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===r)return i({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n=0,r=void 0,i=0;i<t.segments.length&&!(e<=(n=(r=t.segments[i]).videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:n+r.duration));i++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>n){if(e>n+.25*a.duration)return null;r=a}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:n-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}}(r,t);if(!a)return i({message:"valid programTime was not found"});if("estimate"===a.type)return i({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:r},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,r=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*r)}(r,a.segment);return s&&(o.programDateTime=s.toISOString()),i(null,o)},ka=function e(t){var n=t.programTime,r=t.playlist,i=t.retryCount,a=void 0===i?2:i,o=t.seekTo,s=t.pauseAfterSeek,u=void 0===s||s,l=t.tech,c=t.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!r||!o)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++){if(!e.segments[t].dateTimeObject)return!1}return!0}(r))return c({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var d=function(e,t){var n=void 0;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var r=t.segments[0];if(n<r.dateTimeObject)return null;for(var i=0;i<t.segments.length-1;i++){if(r=t.segments[i],n<t.segments[i+1].dateTimeObject)break}var a,o=t.segments[t.segments.length-1],s=o.dateTimeObject,u=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return n>new Date(s.getTime()+1e3*u)?null:(n>s&&(r=o),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:ba.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})}(n,r);if(!d)return c({message:n+" was not found in the stream"});var h=d.segment,f=function(e,t){var n=void 0,r=void 0;try{n=new Date(e),r=new Date(t)}catch(e){}var i=n.getTime();return(r.getTime()-i)/1e3}(h.dateTimeObject,n);if("estimate"===d.type)return 0===a?c({message:n+" is not buffered yet. Try again"}):(o(d.estimatedStart+f),void l.one("seeked",(function(){e({programTime:n,playlist:r,retryCount:a-1,seekTo:o,pauseAfterSeek:u,tech:l,callback:c})})));var p=h.start+f;l.one("seeked",(function(){return c(null,l.currentTime())})),u&&l.pause(),o(p)},Ua=function(e,t){var n=[],r=void 0;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&n.push([e.start(r),e.end(r)]);return Hi.createTimeRanges(n)},Ba=function(e,t){return Ua(e,(function(e,n){return e-.1<=t&&n+.1>=t}))},Fa=function(e,t){return Ua(e,(function(e){return e-1/30>=t}))},za=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},Ga=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},Ha=function(e,t,n){var r=void 0,i=void 0;if(n&&n.cues)for(r=n.cues.length;r--;)(i=n.cues[r]).startTime<=t&&i.endTime>=e&&n.removeCue(i)},Ya=function(e){return isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e},Va=function(e,t,n){var r=i.a.WebKitDataCue||i.a.VTTCue;if(t&&t.forEach((function(e){var t=e.stream;this.inbandTextTracks_[t].addCue(new r(e.startTime+this.timestampOffset,e.endTime+this.timestampOffset,e.text))}),e),n){var a=Ya(e.mediaSource_.duration);if(n.forEach((function(e){var t=e.cueTime+this.timestampOffset;!("number"!=typeof t||i.a.isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new r(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Hi.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Hi.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Hi.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),this.metadataTrack_.addCue(n)}),this)}),e),e.metadataTrack_&&e.metadataTrack_.cues&&e.metadataTrack_.cues.length){for(var o=e.metadataTrack_.cues,s=[],u=0;u<o.length;u++)o[u]&&s.push(o[u]);var l=s.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),c=Object.keys(l).sort((function(e,t){return Number(e)-Number(t)}));c.forEach((function(e,t){var n=l[e],r=Number(c[t+1])||a;n.forEach((function(e){e.endTime=r}))}))}}},Qa="undefined"!=typeof window?window:{},qa="undefined"==typeof Symbol?"__target":Symbol(),Wa=Qa.BlobBuilder||Qa.WebKitBlobBuilder||Qa.MozBlobBuilder||Qa.MSBlobBuilder,Xa=Qa.URL||Qa.webkitURL||Xa&&Xa.msURL,Ka=Qa.Worker;function Za(e,t){return function(n){var r=this;if(!t)return new Ka(e);if(Ka&&!n){var i=to(t.toString().replace(/^function.+?{/,"").slice(0,-1));return this[qa]=new Ka(i),function(e,t){if(!e||!t)return;var n=e.terminate;e.objURL=t,e.terminate=function(){e.objURL&&Xa.revokeObjectURL(e.objURL),n.call(e)}}(this[qa],i),this[qa]}var a={postMessage:function(e){r.onmessage&&setTimeout((function(){r.onmessage({data:e,target:a})}))}};t.call(a),this.postMessage=function(e){setTimeout((function(){a.onmessage({data:e,target:r})}))},this.isThisThread=!0}}if(Ka){var Ja,$a=to("self.onmessage = function () {}"),eo=new Uint8Array(1);try{(Ja=new Ka($a)).postMessage(eo,[eo.buffer])}catch(e){Ka=null}finally{Xa.revokeObjectURL($a),Ja&&Ja.terminate()}}function to(e){try{return Xa.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new Wa;return t.append(e),Xa.createObjectURL(t.getBlob(type))}}var no=new Za("./transmuxer-worker.worker.js",(function(e,t){var n=this;!function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,_,T,E,M,b,A,w,S,x,D,I,C,N,L,O,R,j,P,k,U,B,F,z,G=e,H=Math.pow(2,32)-1;!function(){var e;if(b={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in b)b.hasOwnProperty(e)&&(b[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);A=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),S=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),w=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),D=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),I={video:x,audio:D},L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),N=new Uint8Array([0,0,0,0,0,0,0,0]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=O,j=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),P=O,C=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,r=[],i=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);for(t=r.length;t--;)i+=r[t].byteLength;for(n=new Uint8Array(i+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,i=8;t<r.length;t++)n.set(r[t],i),i+=r[t].byteLength;return n},r=function(){return t(b.dinf,t(b.dref,L))},i=function(e){return t(b.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return t(b.hdlr,I[e])},g=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(b.mdhd,n)},p=function(e){return t(b.mdia,g(e),m(e.type),s(e))},o=function(e){return t(b.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return t(b.minf,"video"===e.type?t(b.vmhd,C):t(b.smhd,N),r(),y(e))},u=function(e,n){for(var r=[],i=n.length;i--;)r[i]=T(n[i]);return t.apply(null,[b.moof,o(e)].concat(r))},l=function(e){for(var n=e.length,r=[];n--;)r[n]=h(e[n]);return t.apply(null,[b.moov,d(4294967295)].concat(r).concat(c(e)))},c=function(e){for(var n=e.length,r=[];n--;)r[n]=E(e[n]);return t.apply(null,[b.mvex].concat(r))},d=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(b.mvhd,n)},v=function(e){var n,r,i=e.samples||[],a=new Uint8Array(4+i.length);for(r=0;r<i.length;r++)n=i[r].flags,a[r+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(b.sdtp,a)},y=function(e){return t(b.stbl,_(e),t(b.stts,P),t(b.stsc,R),t(b.stsz,j),t(b.stco,O))},_=function(e){return t(b.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?k(e):U(e))},k=function(e){var n,r,i=e.sps||[],a=e.pps||[],o=[],s=[];for(n=0;n<i.length;n++)o.push((65280&i[n].byteLength)>>>8),o.push(255&i[n].byteLength),o=o.concat(Array.prototype.slice.call(i[n]));for(n=0;n<a.length;n++)s.push((65280&a[n].byteLength)>>>8),s.push(255&a[n].byteLength),s=s.concat(Array.prototype.slice.call(a[n]));if(r=[b.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(b.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],o,[a.length],s))),t(b.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var u=e.sarRatio[0],l=e.sarRatio[1];r.push(t(b.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return t.apply(null,r)},U=function(e){return t(b.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},f=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(b.tkhd,n)},T=function(e){var n,r,i,a,o,s;return n=t(b.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/(H+1)),s=Math.floor(e.baseMediaDecodeTime%(H+1)),r=t(b.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===e.type?(i=M(e,92),t(b.traf,n,r,i)):(a=v(e),i=M(e,a.length+92),t(b.traf,n,r,i,a))},h=function(e){return e.duration=e.duration||4294967295,t(b.trak,f(e),p(e))},E=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(b.trex,n)},z=function(e,t){var n=0,r=0,i=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(r=2),void 0!==e[0].flags&&(i=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|r|i|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,n){var r,i,a,o;for(n+=20+16*(i=e.samples||[]).length,r=z(i,n),o=0;o<i.length;o++)a=i[o],r=r.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,61440&a.flags.degradationPriority,15&a.flags.degradationPriority,(4278190080&a.compositionTimeOffset)>>>24,(16711680&a.compositionTimeOffset)>>>16,(65280&a.compositionTimeOffset)>>>8,255&a.compositionTimeOffset]);return t(b.trun,new Uint8Array(r))},B=function(e,n){var r,i,a,o;for(n+=20+8*(i=e.samples||[]).length,r=z(i,n),o=0;o<i.length;o++)a=i[o],r=r.concat([(4278190080&a.duration)>>>24,(16711680&a.duration)>>>16,(65280&a.duration)>>>8,255&a.duration,(4278190080&a.size)>>>24,(16711680&a.size)>>>16,(65280&a.size)>>>8,255&a.size]);return t(b.trun,new Uint8Array(r))},M=function(e,t){return"audio"===e.type?B(e,t):F(e,t)};a=function(){return t(b.ftyp,A,w,A,S)};var Y,V,Q,q,W,X,K,Z,J=function(e){return t(b.mdat,e)},$=u,ee=function(e){var t,n=a(),r=l(e);return(t=new Uint8Array(n.byteLength+r.byteLength)).set(n),t.set(r,n.byteLength),t},te=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ne=function(e){var t,n,r=[],i=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,r.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(r.length&&(r.duration=n.dts-r.dts,i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r)),(r=[n]).byteLength=n.data.byteLength,r.pts=n.pts,r.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(r.keyFrame=!0),r.duration=n.dts-r.dts,r.byteLength+=n.data.byteLength,r.push(n));return i.length&&(!r.duration||r.duration<=0)&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.length,i.duration+=r.duration,i.push(r),i},re=function(e){var t,n,r=[],i=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(r.length&&(i.push(r),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration),(r=[n]).nalCount=n.length,r.byteLength=n.byteLength,r.pts=n.pts,r.dts=n.dts,r.duration=n.duration):(r.duration+=n.duration,r.nalCount+=n.length,r.byteLength+=n.byteLength,r.push(n));return i.length&&r.duration<=0&&(r.duration=i[i.length-1].duration),i.byteLength+=r.byteLength,i.nalCount+=r.nalCount,i.duration+=r.duration,i.push(r),i},ie=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ae=function(e,t){var n,r,i,a,o,s=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],r=0;r<a.length;r++)o=a[r],s+=(i=te(o,s)).size,u.push(i);return u},oe=function(e){var t,n,r,i,a,o,s=0,u=e.byteLength,l=e.nalCount,c=new Uint8Array(u+4*l),d=new DataView(c.buffer);for(t=0;t<e.length;t++)for(i=e[t],n=0;n<i.length;n++)for(a=i[n],r=0;r<a.length;r++)o=a[r],d.setUint32(s,o.data.byteLength),s+=4,c.set(o.data,s),s+=o.data.byteLength;return c},se=[33,16,5,32,164,27],ue=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],le=function(e){for(var t=[];e--;)t.push(0);return t},ce={96e3:[se,[227,64],le(154),[56]],88200:[se,[231],le(170),[56]],64e3:[se,[248,192],le(240),[56]],48e3:[se,[255,192],le(268),[55,148,128],le(54),[112]],44100:[se,[255,192],le(268),[55,163,128],le(84),[112]],32e3:[se,[255,192],le(268),[55,234],le(226),[112]],24e3:[se,[255,192],le(268),[55,255,128],le(268),[111,112],le(126),[224]],16e3:[se,[255,192],le(268),[55,255,128],le(268),[111,255],le(269),[223,108],le(195),[1,192]],12e3:[ue,le(268),[3,127,248],le(268),[6,255,240],le(268),[13,255,224],le(268),[27,253,128],le(259),[56]],11025:[ue,le(268),[3,127,248],le(268),[6,255,240],le(268),[13,255,224],le(268),[27,255,192],le(268),[55,175,128],le(108),[112]],8e3:[ue,le(268),[3,121,16],le(47),[7]]},de=(Y=ce,Object.keys(Y).reduce((function(e,t){return e[t]=new Uint8Array(Y[t].reduce((function(e,t){return e.concat(t)}),[])),e}),{}));X=function(e,t){return V(W(e,t))},K=function(e,t){return Q(q(e),t)},Z=function(e,t,n){return q(n?e:e-t)};var he=9e4,fe=(V=function(e){return 9e4*e},Q=function(e,t){return e*t},q=function(e){return e/9e4},W=function(e,t){return e/t},X),pe=K,ge=Z,me=function(e,t,n,r){var i,a,o,s,u,l=0,c=0,d=0;if(t.length&&(i=fe(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(he/(e.samplerate/1024)),n&&r&&(l=i-Math.max(n,r),d=(c=Math.floor(l/a))*a),!(c<1||d>he/2))){for((o=de[e.samplerate])||(o=t[0].data),s=0;s<c;s++)u=t[0],t.splice(0,0,{data:o,dts:u.dts-a,pts:u.pts-a});e.baseMediaDecodeTime-=Math.floor(pe(d,e.samplerate))}},ve=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},ye=function(e){var t,n,r=[];for(t=0;t<e.length;t++)n=e[t],r.push({size:n.data.byteLength,duration:1024});return r},_e=function(e){var t,n,r=0,i=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],i.set(n.data,r),r+=n.data.byteLength;return i},Te=he,Ee=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},Me=function(e,t){var n,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/Te,n=Math.floor(n)),n},be=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},Ae=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,r=0,i=0}return n},we=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},Se=function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[(i=3*n)+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],o.push(a));return o},xe=4,De=function e(){e.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new Oe(0,0),new Oe(0,1),new Oe(1,0),new Oe(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)};(De.prototype=new G).push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=Ae(e.escapedRBSP)).payloadType===xe&&(n=we(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=Se(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},De.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},De.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},De.prototype.flush=function(){return this.flushStream("flush")},De.prototype.partialFlush=function(){return this.flushStream("partialFlush")},De.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},De.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},De.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},De.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},De.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var Ie={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ce=function(e){return null===e?"":(e=Ie[e]||e,String.fromCharCode(e))},Ne=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Le=function(){for(var e=[],t=15;t--;)e.push("");return e},Oe=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Le();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Le();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Le()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=Ce((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=Ce((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=Ne.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=Ce(r),a+=Ce(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Oe.prototype=new G,Oe.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Oe.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Le(),this.nonDisplayed_=Le(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Oe.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Oe.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Oe.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Oe.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Oe.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Oe.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Oe.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Oe.prototype.isNormalChar=function(e){return e>=32&&e<=127},Oe.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Le(),this.displayed_=Le()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Oe.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Oe.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Oe.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Oe.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Oe.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Oe.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Re={CaptionStream:De,Cea608Stream:Oe},je={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Pe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},ke=function e(t){var n,r;e.prototype.init.call(this),this.type_=t||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===r&&(r=e.dts),e.dts=Pe(e.dts,r),e.pts=Pe(e.pts,r),n=e.dts,this.trigger("data",e))},this.flush=function(){r=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){r=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ke.prototype=new G;var Ue,Be=ke,Fe=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},ze=function(e,t,n){return decodeURIComponent(Fe(e,t,n))},Ge=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},He={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ze(e.data,1,t),e.value=ze(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=ze(e.data,1,t),e.url=ze(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Fe(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(Ue=function(e){var t,n={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},r=0,i=[],a=0;if(Ue.prototype.init.call(this),this.dispatchType=je.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,o,s,u,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,i.length=0),0===i.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))n.debug&&console.log("Skipping unrecognized metadata packet");else if(i.push(e),a+=e.data.byteLength,1===i.length&&(r=Ge(e.data.subarray(6,10)),r+=10),!(a<r)){for(t={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts},l=0;l<r;)t.data.set(i[0].data.subarray(0,r-l),l),l+=i[0].data.byteLength,a-=i[0].data.byteLength,i.shift();o=10,64&t.data[5]&&(o+=4,o+=Ge(t.data.subarray(10,14)),r-=Ge(t.data.subarray(16,20)));do{if((s=Ge(t.data.subarray(o+4,o+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");if((u={id:String.fromCharCode(t.data[o],t.data[o+1],t.data[o+2],t.data[o+3]),data:t.data.subarray(o+10,o+s+10)}).key=u.id,He[u.id]&&(He[u.id](u),"com.apple.streaming.transportStreamTimestamp"===u.owner)){var c=u.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],u.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=u.timeStamp,t.dts=u.timeStamp),this.trigger("timestamp",u)}t.frames.push(u),o+=10,o+=s}while(o<r);this.trigger("data",t)}}}).prototype=new G;var Ye,Ve,Qe,qe=Ue,We=Be;(Ye=function(){var e=new Uint8Array(188),t=0;Ye.prototype.init.call(this),this.push=function(n){var r,i=0,a=188;for(t?((r=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),r.set(n,t),t=0):r=n;a<r.byteLength;)71!==r[i]||71!==r[a]?(i++,a++):(this.trigger("data",r.subarray(i,a)),i+=188,a+=188);i<r.byteLength&&(e.set(r.subarray(i),0),t=r.byteLength-i)},this.flush=function(){188===t&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new G,(Ve=function(){var e,t,n,r;Ve.prototype.init.call(this),r=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,r){var i=0;r.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===r.type?t(e.subarray(i),r):n(e.subarray(i),r)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],r.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=r.pmtPid},n=function(e,t){var n,i;if(1&e[5]){for(r.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,i=12+((15&e[10])<<8|e[11]);i<n;){var a=e[i],o=(31&e[i+1])<<8|e[i+2];a===je.H264_STREAM_TYPE&&null===r.programMapTable.video?r.programMapTable.video=o:a===je.ADTS_STREAM_TYPE&&null===r.programMapTable.audio?r.programMapTable.audio=o:a===je.METADATA_STREAM_TYPE&&(r.programMapTable["timed-metadata"][o]=a),i+=5+((15&e[i+3])<<8|e[i+4])}t.programMapTable=r.programMapTable}},this.push=function(t){var n={},r=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(r+=t[r]+1),0===n.pid)n.type="pat",e(t.subarray(r),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(r),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,r,n]):this.processPes_(t,r,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=je.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=je.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}}).prototype=new G,Ve.STREAM_TYPES={h264:27,adts:15},(Qe=function(){var e,t=this,n={data:[],size:0},r={data:[],size:0},i={data:[],size:0},a=function(e,n,r){var i,a,o=new Uint8Array(e.size),s={type:n},u=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,u=0;u<e.data.length;u++)a=e.data[u],o.set(a.data,l),l+=a.data.byteLength;var c,d,h;c=o,(d=s).packetLength=6+(c[4]<<8|c[5]),d.dataAlignmentIndicator=0!=(4&c[6]),192&(h=c[7])&&(d.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,d.pts*=4,d.pts+=(6&c[13])>>>1,d.dts=d.pts,64&h&&(d.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,d.dts*=4,d.dts+=(6&c[18])>>>1)),d.data=c.subarray(9+c[8]),i="video"===n||s.packetLength<=e.size,(r||i)&&(e.size=0,e.data.length=0),i&&t.trigger("data",s)}};Qe.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case je.H264_STREAM_TYPE:case je.H264_STREAM_TYPE:e=n,t="video";break;case je.ADTS_STREAM_TYPE:e=r,t="audio";break;case je.METADATA_STREAM_TYPE:e=i,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(e=o.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}})[o.type]()},this.reset=function(){n.size=0,n.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(n,"video"),a(r,"audio"),a(i,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}}).prototype=new G;var Xe={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ye,TransportParseStream:Ve,ElementaryStream:Qe,TimestampRolloverStream:We,CaptionStream:Re.CaptionStream,Cea608Stream:Re.Cea608Stream,MetadataStream:qe};for(var Ke in je)je.hasOwnProperty(Ke)&&(Xe[Ke]=je[Ke]);var Ze,Je=Xe,$e=he,et=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Ze=function(e){var t,n=0;Ze.prototype.init.call(this),this.push=function(r){var i,a,o,s,u,l,c=0;if(e||(n=0),"audio"===r.type)for(t?(s=t,(t=new Uint8Array(s.byteLength+r.data.byteLength)).set(s),t.set(r.data,s.byteLength)):t=r.data;c+5<t.length;)if(255===t[c]&&240==(246&t[c+1])){if(a=2*(1&~t[c+1]),i=(3&t[c+3])<<11|t[c+4]<<3|(224&t[c+5])>>5,l=(u=1024*(1+(3&t[c+6])))*$e/et[(60&t[c+2])>>>2],o=c+i,t.byteLength<o)return;if(this.trigger("data",{pts:r.pts+n*l,dts:r.dts+n*l,sampleCount:u,audioobjecttype:1+(t[c+2]>>>6&3),channelcount:(1&t[c+2])<<2|(192&t[c+3])>>>6,samplerate:et[(60&t[c+2])>>>2],samplingfrequencyindex:(60&t[c+2])>>>2,samplesize:16,data:t.subarray(c+7+a,o)}),n++,t.byteLength===o)return void(t=void 0);t=t.subarray(o)}else c++},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}}).prototype=new G;var tt,nt,rt,it=Ze,at=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(i,i+o)),n=new DataView(a.buffer).getUint32(0),r=8*o,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,e-=8*(i=Math.floor(e/8)),t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),a=n>>>32-i;return(r-=i)>0?n<<=i:t>0&&this.loadWord(),(i=e-i)>0?a<<i|this.readBits(i):a},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!=(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(nt=function(){var e,t,n=0;nt.prototype.init.call(this),this.push=function(r){var i;t?((i=new Uint8Array(t.byteLength+r.data.byteLength)).set(t),i.set(r.data,t.byteLength),t=i):t=r.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new G,rt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(tt=function(){var e,t,n,r,i,a,o,s=new nt;tt.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,r=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:r,data:o};switch(31&o[0]){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=i(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=i(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,r=8,i=8;for(n=0;n<e;n++)0!==i&&(i=(r+t.readExpGolomb()+256)%256),r=0===i?r:i},i=function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},a=function(e){var t,n,r,i,a,s,u,l,c,d,h,f,p,g=0,m=0,v=0,y=0,_=1;if(n=(t=new at(e)).readUnsignedByte(),i=t.readUnsignedByte(),r=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),rt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)t.readBoolean()&&o(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),p=0;p<u;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(d=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),y=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:f=[1,1];break;case 2:f=[12,11];break;case 3:f=[10,11];break;case 4:f=[16,11];break;case 5:f=[40,33];break;case 6:f=[24,11];break;case 7:f=[20,11];break;case 8:f=[32,11];break;case 9:f=[80,33];break;case 10:f=[18,11];break;case 11:f=[15,11];break;case 12:f=[64,33];break;case 13:f=[160,99];break;case 14:f=[4,3];break;case 15:f=[3,2];break;case 16:f=[2,1];break;case 255:f=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}f&&(_=f[0]/f[1])}return{profileIdc:n,levelIdc:r,profileCompatibility:i,width:Math.ceil((16*(l+1)-2*g-2*m)*_),height:(2-d)*(c+1)*16-2*v-2*y,sarRatio:f}}}).prototype=new G;var ot,st={H264Stream:tt,NalByteStream:nt},ut=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},lt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},ct=function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n};(ot=function(){var e=new Uint8Array,t=0;ot.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var r,i,a,o,s=0,u=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-u>=3;)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!=(255&e[u])||240!=(240&e[u+1]))u++;else{if(e.length-u<7)break;if(u+(s=ct(e,u))>e.length)break;a={type:"audio",data:e.subarray(u,u+s),pts:t,dts:t},this.trigger("data",a),u+=s}else{if(e.length-u<10)break;if(u+(s=lt(e,u))>e.length)break;i={type:"timed-metadata",data:e.subarray(u,u+s)},this.trigger("data",i),u+=s}r=e.length-u,e=r>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new G;var dt,ht,ft,pt,gt=ot,mt=st.H264Stream,vt=ut,yt=he,_t=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Tt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Et=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},Mt=function(e,t,n,r,i,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(r-t),pts:e+(i-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};(ht=function(e,t){var n=[],r=0,i=0,a=0,o=1/0;t=t||{},ht.prototype.init.call(this),this.push=function(t){be(e,t),e&&_t.forEach((function(n){e[n]=t[n]})),n.push(t)},this.setEarliestDts=function(t){i=t-e.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,u,l,c,d;0!==n.length?(s=ve(n,e,i),e.baseMediaDecodeTime=Me(e,t.keepOriginalTimestamps),me(e,s,a,o),e.samples=ye(s),l=J(_e(s)),n=[],u=$(r,[e]),c=new Uint8Array(u.byteLength+l.byteLength),r++,c.set(u),c.set(l,u.byteLength),Ee(e),d=Math.ceil(1024*yt/e.samplerate),s.length&&this.trigger("timingInfo",{start:s[0].dts,end:s[0].dts+s.length*d}),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){Ee(e),n=[],this.trigger("reset")}}).prototype=new G,(dt=function(e,t){var n,r,i=0,a=[],o=[];t=t||{},dt.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){be(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||n||(n=t.config,e.sps=[t.data],Tt.forEach((function(t){e[t]=n[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var n,r,s,u,l,c,d,h,f=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=ne(a),(s=re(n))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],e))?(f=r.duration,s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=ie(s)),o.length){var p;if(!(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");Ee(e),s=p}be(e,s),e.samples=ae(s),l=J(oe(s)),e.baseMediaDecodeTime=Me(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=s[0],h=s[s.length-1],this.trigger("segmentTimingInfo",Mt(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,f)),this.trigger("timingInfo",{start:s[0].dts,end:s[s.length-1].dts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=$(i,[e]),c=new Uint8Array(u.byteLength+l.byteLength),i++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){Ee(e),n=void 0,r=void 0},this.getGopForFusion_=function(t){var n,r,i,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)i=(a=this.gopCache_[o]).gop,e.pps&&Et(e.pps[0],a.pps[0])&&e.sps&&Et(e.sps[0],a.sps[0])&&(i.dts<e.timelineStartInfo.dts||(n=t.dts-i.dts-i.duration)>=-1e4&&n<=45e3&&(!r||s>n)&&(r=a,s=n));return r?r.gop:null},this.alignGopsAtStart_=function(e){var t,n,r,i,a,s,u,l;for(a=e.byteLength,s=e.nalCount,u=e.duration,t=n=0;t<o.length&&n<e.length&&(r=o[t],i=e[n],r.pts!==i.pts);)i.pts>r.pts?t++:(n++,a-=i.byteLength,s-=i.nalCount,u-=i.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=u,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,r,i,a,s,u;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(r=o[t],i=e[n],r.pts===i.pts){s=!0;break}r.pts>i.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(u=s?n:a))return e;var l=e.slice(u),c=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){o=e}}).prototype=new G,(pt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,pt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}}).prototype=new G,pt.prototype.flush=function(e){var t,n,r,i,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Tt.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,_t.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,r=ee(this.pendingTracks),o.initSegment=new Uint8Array(r.byteLength),o.initSegment.set(r),o.data=new Uint8Array(this.pendingBytes),i=0;i<this.pendingBoxes.length;i++)o.data.set(this.pendingBoxes[i],a),a+=this.pendingBoxes[i].byteLength;for(i=0;i<this.pendingCaptions.length;i++)(t=this.pendingCaptions[i]).startTime=ge(t.startPts,s,this.keepOriginalTimestamps),t.endTime=ge(t.endPts,s,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(i=0;i<this.pendingMetadata.length;i++)(n=this.pendingMetadata[i]).cueTime=ge(n.pts,s,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),i=0;i<o.captions.length;i++)t=o.captions[i],this.trigger("caption",t);for(i=0;i<o.metadata.length;i++)n=o.metadata[i],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},pt.prototype.setRemux=function(e){this.remuxTracks=e},(ft=function(e){var t,n,r=this,i=!0;ft.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="aac",i.metadataStream=new Je.MetadataStream,i.aacStream=new gt,i.audioTimestampRolloverStream=new Je.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Je.TimestampRolloverStream("timed-metadata"),i.adtsStream=new it,i.coalesceStream=new pt(e,i.metadataStream),i.headOfPipeline=i.aacStream,i.aacStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.aacStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.metadataStream.on("timestamp",(function(e){i.aacStream.setTimestamp(e.timeStamp)})),i.aacStream.on("data",(function(a){"timed-metadata"!==a.type||i.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:r.baseMediaDecodeTime},codec:"adts",type:"audio"},i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new ht(n,e),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};this.transmuxPipeline_=i,i.type="ts",i.metadataStream=new Je.MetadataStream,i.packetStream=new Je.TransportPacketStream,i.parseStream=new Je.TransportParseStream,i.elementaryStream=new Je.ElementaryStream,i.timestampRolloverStream=new Je.TimestampRolloverStream,i.adtsStream=new it,i.h264Stream=new mt,i.captionStream=new Je.CaptionStream,i.coalesceStream=new pt(e,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream).pipe(i.timestampRolloverStream),i.timestampRolloverStream.pipe(i.h264Stream),i.timestampRolloverStream.pipe(i.adtsStream),i.timestampRolloverStream.pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=r.baseMediaDecodeTime;t&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new dt(t,e),i.videoSegmentStream.on("timelineStartInfo",(function(e){n&&(n.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))})),i.videoSegmentStream.on("processedGopsInfo",r.trigger.bind(r,"gopInfo")),i.videoSegmentStream.on("segmentTimingInfo",r.trigger.bind(r,"videoSegmentTimingInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),i.videoSegmentStream.on("timingInfo",r.trigger.bind(r,"videoTimingInfo")),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),n&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new ht(n,e),i.audioSegmentStream.on("timingInfo",r.trigger.bind(r,"audioTimingInfo")),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream)),r.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("id3Frame",(function(e){e.dispatchType=i.metadataStream.dispatchType,r.trigger("id3Frame",e)})),i.coalesceStream.on("caption",this.trigger.bind(this,"caption")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(r){var i=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=r),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,Ee(n),e.keepOriginalTimestamps||(n.timelineStartInfo.baseMediaDecodeTime=r),i.audioTimestampRolloverStream&&i.audioTimestampRolloverStream.discontinuity()),t&&(i.videoSegmentStream&&(i.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,Ee(t),i.captionStream.reset(),e.keepOriginalTimestamps||(t.timelineStartInfo.baseMediaDecodeTime=r)),i.timestampRolloverStream&&i.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=vt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new G;var bt={Transmuxer:ft,VideoSegmentStream:dt,AudioSegmentStream:ht,AUDIO_PROPERTIES:_t,VIDEO_PROPERTIES:Tt,generateVideoSegmentTimingInfo:Mt},At=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),wt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=n||{},this.self=t,this.init()}return At(e,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new bt.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var r=t.data;t.data=r.buffer,e.postMessage({action:"data",segment:t,byteOffset:r.byteOffset,byteLength:r.byteLength},[t.data])})),t.captionStream&&t.captionStream.on("data",(function(t){e.postMessage({action:"caption",data:t})})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}))}(this.self,this.transmuxer)}},{key:"push",value:function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4*t))}},{key:"setAudioAppendStart",value:function(e){this.transmuxer.setAudioAppendStart(Math.ceil(9e4*e.appendStart))}},{key:"flush",value:function(e){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())}}]),e}();new function(e){e.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new wt(e,t.data.options):(this.messageHandlers||(this.messageHandlers=new wt(e)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}(n)}()})),ro={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},io=function(e){return e.map((function(e){return e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)}))}))},ao=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={codecCount:0},n=void 0;return t.codecCount=e.split(",").length,t.codecCount=t.codecCount||2,(n=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(e))&&(t.videoCodec=n[2],t.videoObjectTypeIndicator=n[3]),t.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(e),t.audioProfile=t.audioProfile&&t.audioProfile[2],t},oo=function(e,t,n){return e+"/"+t+'; codecs="'+n.filter((function(e){return!!e})).join(", ")+'"'},so=function(e,t){var n=function(e){return e.segments&&e.segments.length&&e.segments[0].map?"mp4":"mp2t"}(t),r=function(e){var t=e.attributes||{};return t.CODECS?ao(t.CODECS):ro}(t),i=t.attributes||{},a=!0,o=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&i.AUDIO){var s=e.mediaGroups.AUDIO[i.AUDIO];if(s)for(var u in o=!0,a=!1,s)if(!s[u].uri&&!s[u].playlists){a=!0;break}}o&&!r.audioProfile&&(a||(r.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var r in n){var i=n[r];if(i.default&&i.playlists)return ao(i.playlists[0].attributes.CODECS).audioProfile}return null}(e,i.AUDIO)),r.audioProfile||(Hi.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=ro.audioProfile));var l={};r.videoCodec&&(l.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(l.audio="mp4a.40."+r.audioProfile);var c=oo("audio",n,[l.audio]),d=oo("video",n,[l.video]),h=oo("video",n,[l.video,l.audio]);return o?!a&&l.video?[d,c]:a||l.video?[h,c]:[c,c]:l.video?[h]:[c]},uo=function(e){return/mp4a\.\d+.\d+/i.test(e)},lo=function(e){return/avc1\.[\da-f]+/i.test(e)},co=function(e,t,n){if(null==t||!e.length)return[];var r=Math.ceil(9e4*(t-n+3)),i=void 0;for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)},ho=function(e){function t(e,n){Wi(this,t);var r=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,Hi.EventTarget));r.timestampOffset_=0,r.pendingBuffers_=[],r.bufferUpdating_=!1,r.mediaSource_=e,r.codecs_=n,r.audioCodec_=null,r.videoCodec_=null,r.audioDisabled_=!1,r.appendAudioInitSegment_=!0,r.gopBuffer_=[],r.timeMapping_=0,r.safeAppend_=Hi.browser.IE_VERSION>=11;var i={remux:!1,alignGopsAtEnd:r.safeAppend_};return r.codecs_.forEach((function(e){uo(e)?r.audioCodec_=e:lo(e)&&(r.videoCodec_=e)})),r.transmuxer_=new no,r.transmuxer_.postMessage({action:"init",options:i}),r.transmuxer_.onmessage=function(e){return"data"===e.data.action?r.data_(e):"done"===e.data.action?r.done_(e):"gopInfo"===e.data.action?r.appendGopInfo_(e):"videoSegmentTimingInfo"===e.data.action?r.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo):void 0},Object.defineProperty(r,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(e){"number"==typeof e&&e>=0&&(this.timestampOffset_=e,this.appendAudioInitSegment_=!0,this.gopBuffer_.length=0,this.timeMapping_=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e}))}}),Object.defineProperty(r,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(e){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=e),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=e)}}),Object.defineProperty(r,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(r,"buffered",{get:function(){return function(e,t,n){var r=null,i=null,a=0,o=[],s=[];if(!e&&!t)return Hi.createTimeRange();if(!e)return t.buffered;if(!t)return e.buffered;if(n)return e.buffered;if(0===e.buffered.length&&0===t.buffered.length)return Hi.createTimeRange();for(var u=e.buffered,l=t.buffered,c=u.length;c--;)o.push({time:u.start(c),type:"start"}),o.push({time:u.end(c),type:"end"});for(c=l.length;c--;)o.push({time:l.start(c),type:"start"}),o.push({time:l.end(c),type:"end"});for(o.sort((function(e,t){return e.time-t.time})),c=0;c<o.length;c++)"start"===o[c].type?2===++a&&(r=o[c].time):"end"===o[c].type&&1===--a&&(i=o[c].time),null!==r&&null!==i&&(s.push([r,i]),r=null,i=null);return Hi.createTimeRanges(s)}(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}}),r}return Ki(t,e),Xi(t,[{key:"data_",value:function(e){var t=e.data.segment;t.data=new Uint8Array(t.data,e.data.byteOffset,e.data.byteLength),t.initSegment=new Uint8Array(t.initSegment.data,t.initSegment.byteOffset,t.initSegment.byteLength),function(e,t,n){var r=t.player_;if(n.captions&&n.captions.length)for(var i in e.inbandTextTracks_||(e.inbandTextTracks_={}),n.captionStreams)if(!e.inbandTextTracks_[i]){r.tech_.trigger({type:"usage",name:"hls-608"});var a=r.textTracks().getTrackById(i);e.inbandTextTracks_[i]=a||r.addRemoteTextTrack({kind:"captions",id:i,label:i},!1).track}n.metadata&&n.metadata.length&&!e.metadataTrack_&&(e.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=n.metadata.dispatchType)}(this,this.mediaSource_,t),this.pendingBuffers_.push(t)}},{key:"done_",value:function(e){"closed"!==this.mediaSource_.readyState?this.processPendingSegments_():this.pendingBuffers_.length=0}},{key:"videoSegmentTimingInfo_",value:function(e){var t={start:{decode:e.start.dts/9e4,presentation:e.start.pts/9e4},end:{decode:e.end.dts/9e4,presentation:e.end.pts/9e4},baseMediaDecodeTime:e.baseMediaDecodeTime/9e4};e.prependedContentDuration&&(t.prependedContentDuration=e.prependedContentDuration/9e4),this.trigger({type:"videoSegmentTimingInfo",videoSegmentTimingInfo:t})}},{key:"createRealSourceBuffers_",value:function(){var e=this,t=["audio","video"];t.forEach((function(n){if(e[n+"Codec_"]&&!e[n+"Buffer_"]){var r=null;if(e.mediaSource_[n+"Buffer_"])(r=e.mediaSource_[n+"Buffer_"]).updating=!1;else{var i=n+'/mp4;codecs="'+e[n+"Codec_"]+'"';r=function(e,t){var n=e.addSourceBuffer(t),r=Object.create(null);r.updating=!1,r.realBuffer_=n;var i=function(e){"function"==typeof n[e]?r[e]=function(){return n[e].apply(n,arguments)}:void 0===r[e]&&Object.defineProperty(r,e,{get:function(){return n[e]},set:function(t){return n[e]=t}})};for(var a in n)i(a);return r}(e.mediaSource_.nativeMediaSource_,i),e.mediaSource_[n+"Buffer_"]=r}e[n+"Buffer_"]=r,["update","updatestart","updateend"].forEach((function(i){r.addEventListener(i,(function(){if("audio"!==n||!e.audioDisabled_)return"updateend"===i&&(e[n+"Buffer_"].updating=!1),t.every((function(t){return!("audio"!==t||!e.audioDisabled_)||(n===t||!e[t+"Buffer_"]||!e[t+"Buffer_"].updating)}))?e.trigger(i):void 0}))}))}}))}},{key:"appendBuffer",value:function(e){if(this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length){var t=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:t.end(t.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:co(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)}),this.transmuxer_.postMessage({action:"push",data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength},[e.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(e){this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var r=t[0].pts,i=0;i<e.length&&!(e[i].pts>=r);i++);return e.slice(0,i).concat(t)}(this.gopBuffer_,e.data.gopInfo,this.safeAppend_)}},{key:"remove",value:function(e,t){if(this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(e,t),this.gopBuffer_=function(e,t,n,r){for(var i=Math.ceil(9e4*(t-r)),a=Math.ceil(9e4*(n-r)),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var u=s+1;u--&&!(e[u].pts<=i););return u=Math.max(u,0),o.splice(u,s-u+1),o}(this.gopBuffer_,e,t,this.timeMapping_)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(e,t)),Ha(e,t,this.metadataTrack_),this.inbandTextTracks_)for(var n in this.inbandTextTracks_)Ha(e,t,this.inbandTextTracks_[n])}},{key:"processPendingSegments_",value:function(){var e={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};if(!this.pendingBuffers_.length)return this.trigger("updateend"),void(this.bufferUpdating_=!1);e=this.pendingBuffers_.reduce((function(e,t){var n=t.type,r=t.data,i=t.initSegment;return e[n].segments.push(r),e[n].bytes+=r.byteLength,e[n].initSegment=i,t.captions&&(e.captions=e.captions.concat(t.captions)),t.info&&(e[n].info=t.info),t.metadata&&(e.metadata=e.metadata.concat(t.metadata)),e}),e),this.videoBuffer_||this.audioBuffer_||(0===e.video.bytes&&(this.videoCodec_=null),0===e.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),e.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:e.audio.info}),e.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:e.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(e.audio.segments.unshift(e.audio.initSegment),e.audio.bytes+=e.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var t=!1;this.videoBuffer_&&e.video.bytes?(e.video.segments.unshift(e.video.initSegment),e.video.bytes+=e.video.initSegment.byteLength,this.concatAndAppendSegments_(e.video,this.videoBuffer_)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(t=!0),Va(this,e.captions,e.metadata),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(e.audio,this.audioBuffer_),this.pendingBuffers_.length=0,t&&this.trigger("updateend"),this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(e,t){var n=0,r=void 0;if(e.bytes){r=new Uint8Array(e.bytes),e.segments.forEach((function(e){r.set(e,n),n+=e.byteLength}));try{t.updating=!0,t.appendBuffer(r)}catch(e){this.mediaSource_.player_&&this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:e.message,originalError:e})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort(),!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),t}(Hi.EventTarget),fo=function(e){function t(){Wi(this,t);var e=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=void 0;for(n in e.nativeMediaSource_=new i.a.MediaSource,e.nativeMediaSource_)n in t.prototype||"function"!=typeof e.nativeMediaSource_[n]||(e[n]=e.nativeMediaSource_[n].bind(e.nativeMediaSource_));return e.duration_=NaN,Object.defineProperty(e,"duration",{get:function(){return this.duration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(e){this.duration_=e,e===1/0||(this.nativeMediaSource_.duration=e)}}),Object.defineProperty(e,"seekable",{get:function(){return this.duration_===1/0?Hi.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(e,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(e,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),e.sourceBuffers=[],e.activeSourceBuffers_=[],e.updateActiveSourceBuffers_=function(){if(e.activeSourceBuffers_.length=0,1===e.sourceBuffers.length){var t=e.sourceBuffers[0];return t.appendAudioInitSegment_=!0,t.audioDisabled_=!t.audioCodec_,void e.activeSourceBuffers_.push(t)}for(var n=!1,r=!0,i=0;i<e.player_.audioTracks().length;i++){var a=e.player_.audioTracks()[i];if(a.enabled&&"main"!==a.kind){n=!0,r=!1;break}}e.sourceBuffers.forEach((function(t,i){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=n;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,r=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=i?r:!r,t.audioDisabled_))return;e.activeSourceBuffers_.push(t)}))},e.onPlayerMediachange_=function(){e.sourceBuffers.forEach((function(e){e.appendAudioInitSegment_=!0}))},e.onHlsReset_=function(){e.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.postMessage({action:"resetCaptions"})}))},e.onHlsSegmentTimeMapping_=function(t){e.sourceBuffers.forEach((function(e){return e.timeMapping_=t.mapping}))},["sourceopen","sourceclose","sourceended"].forEach((function(e){this.nativeMediaSource_.addEventListener(e,this.trigger.bind(this))}),e),e.on("sourceopen",(function(t){var n=o.a.querySelector('[src="'+e.url_+'"]');n&&(e.player_=Hi(n.parentNode),e.player_&&(e.player_.tech_.on("hls-reset",e.onHlsReset_),e.player_.tech_.on("hls-segment-time-mapping",e.onHlsSegmentTimeMapping_),e.player_.audioTracks&&e.player_.audioTracks()&&(e.player_.audioTracks().on("change",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("addtrack",e.updateActiveSourceBuffers_),e.player_.audioTracks().on("removetrack",e.updateActiveSourceBuffers_)),e.player_.on("mediachange",e.onPlayerMediachange_)))})),e.on("sourceended",(function(t){for(var n=Ya(e.duration),r=0;r<e.sourceBuffers.length;r++){var i=e.sourceBuffers[r],a=i.metadataTrack_&&i.metadataTrack_.cues;a&&a.length&&(a[a.length-1].endTime=n)}})),e.on("sourceclose",(function(e){this.sourceBuffers.forEach((function(e){e.transmuxer_&&e.transmuxer_.terminate()})),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_&&this.player_.tech_.el_&&(this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))})),e}return Ki(t,e),Xi(t,[{key:"addSeekableRange_",value:function(e,t){var n=void 0;if(this.duration!==1/0)throw(n=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name="InvalidStateError",n.code=11,n;(t>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))&&(this.nativeMediaSource_.duration=t)}},{key:"addSourceBuffer",value:function(e){var t=void 0,n=function(e){var t={type:"",parameters:{}},n=e.trim().split(";");return t.type=n.shift().trim(),n.forEach((function(e){var n=e.trim().split("=");if(n.length>1){var r=n[0].replace(/"/g,"").trim(),i=n[1].replace(/"/g,"").trim();t.parameters[r]=i}})),t}(e);if(/^(video|audio)\/mp2t$/i.test(n.type)){var r=[];n.parameters&&n.parameters.codecs&&(r=n.parameters.codecs.split(","),r=(r=io(r)).filter((function(e){return uo(e)||lo(e)}))),0===r.length&&(r=["avc1.4d400d","mp4a.40.2"]),t=new ho(this,r),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),t.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)}else t=this.nativeMediaSource_.addSourceBuffer(e);return this.sourceBuffers.push(t),t}}]),t}(Hi.EventTarget),po=0;Hi.mediaSources={};var go=function(e,t){var n=Hi.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},mo=function(){return!!i.a.MediaSource&&!!i.a.MediaSource.isTypeSupported&&i.a.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},vo=function(){if(this.MediaSource={open:go,supportsNativeMediaSources:mo},mo())return new fo;throw new Error("Cannot use create a virtual MediaSource for this video")};vo.open=go,vo.supportsNativeMediaSources=mo;var yo={createObjectURL:function(e){var t=void 0;return e instanceof fo?(t=i.a.URL.createObjectURL(e.nativeMediaSource_),e.url_=t,t):e instanceof fo?(t="blob:vjs-media-source/"+po,po++,Hi.mediaSources[t]=e,t):(t=i.a.URL.createObjectURL(e),e.url_=t,t)}};Hi.MediaSource=vo,Hi.URL=yo;var _o=Hi.EventTarget,To=Hi.mergeOptions,Eo=function(e,t){for(var n=void 0,r=To(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod}),i=0;i<t.playlists.length;i++){var a=ra(r,t.playlists[i]);a?r=a:n=!0}return na(t,(function(e,t,i,a){if(e.playlists&&e.playlists.length){var o=e.playlists[0].uri,s=ra(r,e.playlists[0]);s&&((r=s).mediaGroups[t][i][a].playlists[0]=r.playlists[o],n=!1)}})),n?null:r},Mo=function(e){var t=e.byterange.offset+e.byterange.length-1;return e.uri+"-"+e.byterange.offset+"-"+t},bo=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},Ao=function(e,t){var n={};for(var r in e){var i=e[r].sidx;if(i){var a=Mo(i);if(!t[a])break;var o=t[a].sidxInfo;bo(o,i)&&(n[a]=t[a])}}return n},wo=function(e,t,n,r,i){var a={uri:qi(r.handleManifestRedirects,e.resolvedUri),byterange:e.byterange,playlist:t};return n(Hi.mergeOptions(a,{responseType:"arraybuffer",headers:xa(a)}),i)},So=function(e){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments[3];Wi(this,t);var a=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),o=r.withCredentials,s=void 0!==o&&o,u=r.handleManifestRedirects,l=void 0!==u&&u;if(a.hls_=n,a.withCredentials=s,a.handleManifestRedirects=l,!e)throw new Error("A non-empty playlist URL or playlist is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().uri)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},"string"==typeof e?(a.srcUrl=e,a.sidxMapping_={},Zi(a)):(a.setupChildLoader(i,e),a)}return Ki(t,e),Xi(t,[{key:"setupChildLoader",value:function(e,t){this.masterPlaylistLoader_=e,this.childPlaylist_=t}},{key:"dispose",value:function(){this.stopRequest(),this.loadedPlaylists_={},i.a.clearTimeout(this.minimumUpdatePeriodTimeout_),i.a.clearTimeout(this.mediaRequest_),i.a.clearTimeout(this.mediaUpdateTimeout)}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"sidxRequestFinished_",value:function(e,t,n,r){var i=this;return function(a,o){if(i.request){if(i.request=null,a)return i.error={status:o.status,message:"DASH playlist request error at URL: "+e.uri,response:o.response,code:2},n&&(i.state=n),i.trigger("error"),r(t,null);var s=new Uint8Array(o.response),u=x.a.parseSidx(s.subarray(8));return r(t,u)}}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}var r=!this.media_||e.uri!==this.media_.uri;if(r&&this.loadedPlaylists_[e.uri]&&this.loadedPlaylists_[e.uri].endList)return this.state="HAVE_METADATA",this.media_=e,void(r&&(this.trigger("mediachanging"),this.trigger("mediachange")));if(r)if(this.media_&&this.trigger("mediachanging"),e.sidx){var a=void 0,o=void 0;this.masterPlaylistLoader_?(a=this.masterPlaylistLoader_.master,o=this.masterPlaylistLoader_.sidxMapping_):(a=this.master,o=this.sidxMapping_);var s=Mo(e.sidx);o[s]={sidxInfo:e.sidx},this.request=wo(e.sidx,e,this.hls_.xhr,{handleManifestRedirects:this.handleManifestRedirects},this.sidxRequestFinished_(e,a,n,(function(r,i){if(!r||!i)throw new Error("failed to request sidx");o[s].sidx=i,t.haveMetadata({startingState:n,playlist:r.playlists[e.uri]})})))}else this.mediaRequest_=i.a.setTimeout(this.haveMetadata.bind(this,{startingState:n,playlist:e}),0)}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.uri]=n,this.mediaRequest_=null,this.refreshMedia_(n.uri),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.stopRequest(),i.a.clearTimeout(this.mediaUpdateTimeout),i.a.clearTimeout(this.minimumUpdatePeriodTimeout_),"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(e){var t=this;i.a.clearTimeout(this.mediaUpdateTimeout),i.a.clearTimeout(this.minimumUpdatePeriodTimeout_);var n=this.media();if(e){var r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=i.a.setTimeout((function(){return t.load()}),r)}else this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var e=Object(w.a)(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_,sidxMapping:this.sidxMapping_});e.uri=this.srcUrl;for(var t=0;t<e.playlists.length;t++){var n="placeholder-uri-"+t;e.playlists[t].uri=n,e.playlists[n]=e.playlists[t]}return na(e,(function(t,n,r,i){if(t.playlists&&t.playlists.length){var a="placeholder-uri-"+n+"-"+r+"-"+i;t.playlists[0].uri=a,e.playlists[a]=t.playlists[0]}})),ia(e),aa(e),e}},{key:"start",value:function(){var e=this;this.started=!0,this.masterPlaylistLoader_?this.mediaRequest_=i.a.setTimeout(this.haveMaster_.bind(this),0):this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=n.responseText,n.responseHeaders&&n.responseHeaders.date?e.masterLoaded_=Date.parse(n.responseHeaders.date):e.masterLoaded_=Date.now(),e.srcUrl=qi(e.handleManifestRedirects,e.srcUrl,n),e.syncClientServerClock_(e.onClientServerClockSync_.bind(e))}}))}},{key:"syncClientServerClock_",value:function(e){var t=this,n=Object(w.b)(this.masterXml_);return null===n?(this.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.clientOffset_=n.value-Date.now(),e()):void(this.request=this.hls_.xhr({uri:Qi(this.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(r,i){if(t.request){if(r)return t.clientOffset_=t.masterLoaded_-Date.now(),e();var a=void 0;a="HEAD"===n.method?i.responseHeaders&&i.responseHeaders.date?Date.parse(i.responseHeaders.date):t.masterLoaded_:Date.parse(i.responseText),t.clientOffset_=a-Date.now(),e()}})))}},{key:"haveMaster_",value:function(){this.state="HAVE_MASTER",this.mediaRequest_=null,this.masterPlaylistLoader_?this.media_||this.media(this.childPlaylist_):(this.master=this.parseMasterXml(),this.trigger("loadedplaylist"))}},{key:"onClientServerClockSync_",value:function(){var e=this;this.haveMaster_(),this.hasPendingRequest()||this.media_||this.media(this.master.playlists[0]),this.master&&this.master.minimumUpdatePeriod&&(this.minimumUpdatePeriodTimeout_=i.a.setTimeout((function(){e.trigger("minimumUpdatePeriod")}),this.master.minimumUpdatePeriod))}},{key:"refreshXml_",value:function(){var e=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"DASH playlist request error at URL: "+e.srcUrl,responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.masterXml_=n.responseText,e.sidxMapping_=function(e,t,n,r){var i=Object(w.a)(e,{manifestUri:t,clientOffset:n}),a=Ao(i.playlists,r);return na(i,(function(e,t,n,i){if(e.playlists&&e.playlists.length){var o=e.playlists;a=To(a,Ao(o,r))}})),a}(e.masterXml_,e.srcUrl,e.clientOffset_,e.sidxMapping_);var r=e.parseMasterXml(),a=Eo(e.master,r),o=e.media().sidx;if(a)if(o){var s=Mo(o);if(!e.sidxMapping_[s]){var u=e.media();e.request=wo(u.sidx,u,e.hls_.xhr,{handleManifestRedirects:e.handleManifestRedirects},e.sidxRequestFinished_(u,r,e.state,(function(t,n){if(!t||!n)throw new Error("failed to request sidx on minimumUpdatePeriod");e.sidxMapping_[s].sidx=n,e.minimumUpdatePeriodTimeout_=i.a.setTimeout((function(){e.trigger("minimumUpdatePeriod")}),e.master.minimumUpdatePeriod),e.refreshMedia_(e.media().uri)})))}}else e.master=a;e.minimumUpdatePeriodTimeout_=i.a.setTimeout((function(){e.trigger("minimumUpdatePeriod")}),e.master.minimumUpdatePeriod)}}))}},{key:"refreshMedia_",value:function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media uri");var n=void 0,r=void 0;this.masterPlaylistLoader_?(n=this.masterPlaylistLoader_.master,r=this.masterPlaylistLoader_.parseMasterXml()):(n=this.master,r=this.parseMasterXml());var a=Eo(n,r);a?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=a:this.master=a,this.media_=a.playlists[e]):(this.media_=r.playlists[e],this.trigger("playlistunchanged")),this.media().endList||(this.mediaUpdateTimeout=i.a.setTimeout((function(){t.trigger("mediaupdatetimeout")}),oa(this.media(),!!a))),this.trigger("loadedplaylist")}}]),t}(_o),xo=function(e){return Hi.log.debug?Hi.log.debug.bind(Hi,"VHS:",e+" >"):function(){}};function Do(){}var Io=function(){function e(t,n,r,i){Wi(this,e),this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,this.type_=r,this.mimeType_=n,this.logger_=xo("SourceUpdater["+r+"]["+n+"]"),"closed"===t.readyState?t.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,n,i)):this.createSourceBuffer_(n,i)}return Xi(e,[{key:"createSourceBuffer_",value:function(e,t){var n=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(e),this.logger_("created SourceBuffer"),t&&(t.trigger("sourcebufferadded"),this.mediaSource.sourceBuffers.length<2)?t.on("sourcebufferadded",(function(){n.start_()})):this.start_()}},{key:"start_",value:function(){var e=this;this.started_=!0,this.onUpdateendCallback_=function(){var t=e.pendingCallback_;e.pendingCallback_=null,e.sourceBuffer_.removing=!1,e.logger_("buffered ["+za(e.buffered())+"]"),t&&t(),e.runCallback_()},this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_),this.runCallback_()}},{key:"abort",value:function(e){var t=this;this.processedAppend_&&this.queueCallback_((function(){t.sourceBuffer_.abort()}),e)}},{key:"appendBuffer",value:function(e,t){var n=this;this.processedAppend_=!0,this.queueCallback_((function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.addEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),n.sourceBuffer_.appendBuffer(e.bytes)}),(function(){e.videoSegmentTimingInfoCallback&&n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo",e.videoSegmentTimingInfoCallback),t()}))}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:Hi.createTimeRanges()}},{key:"remove",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Do;this.processedAppend_&&this.queueCallback_((function(){n.logger_("remove ["+e+" => "+t+"]"),n.sourceBuffer_.removing=!0,n.sourceBuffer_.remove(e,t)}),r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||!!this.pendingCallback_&&this.pendingCallback_!==Do}},{key:"timestampOffset",value:function(e){var t=this;return void 0!==e&&(this.queueCallback_((function(){t.sourceBuffer_.timestampOffset=e,t.runCallback_()})),this.timestampOffset_=e),this.timestampOffset_}},{key:"queueCallback_",value:function(e,t){this.callbacks_.push([e.bind(this),t]),this.runCallback_()}},{key:"runCallback_",value:function(){var e=void 0;!this.updating()&&this.callbacks_.length&&this.started_&&(e=this.callbacks_.shift(),this.pendingCallback_=e[1],e[0]())}},{key:"dispose",value:function(){var e=this,t=function t(){e.sourceBuffer_&&"open"===e.mediaSource.readyState&&e.sourceBuffer_.abort(),e.sourceBuffer_.removeEventListener("updateend",t)};this.sourceBuffer_.removeEventListener("updateend",this.onUpdateendCallback_),this.sourceBuffer_.removing?this.sourceBuffer_.addEventListener("updateend",t):t()}}]),e}(),Co={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},No=2,Lo=-101,Oo=-102,Ro=function(e){e.forEach((function(e){e.abort()}))},jo=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Lo,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Oo,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:No,xhr:t}:null},Po=function(e,t,n){var r=0,i=!1;return function(a,o){if(!i)return a?(i=!0,Ro(e),n(a,o)):(r+=1)===e.length?(o.endOfAllRequests=Date.now(),o.encryptedBytes?function(e,t,n){e.addEventListener("message",(function r(i){if(i.data.source===t.requestId){e.removeEventListener("message",r);var a=i.data.decrypted;return t.bytes=new Uint8Array(a.bytes,a.byteOffset,a.byteLength),n(null,t)}}));var r=void 0;r=t.key.bytes.slice?t.key.bytes.slice():new Uint32Array(Array.prototype.slice.call(t.key.bytes)),e.postMessage(Na({source:t.requestId,encrypted:t.encryptedBytes,key:r,iv:t.key.iv}),[t.encryptedBytes.buffer,r.buffer])}(t,o,n):n(null,o)):void 0}},ko=function(e,t){return function(n){var r,i,a;return e.stats=Hi.mergeOptions(e.stats,(i=(r=n).target,(a={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0}).bytesReceived=r.loaded,a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3),a)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),t(n,e)}},Uo=function(e,t,n,r,i,a,o){var s=[],u=Po(s,n,o);if(i.key&&!i.key.bytes){var l=e(Hi.mergeOptions(t,{uri:i.key.resolvedUri,responseType:"arraybuffer"}),function(e,t){return function(n,r){var i=r.response,a=jo(n,r);if(a)return t(a,e);if(16!==i.byteLength)return t({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:No,xhr:r},e);var o=new DataView(i);return e.key.bytes=new Uint32Array([o.getUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),t(null,e)}}(i,u));s.push(l)}if(i.map&&!i.map.bytes){var c=e(Hi.mergeOptions(t,{uri:i.map.resolvedUri,responseType:"arraybuffer",headers:xa(i.map)}),function(e,t,n){return function(r,i){var a=i.response,o=jo(r,i);return o?n(o,e):0===a.byteLength?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:No,xhr:i},e):(e.map.bytes=new Uint8Array(i.response),t&&!t.isInitialized()&&t.init(),e.map.timescales=I.a.timescale(e.map.bytes),e.map.videoTrackIds=I.a.videoTrackIds(e.map.bytes),n(null,e))}}(i,r,u));s.push(c)}var d=e(Hi.mergeOptions(t,{uri:i.resolvedUri,responseType:"arraybuffer",headers:xa(i)}),function(e,t,n){return function(r,i){var a=i.response,o=jo(r,i),s=void 0;return o?n(o,e):0===a.byteLength?n({status:i.status,message:"Empty HLS segment content at URL: "+i.uri,code:No,xhr:i},e):(e.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(i),e.key?e.encryptedBytes=new Uint8Array(i.response):e.bytes=new Uint8Array(i.response),t&&e.map&&e.map.bytes&&(t.isInitialized()||t.init(),(s=t.parse(e.bytes,e.map.videoTrackIds,e.map.timescales))&&s.captions&&(e.captionStreams=s.captionStreams,e.fmp4Captions=s.captions)),n(null,e))}}(i,r,u));return d.addEventListener("progress",ko(i,a)),s.push(d),function(){return Ro(s)}},Bo=function(e,t){var n;return e&&(n=i.a.getComputedStyle(e))?n[t]:""},Fo=function(e,t){var n=e.slice();e.sort((function(e,r){var i=t(e,r);return 0===i?n.indexOf(e)-n.indexOf(r):i}))},zo=function(e,t){var n=void 0,r=void 0;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||i.a.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),n-(r=r||i.a.Number.MAX_VALUE)},Go=function(e,t,n){if(!e||!t)return!1;var r=n===e.segments.length;return e.endList&&"open"===t.readyState&&r},Ho=function(e){return"number"==typeof e&&isFinite(e)},Yo=function(e){function t(e){Wi(this,t);var n=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e)throw new TypeError("Initialization settings are required");if("function"!=typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=e.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.hasPlayed_=e.hasPlayed,n.currentTime_=e.currentTime,n.seekable_=e.seekable,n.seeking_=e.seeking,n.duration_=e.duration,n.mediaSource_=e.mediaSource,n.hls_=e.hls,n.loaderType_=e.loaderType,n.startingMedia_=void 0,n.segmentMetadataTrack_=e.segmentMetadataTrack,n.goalBufferLength_=e.goalBufferLength,n.sourceType_=e.sourceType,n.inbandTextTracks_=e.inbandTextTracks,n.state_="INIT",n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.mimeType_=null,n.sourceUpdater_=null,n.xhrOptions_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=e.cacheEncryptionKeys,n.keyCache_={},"main"===n.loaderType_?n.captionParser_=new N.a:n.captionParser_=null,n.decrypter_=e.decrypter,n.syncController_=e.syncController,n.syncPoint_={segmentIndex:0,time:0},n.syncController_.on("syncinfoupdate",(function(){return n.trigger("syncinfoupdate")})),n.mediaSource_.addEventListener("sourceopen",(function(){return n.ended_=!1})),n.fetchAtBuffer_=!1,n.logger_=xo("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(n,"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e)}}),n}return Ki(t,e),Xi(t,[{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0}},{key:"dispose",value:function(){this.state="DISPOSED",this.pause(),this.abort_(),this.sourceUpdater_&&this.sourceUpdater_.dispose(),this.resetStats_(),this.captionParser_&&this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:function(e){return void 0!==e&&(this.error_=e),this.pendingSegment_=null,this.error_}},{key:"endOfStream",value:function(){this.ended_=!0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():Hi.createTimeRanges()}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=La(e),r=this.initSegments_[n];return t&&!r&&e.bytes&&(this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,timescales:e.timescales,videoTrackIds:e.videoTrackIds}),r||e}},{key:"segmentKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=Oa(e),r=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!r&&e.bytes&&(this.keyCache_[n]=r={resolvedUri:e.resolvedUri,bytes:e.bytes});var i={resolvedUri:(r||e).resolvedUri};return r&&(i.bytes=r.bytes),i}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){if(this.monitorBuffer_(),this.playlist_){if(this.syncController_.setDateTimeMapping(this.playlist_),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},{key:"init_",value:function(){return this.state="READY",this.sourceUpdater_=new Io(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e){var n=this.playlist_,r=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var i=null;if(n&&(n.id?i=n.id:n.uri&&(i=n.uri)),this.logger_("playlist update ["+i+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===e.uri){var a=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),r&&(r.mediaIndex-=a,r.mediaIndex>=0&&(r.segment=e.segments[r.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(i.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(e,t){this.mimeType_||(this.mimeType_=e,this.sourceBufferEmitter_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(e){this.ended_=!1,this.resetLoader(),this.remove(0,this.duration_(),e),this.captionParser_&&this.captionParser_.clearAllCaptions(),this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.mediaIndex=null,this.syncPoint_=null,this.abort()}},{key:"remove",value:function(e,t,n){if(this.sourceUpdater_&&this.sourceUpdater_.remove(e,t,n),Ha(e,t,this.segmentMetadataTrack_),this.inbandTextTracks_)for(var r in this.inbandTextTracks_)Ha(e,t,this.inbandTextTracks_[r])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&i.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i.a.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&i.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=i.a.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(this.isEndOfStream_(e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&(e.timeline!==this.currentTimeline_&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_&&this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"isEndOfStream_",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_;return Go(t,this.mediaSource_,e)&&!this.sourceUpdater_.updating()}},{key:"checkBuffer_",value:function(e,t,n,r,i,a){var o=0,s=void 0;e.length&&(o=e.end(e.length-1));var u=Math.max(0,o-i);if(!t.segments.length)return null;if(u>=this.goalBufferLength_())return null;if(!r&&u>=1)return null;if(null===a)return n=this.getSyncSegmentCandidate_(t),this.generateSegmentInfo_(t,n,null,!0);if(null!==n){t.segments[n];return s=o,this.generateSegmentInfo_(t,n+1,s,!1)}if(this.fetchAtBuffer_){var l=ba.getMediaInfoForTime(t,o,a.segmentIndex,a.time);n=l.mediaIndex,s=l.startTime}else{var c=ba.getMediaInfoForTime(t,i,a.segmentIndex,a.time);n=c.mediaIndex,s=c.startTime}return this.generateSegmentInfo_(t,n,s,!1)}},{key:"getSyncSegmentCandidate_",value:function(e){var t=this;if(-1===this.currentTimeline_)return 0;var n=e.segments.map((function(e,t){return{timeline:e.timeline,segmentIndex:t}})).filter((function(e){return e.timeline===t.currentTimeline_}));return n.length?n[Math.min(n.length-1,1)].segmentIndex:Math.max(e.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(e,t,n,r){if(t<0||t>=e.segments.length)return null;var i=e.segments[t];return{requestId:"segment-loader-"+Math.random(),uri:i.resolvedUri,mediaIndex:t,isSyncRequest:r,startOfSegment:n,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:i.timeline,duration:i.duration,segment:i}}},{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),n=e.bandwidth,r=this.pendingSegment_.duration,i=ba.estimateSegmentRequestTime(r,n,this.playlist_,e.bytesReceived),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e.length?e.end(e.length-1):0;return(r-t)/n}(this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(i<=a)return!1;var o=function(e){var t=e.master,n=e.currentTime,r=e.bandwidth,i=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,s=e.currentTimeline,u=e.syncController,l=t.playlists.filter((function(e){return!ba.isIncompatible(e)})),c=l.filter(ba.isEnabled);c.length||(c=l.filter((function(e){return!ba.isDisabled(e)})));var d=c.filter(ba.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=u.getSyncPoint(e,i,s,n)?1:2;return{playlist:e,rebufferingImpact:ba.estimateSegmentRequestTime(a,r,e)*t-o}})),h=d.filter((function(e){return e.rebufferingImpact<=0}));return Fo(h,(function(e,t){return zo(t.playlist,e.playlist)})),h.length?h[0]:(Fo(d,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),d[0]||null)}({master:this.hls_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:r,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=i-a-o.rebufferingImpact,u=.5;return a<=1/30&&(u=1),!o.playlist||o.playlist.uri===this.playlist_.uri||s<u?!1:(this.bandwidth=o.playlist.attributes.BANDWIDTH*Co.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:function(e,t){this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(t.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(e){this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),e.abortRequests=Uo(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(e),this.handleProgress_.bind(this),this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(e){var t=function(e,t,n){var r=void 0;return r=e.length&&e.start(0)>0&&e.start(0)<t?e.start(0):t-30,Math.min(r,t-n)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)}},{key:"createSimplifiedSegmentObj_",value:function(e){var t=e.segment,n={resolvedUri:t.resolvedUri,byterange:t.byterange,requestId:e.requestId};if(t.key){var r=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);n.key=this.segmentKey(t.key),n.key.iv=r}return t.map&&(n.map=this.initSegment(t.map)),n}},{key:"segmentRequestFinished_",value:function(e,t){if(this.mediaRequests+=1,t.stats&&(this.mediaBytesTransferred+=t.stats.bytesReceived,this.mediaTransferDuration+=t.stats.roundTripTime),this.pendingSegment_){if(t.requestId===this.pendingSegment_.requestId){if(e)return this.pendingSegment_=null,this.state="READY",e.code===Oo?void(this.mediaRequestsAborted+=1):(this.pause(),e.code===Lo?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,void this.trigger("bandwidthupdate")):(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error")));this.bandwidth=t.stats.bandwidth,this.roundTrip=t.stats.roundTripTime,t.map&&(t.map=this.initSegment(t.map,!0)),t.key&&this.segmentKey(t.key,!0),this.processSegmentResponse_(t)}}else this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(!function(e,t,n){for(var r in n)if(!e[r]){t.trigger({type:"usage",name:"hls-608"});var i=t.textTracks().getTrackById(r);e[r]=i||t.addRemoteTextTrack({kind:"captions",id:r,label:r},!1).track}}(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),function(e){var t=e.inbandTextTracks,n=e.captionArray,r=e.timestampOffset;if(n){var i=window.WebKitDataCue||window.VTTCue;n.forEach((function(e){var n=e.stream,a=e.startTime,o=e.endTime;t[n]&&(a+=r,o+=r,t[n].addCue(new i(a,o,e.text)))}))}}({inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_&&this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,n=t.segment,r=this.syncController_.probeSegmentInfo(t);void 0===this.startingMedia_&&r&&(r.containsAudio||r.containsVideo)&&(this.startingMedia_={containsAudio:r.containsAudio,containsVideo:r.containsVideo});var i,a,o,s=(i=this.loaderType_,a=this.startingMedia_,o=r,"main"===i&&a&&o?o.containsAudio||o.containsVideo?a.containsVideo&&!o.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!a.containsVideo&&o.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(s)return this.error({message:s,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");if(null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()){if(r&&r.segmentTimestampInfo){var u=r.segmentTimestampInfo[0].ptsTime,l=r.segmentTimestampInfo[0].dtsTime;t.timestampOffset-=u-l}this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset")}var c=this.syncController_.mappingForTimeline(t.timeline);if(null!==c&&this.trigger({type:"segmenttimemapping",mapping:c}),this.state="APPENDING",n.map){var d=La(n.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==d){var h=this.initSegment(n.map);this.sourceUpdater_.appendBuffer({bytes:h.bytes},(function(){e.activeInitSegmentId_=d}))}}t.byteLength=t.bytes.byteLength,"number"==typeof n.start&&"number"==typeof n.end?this.mediaSecondsLoaded+=n.end-n.start:this.mediaSecondsLoaded+=n.duration,this.logger_(function(e){var t=e.segment,n=t.start,r=t.end,i=e.playlist,a=i.mediaSequence,o=i.id,s=i.segments,u=void 0===s?[]:s,l=e.mediaIndex,c=e.timeline;return["appending ["+l+"] of ["+a+", "+(a+u.length)+"] from playlist ["+o+"]","["+n+" => "+r+"] in timeline ["+c+"]"].join(" ")}(t)),this.sourceUpdater_.appendBuffer({bytes:t.bytes,videoSegmentTimingInfoCallback:this.handleVideoSegmentTimingInfo_.bind(this,t.requestId)},this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleVideoSegmentTimingInfo_",value:function(e,t){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var n=this.pendingSegment_.segment;n.videoTimingInfo||(n.videoTimingInfo={}),n.videoTimingInfo.transmuxerPrependedSeconds=t.videoSegmentTimingInfo.prependedContentDuration||0,n.videoTimingInfo.transmuxedPresentationStart=t.videoSegmentTimingInfo.start.presentation,n.videoTimingInfo.transmuxedPresentationEnd=t.videoSegmentTimingInfo.end.presentation,n.videoTimingInfo.baseMediaDecodeTime=t.videoSegmentTimingInfo.baseMediaDecodeTime}}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,n=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(n&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.isEndOfStream_(e.mediaIndex+1,e.playlist)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:function(e){var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,r=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(r-t)/++this.throughput.count}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,r=t.end;if(Ho(n)&&Ho(r)){Ha(n,r,this.segmentMetadataTrack_);var a=i.a.WebKitDataCue||i.a.VTTCue,o={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.uri,start:n,end:r},s=new a(n,r,JSON.stringify(o));s.value=o,this.segmentMetadataTrack_.addCue(s)}}}}]),t}(Hi.EventTarget),Vo=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Qo=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),qo=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Wi(this,t);var r=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.mediaSource_=null,r.subtitlesTrack_=null,r}return Ki(t,e),Xi(t,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return Hi.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return Hi.createTimeRanges([[t,n]])}},{key:"initSegment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=La(e),r=this.initSegments_[n];if(t&&!r&&e.bytes){var i=Qo.byteLength+e.bytes.byteLength,a=new Uint8Array(i);a.set(e.bytes),a.set(Qo,e.bytes.byteLength),this.initSegments_[n]=r={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return r||e}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",value:function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(e){return void 0===e?this.subtitlesTrack_:(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}},{key:"remove",value:function(e,t){Ha(e,t,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var e=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(t=this.skipEmptySegments_(t)){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline)){return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(t)}}},{key:"skipEmptySegments_",value:function(e){for(;e&&e.segment.empty;)e=this.generateSegmentInfo_(e.playlist,e.mediaIndex+1,e.startOfSegment+e.duration,e.isSyncRequest);return e}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var t=this.pendingSegment_,n=t.segment;if("function"!=typeof i.a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var r=void 0,a=function(){e.subtitlesTrack_.tech_.off("vttjsloaded",r),e.error({message:"Error loading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")};return r=function(){e.subtitlesTrack_.tech_.off("vttjserror",a),e.handleSegment_()},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",r),void this.subtitlesTrack_.tech_.one("vttjserror",a)}n.requested=!0;try{this.parseVTTCues_(t)}catch(e){return this.error({message:e.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytes.byteLength,this.mediaSecondsLoaded+=n.duration,t.cues.length&&this.remove(t.cues[0].endTime,t.cues[t.cues.length-1].endTime),t.cues.forEach((function(t){e.subtitlesTrack_.addCue(t)})),this.handleUpdateEnd_()}else this.state="READY"}},{key:"parseVTTCues_",value:function(e){var t=void 0,n=!1;"function"==typeof i.a.TextDecoder?t=new i.a.TextDecoder("utf8"):(t=i.a.WebVTT.StringDecoder(),n=!0);var r=new i.a.WebVTT.Parser(i.a,i.a.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},r.oncue=e.cues.push.bind(e.cues),r.ontimestampmap=function(t){return e.timestampmap=t},r.onparsingerror=function(e){Hi.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var a=e.segment.map.bytes;n&&(a=Vo(a)),r.parse(a)}var o=e.bytes;n&&(o=Vo(o)),r.parse(o),r.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var r=e.segment;if(t)if(e.cues.length){var i=e.timestampmap,a=i.MPEGTS/9e4-i.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-r.duration)}}}else r.empty=!0}}]),t}(Yo),Wo=function(e,t){for(var n=e.cues,r=0;r<n.length;r++){var i=n[r];if(t>=i.adStartTime&&t<=i.adEndTime)return i}return null},Xo=O.a.inspect,Ko=[{name:"VOD",run:function(e,t,n,r,i){if(n!==1/0){return{time:0,segmentIndex:0}}return null}},{name:"ProgramDateTime",run:function(e,t,n,r,i){if(!e.datetimeToDisplayTime)return null;var a=t.segments||[],o=null,s=null;i=i||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.dateTimeObject){var c=l.dateTimeObject.getTime()/1e3+e.datetimeToDisplayTime,d=Math.abs(i-c);if(null!==s&&(0===d||s<d))break;s=d,o={time:c,segmentIndex:u}}}return o}},{name:"Segment",run:function(e,t,n,r,i){var a=t.segments||[],o=null,s=null;i=i||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===r&&void 0!==l.start){var c=Math.abs(i-l.start);if(null!==s&&s<c)break;(!o||null===s||s>=c)&&(s=c,o={time:l.start,segmentIndex:u})}}return o}},{name:"Discontinuity",run:function(e,t,n,r,i){var a=null;if(i=i||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var u=t.discontinuityStarts[s],l=t.discontinuitySequence+s+1,c=e.discontinuities[l];if(c){var d=Math.abs(i-c.time);if(null!==o&&o<d)break;(!a||null===o||o>=d)&&(o=d,a={time:c.time,segmentIndex:u})}}return a}},{name:"Playlist",run:function(e,t,n,r,i){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence}:null}}],Zo=function(e){function t(){Wi(this,t);var e=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.inspectCache_=void 0,e.timelines=[],e.discontinuities=[],e.datetimeToDisplayTime=null,e.logger_=xo("SyncController"),e}return Ki(t,e),Xi(t,[{key:"getSyncPoint",value:function(e,t,n,r){var i=this.runStrategies_(e,t,n,r);return i.length?this.selectSyncPoint_(i,{key:"time",value:r}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var r=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return r.segmentIndex>0&&(r.time*=-1),Math.abs(r.time+da(e,r.segmentIndex,0))}},{key:"runStrategies_",value:function(e,t,n,r){for(var i=[],a=0;a<Ko.length;a++){var o=Ko[a],s=o.run(this,e,t,n,r);s&&(s.strategy=o.name,i.push({strategy:o.name,syncPoint:s}))}return i}},{key:"selectSyncPoint_",value:function(e,t){for(var n=e[0].syncPoint,r=Math.abs(e[0].syncPoint[t.key]-t.value),i=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<r&&(r=o,n=e[a].syncPoint,i=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+i+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){for(var n=t.mediaSequence-e.mediaSequence-1;n>=0;n--){var r=e.segments[n];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+n,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(e){if(!this.datetimeToDisplayTime&&e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0].dateTimeObject.getTime()/1e3;this.datetimeToDisplayTime=-t}}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(e){var t=e.segment,n=e.playlist,r=void 0;return(r=t.map?this.probeMp4Segment_(e):this.probeTsSegment_(e))&&this.calculateSegmentTimeMapping_(e,r)&&(this.saveDiscontinuitySyncInfo_(e),n.syncInfo||(n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:t.start})),r}},{key:"probeMp4Segment_",value:function(e){var t=e.segment,n=I.a.timescale(t.map.bytes),r=I.a.startTime(n,e.bytes);return null!==e.timestampOffset&&(e.timestampOffset-=r),{start:r,end:r+t.duration}}},{key:"probeTsSegment_",value:function(e){var t=Xo(e.bytes,this.inspectCache_),n=void 0,r=void 0,i=void 0;return t?(t.video&&2===t.video.length?(this.inspectCache_=t.video[1].dts,n=t.video[0].dtsTime,r=t.video[1].dtsTime,i=t.video):t.audio&&2===t.audio.length&&(this.inspectCache_=t.audio[1].dts,n=t.audio[0].dtsTime,r=t.audio[1].dtsTime,i=t.audio),{segmentTimestampInfo:i,start:n,end:r,containsVideo:t.video&&2===t.video.length,containsAudio:t.audio&&2===t.audio.length}):null}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t){var n=e.segment,r=this.timelines[e.timeline];if(null!==e.timestampOffset)r={time:e.startOfSegment,mapping:e.startOfSegment-t.start},this.timelines[e.timeline]=r,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+r.time+"] [mapping: "+r.mapping+"]"),n.start=e.startOfSegment,n.end=t.end+r.mapping;else{if(!r)return!1;n.start=t.start+r.mapping,n.end=t.end+r.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var r=0;r<t.discontinuityStarts.length;r++){var i=t.discontinuityStarts[r],a=t.discontinuitySequence+r+1,o=i-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var u=void 0;u=o<0?n.start-da(t,e.mediaIndex,i):n.end+da(t,e.mediaIndex+1,i),this.discontinuities[a]={time:u,accuracy:s}}}}}]),t}(Hi.EventTarget),Jo=new Za("./decrypter-worker.worker.js",(function(e,t){var n=this;!function(){var e=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=null,i=function(){function t(n){e(this,t),r||(r=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],n=e[1],r=t[4],i=n[4],a=void 0,o=void 0,s=void 0,u=[],l=[],c=void 0,d=void 0,h=void 0,f=void 0,p=void 0;for(a=0;a<256;a++)l[(u[a]=a<<1^283*(a>>7))^a]=a;for(o=s=0;!r[o];o^=c||1,s=l[s]||1)for(h=(h=s^s<<1^s<<2^s<<3^s<<4)>>8^255&h^99,r[o]=h,i[h]=o,p=16843009*u[d=u[c=u[o]]]^65537*d^257*c^16843008*o,f=257*u[h]^16843008*h,a=0;a<4;a++)t[a][o]=f=f<<24^f>>>8,n[a][h]=p=p<<24^p>>>8;for(a=0;a<5;a++)t[a]=t[a].slice(0),n[a]=n[a].slice(0);return e}()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=this._tables[0][4],c=this._tables[1],d=n.length,h=1;if(4!==d&&6!==d&&8!==d)throw new Error("Invalid aes key size");for(s=n.slice(0),u=[],this._key=[s,u],i=d;i<4*d+28;i++)o=s[i-1],(i%d==0||8===d&&i%d==4)&&(o=l[o>>>24]<<24^l[o>>16&255]<<16^l[o>>8&255]<<8^l[255&o],i%d==0&&(o=o<<8^o>>>24^h<<24,h=h<<1^283*(h>>7))),s[i]=s[i-d]^o;for(a=0;i;a++,i--)o=s[3&a?i:i-4],u[a]=i<=4||a<4?o:c[0][l[o>>>24]]^c[1][l[o>>16&255]]^c[2][l[o>>8&255]]^c[3][l[255&o]]}return t.prototype.decrypt=function(e,t,n,r,i,a){var o=this._key[1],s=e^o[0],u=r^o[1],l=n^o[2],c=t^o[3],d=void 0,h=void 0,f=void 0,p=o.length/4-2,g=void 0,m=4,v=this._tables[1],y=v[0],_=v[1],T=v[2],E=v[3],M=v[4];for(g=0;g<p;g++)d=y[s>>>24]^_[u>>16&255]^T[l>>8&255]^E[255&c]^o[m],h=y[u>>>24]^_[l>>16&255]^T[c>>8&255]^E[255&s]^o[m+1],f=y[l>>>24]^_[c>>16&255]^T[s>>8&255]^E[255&u]^o[m+2],c=y[c>>>24]^_[s>>16&255]^T[u>>8&255]^E[255&l]^o[m+3],m+=4,s=d,u=h,l=f;for(g=0;g<4;g++)i[(3&-g)+a]=M[s>>>24]<<24^M[u>>16&255]<<16^M[l>>8&255]<<8^M[255&c]^o[m++],d=s,s=u,u=l,l=c,c=d},t}(),a=function(){function t(){e(this,t),this.listeners={}}return t.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.prototype.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e].splice(n,1),n>-1},t.prototype.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,r=0;r<n;++r)t[r].call(this,arguments[1]);else for(var i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,i)},t.prototype.dispose=function(){this.listeners={}},t.prototype.pipe=function(e){this.on("data",(function(t){e.push(t)}))},t}(),o=function(t){function n(){e(this,n);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,a));return r.jobs=[],r.delay=1,r.timeout_=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),n.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n}(a),s=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},u=function(){function n(t,r,i,a){e(this,n);var u=n.STEP,l=new Int32Array(t.buffer),c=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new o,this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+u),r,i,c)),d=u;d<l.length;d+=u)i=new Uint32Array([s(l[d-4]),s(l[d-3]),s(l[d-2]),s(l[d-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(d,d+u),r,i,c));this.asyncStream_.push((function(){var e;a(null,(e=c).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return n.prototype.decryptChunk_=function(e,t,n,r){return function(){var a=function(e,t,n){var r=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),a=new i(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),u=new Int32Array(o.buffer),l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0;for(l=n[0],c=n[1],d=n[2],h=n[3],v=0;v<r.length;v+=4)f=s(r[v]),p=s(r[v+1]),g=s(r[v+2]),m=s(r[v+3]),a.decrypt(f,p,g,m,u,v),u[v]=s(u[v]^l),u[v+1]=s(u[v+1]^c),u[v+2]=s(u[v+2]^d),u[v+3]=s(u[v+3]^h),l=f,c=p,d=g,h=m;return o}(e,t,n);r.set(a,e.byteOffset)}},t(n,null,[{key:"STEP",get:function(){return 32e3}}]),n}();new function(e){e.onmessage=function(t){var n=t.data,r=new Uint8Array(n.encrypted.bytes,n.encrypted.byteOffset,n.encrypted.byteLength),i=new Uint32Array(n.key.bytes,n.key.byteOffset,n.key.byteLength/4),a=new Uint32Array(n.iv.bytes,n.iv.byteOffset,n.iv.byteLength/4);new u(r,i,a,(function(t,r){var i,a;e.postMessage((i={source:n.source,decrypted:r},a={},Object.keys(i).forEach((function(e){var t=i[e];ArrayBuffer.isView(t)?a[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}:a[e]=t})),a),[r.buffer])}))}}(n)}()})),$o=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},es=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},ts=function(e,t){t.activePlaylistLoader=e,e.load()},ns={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e],i=t.blacklistCurrentPlaylist;es(n,r);var a=r.activeTrack(),o=r.activeGroup(),s=(o.filter((function(e){return e.default}))[0]||o[0]).id,u=r.tracks[s];if(a!==u){for(var l in Hi.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),r.tracks)r.tracks[l].enabled=r.tracks[l]===u;r.onTrackChanged()}else i({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],r=t.mediaTypes[e];Hi.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),es(n,r);var i=r.activeTrack();i&&(i.mode="disabled"),r.onTrackChanged()}}},rs={AUDIO:function(e,t,n){if(t){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",ns[e](e,n))}},SUBTITLES:function(e,t,n){var r=n.tech,i=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,i),a.track(o.activeTrack()),(!r.paused()||e.endList&&"none"!==r.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),i),r.paused()||a.load()})),t.on("error",ns[e](e,n))}},is={AUDIO:function(e,t){var n=t.hls,r=t.sourceType,i=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,s=t.mediaTypes[e],u=s.groups,l=s.tracks,c=t.masterPlaylistLoader;for(var d in o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}}),o[e])for(var h in u[d]||(u[d]=[]),o[e][d]){var f=o[e][d][h],p=void 0;if(p=f.resolvedUri?new sa(f.resolvedUri,n,a):f.playlists&&"dash"===r?new So(f.playlists[0],n,a,c):null,f=Hi.mergeOptions({id:h,playlistLoader:p},f),rs[e](e,f.playlistLoader,t),u[d].push(f),void 0===l[h]){var g=new Hi.AudioTrack({id:h,kind:$o(f),enabled:!1,language:f.language,default:f.default,label:h});l[h]=g}}i.on("error",ns[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,r=t.hls,i=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,u=t.mediaTypes[e],l=u.groups,c=u.tracks,d=t.masterPlaylistLoader;for(var h in s[e])for(var f in l[h]||(l[h]=[]),s[e][h])if(!s[e][h][f].forced){var p=s[e][h][f],g=void 0;if("hls"===i?g=new sa(p.resolvedUri,r,o):"dash"===i&&(g=new So(p.playlists[0],r,o,d)),p=Hi.mergeOptions({id:f,playlistLoader:g},p),rs[e](e,p.playlistLoader,t),l[h].push(p),void 0===c[f]){var m=n.addRemoteTextTrack({id:f,kind:"subtitles",default:p.default&&p.autoselect,language:p.language,label:f},!1).track;c[f]=m}}a.on("error",ns[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,r=t.master.mediaGroups,i=t.mediaTypes[e],a=i.groups,o=i.tracks;for(var s in r[e])for(var u in a[s]||(a[s]=[]),r[e][s]){var l=r[e][s][u];if(l.instreamId.match(/CC\d/)&&(a[s].push(Hi.mergeOptions({id:u},l)),void 0===o[u])){var c=n.addRemoteTextTrack({id:l.instreamId,kind:"captions",default:l.default&&l.autoselect,language:l.language,label:u},!1).track;o[u]=c}}}},as={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if(n[r].enabled)return n[r];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var r in n)if("showing"===n[r].mode)return n[r];return null}}},os=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){is[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,r=e.tech,i=e.hls;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var r=t.masterPlaylistLoader,i=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var o=null;return a.attributes[e]&&(o=i[a.attributes[e]]),o=o||i.main,void 0===n?o:null===n?null:o.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=as[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.activeGroup(o),u=a.activePlaylistLoader;es(r,a),s&&(s.playlistLoader?(r.resyncLoader(),ts(s.playlistLoader,a)):u&&i.resetEverything())}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.segmentLoaders,r=n[e],i=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.activeGroup(o),u=a.activePlaylistLoader;es(r,a),s&&(s.playlistLoader?u!==s.playlistLoader?(r.track&&r.track(o),r.resetEverything(),ts(s.playlistLoader,a)):ts(s.playlistLoader,a):i.resetEverything())}}(n,e)}));var a=t.AUDIO.activeGroup(),o=(a.filter((function(e){return e.default}))[0]||a[0]).id;t.AUDIO.tracks[o].enabled=!0,t.AUDIO.onTrackChanged(),n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))}));var s=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"hls-audio-change"})};for(var u in r.audioTracks().addEventListener("change",s),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),i.on("dispose",(function(){r.audioTracks().removeEventListener("change",s),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),r.clearTracks("audio"),t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[u])},ss=void 0,us=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],ls=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},cs=function(e){function t(e){Wi(this,t);var n,r=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),i=e.url,a=e.handleManifestRedirects,o=e.withCredentials,s=e.tech,u=e.bandwidth,l=e.externHls,c=e.useCueTags,d=e.blacklistDuration,h=e.enableLowInitialPlaylist,f=e.sourceType,p=e.seekTo,g=e.cacheEncryptionKeys;if(!i)throw new Error("A non-empty playlist URL is required");ss=l,r.withCredentials=o,r.tech_=s,r.hls_=s.hls,r.seekTo_=p,r.sourceType_=f,r.useCueTags_=c,r.blacklistDuration=d,r.enableLowInitialPlaylist=h,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:o,handleManifestRedirects:a,timeout:null},r.mediaTypes_=(n={},["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){n[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Do,activeTrack:Do,onGroupChanged:Do,onTrackChanged:Do}})),n),r.mediaSource=new Hi.MediaSource,r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_.bind(r)),r.seekable_=Hi.createTimeRanges(),r.hasPlayed_=function(){return!1},r.syncController_=new Zo(e),r.segmentMetadataTrack_=s.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new Jo,r.inbandTextTracks_={};var m={hls:r.hls_,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.mediaSource.duration},hasPlayed:function(){return r.hasPlayed_()},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:u,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_,cacheEncryptionKeys:g};return r.masterPlaylistLoader_="dash"===r.sourceType_?new So(i,r.hls_,r.requestOptions_):new sa(i,r.hls_,r.requestOptions_),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new Yo(Hi.mergeOptions(m,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),e),r.audioSegmentLoader_=new Yo(Hi.mergeOptions(m,{loaderType:"audio"}),e),r.subtitleSegmentLoader_=new qo(Hi.mergeOptions(m,{loaderType:"vtt"}),e),r.setupSegmentLoaderListeners_(),us.forEach((function(e){r[e+"_"]=ls.bind(r,e)})),r.logger_=xo("MPC"),r.masterPlaylistLoader_.load(),r}return Ki(t,e),Xi(t,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ma(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),os({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,hls:e.hls_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t);try{e.setupSourceBuffers_()}catch(t){return Hi.log.warn("Failed to create SourceBuffers",t),e.mediaSource.endOfStream("decode")}e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){var t=e.masterPlaylistLoader_.media();if(!t){e.excludeUnsupportedVariants_();var n=void 0;return e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),e.initialMedia_=n,void e.masterPlaylistLoader_.media(e.initialMedia_)}if(e.useCueTags_&&e.updateAdCues_(t),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.updateDuration(),e.tech_.paused()||(e.mainSegmentLoader_.load(),e.audioSegmentLoader_&&e.audioSegmentLoader_.load()),!t.endList){var r=function(){var t=e.seekable();0!==t.length&&e.mediaSource.addSeekableRange_(t.start(0),t.end(0))};if(e.duration()!==1/0){e.tech_.one("durationchange",(function t(){e.duration()===1/0?r():e.tech_.one("durationchange",t)}))}else r()}})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ma(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},r=!0,i=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a]){n.AUDIO[a][o].uri||(r=!1)}r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),ss.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),ss.Playlist.isFmp4(t)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),i.length&&Object.keys(n.AUDIO[i[0]]).length>1&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist(),n=e.masterPlaylistLoader_.media(),r=e.tech_.buffered(),i=r.length?r.end(r.length-1)-e.tech_.currentTime():0,a=e.bufferLowWaterLine();(!n.endList||e.duration()<Co.MAX_BUFFER_LOW_WATER_LINE||t.attributes.BANDWIDTH<n.attributes.BANDWIDTH||i>=a)&&e.masterPlaylistLoader_.media(t),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")})),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("ended",(function(){e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(){e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120)})),this.mainSegmentLoader_.on("reseteverything",(function(){e.tech_.trigger("hls-reset")})),this.mainSegmentLoader_.on("segmenttimemapping",(function(t){e.tech_.trigger({type:"hls-segment-time-mapping",mapping:t.mapping})})),this.audioSegmentLoader_.on("ended",(function(){e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var e=this.selectPlaylist();e!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(e),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var e=this,t=this.selectPlaylist();t!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(t),this.mainSegmentLoader_.resetEverything((function(){Hi.browser.IE_VERSION||Hi.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())})))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0),this.hasPlayed_()&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.seekTo_(e.end(e.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_())return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(Hi.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.seekTo_(n.end(0)),e.hasPlayed_=function(){return!0}})),!1;this.trigger("firstplay"),this.seekTo_(n.end(0))}return this.hasPlayed_=function(){return!0},this.load(),!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Hi.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(e=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_),e){this.logger_("calling mediaSource.endOfStream()");try{this.mediaSource.endOfStream()}catch(e){Hi.log.warn("Failed to call media source endOfStream",e)}}}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.mediaSource.duration);if(null===t)return!1;var n=ss.Playlist.playlistEnd(e,t),r=this.tech_.currentTime(),i=this.tech_.buffered();if(!i.length)return n-r<=.1;var a=i.end(i.length-1);return a-r<=.1&&n-a<=.1}},{key:"blacklistCurrentPlaylist",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=void 0,r=void 0;if(n=e.playlist||this.masterPlaylistLoader_.media(),t=t||e.blacklistDuration||this.blacklistDuration,!n){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(e){return this.trigger("error")}}var i=1===this.masterPlaylistLoader_.master.playlists.filter(Ta).length,a=this.masterPlaylistLoader_.master.playlists;return 1===a.length?(Hi.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(i)):(i&&(Hi.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."),a.forEach((function(e){e.excludeUntil!==1/0&&delete e.excludeUntil})),this.tech_.trigger("retryplaylist")),n.excludeUntil=Date.now()+1e3*t,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),r=this.selectPlaylist(),Hi.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(r,i))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(e){var t=Ba(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:ss.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e=void 0,t=void 0;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var r=this.syncController_.getExpiredTime(n,this.mediaSource.duration);if(null!==r&&0!==(e=ss.Playlist.seekable(n,r)).length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(r=this.syncController_.getExpiredTime(n,this.mediaSource.duration)))return;if(0===(t=ss.Playlist.seekable(n,r)).length)return}var i=void 0,a=void 0;this.seekable_&&this.seekable_.length&&(i=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>e.end(0)||e.start(0)>t.end(0)?this.seekable_=e:this.seekable_=Hi.createTimeRanges([[t.start(0)>e.start(0)?t.start(0):e.start(0),t.end(0)<e.end(0)?t.end(0):e.end(0)]]):this.seekable_=e,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===i&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+za(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},{key:"updateDuration",value:function(){var e=this,t=this.mediaSource.duration,n=ss.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered(),i=function t(){e.logger_("Setting duration from "+e.mediaSource.duration+" => "+n);try{e.mediaSource.duration=n}catch(e){Hi.log.warn("Failed to set media source duration",e)}e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)};r.length>0&&(n=Math.max(n,r.end(r.length-1))),t!==n&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",i):i())}},{key:"dispose",value:function(){var e=this;this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var r in n)n[r].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var e,t=this.masterPlaylistLoader_.media();if(t&&"open"===this.mediaSource.readyState){if((e=so(this.masterPlaylistLoader_.master,t)).length<1)return this.error="No compatible SourceBuffer configuration for the variant stream:"+t.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(e),this.excludeIncompatibleVariants_(t)}}},{key:"configureLoaderMimeTypes_",value:function(e){var t=e.length>1&&-1===e[0].indexOf(",")&&e[0]!==e[1]?new Hi.EventTarget:null;this.mainSegmentLoader_.mimeType(e[0],t),e[1]&&this.audioSegmentLoader_.mimeType(e[1],t)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach((function(e){var t;e.attributes.CODECS&&i.a.MediaSource&&i.a.MediaSource.isTypeSupported&&!i.a.MediaSource.isTypeSupported('video/mp4; codecs="'+(t=e.attributes.CODECS,t.replace(/avc1\.(\d+)\.(\d+)/i,(function(e){return io([e])[0]})))+'"')&&(e.excludeUntil=1/0)}))}},{key:"excludeIncompatibleVariants_",value:function(e){var t=2,n=null,r=void 0;e.attributes.CODECS&&(r=ao(e.attributes.CODECS),n=r.videoCodec,t=r.codecCount),this.master().playlists.forEach((function(e){var r={codecCount:2,videoCodec:null};e.attributes.CODECS&&(r=ao(e.attributes.CODECS)),r.codecCount!==t&&(e.excludeUntil=1/0),r.videoCodec!==n&&(e.excludeUntil=1/0)}))}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var r=n,a=void 0,o=0;o<e.segments.length;o++){var s=e.segments[o];if(a||(a=Wo(t,r+s.duration/2)),a){if("cueIn"in s){a.endTime=r,a.adEndTime=r,r+=s.duration,a=null;continue}if(r<a.endTime){r+=s.duration;continue}a.endTime+=s.duration}else if("cueOut"in s&&((a=new i.a.VTTCue(r,r+s.duration,s.cueOut)).adStartTime=r,a.adEndTime=r+parseFloat(s.cueOut),t.addCue(a)),"cueOutCont"in s){var u=void 0,l=void 0,c=s.cueOutCont.split("/").map(parseFloat),d=Ji(c,2);u=d[0],l=d[1],(a=new i.a.VTTCue(r,r+s.duration,"")).adStartTime=r-u,a.adEndTime=a.adStartTime+l,t.addCue(a)}r+=s.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Co.GOAL_BUFFER_LENGTH,n=Co.GOAL_BUFFER_LENGTH_RATE,r=Math.max(t,Co.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,r)}},{key:"bufferLowWaterLine",value:function(){var e=this.tech_.currentTime(),t=Co.BUFFER_LOW_WATER_LINE,n=Co.BUFFER_LOW_WATER_LINE_RATE,r=Math.max(t,Co.MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,r)}}]),t}(Hi.EventTarget),ds=function e(t,n,r){Wi(this,e);var i,a,o,s=t.masterPlaylistController_,u=s[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(s);if(n.attributes.RESOLUTION){var l=n.attributes.RESOLUTION;this.width=l.width,this.height=l.height}this.bandwidth=n.attributes.BANDWIDTH,this.id=r,this.enabled=(i=t.playlists,a=n.uri,o=u,function(e){var t=i.master.playlists[a],n=_a(t),r=Ta(t);return void 0===e?r:(e?delete t.disabled:t.disabled=!0,e===r||n||(o(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})},hs=["seeking","seeked","pause","playing","error"],fs=function(){function e(t){var n=this;Wi(this,e),this.tech_=t.tech,this.seekable=t.seekable,this.seekTo=t.seekTo,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=xo("PlaybackWatcher"),this.logger_("initialize");var r=function(){return n.monitorCurrentTime_()},a=function(){return n.techWaiting_()},o=function(){return n.cancelTimer_()},s=function(){return n.fixesBadSeeks_()};this.tech_.on("seekablechanged",s),this.tech_.on("waiting",a),this.tech_.on(hs,o),this.tech_.on("canplay",r),this.dispose=function(){n.logger_("dispose"),n.tech_.off("seekablechanged",s),n.tech_.off("waiting",a),n.tech_.off(hs,o),n.tech_.off("canplay",r),n.checkCurrentTimeTimeout_&&i.a.clearTimeout(n.checkCurrentTimeTimeout_),n.cancelTimer_()}}return Xi(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&i.a.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=i.a.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+.1>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){if(!this.tech_.seeking())return!1;var e=this.seekable(),t=this.tech_.currentTime(),n=void 0;this.afterSeekableWindow_(e,t,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(n=e.end(e.length-1));this.beforeSeekableWindow_(e,t)&&(n=e.start(0)+.1);return void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+t+" with seekable range "+za(e)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=Ba(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.seekTo(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}}},{key:"techWaiting_",value:function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.seekTo(n),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var r=this.tech_.buffered(),i=Fa(r,t);if(this.videoUnderflow_(i,r,t))return this.cancelTimer_(),this.seekTo(t),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(i.length>0){var a=i.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+a+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,t),!0}return!1}},{key:"afterSeekableWindow_",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var i=e.end(e.length-1)+.1,a=!n.endList;return a&&r&&(i=e.end(e.length-1)+3*n.targetDuration),t>i}},{key:"beforeSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-.1)}},{key:"videoUnderflow_",value:function(e,t,n){if(0===e.length){var r=this.gapFromVideoUnderflow_(t,n);if(r)return this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+n),!0}return!1}},{key:"skipTheGap_",value:function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),r=Fa(t,n);this.cancelTimer_(),0!==r.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",r.start(0)),this.seekTo(r.start(0)+1/30),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return Hi.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var r=e.end(n-1),i=e.start(n);t.push([r,i])}return Hi.createTimeRanges(t)}(e),r=0;r<n.length;r++){var i=n.start(r),a=n.end(r);if(t-i<4&&t-i>2)return{start:i,end:a}}return null}}]),e}(),ps={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_)}},gs=function(e){!function e(t,n){var r=0,i=0,a=Hi.mergeOptions(ps,n);t.ready((function(){t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){i&&t.currentTime(i)},s=function(e){null!=e&&(i=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},u=function(){if(Date.now()-r<1e3*a.errorInterval)t.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return r=Date.now(),a.getSource.call(t,s);Hi.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},l=function e(){t.off("loadedmetadata",o),t.off("error",u),t.off("dispose",e)};t.on("error",u),t.on("dispose",l),t.reloadSourceOnError=function(n){l(),e(t,n)}}(this,e)};Hi.use("*",(function(e){return{setSource:function(e,t){t(null,e)},setCurrentTime:function(t){return e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(t),t},play:function(){e.vhs&&e.currentSource().src===e.vhs.source_.src&&e.vhs.setCurrentTime(e.tech_.currentTime())}}}));var ms={PlaylistLoader:sa,Playlist:ba,Decrypter:G,AsyncStream:B,decrypt:z,utils:ja,STANDARD_PLAYLIST_SELECTOR:function(){return function(e,t,n,r,a){var o=e.playlists.map((function(e){var t,n;return t=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height,{bandwidth:e.attributes.BANDWIDTH||i.a.Number.MAX_VALUE,width:t,height:n,playlist:e}}));Fo(o,(function(e,t){return e.bandwidth-t.bandwidth}));var s=(o=o.filter((function(e){return!ba.isIncompatible(e.playlist)}))).filter((function(e){return ba.isEnabled(e.playlist)}));s.length||(s=o.filter((function(e){return!ba.isDisabled(e.playlist)})));var u=s.filter((function(e){return e.bandwidth*Co.BANDWIDTH_VARIANCE<t})),l=u[u.length-1],c=u.filter((function(e){return e.bandwidth===l.bandwidth}))[0];if(!1===a){var d=c||s[0]||o[0];return d?d.playlist:null}var h=u.filter((function(e){return e.width&&e.height}));Fo(h,(function(e,t){return e.width-t.width}));var f=h.filter((function(e){return e.width===n&&e.height===r}));l=f[f.length-1];var p=f.filter((function(e){return e.bandwidth===l.bandwidth}))[0],g=void 0,m=void 0,v=void 0;p||(m=(g=h.filter((function(e){return e.width>n||e.height>r}))).filter((function(e){return e.width===g[0].width&&e.height===g[0].height})),l=m[m.length-1],v=m.filter((function(e){return e.bandwidth===l.bandwidth}))[0]);var y=v||p||c||s[0]||o[0];return y?y.playlist:null}(this.playlists.master,this.systemBandwidth,parseInt(Bo(this.tech_.el(),"width"),10),parseInt(Bo(this.tech_.el(),"height"),10),this.limitRenditionByPlayerDimensions)},INITIAL_PLAYLIST_SELECTOR:function(){var e=this.playlists.master.playlists.filter(ba.isEnabled);return Fo(e,(function(e,t){return zo(e,t)})),e.filter((function(e){return ao(e.attributes.CODECS).videoCodec}))[0]||null},comparePlaylistBandwidth:zo,comparePlaylistResolution:function(e,t){var n=void 0,r=void 0;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||i.a.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),n===(r=r||i.a.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r},xhr:Sa()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach((function(e){Object.defineProperty(ms,e,{get:function(){return Hi.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),Co[e]},set:function(t){Hi.log.warn("using Hls."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Hi.log.warn("value of Hls."+e+" must be greater than or equal to 0"):Co[e]=t}})}));var vs=function(e){if(/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e))return"hls";return/^application\/dash\+xml/i.test(e)?"dash":null},ys=function(e,t){for(var n=t.media(),r=-1,i=0;i<e.length;i++)if(e[i].id===n.uri){r=i;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})};ms.canPlaySource=function(){return Hi.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var _s=function(e){if("dash"===e.options_.sourceType){var t=Hi.players[e.tech_.options_.playerId];if(t.eme){var n=function(e,t,n){if(!e)return e;var r={};for(var i in e)r[i]={audioContentType:'audio/mp4; codecs="'+n.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+t.attributes.CODECS+'"'},t.contentProtection&&t.contentProtection[i]&&t.contentProtection[i].pssh&&(r[i].pssh=t.contentProtection[i].pssh),"string"==typeof e[i]&&(r[i].url=e[i]);return Hi.mergeOptions(e,r)}(e.source_.keySystems,e.playlists.media(),e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media());n&&(t.currentSource().keySystems=n,t.eme.initializeMediaKeys&&t.eme.initializeMediaKeys())}}},Ts=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem("videojs-vhs");if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};ms.supportsNativeHls=function(){var e=o.a.createElement("video");if(!Hi.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),ms.supportsNativeDash=!!Hi.getTech("Html5").isSupported()&&/maybe|probably/i.test(o.a.createElement("video").canPlayType("application/dash+xml")),ms.supportsTypeNatively=function(e){return"hls"===e?ms.supportsNativeHls:"dash"===e&&ms.supportsNativeDash},ms.isSupported=function(){return Hi.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Es=function(e){function t(e,n,r){Wi(this,t);var i=Zi(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n,r.hls));if(n.options_&&n.options_.playerId){var a=Hi(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return Hi.log.warn("player.hls is deprecated. Use player.tech().hls instead."),n.trigger({type:"usage",name:"hls-player-access"}),i},configurable:!0}),a.vhs=i,a.dash=i,i.player_=a}if(i.tech_=n,i.source_=e,i.stats={},i.setOptions_(),i.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(i.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return i.on(o.a,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=o.a.fullscreenElement||o.a.webkitFullscreenElement||o.a.mozFullScreenElement||o.a.msFullscreenElement;t&&t.contains(i.tech_.el())&&i.masterPlaylistController_.smoothQualityChange_()})),i.on(i.tech_,"seeking",(function(){0===this.tech_.currentTime()&&this.tech_.player_.loop()&&this.setCurrentTime(0)})),i.on(i.tech_,"error",(function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),i.on(i.tech_,"play",i.play),i}return Ki(t,e),Xi(t,[{key:"setOptions_",value:function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=Ts();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Co.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Co.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var n=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=ms,this.options_.sourceType=vs(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e),n.setCurrentTime(e)},this.masterPlaylistController_=new cs(this.options_),this.playbackWatcher_=new fs(Hi.mergeOptions(this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()}})),this.masterPlaylistController_.on("error",(function(){Hi.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error)})),this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):ms.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ms.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e=1/(this.bandwidth||1),t=void 0;return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){Hi.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},buffered:{get:function(){return Ga(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Ga(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!window.localStorage)return!1;var t=Ts();t=t?Hi.mergeOptions(t,e):e;try{window.localStorage.setItem("videojs-vhs",JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,t;t=(e=n).playlists,e.representations=function(){return t.master.playlists.filter((function(e){return!_a(e)})).map((function(t,n){return new ds(e,t,t.uri)}))},_s(n)})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.tech_.ready((function(){return n.setupQualityLevels_()})),this.tech_.el()&&this.tech_.src(Hi.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var e=this,t=Hi.players[this.tech_.options_.playerId];t&&t.qualityLevels&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),ys(t,n.playlists)})),this.playlists.on("mediachange",(function(){ys(e.qualityLevels_,e.playlists)})))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.hls&&delete this.tech_.hls,function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,r)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"convertToProgramTime",value:function(e,t){return Pa({playlist:this.masterPlaylistController_.media(),time:e,callback:t})}},{key:"seekToProgramTime",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;return ka({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:r,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})}}]),t}(Hi.getComponent("Component")),Ms={name:"videojs-http-streaming",VERSION:"1.10.6",canHandleSource:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Hi.mergeOptions(Hi.options,t);return Ms.canPlayType(e.type,n)},handleSource:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Hi.mergeOptions(Hi.options,n);return t.hls=new Es(e,t,r),t.hls.xhr=Sa(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Hi.mergeOptions(Hi.options,t),r=n.hls.overrideNative,i=vs(e),a=i&&(!ms.supportsTypeNatively(i)||r);return a?"maybe":""}};void 0!==Hi.MediaSource&&void 0!==Hi.URL||(Hi.MediaSource=vo,Hi.URL=yo),vo.supportsNativeMediaSources()&&Hi.getTech("Html5").registerSourceHandler(Ms,0),Hi.HlsHandler=Es,Hi.HlsSourceHandler=Ms,Hi.Hls=ms,Hi.use||Hi.registerComponent("Hls",ms),Hi.options.hls=Hi.options.hls||{},Hi.registerPlugin?Hi.registerPlugin("reloadSourceOnError",gs):Hi.plugin("reloadSourceOnError",gs);t.default=Hi},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Q})),n.d(t,"b",(function(){return q}));var r=n(0),i=n.n(r),a=function(e){return!!e&&"object"==typeof e},o=function e(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.reduce((function(t,n){return Object.keys(n).forEach((function(r){Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):a(t[r])&&a(n[r])?t[r]=e(t[r],n[r]):t[r]=n[r]})),t}),{})},s=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},u=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},l="INVALID_NUMBER_OF_PERIOD",c="DASH_EMPTY_MANIFEST",d="DASH_INVALID_XML",h="NO_BASE_URL",f="SEGMENT_TIME_UNSPECIFIED",p="UNSUPPORTED_UTC_TIMING_SCHEME";"undefined"!=typeof window?window:void 0!==e||"undefined"!=typeof self&&self;var g=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){var n,r,i,a,o;n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,r=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var i=o.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=o.normalizePath(i.path),o.buildURLFromParts(i)}var a=o.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=o.normalizePath(a.path),o.buildURLFromParts(a)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=r.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=s.netLoc,"/"!==a.path[0]))if(a.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=o.normalizePath(d)}else l.path=s.path,a.params||(l.params=s.params,a.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?o.normalizePath(a.path):a.path),o.buildURLFromParts(l)},parseURL:function(e){var t=n.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(a,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=o})),m=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=g.buildAbsoluteURL(i.a.location.href,e)),g.buildAbsoluteURL(e,t))},v=function(e){var t=e.baseUrl,n=void 0===t?"":t,r=e.source,i=void 0===r?"":r,a=e.range,o=void 0===a?"":a,s=e.indexRange,u=void 0===s?"":s,l={uri:i,resolvedUri:m(n||"",i)};if(o||u){var c=(o||u).split("-"),d=parseInt(c[0],10),h=parseInt(c[1],10);l.byterange={length:h-d+1,offset:d}}return l},y={static:function(e){var t=e.duration,n=e.timescale,r=void 0===n?1:n,i=e.sourceDuration;return{start:0,end:Math.ceil(i/(t/r))}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,r=e.availabilityStartTime,i=e.timescale,a=void 0===i?1:i,o=e.duration,s=e.start,u=void 0===s?0:s,l=e.minimumUpdatePeriod,c=void 0===l?0:l,d=e.timeShiftBufferDepth,h=void 0===d?1/0:d,f=(t+n)/1e3,p=r+u,g=f+c-p,m=Math.ceil(g*a/o),v=Math.floor((f-p-h)*a/o),y=Math.floor((f-p)*a/o);return{start:Math.max(0,v),end:Math.min(m,y)}}},_=function(e){var t=e.type,n=void 0===t?"static":t,r=e.duration,i=e.timescale,a=void 0===i?1:i,o=e.sourceDuration,s=y[n](e),u=function(e,t){for(var n=[],r=e;r<t;r++)n.push(r);return n}(s.start,s.end).map(function(e){return function(t,n){var r=e.duration,i=e.timescale,a=void 0===i?1:i,o=e.periodIndex,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:r/a,timeline:o,time:n*r}}}(e));if("static"===n){var l=u.length-1;u[l].duration=o-r/a*l}return u},T=function(e){var t=e.baseUrl,n=e.initialization,r=void 0===n?{}:n,i=e.sourceDuration,a=e.timescale,o=void 0===a?1:a,s=e.indexRange,u=void 0===s?"":s,l=e.duration;if(!t)throw new Error(h);var c=v({baseUrl:t,source:r.sourceURL,range:r.range}),d=v({baseUrl:t,source:t,indexRange:u});if(d.map=c,l){var f=_(e);f.length&&(d.duration=f[0].duration,d.timeline=f[0].timeline)}else i&&(d.duration=i/o,d.timeline=0);return d.number=0,[d]},E=function(e,t,n){for(var r=e.sidx.map?e.sidx.map:null,i=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,s=o.offset+o.length,u=t.timescale,l=t.references.filter((function(e){return 1!==e.referenceType})),c=[],d=s+t.firstOffset,h=0;h<l.length;h++){var f=t.references[h],p=f.referencedSize,g=f.subsegmentDuration,m=T({baseUrl:n,timescale:u,timeline:a,periodIndex:a,duration:g,sourceDuration:i,indexRange:d+"-"+(d+p-1)})[0];r&&(m.map=r),c.push(m),d+=p}return e.segments=c,e},M=function(e){var t;return(t=e.reduce((function(e,t){var n,r=t.attributes.id+(t.attributes.lang||"");return e[r]?(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[r].segments).push.apply(n,t.segments),t.attributes.contentProtection&&(e[r].attributes.contentProtection=t.attributes.contentProtection)):e[r]=t,e}),{}),Object.keys(t).map((function(e){return t[e]}))).map((function(e){var t,n;return e.discontinuityStarts=(t=e.segments,n="discontinuity",t.reduce((function(e,t,r){return t[n]&&e.push(r),e}),[])),e}))},b=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e){var r=e[n];if(r.sidx){var i=r.sidx.uri+"-"+(o=r.sidx.byterange,s=void 0,s=o.offset+o.length-1,o.offset+"-"+s),a=t[i]&&t[i].sidx;r.sidx&&a&&E(r,a,r.sidx.resolvedUri)}}var o,s;return e},A=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a={attributes:(t={NAME:n.id,BANDWIDTH:n.bandwidth,CODECS:n.codecs},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},w=function(e){var t,n=e.attributes,r=e.segments,i=e.sidx,a={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===(n.type||"static"),timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:r,mediaSequence:r.length?r[0].number:1};return n.contentProtection&&(a.contentProtection=n.contentProtection),i&&(a.sidx=i),a},S=function(e,t){var n;if(void 0===t&&(t={}),!e.length)return{};var r=e[0].attributes,i=r.sourceDuration,a=r.minimumUpdatePeriod,o=void 0===a?0:a,s=M(e.filter((function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType}))).map(w),u=M(e.filter((function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType}))),l=e.filter((function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType})),c={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(n={AUDIO:{},VIDEO:{}},n["CLOSED-CAPTIONS"]={},n.SUBTITLES={},n),uri:"",duration:i,playlists:b(s,t),minimumUpdatePeriod:1e3*o};return u.length&&(c.mediaGroups.AUDIO.audio=function(e,t){var n;void 0===t&&(t={});var r=e.reduce((function(e,r){var i=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"",o="main";if(a){var s=i?" ("+i+")":"";o=""+r.attributes.lang+s}return e[o]&&e[o].playlists[0].attributes.BANDWIDTH>r.attributes.bandwidth?e:(e[o]={language:a,autoselect:!0,default:"main"===i,playlists:b([A(r)],t),uri:""},void 0===n&&"main"===i&&((n=r).default=!0),e)}),{});n||(r[Object.keys(r)[0]].default=!0);return r}(u,t)),l.length&&(c.mediaGroups.SUBTITLES.subs=function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var r,i,a,o,s=n.attributes.lang||"text";return e[s]?e:(e[s]={language:s,default:!1,autoselect:!1,playlists:b([(r=n,a=r.attributes,o=r.segments,void 0===o&&(o=[{uri:a.baseUrl,timeline:a.periodIndex,resolvedUri:a.baseUrl||"",duration:a.sourceDuration,number:0}],a.duration=a.sourceDuration),{attributes:(i={NAME:a.id,BANDWIDTH:a.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:a.baseUrl||"",targetDuration:a.duration,segments:o,mediaSequence:o.length?o[0].number:1})],t),uri:""},e)}),{})}(l,t)),c},x=function(e,t,n){var r=e.NOW,i=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,s=void 0===o?1:o,u=e.start,l=void 0===u?0:u,c=e.minimumUpdatePeriod,d=(r+i)/1e3+(void 0===c?0:c)-(a+l);return Math.ceil((d*s-t)/n)},D=function(e,t){for(var n=e.type,r=void 0===n?"static":n,i=e.minimumUpdatePeriod,a=void 0===i?0:i,o=e.media,s=void 0===o?"":o,u=e.sourceDuration,l=e.timescale,c=void 0===l?1:l,d=e.startNumber,h=void 0===d?1:d,f=e.periodIndex,p=[],g=-1,m=0;m<t.length;m++){var v=t[m],y=v.d,_=v.r||0,T=v.t||0;g<0&&(g=T),T&&T>g&&(g=T);var E=void 0;if(_<0){var M=m+1;E=M===t.length?"dynamic"===r&&a>0&&s.indexOf("$Number$")>0?x(e,g,y):(u*c-g)/y:(t[M].t-g)/y}else E=_+1;for(var b=h+p.length+E,A=h+p.length;A<b;)p.push({number:A,duration:y/c,time:g,timeline:f}),g+=y,A++}return p},I=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,C=function(e,t){return e.replace(I,function(e){return function(t,n,r,i){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(i=r?parseInt(i,10):1,a.length>=i?a:""+new Array(i-a.length+1).join("0")+a)}}(t))},N=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,i=void 0===r?{sourceURL:"",range:""}:r,a=v({baseUrl:e.baseUrl,source:C(i.sourceURL,n),range:i.range});return function(e,t){return e.duration||t?e.duration?_(e):D(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t).map((function(t){n.Number=t.number,n.Time=t.time;var r=C(e.media||"",n);return{uri:r,timeline:t.timeline,duration:t.duration,resolvedUri:m(e.baseUrl||"",r),map:a,number:t.number}}))},L=function(e,t){var n=e.duration,r=e.segmentUrls,i=void 0===r?[]:r;if(!n&&!t||n&&t)throw new Error(f);var a,o=i.map((function(t){return function(e,t){var n=e.baseUrl,r=e.initialization,i=void 0===r?{}:r,a=v({baseUrl:n,source:i.sourceURL,range:i.range}),o=v({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o}(e,t)}));return n&&(a=_(e)),t&&(a=D(e,t)),a.map((function(e,t){if(o[t]){var n=o[t];return n.timeline=e.timeline,n.duration=e.duration,n.number=e.number,n}})).filter((function(e){return e}))},O=function(e){var t,n,r=e.attributes,i=e.segmentInfo;i.template?(n=N,t=o(r,i.template)):i.base?(n=T,t=o(r,i.base)):i.list&&(n=L,t=o(r,i.list));var a={attributes:r};if(!n)return a;var s=n(t,i.timeline);if(t.duration){var u=t,l=u.duration,c=u.timescale,d=void 0===c?1:c;t.duration=l/d}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=s,i.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},R=function(e,t){return u(e.childNodes).filter((function(e){return e.tagName===t}))},j=function(e){return e.textContent.trim()},P=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5];return 31536e3*parseFloat(r||0)+2592e3*parseFloat(i||0)+86400*parseFloat(a||0)+3600*parseFloat(o||0)+60*parseFloat(s||0)+parseFloat(u||0)},k={mediaPresentationDuration:function(e){return P(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return P(e)},timeShiftBufferDepth:function(e){return P(e)},start:function(e){return P(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?P(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},U=function(e){return e&&e.attributes?u(e.attributes).reduce((function(e,t){var n=k[t.name]||k.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}};var B={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},F=function(e,t){return t.length?s(e.map((function(e){return t.map((function(t){return m(e,j(t))}))}))):e},z=function(e){var t=R(e,"SegmentTemplate")[0],n=R(e,"SegmentList")[0],r=n&&R(n,"SegmentURL").map((function(e){return o({tag:"SegmentURL"},U(e))})),i=R(e,"SegmentBase")[0],a=n||t,s=a&&R(a,"SegmentTimeline")[0],u=n||i||t,l=u&&R(u,"Initialization")[0],c=t&&U(t);c&&l?c.initialization=l&&U(l):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var d={template:c,timeline:s&&R(s,"S").map((function(e){return U(e)})),list:n&&o(U(n),{segmentUrls:r,initialization:U(l)}),base:i&&o(U(i),{initialization:U(l)})};return Object.keys(d).forEach((function(e){d[e]||delete d[e]})),d},G=function(e){return e.reduce((function(e,t){var n=U(t),r=B[n.schemeIdUri];if(r){e[r]={attributes:n};var a=R(t,"cenc:pssh")[0];if(a){var o=j(a),s=o&&function(e){for(var t=i.a.atob(e),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}(o);e[r].pssh=s}}return e}),{})},H=function(e,t,n){return function(r){var i=U(r),a=F(t,R(r,"BaseURL")),u=R(r,"Role")[0],l={role:U(u)},c=o(e,i,l),d=G(R(r,"ContentProtection"));Object.keys(d).length&&(c=o(c,{contentProtection:d}));var h=z(r),f=R(r,"Representation"),p=o(n,h);return s(f.map(function(e,t,n){return function(r){var i=R(r,"BaseURL"),a=F(t,i),s=o(e,U(r)),u=z(r);return a.map((function(e){return{segmentInfo:o(n,u),attributes:o(s,{baseUrl:e})}}))}}(c,a,p)))}},Y=function(e,t){void 0===t&&(t={});var n=t,r=n.manifestUri,a=void 0===r?"":r,u=n.NOW,c=void 0===u?Date.now():u,d=n.clientOffset,h=void 0===d?0:d,f=R(e,"Period");if(!f.length)throw new Error(l);var p=U(e),g=F([a],R(e,"BaseURL"));return p.sourceDuration=p.mediaPresentationDuration||0,p.NOW=c,p.clientOffset=h,s(f.map(function(e,t){return function(n,r){var a=F(t,R(n,"BaseURL")),u=U(n),l=parseInt(u.id,10),c=i.a.isNaN(l)?r:l,d=o(e,{periodIndex:c}),h=R(n,"AdaptationSet"),f=z(n);return s(h.map(H(d,a,f)))}}(p,g)))},V=function(e){if(""===e)throw new Error(c);var t=(new i.a.DOMParser).parseFromString(e,"application/xml"),n=t&&"MPD"===t.documentElement.tagName?t.documentElement:null;if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(d);return n},Q=function(e,t){return void 0===t&&(t={}),S(Y(V(e),t).map(O),t.sidxMapping)},q=function(e){return function(e){var t=R(e,"UTCTiming")[0];if(!t)return null;var n=U(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(p)}return n}(V(e))}}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.converters=t.HRIRloader_ircam=t.HRIRloader_local=t.HOAloader=t.intensityAnalyser=t.powermapAnalyser=t.rmsAnalyser=t.virtualMic=t.decoder=t.binDecoder=t.sceneMirror=t.sceneRotator=t.orderWeight=t.orderLimiter=t.monoEncoder=void 0;var r=n(291);Object.defineProperty(t,"monoEncoder",{enumerable:!0,get:function(){return T(r).default}});var i=n(305);Object.defineProperty(t,"orderLimiter",{enumerable:!0,get:function(){return T(i).default}});var a=n(306);Object.defineProperty(t,"orderWeight",{enumerable:!0,get:function(){return T(a).default}});var o=n(307);Object.defineProperty(t,"sceneRotator",{enumerable:!0,get:function(){return T(o).default}});var s=n(308);Object.defineProperty(t,"sceneMirror",{enumerable:!0,get:function(){return T(s).default}});var u=n(309);Object.defineProperty(t,"binDecoder",{enumerable:!0,get:function(){return T(u).default}});var l=n(310);Object.defineProperty(t,"decoder",{enumerable:!0,get:function(){return T(l).default}});var c=n(325);Object.defineProperty(t,"virtualMic",{enumerable:!0,get:function(){return T(c).default}});var d=n(326);Object.defineProperty(t,"rmsAnalyser",{enumerable:!0,get:function(){return T(d).default}});var h=n(327);Object.defineProperty(t,"powermapAnalyser",{enumerable:!0,get:function(){return T(h).default}});var f=n(328);Object.defineProperty(t,"intensityAnalyser",{enumerable:!0,get:function(){return T(f).default}});var p=n(329);Object.defineProperty(t,"HOAloader",{enumerable:!0,get:function(){return T(p).default}});var g=n(330);Object.defineProperty(t,"HRIRloader_local",{enumerable:!0,get:function(){return T(g).default}});var m=n(331);Object.defineProperty(t,"HRIRloader_ircam",{enumerable:!0,get:function(){return T(m).default}});var v=_(n(351)),y=_(n(31));function _(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}t.converters=v,t.utils=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(4)),i=h(n(1)),a=h(n(128)),o=h(n(49)),s=h(n(152)),u=h(n(153)),l=h(n(5)),c=h(n(7)),d=n(17);function h(e){return e&&e.__esModule?e:{default:e}}function f(){var e=this.context,t=void 0,n=void 0,i=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0,w=void 0,S=void 0;function x(e){void 0===S&&null!==e.fromStreamInfo&&(S=this.getCurrentTrackIdx())}function D(){void 0===S&&(S=this.getCurrentTrackIdx())}function I(){void 0!==S&&(this.setTextTrack(S),S=void 0)}function C(e){var t=this,n=e.tracks,r=e.index;n.some((function(e,n){if(e.lang===E)return t.setTextTrack(n),r=n,!0})),b||this.setTextTrack(-1),M=r,T.trigger(c.default.TEXT_TRACKS_ADDED,{enabled:N(),index:r,tracks:n})}function N(){var e=!0;return A&&!w&&(e=!1),e}function L(){A=!1}return t={setConfig:function(e){e&&(e.errHandler&&(i=e.errHandler),e.adapter&&(h=e.adapter),e.manifestModel&&(f=e.manifestModel),e.mediaController&&(p=e.mediaController),e.videoModel&&(g=e.videoModel),e.streamController&&(m=e.streamController),e.textTracks&&(v=e.textTracks),e.vttParser&&(y=e.vttParser),e.ttmlParser&&(_=e.ttmlParser),n.setConfig({errHandler:i,adapter:h,manifestModel:f,mediaController:p,videoModel:g,streamController:m,textTracks:v,vttParser:y,ttmlParser:_}))},getTextSourceBuffer:function(){return n},getAllTracksAreDisabled:function(){return A},addEmbeddedTrack:function(e){n.addEmbeddedTrack(e)},getTextDefaultLanguage:function(){return E},setTextDefaultLanguage:function(e){(0,d.checkParameterType)(e,"string"),E=e},setTextDefaultEnabled:function(e){(0,d.checkParameterType)(e,"boolean"),(b=e)||this.setTextTrack(-1)},getTextDefaultEnabled:function(){return b},enableText:function(e){(0,d.checkParameterType)(e,"boolean"),N()!==e&&(e&&this.setTextTrack(M),e||(M=this.getCurrentTrackIdx(),this.setTextTrack(-1)))},isTextEnabled:N,setTextTrack:function(e){var t=n.getConfig(),i=t.fragmentModel,a=t.fragmentedTracks,o=t.videoModel,s=void 0,u=void 0;A=-1===e;var l=v.getCurrentTrackIdx();if(l!==e){v.setModeForTrackIdx(l,r.default.TEXT_HIDDEN),v.setCurrentTrackIdx(e),v.setModeForTrackIdx(e,r.default.TEXT_SHOWING);var c=v.getCurrentTrackInfo();if(c&&c.isFragmented&&!c.isEmbedded)for(var d=0;d<a.length;d++){var h=a[d];if(c.lang===h.lang&&c.index===h.index&&(h.id?c.id===h.id:c.id===h.index))if(h!==p.getCurrentTrackFor(r.default.FRAGMENTED_TEXT,m.getActiveStreamInfo()))i.abortRequests(),i.removeExecutedRequestsBeforeTime(),n.remove(),v.deleteCuesFromTrackIdx(l),p.setTrack(h),n.setCurrentFragmentedTrackIdx(d);else if(-1===l){for(var f=m.getActiveStreamProcessors(),g=0;g<f.length;g++)if(f[g].getType()===r.default.FRAGMENTED_TEXT){u=f[g];break}u.setIndexHandlerTime(o.getTime()),u.getScheduleController().start()}}else if(c&&!c.isFragmented){for(var y=m.getActiveStreamProcessors(),_=0;_<y.length;_++)if(y[_].getType()===r.default.TEXT){s=(u=y[_]).getMediaInfoArr();break}if(u&&s)for(var T=0;T<s.length;T++)if(s[T].index===c.index&&s[T].lang===c.lang){u.selectMediaInfo(s[T]);break}}}},getCurrentTrackIdx:function(){return v.getCurrentTrackIdx()},enableForcedTextStreaming:function(e){(0,d.checkParameterType)(e,"boolean"),w=e},reset:function(){L(),n.resetEmbedded(),n.reset()}},E="",M=-1,b=!0,w=!1,v=(0,o.default)(e).getInstance(),y=(0,s.default)(e).getInstance(),_=(0,u.default)(e).getInstance(),n=(0,a.default)(e).getInstance(),T=(0,l.default)(e).getInstance(),v.initialize(),T.on(c.default.TEXT_TRACKS_QUEUE_INITIALIZED,C,t),T.on(c.default.PERIOD_SWITCH_STARTED,x,t),T.on(c.default.STREAM_COMPLETED,D,t),T.on(c.default.PERIOD_SWITCH_COMPLETED,I,t),L(),t}f.__dashjs_factory_name="TextController",t.default=i.default.getSingletonFactory(f)},function(e,t,n){
/*! codem-isoboxer v0.3.6 https://github.com/madebyhiro/codem-isoboxer/blob/master/LICENSE.txt */
var r={parseBuffer:function(e){return new i(e).parse()},addBoxProcessor:function(e,t){"string"==typeof e&&"function"==typeof t&&(a.prototype._boxProcessors[e]=t)},createFile:function(){return new i},createBox:function(e,t,n){var r=a.create(e);return t&&t.append(r,n),r},createFullBox:function(e,t,n){var i=r.createBox(e,t,n);return i.version=0,i.flags=0,i},Utils:{}};r.Utils.dataViewToString=function(e,t){var n=t||"utf-8";if("undefined"!=typeof TextDecoder)return new TextDecoder(n).decode(e);var r=[],i=0;if("utf-8"===n)for(;i<e.byteLength;){var a=e.getUint8(i++);a<128||(a<224?(a=(31&a)<<6,a|=63&e.getUint8(i++)):a<240?(a=(15&a)<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++)):(a=(7&a)<<18,a|=(63&e.getUint8(i++))<<12,a|=(63&e.getUint8(i++))<<6,a|=63&e.getUint8(i++))),r.push(String.fromCharCode(a))}else for(;i<e.byteLength;)r.push(String.fromCharCode(e.getUint8(i++)));return r.join("")},r.Utils.utf8ToByteArray=function(e){var t,n;if("undefined"!=typeof TextEncoder)t=(new TextEncoder).encode(e);else for(t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},r.Utils.appendBox=function(e,t,n){if(t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,-1!==n)if(null!=n){var r,i=-1;if("number"==typeof n)i=n;else{if("string"==typeof n)r=n;else{if("object"!=typeof n||!n.type)return void e.boxes.push(t);r=n.type}for(var a=0;a<e.boxes.length;a++)if(r===e.boxes[a].type){i=a+1;break}}e.boxes.splice(i,0,t)}else e.boxes.push(t)},t.parseBuffer=r.parseBuffer,t.addBoxProcessor=r.addBoxProcessor,t.createFile=r.createFile,t.createBox=r.createBox,t.createFullBox=r.createFullBox,t.Utils=r.Utils,r.Cursor=function(e){this.offset=void 0===e?0:e};var i=function(e){this._cursor=new r.Cursor,this.boxes=[],e&&(this._raw=new DataView(e))};i.prototype.fetch=function(e){var t=this.fetchAll(e,!0);return t.length?t[0]:null},i.prototype.fetchAll=function(e,t){var n=[];return i._sweep.call(this,e,n,t),n},i.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var e=a.parse(this);if(void 0===e.type)break;this.boxes.push(e)}return this},i._sweep=function(e,t,n){for(var r in this.type&&this.type==e&&t.push(this),this.boxes){if(t.length&&n)return;i._sweep.call(this.boxes[r],e,t,n)}},i.prototype.write=function(){var e,t=0;for(e=0;e<this.boxes.length;e++)t+=this.boxes[e].getLength(!1);var n=new Uint8Array(t);for(this._rawo=new DataView(n.buffer),this.bytes=n,this._cursor.offset=0,e=0;e<this.boxes.length;e++)this.boxes[e].write();return n.buffer},i.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)};var a=function(){this._cursor=new r.Cursor};a.parse=function(e){var t=new a;return t._offset=e._cursor.offset,t._root=e._root?e._root:e,t._raw=e._raw,t._parent=e,t._parseBox(),e._cursor.offset=t._raw.byteOffset+t._raw.byteLength,t},a.create=function(e){var t=new a;return t.type=e,t.boxes=[],t},a.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca"],a.prototype._boxProcessors={},a.prototype._procField=function(e,t,n){this._parsing?this[e]=this._readField(t,n):this._writeField(t,n,this[e])},a.prototype._procFieldArray=function(e,t,n,r){var i;if(this._parsing)for(this[e]=[],i=0;i<t;i++)this[e][i]=this._readField(n,r);else for(i=0;i<this[e].length;i++)this._writeField(n,r,this[e][i])},a.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},a.prototype._procEntries=function(e,t,n){var r;if(this._parsing)for(this[e]=[],r=0;r<t;r++)this[e].push({}),n.call(this,this[e][r]);else for(r=0;r<t;r++)n.call(this,this[e][r])},a.prototype._procSubEntries=function(e,t,n,r){var i;if(this._parsing)for(e[t]=[],i=0;i<n;i++)e[t].push({}),r.call(this,e[t][i]);else for(i=0;i<n;i++)r.call(this,e[t][i])},a.prototype._procEntryField=function(e,t,n,r){this._parsing?e[t]=this._readField(n,r):this._writeField(n,r,e[t])},a.prototype._procSubBoxes=function(e,t){var n;if(this._parsing)for(this[e]=[],n=0;n<t;n++)this[e].push(a.parse(this));else for(n=0;n<t;n++)this._rawo?this[e][n].write():this.size+=this[e][n].getLength()},a.prototype._readField=function(e,t){switch(e){case"uint":return this._readUint(t);case"int":return this._readInt(t);case"template":return this._readTemplate(t);case"string":return-1===t?this._readTerminatedString():this._readString(t);case"data":return this._readData(t);case"utf8":return this._readUTF8String();default:return-1}},a.prototype._readInt=function(e){var t=null,n=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:t=this._raw.getInt8(n);break;case 16:t=this._raw.getInt16(n);break;case 32:t=this._raw.getInt32(n);break;case 64:var r=this._raw.getInt32(n),i=this._raw.getInt32(n+4);t=r*Math.pow(2,32)+i}return this._cursor.offset+=e>>3,t},a.prototype._readUint=function(e){var t,n,r=null,i=this._cursor.offset-this._raw.byteOffset;switch(e){case 8:r=this._raw.getUint8(i);break;case 16:r=this._raw.getUint16(i);break;case 24:r=((t=this._raw.getUint16(i))<<8)+(n=this._raw.getUint8(i+2));break;case 32:r=this._raw.getUint32(i);break;case 64:t=this._raw.getUint32(i),n=this._raw.getUint32(i+4),r=t*Math.pow(2,32)+n}return this._cursor.offset+=e>>3,r},a.prototype._readString=function(e){for(var t="",n=0;n<e;n++){var r=this._readUint(8);t+=String.fromCharCode(r)}return t},a.prototype._readTemplate=function(e){return this._readUint(e/2)+this._readUint(e/2)/Math.pow(2,e/2)},a.prototype._readTerminatedString=function(){for(var e="";this._cursor.offset-this._offset<this._raw.byteLength;){var t=this._readUint(8);if(0===t)break;e+=String.fromCharCode(t)}return e},a.prototype._readData=function(e){var t=e>0?e:this._raw.byteLength-(this._cursor.offset-this._offset);if(t>0){var n=new Uint8Array(this._raw.buffer,this._cursor.offset,t);return this._cursor.offset+=t,n}return null},a.prototype._readUTF8String=function(){var e=this._raw.byteLength-(this._cursor.offset-this._offset),t=null;return e>0&&(t=new DataView(this._raw.buffer,this._cursor.offset,e),this._cursor.offset+=e),t?r.Utils.dataViewToString(t):t},a.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset+8);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type)?this._parseContainerBox():this._data=this._readData())}},a.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},a.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(a.parse(this))},a.prototype.append=function(e,t){r.Utils.appendBox(this,e,t)},a.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.size+=this.boxes[e].getLength();return this._data&&this._writeData(this._data),this.size},a.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),1===this.size&&this._procField("largesize","uint",64),"uuid"===this.type&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),-1!==this._boxContainers.indexOf(this.type))for(var e=0;e<this.boxes.length;e++)this.boxes[e].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},a.prototype._writeInt=function(e,t){if(this._rawo){var n=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setInt8(n,t);break;case 16:this._rawo.setInt16(n,t);break;case 32:this._rawo.setInt32(n,t);break;case 64:var r=Math.floor(t/Math.pow(2,32)),i=t-r*Math.pow(2,32);this._rawo.setUint32(n,r),this._rawo.setUint32(n+4,i)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeUint=function(e,t){if(this._rawo){var n,r,i=this._cursor.offset-this._rawo.byteOffset;switch(e){case 8:this._rawo.setUint8(i,t);break;case 16:this._rawo.setUint16(i,t);break;case 24:n=(16776960&t)>>8,r=255&t,this._rawo.setUint16(i,n),this._rawo.setUint8(i+2,r);break;case 32:this._rawo.setUint32(i,t);break;case 64:r=t-(n=Math.floor(t/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(i,n),this._rawo.setUint32(i+4,r)}this._cursor.offset+=e>>3}else this.size+=e>>3},a.prototype._writeString=function(e,t){for(var n=0;n<e;n++)this._writeUint(8,t.charCodeAt(n))},a.prototype._writeTerminatedString=function(e){if(0!==e.length){for(var t=0;t<e.length;t++)this._writeUint(8,e.charCodeAt(t));this._writeUint(8,0)}},a.prototype._writeTemplate=function(e,t){var n=Math.floor(t),r=(t-n)*Math.pow(2,e/2);this._writeUint(e/2,n),this._writeUint(e/2,r)},a.prototype._writeData=function(e){if(e)if(this._rawo){if(e instanceof Array){for(var t=this._cursor.offset-this._rawo.byteOffset,n=0;n<e.length;n++)this._rawo.setInt8(t+n,e[n]);this._cursor.offset+=e.length}e instanceof Uint8Array&&(this._root.bytes.set(e,this._cursor.offset),this._cursor.offset+=e.length)}else this.size+=e.length},a.prototype._writeUTF8String=function(e){var t=r.Utils.utf8ToByteArray(e);if(this._rawo)for(var n=new DataView(this._rawo.buffer,this._cursor.offset,t.length),i=0;i<t.length;i++)n.setUint8(i,t[i]);else this.size+=t.length},a.prototype._writeField=function(e,t,n){switch(e){case"uint":this._writeUint(t,n);break;case"int":this._writeInt(t,n);break;case"template":this._writeTemplate(t,n);break;case"string":-1==t?this._writeTerminatedString(n):this._writeString(t,n);break;case"data":this._writeData(n);break;case"utf8":this._writeUTF8String(n)}},a.prototype._boxProcessors.avc1=a.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},a.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"segment_duration","uint",1===this.version?64:32),this._procEntryField(e,"media_time","int",1===this.version?64:32),this._procEntryField(e,"media_rate_integer","int",16),this._procEntryField(e,"media_rate_fraction","int",16)}))},a.prototype._boxProcessors.emsg=function(){this._procFullBox(),1==this.version?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},a.prototype._boxProcessors.free=a.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},a.prototype._boxProcessors.ftyp=a.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var e=-1;this._parsing&&(e=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",e,"string",4)},a.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},a.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},a.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._parsing||"string"!=typeof this.language||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},a.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",1==this.version?64:32)},a.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},a.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},a.prototype._boxProcessors.mp4a=a.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},a.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},a.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},a.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},a.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},a.prototype._boxProcessors.sdtp=function(){this._procFullBox();var e=-1;this._parsing&&(e=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",e,"uint",8)},a.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",1==this.version?64:32),this._procField("first_offset","uint",1==this.version?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(e){this._parsing||(e.reference=(1&e.reference_type)<<31,e.reference|=2147483647&e.referenced_size,e.sap=(1&e.starts_with_SAP)<<31,e.sap|=(3&e.SAP_type)<<28,e.sap|=268435455&e.SAP_delta_time),this._procEntryField(e,"reference","uint",32),this._procEntryField(e,"subsegment_duration","uint",32),this._procEntryField(e,"sap","uint",32),this._parsing&&(e.reference_type=e.reference>>31&1,e.referenced_size=2147483647&e.reference,e.starts_with_SAP=e.sap>>31&1,e.SAP_type=e.sap>>28&7,e.SAP_delta_time=268435455&e.sap)}))},a.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},a.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(e){this._procEntryField(e,"ranges_count","uint",32),this._procSubEntries(e,"ranges",e.ranges_count,(function(e){this._procEntryField(e,"level","uint",8),this._procEntryField(e,"range_size","uint",24)}))}))},a.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},a.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(e){this._procEntryField(e,"sample_delta","uint",32),this._procEntryField(e,"subsample_count","uint",16),this._procSubEntries(e,"subsamples",e.subsample_count,(function(e){this._procEntryField(e,"subsample_size","uint",1===this.version?32:16),this._procEntryField(e,"subsample_priority","uint",8),this._procEntryField(e,"discardable","uint",8),this._procEntryField(e,"codec_specific_parameters","uint",32)}))}))},a.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},a.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",1==this.version?64:32)},a.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(e){this._procEntryField(e,"time","uint",1===this.version?64:32),this._procEntryField(e,"moof_offset","uint",1===this.version?64:32),this._procEntryField(e,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(e,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(e,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},a.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",1==this.version?64:32),this._procField("modification_time","uint",1==this.version?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",1==this.version?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},a.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},a.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(e){256&this.flags&&this._procEntryField(e,"sample_duration","uint",32),512&this.flags&&this._procEntryField(e,"sample_size","uint",32),1024&this.flags&&this._procEntryField(e,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(e,"sample_composition_time_offset",1===this.version?"int":"uint",32)}))},a.prototype._boxProcessors["url "]=a.prototype._boxProcessors["urn "]=function(){this._procFullBox(),"urn "===this.type&&this._procField("name","string",-1),this._procField("location","string",-1)},a.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},a.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},a.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},a.prototype._boxProcessors.vtte=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(4)),i=c(n(5)),a=c(n(7)),o=c(n(1)),s=c(n(6)),u=n(80),l=n(17);function c(e){return e&&e.__esModule?e:{default:e}}function d(){var e=this.context,t=(0,i.default)(e).getInstance(),n=void 0,o=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0;function w(e){var t=h[e].kind,n=void 0!==h[e].id?h[e].id:h[e].lang,r=h[e].lang,i=h[e].isTTML,a=h[e].isEmbedded,o=d.addTextTrack(t,n,r);return o.isEmbedded=a,o.isTTML=i,o}function S(e,t,n,r,i,a){var o=0,s=0;e/t>n/r?o=(s=t)/r*n:s=(o=e)/n*r;var u,l,c=0,d=0;return o/s>i?(d=s,c=s*i):(c=o,d=o/i),u=(e-c)/2,l=(t-d)/2,a?{x:u+.1*c,y:l+.1*d,w:.8*c,h:.8*d}:{x:u,y:l,w:c,h:d}}function x(e,n){var r=d.getClientWidth(),i=d.getClientHeight(),o=d.getVideoWidth(),s=d.getVideoHeight(),u=d.getVideoRelativeOffsetTop(),l=d.getVideoRelativeOffsetLeft();if(0!==o&&0!==s){var c=o/s,h=!1;e.isFromCEA608&&(c=3.5/3,h=!0);var f=S.call(this,r,i,o,s,c,h),p=f.w,T=f.h,b=f.x,w=f.y;if(p!=v||T!=y||b!=g||w!=m||n){if(g=b+l,m=w+u,v=p,y=T,_){var x=_.style;x&&(x.left=g+"px",x.top=m+"px",x.width=v+"px",x.height=y+"px",x.zIndex=E&&document[E]||M?A:null,t.trigger(a.default.CAPTION_CONTAINER_RESIZE,{}))}var D=e.activeCues;if(D)for(var I=D.length,C=0;C<I;++C){var N=D[C];N.scaleCue(N)}}}}function D(e){var t=v,n=y,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e.cellResolution){var u=[t/e.cellResolution[0],n/e.cellResolution[1]];if(e.linePadding)for(r in e.linePadding)if(e.linePadding.hasOwnProperty(r)){i=(e.linePadding[r]*u[0]).toString();for(var l=document.getElementsByClassName("spanPadding"),c=0;c<l.length;c++)l[c].style.cssText=l[c].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i),l[c].style.cssText=l[c].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.fontSize){for(r in e.fontSize)if(e.fontSize.hasOwnProperty(r)){"%"===e.fontSize[r][0]?a=e.fontSize[r][1]/100:"c"===e.fontSize[r][0]&&(a=e.fontSize[r][1]),i=(a*u[1]).toString(),s="defaultFontSize"!==r?document.getElementsByClassName(r):document.getElementsByClassName("paragraph");for(var d=0;d<s.length;d++)s[d].style.cssText=s[d].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}if(e.lineHeight)for(r in e.lineHeight)if(e.lineHeight.hasOwnProperty(r)){"%"===e.lineHeight[r][0]?o=e.lineHeight[r][1]/100:"c"===e.fontSize[r][0]&&(o=e.lineHeight[r][1]),i=(o*u[1]).toString(),s=document.getElementsByClassName(r);for(var h=0;h<s.length;h++)s[h].style.cssText=s[h].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+i)}}}if(e.isd){var f=document.getElementById(e.cueID);f&&_.removeChild(f),I(e)}}function I(e){if(_){var n=document.createElement("div");_.appendChild(n),b=(0,u.renderHTML)(e.isd,n,(function(t){var n=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,r=/^#(.*)$/;if(n.test(t)){var i=n.exec(t),a=parseInt(i[4],10)-1;return"data:image/png;base64,"+btoa(e.images[a])}if(r.test(t)){var o=r.exec(t)[1];return"data:image/png;base64,"+e.embeddedImages[o]}return null}),_.clientHeight,_.clientWidth,!1,(function(e){o.info("renderCaption :",e)}),b,!0),n.id=e.cueID,t.trigger(a.default.CAPTION_RENDERED,{captionDiv:n,currentTrackIdx:p})}}function C(e){return e>=0&&h[e]?d.getTextTrack(h[e].kind,h[e].id,h[e].lang,h[e].isTTML,h[e].isEmbedded):null}function N(e){if(e!==p){var t=C(p=e);L.call(this,t),T&&(clearInterval(T),T=null),t&&"html"===t.renderingType&&(x.call(this,t,!0),T=setInterval(x.bind(this,t),500))}}function L(e){k.call(this),e&&"html"===e.renderingType?j.call(this):P.call(this)}function O(e,t,n){return(isNaN(t)||e.startTime>=t)&&(isNaN(n)||e.endTime<=n)}function R(e,t,n){if(e.cues)for(var r=e.cues,i=r.length-1;i>=0;i--)O(r[i],t,n)&&e.removeCue(r[i])}function j(){var e=document.getElementById("native-cue-style");if(!e){(e=document.createElement("style")).id="native-cue-style",document.head.appendChild(e);var t=e.sheet,n=d.getElement();try{n&&(n.id?t.insertRule("#"+n.id+"::cue {background: transparent}",0):0!==n.classList.length?t.insertRule("."+n.className+"::cue {background: transparent}",0):t.insertRule("video::cue {background: transparent}",0))}catch(e){o.info(""+e.message)}}}function P(){var e=document.getElementById("native-cue-style");e&&document.head.removeChild(e)}function k(){if(_)for(;_.firstChild;)_.removeChild(_.firstChild)}return n={initialize:function(){"undefined"!=typeof window&&"undefined"!=typeof navigator&&(c=window.VTTCue||window.TextTrackCue,h=[],f=[],p=-1,g=0,m=0,v=0,y=0,_=null,T=null,M=!1,A=2147483647,b=null,void 0!==document.fullscreenElement?E="fullscreenElement":void 0!==document.webkitIsFullScreen?E="webkitIsFullScreen":document.msFullscreenElement?E="msFullscreenElement":document.mozFullScreen&&(E="mozFullScreen"))},setDisplayCConTop:function(e){(0,l.checkParameterType)(e,"boolean"),M=e,_&&!document[E]&&(_.style.zIndex=e?A:null)},addTextTrack:function(e,n){if(h.length!==n){if(h.push(e),h.length===n){h.sort((function(e,t){return e.index-t.index})),_=d.getTTMLRenderingDiv();for(var i=-1,s=0;s<h.length;s++){var u=w.call(this,s);f.push(u),h[s].defaultTrack&&(u.default=!0,i=s);var l=C(s);l&&(l.mode=r.default.TEXT_SHOWING,_&&(h[s].isTTML||h[s].isEmbedded)?l.renderingType="html":l.renderingType="default"),this.addCaptions(s,0,h[s].captionData),t.trigger(a.default.TEXT_TRACK_ADDED)}if(N.call(this,i),i>=0){t.on(a.default.PLAYBACK_METADATA_LOADED,(function e(){var n=C(i);n&&x.call(this,n,!0),t.off(a.default.PLAYBACK_METADATA_LOADED,e,this)}),this);for(var c=0;c<h.length;c++){var g=C(c);g&&(g.mode=c===i?r.default.TEXT_SHOWING:r.default.TEXT_HIDDEN)}}t.trigger(a.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:p,tracks:h})}}else o.error("Trying to add too many tracks.")},addCaptions:function(e,n,i){var s=C(e),u=this;if(s&&Array.isArray(i)&&0!==i.length)for(var l=0;l<i.length;l++){var d=void 0,h=i[l];s.cellResolution=h.cellResolution,s.isFromCEA608=h.isFromCEA608,"html"===h.type&&_?((d=new c(h.start-n,h.end-n,"")).cueHTMLElement=h.cueHTMLElement,d.isd=h.isd,d.images=h.images,d.embeddedImages=h.embeddedImages,d.cueID=h.cueID,d.scaleCue=D.bind(u),d.cellResolution=h.cellResolution,d.lineHeight=h.lineHeight,d.linePadding=h.linePadding,d.fontSize=h.fontSize,_.style.left=g+"px",_.style.top=m+"px",_.style.width=v+"px",_.style.height=y+"px",d.onenter=function(){s.mode===r.default.TEXT_SHOWING&&(this.isd?(I(this),o.debug("Cue enter id:"+this.cueID)):(_.appendChild(this.cueHTMLElement),D.call(u,this),t.trigger(a.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:p})))},d.onexit=function(){if(_)for(var e=_.childNodes,t=0;t<e.length;++t)e[t].id===this.cueID&&(o.debug("Cue exit id:"+e[t].id),_.removeChild(e[t]),--t)}):h.data&&(d=new c(h.start-n,h.end-n,h.data),h.styles&&(void 0!==h.styles.align&&"align"in d&&(d.align=h.styles.align),void 0!==h.styles.line&&"line"in d&&(d.line=h.styles.line),void 0!==h.styles.position&&"position"in d&&(d.position=h.styles.position),void 0!==h.styles.size&&"size"in d&&(d.size=h.styles.size)),d.onenter=function(){s.mode===r.default.TEXT_SHOWING&&t.trigger(a.default.CAPTION_RENDERED,{currentTrackIdx:p})});try{d?s.addCue(d):o.error("impossible to display subtitles.")}catch(e){throw R(s),s.addCue(d),e}}},getCurrentTrackIdx:function(){return p},setCurrentTrackIdx:N,getTrackIdxForId:function(e){for(var t=-1,n=0;n<h.length;n++)if(h[n].id===e){t=n;break}return t},getCurrentTrackInfo:function(){return h[p]},setModeForTrackIdx:function(e,t){var n=C(e);n&&n.mode!==t&&(n.mode=t)},deleteCuesFromTrackIdx:function(e,t,n){var r=C(e);r&&R(r,t,n)},deleteAllTextTracks:function(){for(var e=f?f.length:0,t=0;t<e;t++){var n=C(t);n&&(R.call(this,n),n.mode="disabled")}f=[],h=[],T&&(clearInterval(T),T=null),p=-1,k.call(this)},deleteTextTrack:function(e){d.removeChild(f[e]),f.splice(e,1)},setConfig:function(e){e&&e.videoModel&&(d=e.videoModel)}},o=(0,s.default)(e).getInstance().getLogger(n),n}d.__dashjs_factory_name="TextTracks",t.default=o.default.getSingletonFactory(d)},function(e,t,n){!function(e,t,n){function r(e,t,n,r,i,a,o,s){this.name=t,this.ns=e,this.qname=e+" "+t,this.inherit=i,this.animatable=a,this.initial=n,this.applies=r,this.parse=o,this.compute=s}for(var i in e.all=[new r(t.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,n.parseColor,null),new r(t.ns_tts,"color","white",["span"],!0,!0,n.parseColor,null),new r(t.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"displayAlign","before",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,r,i,a){var o,s;if("auto"===i)o=new n.ComputedLength(0,1);else if(null===(o=n.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)s=new n.ComputedLength(1,0);else if(null===(s=n.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:o,w:s}})),new r(t.ns_tts,"fontFamily","default",["span"],!0,!0,(function(e){var t=e.split(","),n=[];for(var r in t)"'"!==t[r].charAt(0)&&'"'!==t[r].charAt(0)&&"default"===t[r]?n.push("monospaceSerif"):n.push(t[r]);return n}),null),new r(t.ns_tts,"shear","0%",["p"],!0,!0,n.parseLength,(function(e,t,n,r){return"%"!==r.unit?null:Math.abs(r.value)>100?100*Math.sign(r.value):r.value})),new r(t.ns_tts,"fontSize","1c",["span"],!0,!0,n.parseLength,(function(t,r,i,a,o){return n.toComputedLength(a.value,a.unit,null!==r?r.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,null!==r?r.styleAttrs[e.byName.fontSize.qname]:t.cellLength.h,t.cellLength.h,t.pxLength.h)})),new r(t.ns_tts,"fontStyle","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"fontWeight","normal",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(e){return"normal"===e?e:n.parseLength(e)}),(function(t,r,i,a,o){var s;if("normal"===a)s=a;else if(null===(s=n.toComputedLength(a.value,a.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h)))return null;return s})),new r(t.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new r(t.ns_tts,"origin","auto",["region"],!1,!0,(function(e){if("auto"===e)return e;var t=e.split(" ");if(2!==t.length)return null;var r=n.parseLength(t[0]),i=n.parseLength(t[1]);return i&&r?{h:i,w:r}:null}),(function(e,t,r,i,a){var o,s;if("auto"===i)o=new n.ComputedLength(0,0);else if(null===(o=n.toComputedLength(i.h.value,i.h.unit,null,e.dimensions.h,null,e.pxLength.h)))return null;if("auto"===i)s=new n.ComputedLength(0,0);else if(null===(s=n.toComputedLength(i.w.value,i.w.unit,null,e.dimensions.w,null,e.pxLength.w)))return null;return{h:o,w:s}})),new r(t.ns_tts,"overflow","hidden",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"padding","0px",["region"],!1,!0,(function(e){var t=e.split(" ");if(t.length>4)return null;var r=[];for(var i in t){var a=n.parseLength(t[i]);if(!a)return null;r.push(a)}return r}),(function(t,r,i,a,o){var s;if(1===a.length)s=[a[0],a[0],a[0],a[0]];else if(2===a.length)s=[a[0],a[1],a[0],a[1]];else if(3===a.length)s=[a[0],a[1],a[2],a[1]];else{if(4!==a.length)return null;s=[a[0],a[1],a[2],a[3]]}var u=i.styleAttrs[e.byName.writingMode.qname];if("lrtb"===u||"lr"===u)s=[s[0],s[3],s[2],s[1]];else if("rltb"===u||"rl"===u)s=[s[0],s[1],s[2],s[3]];else if("tblr"===u)s=[s[3],s[0],s[1],s[2]];else{if("tbrl"!==u&&"tb"!==u)return null;s=[s[3],s[2],s[1],s[0]]}var l=[];for(var c in s)if(0===s[c].value)l[c]=new n.ComputedLength(0,0);else if(l[c]=n.toComputedLength(s[c].value,s[c].unit,i.styleAttrs[e.byName.fontSize.qname],"0"===c||"2"===c?i.styleAttrs[e.byName.extent.qname].h:i.styleAttrs[e.byName.extent.qname].w,"0"===c||"2"===c?t.cellLength.h:t.cellLength.w,"0"===c||"2"===c?t.pxLength.h:t.pxLength.w),null===l[c])return null;return l})),new r(t.ns_tts,"position","top left",["region"],!1,!0,(function(e){return n.parsePosition(e)}),(function(t,r,i,a){var o,s;return null===(o=n.toComputedLength(a.v.offset.value,a.v.offset.unit,null,new n.ComputedLength(-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-i.styleAttrs[e.byName.extent.qname].h.rh),null,t.pxLength.h))?null:("bottom"===a.v.edge&&(o=new n.ComputedLength(-o.rw-i.styleAttrs[e.byName.extent.qname].h.rw,t.dimensions.h.rh-o.rh-i.styleAttrs[e.byName.extent.qname].h.rh)),s=n.toComputedLength(a.h.offset.value,a.h.offset.unit,null,new n.ComputedLength(t.dimensions.w.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-i.styleAttrs[e.byName.extent.qname].w.rh),null,t.pxLength.w),null===o?null:("right"===a.h.edge&&(s=new n.ComputedLength(t.dimensions.w.rw-s.rw-i.styleAttrs[e.byName.extent.qname].w.rw,-s.rh-i.styleAttrs[e.byName.extent.qname].w.rh)),{h:o,w:s}))})),new r(t.ns_tts,"ruby","none",["span"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(e){return"center"!==e&&"spaceAround"!==e?null:e}),null),new r(t.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(e){var t=e.split(" "),r=[null,null];if(0===t.length||t.length>2)return null;if("none"!==t[0]&&"both"!==t[0]&&"after"!==t[0]&&"before"!==t[0]&&"outside"!==t[0])return null;if(r[0]=t[0],2===t.length&&"none"!==t[0]){var i=n.parseLength(t[1]);if(!i)return null;r[1]=i}return r}),(function(t,r,i,a,o){if("none"===a[0])return a;var s=null;return null===(s=null===a[1]?new n.ComputedLength(.5*i.styleAttrs[e.byName.fontSize.qname].rw,.5*i.styleAttrs[e.byName.fontSize.qname].rh):n.toComputedLength(a[1].value,a[1].unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h))?null:[a[0],s]})),new r(t.ns_tts,"showBackground","always",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"textAlign","start",["p"],!0,!0,(function(e){return e}),(function(e,t,n,r,i){return"left"===r?"start":"right"===r?"end":r})),new r(t.ns_tts,"textCombine","none",["span"],!0,!0,(function(e){var t=e.split(" ");return 1!==t.length||"none"!==t[0]&&"all"!==t[0]?null:[t[0]]}),null),new r(t.ns_tts,"textDecoration","none",["span"],!0,!0,(function(e){return e.split(" ")}),null),new r(t.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(e){var t=e.split(" "),r={style:null,symbol:null,color:null,position:null};for(var i in t)if("none"===t[i]||"auto"===t[i])r.style=t[i];else if("filled"===t[i]||"open"===t[i])r.style=t[i];else if("circle"===t[i]||"dot"===t[i]||"sesame"===t[i])r.symbol=t[i];else if("current"===t[i])r.color=t[i];else if("outside"===t[i]||"before"===t[i]||"after"===t[i])r.position=t[i];else if(r.color=n.parseColor(t[i]),null===r.color)return null;return null==r.style&&null==r.symbol?r.style="auto":(r.symbol=r.symbol||"circle",r.style=r.style||"filled"),r.position=r.position||"outside",r.color=r.color||"current",r}),null),new r(t.ns_tts,"textOutline","none",["span"],!0,!0,(function(e){if("none"===e)return e;var t={},r=e.split(" ");if(0===r.length||r.length>2)return null;var i=n.parseColor(r[0]);if(t.color=i,null!==i&&r.shift(),1!==r.length)return null;var a=n.parseLength(r[0]);return a?(t.thickness=a,t):null}),(function(t,r,i,a,o){if("none"===a)return a;var s={};return null===a.color?s.color=i.styleAttrs[e.byName.color.qname]:s.color=a.color,s.thickness=n.toComputedLength(a.thickness.value,a.thickness.unit,i.styleAttrs[e.byName.fontSize.qname],i.styleAttrs[e.byName.fontSize.qname],t.cellLength.h,t.pxLength.h),null===s.thickness?null:s})),new r(t.ns_tts,"textShadow","none",["span"],!0,!0,n.parseTextShadow,(function(t,r,i,a){if("none"===a)return a;var o=[];for(var s in a){var u={};if(u.x_off=n.toComputedLength(a[s][0].value,a[s][0].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.w),null===u.x_off)return null;if(u.y_off=n.toComputedLength(a[s][1].value,a[s][1].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===u.y_off)return null;if(null===a[s][2])u.b_radius=0;else if(u.b_radius=n.toComputedLength(a[s][2].value,a[s][2].unit,null,i.styleAttrs[e.byName.fontSize.qname],null,t.pxLength.h),null===u.b_radius)return null;null===a[s][3]?u.color=i.styleAttrs[e.byName.color.qname]:u.color=a[s][3],o.push(u)}return o})),new r(t.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(e){return e}),null),new r(t.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(e){return e}),null),new r(t.ns_tts,"zIndex","auto",["region"],!1,!0,(function(e){var t;return"auto"===e?t=e:(t=parseInt(e),isNaN(t)&&(t=null)),t}),null),new r(t.ns_ebutts,"linePadding","0c",["p"],!0,!1,n.parseLength,(function(e,t,r,i,a){return n.toComputedLength(i.value,i.unit,null,null,e.cellLength.w,null)})),new r(t.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(e){return e}),null),new r(t.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(e){return e}),null),new r(t.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(e){return"true"===e}),null),new r(t.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(e){return"true"===e}),null)],e.byQName={},e.all)e.byQName[e.all[i].qname]=e.all[i];for(var a in e.byName={},e.all)e.byName[e.all[a].name]=e.all[a]}(t,"undefined"==typeof imscNames?n(34):imscNames,"undefined"==typeof imscUtils?n(35):imscUtils)},function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(136),i=n(137),a=n(81);function o(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(o()<t)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=u.prototype:(null===e&&(e=new u(t)),e.length=t),e}function u(e,t,n){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return l(this,e,t,n)}function l(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);u.TYPED_ARRAY_SUPPORT?(e=t).__proto__=u.prototype:e=h(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(u.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):h(e,t);if("Buffer"===t.type&&a(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(c(t),e=s(e,t<0?0:0|f(t)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|e}function p(e,t){if(u.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return w(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=u.from(t,r)),u.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"==typeof t)return t&=255,u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var a,o=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,h=0;h<u;h++)if(l(e,a+h)!==l(t,h)){d=!1;break}if(d)return a}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function T(e,t,n,r){return G(F(t,e.length-n),e,n,r)}function E(e,t,n,r){return G(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function M(e,t,n,r){return E(e,t,n,r)}function b(e,t,n,r){return G(z(t),e,n,r)}function A(e,t,n,r){return G(function(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}(t,e.length-n),e,n,r)}function w(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a,o,s,u,l=e[i],c=null,d=l>239?4:l>223?3:l>191?2:1;if(i+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:128==(192&(a=e[i+1]))&&(u=(31&l)<<6|63&a)>127&&(c=u);break;case 3:a=e[i+1],o=e[i+2],128==(192&a)&&128==(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],128==(192&a)&&128==(192&o)&&128==(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,d=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=u,t.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},t.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=o(),u.poolSize=8192,u._augment=function(e){return e.__proto__=u.prototype,e},u.from=function(e,t,n){return l(null,e,t,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(e,t,n){return function(e,t,n,r){return c(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},u.allocUnsafe=function(e){return d(null,e)},u.allocUnsafeSlow=function(e){return d(null,e)},u.isBuffer=function(e){return!(null==e||!e._isBuffer)},u.compare=function(e,t){if(!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!u.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},u.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},u.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},u.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},u.prototype.compare=function(e,t,n,r,i){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var a=(i>>>=0)-(r>>>=0),o=(n>>>=0)-(t>>>=0),s=Math.min(a,o),l=this.slice(r,i),c=e.slice(t,n),d=0;d<s;++d)if(l[d]!==c[d]){a=l[d],o=c[d];break}return a<o?-1:o<a?1:0},u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},u.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},u.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return M(this,e,t,n);case"base64":return b(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=B(e[a]);return i}function C(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function N(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,i,a){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function O(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function j(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function P(e,t,n,r,a){return a||j(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function k(e,t,n,r,a){return a||j(e,0,n,8),i.write(e,t,n,r,52,8),n+8}u.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=u.prototype;else{var i=t-e;n=new u(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},u.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},u.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},u.prototype.readUInt8=function(e,t){return t||N(e,1,this.length),this[e]},u.prototype.readUInt16LE=function(e,t){return t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUInt16BE=function(e,t){return t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUInt32LE=function(e,t){return t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUInt32BE=function(e,t){return t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},u.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||N(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},u.prototype.readInt8=function(e,t){return t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){t||N(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(e,t){t||N(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(e,t){return t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readFloatLE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return t||N(e,4,this.length),i.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return t||N(e,8,this.length),i.read(this,e,!1,52,8)},u.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},u.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||L(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},u.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,255,0),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);L(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},u.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,1,127,-128),u.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):O(this,e,t,!0),t+2},u.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):O(this,e,t,!1),t+2},u.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},u.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),u.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},u.prototype.writeFloatLE=function(e,t,n){return P(this,e,t,!0,n)},u.prototype.writeFloatBE=function(e,t,n){return P(this,e,t,!1,n)},u.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},u.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},u.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},u.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=u.isBuffer(e)?e:F(new u(e,r).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function B(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function z(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(13))},function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,a=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function d(e,t,n,r){var i,a,o,s;if(l(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),(i=c(e))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length)}function g(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)a(u,this,t);else{var l=u.length,c=m(u,l);for(n=0;n<l;++n)a(c[n],this,t)}return!0},s.prototype.addListener=function(e,t){return d(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return d(this,e,t,!0)},s.prototype.once=function(e,t){return l(t),this.on(e,f(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,f(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,i,a,o;if(l(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,i=a;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,o||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,a=Object.keys(n);for(r=0;r<a.length;++r)"removeListener"!==(i=a[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},s.prototype.listenerCount=g,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t,n){(t=e.exports=n(82)).Stream=t,t.Readable=t,t.Writable=n(54),t.Duplex=n(20),t.Transform=n(85),t.PassThrough=n(145)},function(e,t,n){"use strict";(function(t,r,i){var a=n(37);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;e.entry=null;for(;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=y;var s,u=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?r:a.nextTick;y.WritableState=v;var l=Object.create(n(28));l.inherits=n(23);var c={deprecate:n(144)},d=n(83),h=n(38).Buffer,f=i.Uint8Array||function(){};var p,g=n(84);function m(){}function v(e,t){s=s||n(20),e=e||{};var r=t instanceof s;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,l=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var d=!1===e.decodeStrings;this.decodeStrings=!d,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,r,i){--t.pendingcb,n?(a.nextTick(i,r),a.nextTick(A,e,t),e._writableState.errorEmitted=!0,e.emit("error",r)):(i(r),e._writableState.errorEmitted=!0,e.emit("error",r),A(e,t))}(e,n,r,t,i);else{var o=M(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||E(e,n),r?u(T,e,n,o,i):T(e,n,o,i)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function y(e){if(s=s||n(20),!(p.call(y,this)||this instanceof s))return new y(e);this._writableState=new v(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function _(e,t,n,r,i,a,o){t.writelen=r,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,a,t.onwrite),t.sync=!1}function T(e,t,n,r){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,r(),A(e,t)}function E(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,u=!0;n;)i[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;i.allBuffers=u,_(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,c=n.encoding,d=n.callback;if(_(e,t,!1,t.objectMode?1:l.length,l,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function M(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),A(e,t)}))}function A(e,t){var n=M(t);return n&&(!function(e,t){t.prefinished||t.finalCalled||("function"==typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(b,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}l.inherits(y,d),v.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(v.prototype,"buffer",{get:c.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(y,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===y&&(e&&e._writableState instanceof v)}})):p=function(e){return e instanceof this},y.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},y.prototype.write=function(e,t,n){var r,i=this._writableState,o=!1,s=!i.objectMode&&(r=e,h.isBuffer(r)||r instanceof f);return s&&!h.isBuffer(e)&&(e=function(e){return h.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(e,t){var n=new Error("write after end");e.emit("error",n),a.nextTick(t,n)}(this,n):(s||function(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),a.nextTick(r,o),i=!1),i}(this,i,e,n))&&(i.pendingcb++,o=function(e,t,n,r,i,a){if(!n){var o=function(e,t,n){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,n));return t}(t,r,i);r!==o&&(n=!0,i="buffer",r=o)}var s=t.objectMode?1:r.length;t.length+=s;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else _(e,t,!1,s,r,i,a);return u}(this,i,s,e,t,n)),o},y.prototype.cork=function(){this._writableState.corked++},y.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||E(this,e))},y.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),y.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},y.prototype._writev=null,y.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(e,t,n){t.ending=!0,A(e,t),n&&(t.finished?a.nextTick(n):e.once("finish",n));t.ended=!0,e.writable=!1}(this,r,n)},Object.defineProperty(y.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),y.prototype.destroy=g.destroy,y.prototype._undestroy=g.undestroy,y.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n(36),n(142).setImmediate,n(13))},function(e,t,n){"use strict";var r=n(38).Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=u,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=c,this.end=d,t=3;break;default:return this.write=h,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function u(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function c(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function d(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},a.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=o(t[r]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(e.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if((i=o(t[r]))>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(4)),i=u(n(7)),a=u(n(5)),o=u(n(1)),s=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}function l(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0,o=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=["alwaysReplace","neverReplace"],p=["highestBitrate","widestRange"];function g(e,t){if(!e||!t)return[];var n=t.id;return u[n]&&u[n][e]?u[n][e].list:[]}function m(e,t){return!e||!t||t&&!u[t.id]?null:u[t.id][e].current}function v(e){if(e&&e.streamInfo){var n=e.type,r=e.streamInfo,a=r.id,o=m(n,r);if(u[a]&&u[a][n]&&!M(e,o)){u[a][n].current=e,u[a][n].current&&t.trigger(i.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:o,newMediaInfo:e,switchMode:d[n]});var s=function(e){var t={lang:e.lang,viewpoint:e.viewpoint,roles:e.roles,accessibility:e.accessibility,audioChannelConfiguration:e.audioChannelConfiguration};return t.lang||t.viewpoint||t.role&&t.role.length>0||t.accessibility&&t.accessibility.length>0||t.audioChannelConfiguration&&t.audioChannelConfiguration.length>0?t:null}(e);s&&u[a][n].storeLastSettings&&(s.roles&&(s.role=s.roles[0],delete s.roles),s.accessibility&&(s.accessibility=s.accessibility[0]),s.audioChannelConfiguration&&(s.audioChannelConfiguration=s.audioChannelConfiguration[0]),h.setSavedMediaSettings(n,s))}}}function y(e,t){e&&t&&(l[e]=t)}function _(e){return e?l[e]:null}function T(){return c||"highestBitrate"}function E(e){return e===r.default.AUDIO||e===r.default.VIDEO||e===r.default.TEXT||e===r.default.FRAGMENTED_TEXT||e===r.default.IMAGE}function M(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;var n=e.id===t.id,r=e.viewpoint===t.viewpoint,i=e.lang===t.lang,a=e.roles.toString()===t.roles.toString(),o=e.accessibility.toString()===t.accessibility.toString(),s=e.audioChannelConfiguration.toString()===t.audioChannelConfiguration.toString();return n&&r&&i&&a&&o&&s}function b(){u={},l={audio:null,video:null},d={audio:"alwaysReplace",video:"neverReplace"}}function A(e,t){var n=!e.lang||e.lang===t.lang,r=!e.viewpoint||e.viewpoint===t.viewpoint,i=!e.role||!!t.roles.filter((function(t){return t===e.role}))[0],a=!e.accessibility||!!t.accessibility.filter((function(t){return t===e.accessibility}))[0],o=!e.audioChannelConfiguration||!!t.audioChannelConfiguration.filter((function(t){return t===e.audioChannelConfiguration}))[0];return n&&r&&i&&a&&o}function w(e){var t=T(),n=[],r=function(e){var t=0,n=[],r=void 0;return e.forEach((function(e){(r=Math.max.apply(Math,e.bitrateList.map((function(e){return e.bandwidth}))))>t?(t=r,n=[e]):r===t&&n.push(e)})),n},i=function(e){var t=0,n=[],r=void 0;return e.forEach((function(e){(r=e.representationCount)>t?(t=r,n=[e]):r===t&&n.push(e)})),n};switch(t){case"highestBitrate":(n=r(e)).length>1&&(n=i(n));break;case"widestRange":(n=i(e)).length>1&&(n=r(e));break;default:o.warn("Track selection mode is not supported: "+t)}return n[0]}return n={checkInitialMediaSettingsForType:function(e,t){var n=_(e),i=g(e,t),a=[];e!==r.default.FRAGMENTED_TEXT?(n||y(e,n=h.getSavedMediaSettings(e)),i&&0!==i.length&&(n&&i.forEach((function(e){A(n,e)&&a.push(e)})),0===a.length?v(w(i)):a.length>1?v(w(a)):v(a[0]))):v(i[0])},addTrack:function(e){if(e){var t=e.type;if(E(t)){var n=e.streamInfo.id;u[n]||(u[n]={audio:{list:[],storeLastSettings:!0,current:null},video:{list:[],storeLastSettings:!0,current:null},text:{list:[],storeLastSettings:!0,current:null},fragmentedText:{list:[],storeLastSettings:!0,current:null},image:{list:[],storeLastSettings:!0,current:null}});for(var r=u[n][t].list,i=0,a=r.length;i<a;++i)if(M(r[i],e))return;r.push(e);var o=_(t);o&&A(o,e)&&!m(t,e.streamInfo)&&v(e)}}},getTracksFor:g,getCurrentTrackFor:m,isCurrentTrack:function(e){if(!e)return!1;var t=e.type,n=e.streamInfo.id;return u[n]&&u[n][t]&&M(u[n][t].current,e)},setTrack:v,setInitialSettings:y,getInitialSettings:_,setSwitchMode:function(e,t){-1!==f.indexOf(t)?d[e]=t:o.warn("Track switch mode is not supported: "+t)},getSwitchMode:function(e){return d[e]},setSelectionModeForInitialTrack:function(e){-1!==p.indexOf(e)?c=e:o.warn("Track selection mode is not supported: "+e)},getSelectionModeForInitialTrack:T,isMultiTrackSupportedByType:E,isTracksEqual:M,setConfig:function(e){e&&e.domStorage&&(h=e.domStorage)},reset:b},o=(0,s.default)(e).getInstance().getLogger(n),b(),n}l.__dashjs_factory_name="MediaController";var c=o.default.getSingletonFactory(l);c.TRACK_SWITCH_MODE_NEVER_REPLACE="neverReplace",c.TRACK_SWITCH_MODE_ALWAYS_REPLACE="alwaysReplace",c.TRACK_SELECTION_MODE_HIGHEST_BITRATE="highestBitrate",c.TRACK_SELECTION_MODE_WIDEST_RANGE="widestRange",c.DEFAULT_INIT_TRACK_SELECTION_MODE="highestBitrate",o.default.updateSingletonFactory(l.__dashjs_factory_name,c),t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e={};return{save:function(t){var n=t.streamId,r=t.representationId;e[n]=e[n]||{},e[n][r]=t},extract:function(t,n){return e&&e[t]&&e[t][n]?e[t][n]:null},reset:function(){e={}}}}o.__dashjs_factory_name="InitCache",t.default=a.default.getSingletonFactory(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.start=null,this.mstart=null,this.starttype=null,this.trace=[]};i.INITIAL_PLAYOUT_START_REASON="initial_playout",i.SEEK_START_REASON="seek",i.RESUME_FROM_PAUSE_START_REASON="resume",i.METRICS_COLLECTION_START_REASON="metrics_collection_start";var a=function e(){r(this,e),this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null};a.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",a.REBUFFERING_REASON="rebuffering",a.USER_REQUEST_STOP_REASON="user_request",a.END_OF_PERIOD_STOP_REASON="end_of_period",a.END_OF_CONTENT_STOP_REASON="end_of_content",a.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",a.FAILURE_STOP_REASON="failure",t.PlayList=i,t.PlayListTrace=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.indexRange=null,this.index=null,this.mediaRange=null,this.media=null,this.duration=NaN,this.replacementTime=null,this.replacementNumber=NaN,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.availabilityStartTime=NaN,this.availabilityEndTime=NaN,this.availabilityIdx=NaN,this.wallStartTime=NaN,this.representation=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).requestModifier;return{load:function(e){var n=new Date,r=e.request,i=new XMLHttpRequest;i.open(e.method,e.url,!0),r.responseType&&(i.responseType=r.responseType),r.range&&i.setRequestHeader("Range","bytes="+r.range),r.requestStartDate||(r.requestStartDate=n),t&&(i=t.modifyRequestHeader(i)),i.withCredentials=e.withCredentials,i.onload=e.onload,i.onloadend=e.onend,i.onerror=e.onerror,i.onprogress=e.progress,i.onabort=e.onabort,i.send(),e.response=i},abort:function(e){var t=e.response;t.onloadend=t.onerror=t.onprogress=void 0,t.abort()}}}o.__dashjs_factory_name="XHRLoader";var s=a.default.getClassFactory(o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,r,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initDataTypes=["cenc"],t&&t.length&&(this.audioCapabilities=t),n&&n.length&&(this.videoCapabilities=n),this.distinctiveIdentifier=r,this.persistentState=i,this.sessionTypes=a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keyID=t,this.key=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n&&"persistent"!==n&&"temporary"!==n)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=t,this.type=n}return r(e,[{key:"toJWK",value:function(){var e=void 0,t=this.keyPairs.length,n={keys:[]};for(e=0;e<t;e++){var r={kty:"oct",alg:"A128KW",kid:this.keyPairs[e].keyID,k:this.keyPairs[e].key};n.keys.push(r)}this.type&&(n.type=this.type);var i=JSON.stringify(n),a=i.length,o=new ArrayBuffer(a),s=new Uint8Array(o);for(e=0;e<a;e++)s[e]=i.charCodeAt(e);return o}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initData=t,this.initDataType=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sessionToken=t,this.message=n,this.defaultURL=r,this.messageType=i||"license-request"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.keySystem=t,this.ksConfiguration=n}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(module,exports,__webpack_require__){"use strict";(function(global){var numeric=exports;void 0!==global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,i;for(void 0===t&&(t=15),r=.5,n=new Date;;){for(i=r*=2;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;if(new Date-n>t)break}for(i=r;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;return 1e3*(3*r-1)/(new Date-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;t<n;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){var t=[];return function e(n){var r;if(void 0===n)return t.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof n)return t.push('"'+n+'"'),!1;if("boolean"==typeof n)return t.push(n.toString()),!1;if("number"==typeof n){var i=function e(t){if(0===t)return"0";if(isNaN(t))return"NaN";if(t<0)return"-"+e(-t);if(isFinite(t)){var n=Math.floor(Math.log(t)/Math.log(10)),r=t/Math.pow(10,n),i=r.toPrecision(numeric.precision);return 10===parseFloat(i)&&(n++,i=(r=1).toPrecision(numeric.precision)),parseFloat(i).toString()+"e"+n.toString()}return"Infinity"}(n),a=n.toPrecision(numeric.precision),o=parseFloat(n.toString()).toString(),s=[i,a,o,parseFloat(a).toString(),parseFloat(o).toString()];for(r=1;r<s.length;r++)s[r].length<i.length&&(i=s[r]);return t.push(Array(numeric.precision+8-i.length).join(" ")+i),!1}if(null===n)return t.push("null"),!1;if("function"==typeof n){t.push(n.toString());var u=!1;for(r in n)n.hasOwnProperty(r)&&(u?t.push(",\n"):t.push("\n{"),u=!0,t.push(r),t.push(": \n"),e(n[r]));return u&&t.push("}\n"),!0}if(n instanceof Array){if(n.length>numeric.largeArray)return t.push("...Large Array..."),!0;u=!1;for(t.push("["),r=0;r<n.length;r++)r>0&&(t.push(","),u&&t.push("\n ")),u=e(n[r]);return t.push("]"),!0}for(r in t.push("{"),u=!1,n)n.hasOwnProperty(r)&&(u&&t.push(",\n"),u=!0,t.push(r),t.push(": \n"),e(n[r]));return t.push("}"),!0}(e),t.join("")},numeric.parseDate=function(e){return function e(t){if("string"==typeof t)return Date.parse(t.replace(/-/g,"/"));if(!(t instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseFloat=function(e){return function e(t){if("string"==typeof t)return parseFloat(t);if(!(t instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<t.length;n++)r[n]=e(t[n]);return r}(e)},numeric.parseCSV=function(e){var t,n,r,i=e.split("\n"),a=[],o=/(([^'",]*)|('[^']*')|("[^"]*")),/g,s=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,u=0;for(n=0;n<i.length;n++){var l,c=(i[n]+",").match(o);if(c.length>0){for(a[u]=[],t=0;t<c.length;t++)l=(r=c[t]).substr(0,r.length-1),s.test(l)?a[u][t]=parseFloat(l):a[u][t]=l;u++}}return a},numeric.toCSV=function(e){var t,n,r,i,a,o=numeric.dim(e);for(r=o[0],o[1],a=[],t=0;t<r;t++){for(i=[],n=0;n<r;n++)i[n]=e[t][n].toString();a[t]=i.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e,t,n){void 0===t&&(t=0),void 0===n&&(n=e.length);var r,i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],a=-1;e.length;for(r=t;r<n;r++)a=a>>>8^i[255&(a^e[r])];return-1^a}var n,r,i,a,o,s,u,l,c,d,h=e[0].length,f=e[0][0].length,p=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,f>>24&255,f>>16&255,f>>8&255,255&f,h>>24&255,h>>16&255,h>>8&255,255&h,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=t(p,12,29),p[29]=d>>24&255,p[30]=d>>16&255,p[31]=d>>8&255,p[32]=255&d,n=1,r=0,u=0;u<h;u++){for(u<h-1?p.push(0):p.push(1),o=3*f+1+(0===u)&255,s=3*f+1+(0===u)>>8&255,p.push(o),p.push(s),p.push(255&~o),p.push(255&~s),0===u&&p.push(0),l=0;l<f;l++)for(i=0;i<3;i++)r=(r+(n=(n+(o=(o=e[i][u][l])>255?255:o<0?0:Math.round(o)))%65521))%65521,p.push(o);p.push(0)}return c=(r<<16)+n,p.push(c>>24&255),p.push(c>>16&255),p.push(c>>8&255),p.push(255&c),a=p.length-41,p[33]=a>>24&255,p[34]=a>>16&255,p[35]=a>>8&255,p[36]=255&a,d=t(p,37),p.push(d>>24&255),p.push(d>>16&255),p.push(d>>8&255),p.push(255&d),p.push(0),p.push(0),p.push(0),p.push(0),p.push(73),p.push(69),p.push(78),p.push(68),p.push(174),p.push(66),p.push(96),p.push(130),"data:image/png;base64,"+function(e){var t,n,r,i,a,o,s,u=e.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="";for(t=0;t<u;t+=3)a=((3&(n=e[t]))<<4)+((r=e[t+1])>>4),o=((15&r)<<2)+((i=e[t+2])>>6),s=63&i,t+1>=u?o=s=64:t+2>=u&&(s=64),c+=l.charAt(n>>2)+l.charAt(a)+l.charAt(o)+l.charAt(s);return c}(p)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t;return"object"==typeof e?"object"==typeof(t=e[0])?"object"==typeof t[0]?numeric._dim(e):[e.length,t.length]:[e.length]:[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,i;if(!(t instanceof Array&&n instanceof Array))return!1;if((i=t.length)!==n.length)return!1;for(r=0;r<i;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){void 0===n&&(n=0);var r,i=e[n],a=Array(i);if(n===e.length-1){for(r=i-2;r>=0;r-=2)a[r+1]=t,a[r]=t;return-1===r&&(a[0]=t),a}for(r=i-1;r>=0;r--)a[r]=numeric.rep(e,t,n+1);return a},numeric.dotMMsmall=function(e,t){var n,r,i,a,o,s,u,l,c,d,h;for(a=e.length,o=t.length,s=t[0].length,u=Array(a),n=a-1;n>=0;n--){for(l=Array(s),c=e[n],i=s-1;i>=0;i--){for(d=c[o-1]*t[o-1][i],r=o-2;r>=1;r-=2)h=r-1,d+=c[r]*t[r][i]+c[h]*t[h][i];0===r&&(d+=c[0]*t[0][i]),l[i]=d}u[n]=l}return u},numeric._getCol=function(e,t,n){var r;for(r=e.length-1;r>0;--r)n[r]=e[r][t],n[--r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,i,a=numeric._getCol,o=t.length,s=Array(o),u=e.length,l=t[0].length,c=new Array(u),d=numeric.dotVV;for(--o,r=--u;-1!==r;--r)c[r]=Array(l);for(r=--l;-1!==r;--r)for(a(t,r,s),i=u;-1!==i;--i)0,n=e[i],c[i][r]=d(n,s);return c},numeric.dotMV=function(e,t){var n,r=e.length,i=(t.length,Array(r)),a=numeric.dotVV;for(n=r-1;n>=0;n--)i[n]=a(e[n],t);return i},numeric.dotVM=function(e,t){var n,r,i,a,o,s,u;for(i=e.length,a=t[0].length,o=Array(a),r=a-1;r>=0;r--){for(s=e[i-1]*t[i-1][r],n=i-2;n>=1;n-=2)u=n-1,s+=e[n]*t[n][r]+e[u]*t[u][r];0===n&&(s+=e[0]*t[0][r]),o[r]=s}return o},numeric.dotVV=function(e,t){var n,r,i=e.length,a=e[i-1]*t[i-1];for(n=i-2;n>=1;n-=2)r=n-1,a+=e[n]*t[n]+e[r]*t[r];return 0===n&&(a+=e[0]*t[0]),a},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,i,a=e.length,o=Array(a);for(t=a-1;t>=0;t--){for(i=Array(a),n=t+2,r=a-1;r>=n;r-=2)i[r]=0,i[r-1]=0;for(r>t&&(i[r]=0),i[t]=e[t],r=t-1;r>=1;r-=2)i[r]=0,i[r-1]=0;0===r&&(i[0]=0),o[t]=i}return o},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],r[--t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){void 0===n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",u=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(u=!0),a.push(i);return a[e.length]="_s",a[e.length+1]="_k",a[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(u?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric.pointwise2=function(e,t,n){void 0===n&&(n="");var r,i,a=[],o=/\[i\]$/,s="",u=!1;for(r=0;r<e.length;r++)o.test(e[r])?s=i=e[r].substring(0,e[r].length-3):i=e[r],"ret"===i&&(u=!0),a.push(i);return a[e.length]="var _n = "+s+".length;\nvar i"+(u?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,a)},numeric._biforeach=function e(t,n,r,i,a){var o;if(i!==r.length-1)for(o=r[i]-1;o>=0;o--)e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,i+1,a);else a(t,n)},numeric._biforeach2=function e(t,n,r,i,a){if(i===r.length-1)return a(t,n);var o,s=r[i],u=Array(s);for(o=s-1;o>=0;--o)u[o]=e("object"==typeof t?t[o]:t,"object"==typeof n?n[o]:n,r,i+1,a);return u},numeric._foreach=function e(t,n,r,i){var a;if(r!==n.length-1)for(a=n[r]-1;a>=0;a--)e(t[a],n,r+1,i);else i(t)},numeric._foreach2=function e(t,n,r,i){if(r===n.length-1)return i(t);var a,o=n[r],s=Array(o);for(a=o-1;a>=0;a--)s[a]=e(t[a],n,r+1,i);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,i="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(i="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),i),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),i),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),i),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),i),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),i),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(i="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(i="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",i),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",i),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,i,a,o,s,u=numeric.dim(e),l=Math.abs,c=u[0],d=u[1],h=numeric.clone(e),f=numeric.identity(c);for(o=0;o<d;++o){var p=-1,g=-1;for(a=o;a!==c;++a)(s=l(h[a][o]))>g&&(p=a,g=s);for(n=h[p],h[p]=h[o],h[o]=n,i=f[p],f[p]=f[o],f[o]=i,e=n[o],s=o;s!==d;++s)n[s]/=e;for(s=d-1;-1!==s;--s)i[s]/=e;for(a=c-1;-1!==a;--a)if(a!==o){for(t=h[a],r=f[a],e=t[o],s=o+1;s!==d;++s)t[s]-=n[s]*e;for(s=d-1;s>0;--s)r[s]-=i[s]*e,r[--s]-=i[s]*e;0===s&&(r[0]-=i[0]*e)}}return f},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,i,a,o,s,u,l,c=t[0],d=1,h=numeric.clone(e);for(r=0;r<c-1;r++){for(i=r,n=r+1;n<c;n++)Math.abs(h[n][r])>Math.abs(h[i][r])&&(i=n);for(i!==r&&(u=h[i],h[i]=h[r],h[r]=u,d*=-1),a=h[r],n=r+1;n<c;n++){for(s=(o=h[n])[r]/a[r],i=r+1;i<c-1;i+=2)l=i+1,o[i]-=a[i]*s,o[l]-=a[l]*s;i!==c&&(o[i]-=a[i]*s)}if(0===a[r])return 0;d*=a[r]}return d*h[r][r]},numeric.transpose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,u=Array(s);for(n=0;n<s;n++)u[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)(a=u[n])[t]=i[n],a[t-1]=r[n],(a=u[--n])[t]=i[n],a[t-1]=r[n];0===n&&((a=u[0])[t]=i[0],a[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)u[n][0]=r[n],u[--n][0]=r[n];0===n&&(u[0][0]=r[0])}return u},numeric.negtranspose=function(e){var t,n,r,i,a,o=e.length,s=e[0].length,u=Array(s);for(n=0;n<s;n++)u[n]=Array(o);for(t=o-1;t>=1;t-=2){for(i=e[t],r=e[t-1],n=s-1;n>=1;--n)(a=u[n])[t]=-i[n],a[t-1]=-r[n],(a=u[--n])[t]=-i[n],a[t-1]=-r[n];0===n&&((a=u[0])[t]=-i[0],a[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)u[n][0]=-r[n],u[--n][0]=-r[n];0===n&&(u[0][0]=-r[0])}return u},numeric._random=function e(t,n){var r,i,a=t[n],o=Array(a);if(n===t.length-1){for(i=Math.random,r=a-1;r>=1;r-=2)o[r]=i(),o[r-1]=i();return 0===r&&(o[0]=i()),o}for(r=a-1;r>=0;r--)o[r]=e(t,n+1);return o},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if(void 0===n&&(n=Math.max(Math.round(t-e)+1,1)),n<2)return 1===n?[e]:[];var r,i=Array(n);for(r=--n;r>=0;r--)i[r]=(r*t+(n-r)*e)/n;return i},numeric.getBlock=function(e,t,n){var r=numeric.dim(e);return function e(i,a){var o,s=t[a],u=n[a]-s,l=Array(u);if(a===r.length-1){for(o=u;o>=0;o--)l[o]=i[o+s];return l}for(o=u;o>=0;o--)l[o]=e(i[o+s],a+1);return l}(e,0)},numeric.setBlock=function(e,t,n,r){var i=numeric.dim(e);return function e(r,a,o){var s,u=t[o],l=n[o]-u;if(o===i.length-1)for(s=l;s>=0;s--)r[s+u]=a[s];for(s=l;s>=0;s--)e(r[s+u],a[s],o+1)}(e,r,0),e},numeric.getRange=function(e,t,n){var r,i,a,o,s=t.length,u=n.length,l=Array(s);for(r=s-1;-1!==r;--r)for(l[r]=Array(u),a=l[r],o=e[t[r]],i=u-1;-1!==i;--i)a[i]=o[n[i]];return l},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,i,a,o,s=t[0],u=t[1];for(n=0,r=0,i=0;i<s;++i)n+=e[i][0].length;for(a=0;a<u;++a)r+=e[0][a][0].length;var l=Array(n);for(i=0;i<n;++i)l[i]=Array(r);var c,d,h,f,p,g=0;for(i=0;i<s;++i){for(c=r,a=u-1;-1!==a;--a)for(c-=(o=e[i][a])[0].length,h=o.length-1;-1!==h;--h)for(p=o[h],d=l[g+h],f=p.length-1;-1!==f;--f)d[c+f]=p[f];g+=e[i][0].length}return l},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var i,a,o,s,u=n[0],l=r[0],c=Array(u);for(a=u-1;a>=0;a--){for(i=Array(l),s=e[a],o=l-1;o>=3;--o)i[o]=s*t[o],i[--o]=s*t[o],i[--o]=s*t[o],i[--o]=s*t[o];for(;o>=0;)i[o]=s*t[o],--o;c[a]=i}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,i){var a;numeric.indexOf;if("string"!=typeof i)for(a in i="",numeric)numeric.hasOwnProperty(a)&&(e.indexOf(a)>=0||t.indexOf(a)>=0||n.indexOf(a)>=0||r.indexOf(a)>=0)&&a.length>1&&(i+="var "+a+" = numeric."+a+";\n");return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+i+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var t=numeric.div;return this.y?new numeric.T(t(this.x,e.x),t(this.y,e.x)):new numeric.T(t(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if(void 0===e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,_=e.x.length,T=numeric.identity(_),E=numeric.rep([_,_],0),M=numeric.clone(e.x),b=numeric.clone(e.y);for(l=0;l<_;l++){for(h=(p=M[l][l])*p+(g=b[l][l])*g,d=l,c=l+1;c<_;c++)(f=(p=M[c][l])*p+(g=b[c][l])*g)>h&&(d=c,h=f);for(d!==l&&(y=M[l],M[l]=M[d],M[d]=y,y=b[l],b[l]=b[d],b[d]=y,y=T[l],T[l]=T[d],T[d]=y,y=E[l],E[l]=E[d],E[d]=y),t=M[l],n=b[l],a=T[l],o=E[l],p=t[l],g=n[l],c=l+1;c<_;c++)m=t[c],v=n[c],t[c]=(m*p+v*g)/h,n[c]=(v*p-m*g)/h;for(c=0;c<_;c++)m=a[c],v=o[c],a[c]=(m*p+v*g)/h,o[c]=(v*p-m*g)/h;for(c=l+1;c<_;c++){for(r=M[c],i=b[c],s=T[c],u=E[c],p=r[l],g=i[l],d=l+1;d<_;d++)m=t[d],v=n[d],r[d]-=m*p-v*g,i[d]-=v*p+m*g;for(d=0;d<_;d++)m=a[d],v=o[d],s[d]-=m*p-v*g,u[d]-=v*p+m*g}}for(l=_-1;l>0;l--)for(a=T[l],o=E[l],c=l-1;c>=0;c--)for(s=T[c],u=E[c],p=M[c][l],g=b[c][l],d=_-1;d>=0;d--)m=a[d],v=o[d],s[d]-=p*m-g*v,u[d]-=p*v+g*m;return new numeric.T(T,E)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,i=0,a=e.length;if(r){for(;i<a;)n=n[t=e[i]],r=r[t],i++;return new numeric.T(n,r)}for(;i<a;)n=n[t=e[i]],i++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,i=this.y,a=0,o=e.length,s=t.x,u=t.y;if(0===o)return u?this.y=u:i&&(this.y=void 0),this.x=r,this;if(u){for(i||(i=numeric.rep(numeric.dim(r),0),this.y=i);a<o-1;)r=r[n=e[a]],i=i[n],a++;return r[n=e[a]]=s,i[n]=u,this}if(i){for(;a<o-1;)r=r[n=e[a]],i=i[n],a++;return r[n=e[a]]=s,i[n]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;a<o-1;)r=r[n=e[a]],a++;return r[n=e[a]]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,i=t-e+1,a=Array(i),o=this.x,s=this.y;for(n=e;n<=t;n++)a[n-e]=o[n];if(s){for(r=Array(i),n=e;n<=t;n++)r[n-e]=s[n];return new numeric.T(a,r)}return new numeric.T(a)},numeric.T.prototype.setRows=function(e,t,n){var r,i=this.x,a=this.y,o=n.x,s=n.y;for(r=e;r<=t;r++)i[r]=o[r-e];if(s)for(a||(a=numeric.rep(numeric.dim(i),0),this.y=a),r=e;r<=t;r++)a[r]=s[r-e];else if(a)for(r=e;r<=t;r++)a[r]=numeric.rep([o[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,i=t.x,a=t.y;return n[e]=i,a?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=a):r&&(r=numeric.rep([i.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,i=numeric.getBlock;return r?new numeric.T(i(n,e,t),i(r,e,t)):new numeric.T(i(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,i=this.y,a=numeric.setBlock,o=n.x,s=n.y;if(s)return i||(this.y=numeric.rep(numeric.dim(this),0),i=this.y),a(r,e,t,o),a(i,e,t,s),this;a(r,e,t,o),i&&a(i,e,t,numeric.rep(numeric.dim(o),0))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,i=t.y,a=numeric.rep;return i?new n(a(e,r),a(e,i)):new n(a(e,r))},numeric.T.diag=function(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,r=numeric.diag;return n?new numeric.T(r(t),r(n)):new numeric.T(r(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=(e[0]>=0?1:-1)*numeric.norm2(e);t[0]+=n;var r=numeric.norm2(t);if(0===r)throw new Error("eig: internal error");return numeric.div(t,r)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,i,a,o,s,u,l,c,d,h=t[0],f=numeric.clone(e),p=numeric.identity(h);for(r=0;r<h-2;r++){for(a=Array(h-r-1),n=r+1;n<h;n++)a[n-r-1]=f[n][r];if(numeric.norm2(a)>0){for(o=numeric.house(a),s=numeric.getBlock(f,[r+1,r],[h-1,h-1]),u=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<h;n++)for(l=f[n],c=u[n-r-1],i=r;i<h;i++)l[i]-=2*c[i-r];for(s=numeric.getBlock(f,[0,r+1],[h-1,h-1]),u=numeric.tensor(numeric.dot(s,o),o),n=0;n<h;n++)for(l=f[n],c=u[n],i=r+1;i<h;i++)l[i]-=2*c[i-r-1];for(s=Array(h-r-1),n=r+1;n<h;n++)s[n-r-1]=p[n];for(u=numeric.tensor(o,numeric.dot(o,s)),n=r+1;n<h;n++)for(d=p[n],c=u[n-r-1],i=0;i<h;i++)d[i]-=2*c[i]}}return{H:f,Q:p}},numeric.epsilon=2220446049250313e-31,numeric.QRFrancis=function(e,t){void 0===t&&(t=1e4),e=numeric.clone(e);numeric.clone(e);var n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,_,T=numeric.dim(e)[0],E=numeric.identity(T);if(T<3)return{Q:E,B:[[0,T-1]]};var M=numeric.epsilon;for(_=0;_<t;_++){for(v=0;v<T-1;v++)if(Math.abs(e[v+1][v])<M*(Math.abs(e[v][v])+Math.abs(e[v+1][v+1]))){var b=numeric.QRFrancis(numeric.getBlock(e,[0,0],[v,v]),t),A=numeric.QRFrancis(numeric.getBlock(e,[v+1,v+1],[T-1,T-1]),t);for(f=Array(v+1),m=0;m<=v;m++)f[m]=E[m];for(p=numeric.dot(b.Q,f),m=0;m<=v;m++)E[m]=p[m];for(f=Array(T-v-1),m=v+1;m<T;m++)f[m-v-1]=E[m];for(p=numeric.dot(A.Q,f),m=v+1;m<T;m++)E[m]=p[m-v-1];return{Q:E,B:b.B.concat(numeric.add(A.B,v+1))}}var w,S,x;if(i=e[T-2][T-2],a=e[T-2][T-1],o=e[T-1][T-2],l=i+(s=e[T-1][T-1]),u=i*s-a*o,c=numeric.getBlock(e,[0,0],[2,2]),l*l>=4*u)w=.5*(l+Math.sqrt(l*l-4*u)),S=.5*(l-Math.sqrt(l*l-4*u)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,w+S)),numeric.diag(numeric.rep([3],w*S)));else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,l)),numeric.diag(numeric.rep([3],u)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),f=[e[0],e[1],e[2]],p=numeric.tensor(r,numeric.dot(r,f)),m=0;m<3;m++)for(h=e[m],g=p[m],y=0;y<T;y++)h[y]-=2*g[y];for(f=numeric.getBlock(e,[0,0],[T-1,2]),p=numeric.tensor(numeric.dot(f,r),r),m=0;m<T;m++)for(h=e[m],g=p[m],y=0;y<3;y++)h[y]-=2*g[y];for(f=[E[0],E[1],E[2]],p=numeric.tensor(r,numeric.dot(r,f)),m=0;m<3;m++)for(d=E[m],g=p[m],y=0;y<T;y++)d[y]-=2*g[y];for(v=0;v<T-2;v++){for(y=v;y<=v+1;y++)if(Math.abs(e[y+1][y])<M*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){b=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),A=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[T-1,T-1]),t);for(f=Array(y+1),m=0;m<=y;m++)f[m]=E[m];for(p=numeric.dot(b.Q,f),m=0;m<=y;m++)E[m]=p[m];for(f=Array(T-y-1),m=y+1;m<T;m++)f[m-y-1]=E[m];for(p=numeric.dot(A.Q,f),m=y+1;m<T;m++)E[m]=p[m-y-1];return{Q:E,B:b.B.concat(numeric.add(A.B,y+1))}}for(x=Math.min(T-1,v+3),n=Array(x-v),m=v+1;m<=x;m++)n[m-v-1]=e[m][v];for(r=numeric.house(n),f=numeric.getBlock(e,[v+1,v],[x,T-1]),p=numeric.tensor(r,numeric.dot(r,f)),m=v+1;m<=x;m++)for(h=e[m],g=p[m-v-1],y=v;y<T;y++)h[y]-=2*g[y-v];for(f=numeric.getBlock(e,[0,v+1],[T-1,x]),p=numeric.tensor(numeric.dot(f,r),r),m=0;m<T;m++)for(h=e[m],g=p[m],y=v+1;y<=x;y++)h[y]-=2*g[y-v-1];for(f=Array(x-v),m=v+1;m<=x;m++)f[m-v-1]=E[m];for(p=numeric.tensor(r,numeric.dot(r,f)),m=v+1;m<=x;m++)for(d=E[m],g=p[m-v-1],y=0;y<T;y++)d[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y=numeric.toUpperHessenberg(e),_=numeric.QRFrancis(y.H,t),T=numeric.T,E=e.length,M=_.B,b=numeric.dot(_.Q,numeric.dot(y.H,numeric.transpose(_.Q))),A=new T(numeric.dot(_.Q,y.Q)),w=M.length,S=Math.sqrt;for(r=0;r<w;r++)if((n=M[r][0])===M[r][1]);else{if(a=n+1,o=b[n][n],s=b[n][a],u=b[a][n],l=b[a][a],0===s&&0===u)continue;(d=(c=-o-l)*c-4*(o*l-s*u))>=0?((m=(o-(h=c<0?-.5*(c-S(d)):-.5*(c+S(d))))*(o-h)+s*s)>(v=u*u+(l-h)*(l-h))?(p=(o-h)/(m=S(m)),g=s/m):(p=u/(v=S(v)),g=(l-h)/v),i=new T([[g,-p],[p,g]]),A.setRows(n,a,i.dot(A.getRows(n,a)))):(h=-.5*c,f=.5*S(-d),(m=(o-h)*(o-h)+s*s)>(v=u*u+(l-h)*(l-h))?(p=(o-h)/(m=S(m+f*f)),g=s/m,h=0,f/=m):(p=u/(v=S(v+f*f)),g=(l-h)/v,h=f/v,f=0),i=new T([[g,-p],[p,g]],[[h,f],[f,-h]]),A.setRows(n,a,i.dot(A.getRows(n,a))))}var x=A.dot(e).dot(A.transjugate()),D=(E=e.length,numeric.T.identity(E));for(a=0;a<E;a++)if(a>0)for(r=a-1;r>=0;r--){var I=x.get([r,r]),C=x.get([a,a]);numeric.neq(I.x,C.x)||numeric.neq(I.y,C.y)?(h=x.getRow(r).getBlock([r],[a-1]),f=D.getRow(a).getBlock([r],[a-1]),D.set([a,r],x.get([r,a]).neg().sub(h.dot(f)).div(I.sub(C)))):D.setRow(a,D.getRow(r))}for(a=0;a<E;a++)h=D.getRow(a),D.setRow(a,h.div(h.norm2()));return D=D.transpose(),D=A.transjugate().dot(D),{lambda:x.getDiag(),E:D}},numeric.ccsSparse=function(e){var t,n,r,i=e.length,a=[];for(n=i-1;-1!==n;--n)for(r in t=e[n]){for(r=parseInt(r);r>=a.length;)a[a.length]=0;0!==t[r]&&a[r]++}var o=a.length,s=Array(o+1);for(s[0]=0,n=0;n<o;++n)s[n+1]=s[n]+a[n];var u=Array(s[o]),l=Array(s[o]);for(n=i-1;-1!==n;--n)for(r in t=e[n])0!==t[r]&&(a[r]--,u[s[r]+a[r]]=n,l[s[r]+a[r]]=t[r]);return[s,u,l]},numeric.ccsFull=function(e){var t,n,r,i,a=e[0],o=e[1],s=e[2],u=numeric.ccsDim(e),l=u[0],c=u[1],d=numeric.rep([l,c],0);for(t=0;t<c;t++)for(r=a[t],i=a[t+1],n=r;n<i;++n)d[o[n]][t]=s[n];return d},numeric.ccsTSolve=function(e,t,n,r,i){var a,o,s,u,l,c,d,h=e[0],f=e[1],p=e[2],g=h.length-1,m=Math.max,v=0;function y(e){var t;if(0===n[e]){for(n[e]=1,t=h[e];t<h[e+1];++t)y(f[t]);i[v]=e,++v}}for(void 0===r&&(n=numeric.rep([g],0)),void 0===r&&(r=numeric.linspace(0,n.length-1)),void 0===i&&(i=[]),a=r.length-1;-1!==a;--a)y(r[a]);for(i.length=v,a=i.length-1;-1!==a;--a)n[i[a]]=0;for(a=r.length-1;-1!==a;--a)o=r[a],n[o]=t[o];for(a=i.length-1;-1!==a;--a){for(o=i[a],s=h[o],u=m(h[o+1],s),l=s;l!==u;++l)if(f[l]===o){n[o]/=p[l];break}for(d=n[o],l=s;l!==u;++l)(c=f[l])!==o&&(n[c]-=d*p[l])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,i,a){var o,s,u,l=0,c=i.length,d=this.k,h=this.k1,f=this.j;if(0===r[e])for(r[e]=1,f[0]=e,d[0]=s=t[e],h[0]=u=t[e+1];;)if(s>=u){if(i[c]=f[l],0===l)return;++c,s=d[--l],u=h[l]}else 0===r[o=a[n[s]]]?(r[o]=1,d[l]=s,f[++l]=o,s=t[o],h[l]=u=t[o+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,i,a,o){var s,u,l,c,d,h,f,p,g,m=e[0],v=e[1],y=e[2],_=(m.length,t[0]),T=t[1],E=t[2];for(u=_[i],l=_[i+1],r.length=0,s=u;s<l;++s)o.dfs(a[T[s]],m,v,n,r,a);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=u;s!==l;++s)n[c=a[T[s]]]=E[s];for(s=r.length-1;-1!==s;--s){for(d=m[c=r[s]],h=m[c+1],f=d;f<h;++f)if(a[v[f]]===c){n[c]/=y[f];break}for(g=n[c],f=d;f<h;++f)(p=a[v[f]])!==c&&(n[p]-=g*y[f])}return n},numeric.ccsLUP1=function(e,t){var n,r,i,a,o,s,u,l=e[0].length-1,c=[numeric.rep([l+1],0),[],[]],d=[numeric.rep([l+1],0),[],[]],h=c[0],f=c[1],p=c[2],g=d[0],m=d[1],v=d[2],y=numeric.rep([l],0),_=numeric.rep([l],0),T=numeric.ccsLPSolve,E=(Math.max,Math.abs),M=numeric.linspace(0,l-1),b=numeric.linspace(0,l-1),A=new numeric.ccsDFS(l);for(void 0===t&&(t=1),n=0;n<l;++n){for(T(c,e,y,_,n,b,A),a=-1,o=-1,r=_.length-1;-1!==r;--r)(i=_[r])<=n||(s=E(y[i]))>a&&(o=i,a=s);for(E(y[n])<t*a&&(r=M[n],a=M[o],M[n]=a,b[a]=n,M[o]=r,b[r]=o,a=y[n],y[n]=y[o],y[o]=a),a=h[n],o=g[n],u=y[n],f[a]=M[n],p[a]=1,++a,r=_.length-1;-1!==r;--r)s=y[i=_[r]],_[r]=0,y[i]=0,i<=n?(m[o]=i,v[o]=s,++o):(f[a]=M[i],p[a]=s/u,++a);h[n+1]=a,g[n+1]=o}for(r=f.length-1;-1!==r;--r)f[r]=b[f[r]];return{L:c,U:d,P:M,Pinv:b}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,i,a,o){var s,u,l,c=0,d=i.length,h=this.k,f=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,h[0]=u=t[a[e]],f[0]=l=t[a[e]+1];;){if(isNaN(u))throw new Error("Ow!");if(u>=l){if(i[d]=a[p[c]],0===c)return;++d,u=h[--c],l=f[c]}else 0===r[s=n[u]]?(r[s]=1,h[c]=u,p[++c]=s,u=t[s=a[s]],f[c]=l=t[s+1]):++u}},numeric.ccsLPSolve0=function(e,t,n,r,i,a,o,s){var u,l,c,d,h,f,p,g,m,v=e[0],y=e[1],_=e[2],T=(v.length,t[0]),E=t[1],M=t[2];for(l=T[i],c=T[i+1],r.length=0,u=l;u<c;++u)s.dfs(E[u],v,y,n,r,a,o);for(u=r.length-1;-1!==u;--u)n[o[d=r[u]]]=0;for(u=l;u!==c;++u)n[d=E[u]]=M[u];for(u=r.length-1;-1!==u;--u){for(g=o[d=r[u]],h=v[d],f=v[d+1],p=h;p<f;++p)if(y[p]===g){n[g]/=_[p];break}for(m=n[g],p=h;p<f;++p)n[y[p]]-=m*_[p];n[g]=m}},numeric.ccsLUP0=function(e,t){var n,r,i,a,o,s,u,l=e[0].length-1,c=[numeric.rep([l+1],0),[],[]],d=[numeric.rep([l+1],0),[],[]],h=c[0],f=c[1],p=c[2],g=d[0],m=d[1],v=d[2],y=numeric.rep([l],0),_=numeric.rep([l],0),T=numeric.ccsLPSolve0,E=(Math.max,Math.abs),M=numeric.linspace(0,l-1),b=numeric.linspace(0,l-1),A=new numeric.ccsDFS0(l);for(void 0===t&&(t=1),n=0;n<l;++n){for(T(c,e,y,_,n,b,M,A),a=-1,o=-1,r=_.length-1;-1!==r;--r)(i=_[r])<=n||(s=E(y[M[i]]))>a&&(o=i,a=s);for(E(y[M[n]])<t*a&&(r=M[n],a=M[o],M[n]=a,b[a]=n,M[o]=r,b[r]=o),a=h[n],o=g[n],u=y[M[n]],f[a]=M[n],p[a]=1,++a,r=_.length-1;-1!==r;--r)s=y[M[i=_[r]]],_[r]=0,y[M[i]]=0,i<=n?(m[o]=i,v[o]=s,++o):(f[a]=M[i],p[a]=s/u,++a);h[n+1]=a,g[n+1]=o}for(r=f.length-1;-1!==r;--r)f[r]=b[f[r]];return{L:c,U:d,P:M,Pinv:b}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),i=r[0],a=r[1];void 0===t?t=numeric.linspace(0,i-1):"number"==typeof t&&(t=[t]),void 0===n?n=numeric.linspace(0,a-1):"number"==typeof n&&(n=[n]);var o,s,u,l,c=t.length,d=n.length,h=numeric.rep([a],0),f=[],p=[],g=[h,f,p],m=e[0],v=e[1],y=e[2],_=numeric.rep([i],0),T=0,E=numeric.rep([i],0);for(s=0;s<d;++s){var M=m[l=n[s]],b=m[l+1];for(o=M;o<b;++o)E[u=v[o]]=1,_[u]=y[o];for(o=0;o<c;++o)E[t[o]]&&(f[T]=o,p[T]=_[t[o]],++T);for(o=M;o<b;++o)E[u=v[o]]=0;h[s+1]=T}return g},numeric.ccsDot=function(e,t){var n,r,i,a,o,s,u,l,c,d,h,f=e[0],p=e[1],g=e[2],m=t[0],v=t[1],y=t[2],_=numeric.ccsDim(e),T=numeric.ccsDim(t),E=_[0],M=(_[1],T[1]),b=numeric.rep([E],0),A=numeric.rep([E],0),w=Array(E),S=numeric.rep([M],0),x=[],D=[],I=[S,x,D];for(i=0;i!==M;++i){for(a=m[i],o=m[i+1],c=0,r=a;r<o;++r)for(d=v[r],h=y[r],s=f[d],u=f[d+1],n=s;n<u;++n)0===A[l=p[n]]&&(w[c]=l,A[l]=1,c+=1),b[l]=b[l]+g[n]*h;for(o=(a=S[i])+c,S[i+1]=o,r=c-1;-1!==r;--r)h=a+r,n=w[r],x[h]=n,D[h]=b[n],A[n]=0,b[n]=0;S[i+1]=S[i]+c}return I},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,i=(e.P,t[0]),a=!1;"object"!=typeof i&&(i=(t=[[0,t.length],numeric.linspace(0,t.length-1),t])[0],a=!0);var o,s,u,l,c,d,h=t[1],f=t[2],p=n[0].length-1,g=i.length-1,m=numeric.rep([p],0),v=Array(p),y=numeric.rep([p],0),_=Array(p),T=numeric.rep([g+1],0),E=[],M=[],b=numeric.ccsTSolve,A=0;for(o=0;o<g;++o){for(c=0,u=i[o],l=i[o+1],s=u;s<l;++s)d=e.Pinv[h[s]],_[c]=d,y[d]=f[s],++c;for(_.length=c,b(n,y,m,_,v),s=_.length-1;-1!==s;--s)y[_[s]]=0;if(b(r,m,y,v,_),a)return y;for(s=v.length-1;-1!==s;--s)m[v[s]]=0;for(s=_.length-1;-1!==s;--s)d=_[s],E[A]=d,M[A]=y[d],y[d]=0,++A;T[o+1]=A}return[T,E,M]},numeric.ccsbinop=function(e,t){return void 0===t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],i=e[2],a=numeric.sup(r)+1,o=n.length,s=numeric.rep([a],0),u=Array(o),l=Array(o),c=numeric.rep([a],0);for(t=0;t<o;++t)c[r[t]]++;for(t=0;t<a;++t)s[t+1]=s[t]+c[t];var d,h,f=s.slice(0);for(t=0;t<o;++t)u[d=f[h=r[t]]]=n[t],l[d]=i[t],f[h]=f[h]+1;return[s,u,l]},numeric.ccsGather=function(e){var t,n,r,i,a,o=e[0],s=e[1],u=e[2],l=o.length-1,c=s.length,d=Array(c),h=Array(c),f=Array(c);for(a=0,t=0;t<l;++t)for(r=o[t],i=o[t+1],n=r;n!==i;++n)h[a]=t,d[a]=s[n],f[a]=u[n],++a;return[d,h,f]},numeric.sdim=function e(t,n,r){if(void 0===n&&(n=[]),"object"!=typeof t)return n;var i;for(i in void 0===r&&(r=0),r in n||(n[r]=0),t.length>n[r]&&(n[r]=t.length),t)t.hasOwnProperty(i)&&e(t[i],n,r+1);return n},numeric.sclone=function e(t,n,r){void 0===n&&(n=0),void 0===r&&(r=numeric.sdim(t).length);var i,a=Array(t.length);if(n===r-1){for(i in t)t.hasOwnProperty(i)&&(a[i]=t[i]);return a}for(i in t)t.hasOwnProperty(i)&&(a[i]=e(t[i],n+1,r));return a},numeric.sdiag=function(e){var t,n,r=e.length,i=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,i[t]=[],i[t][t]=e[t],i[n]=[],i[n][n]=e[n];return 0===t&&(i[0]=[],i[0][0]=e[t]),i},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){var t,n,r,i=[];e.length;for(t in e)if(e.hasOwnProperty(t))for(n in r=e[t])r.hasOwnProperty(n)&&("object"!=typeof i[n]&&(i[n]=[]),i[n][t]=r[n]);return i},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,i,a,o,s,u,l=e.length,c=(t.length,numeric.stranspose(t)),d=c.length,h=Array(l);for(i=l-1;i>=0;i--){for(u=[],n=e[i],o=d-1;o>=0;o--){for(a in s=0,r=c[o],n)n.hasOwnProperty(a)&&a in r&&(s+=n[a]*r[a]);s&&(u[o]=s)}h[i]=u}return h},numeric.sdotMV=function(e,t){var n,r,i,a,o=e.length,s=Array(o);for(r=o-1;r>=0;r--){for(i in a=0,n=e[r])n.hasOwnProperty(i)&&t[i]&&(a+=n[i]*t[i]);a&&(s[r]=a)}return s},numeric.sdotVM=function(e,t){var n,r,i,a,o=[];for(n in e)if(e.hasOwnProperty(n))for(r in i=t[n],a=e[n],i)i.hasOwnProperty(r)&&(o[r]||(o[r]=0),o[r]+=a*i[r]);return o},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length;switch(1e3*n+r){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,i,a=e[0].length,o=e.length,s=[];for(n=a-1;n>=0;--n)if(e[o-1][n]){for(i=s,r=0;r<o-2;r++)i[t=e[r][n]]||(i[t]=[]),i=i[t];i[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function e(t,n,r){var i,a,o;for(a in void 0===n&&(n=[]),void 0===r&&(r=[]),i=r.length,t)if(t.hasOwnProperty(a))if(r[i]=parseInt(a),"number"==typeof(o=t[a])){if(o){if(0===n.length)for(a=i+1;a>=0;--a)n[a]=[];for(a=i;a>=0;--a)n[a].push(r[a]);n[i+1].push(o)}}else e(o,n,r);return r.length>i&&r.pop(),n},numeric.cLU=function(e){var t,n,r,i,a,o,s=e[0],u=e[1],l=e[2],c=s.length,d=0;for(t=0;t<c;t++)s[t]>d&&(d=s[t]);d++;var h,f=Array(d),p=Array(d),g=numeric.rep([d],1/0),m=numeric.rep([d],-1/0);for(r=0;r<c;r++)t=s[r],(n=u[r])<g[t]&&(g[t]=n),n>m[t]&&(m[t]=n);for(t=0;t<d-1;t++)m[t]>m[t+1]&&(m[t+1]=m[t]);for(t=d-1;t>=1;t--)g[t]<g[t-1]&&(g[t-1]=g[t]);for(t=0;t<d;t++)p[t]=numeric.rep([m[t]-g[t]+1],0),f[t]=numeric.rep([t-g[t]],0),t-g[t]+1,m[t]-t+1;for(r=0;r<c;r++)p[t=s[r]][u[r]-g[t]]=l[r];for(t=0;t<d-1;t++)for(i=t-g[t],_=p[t],n=t+1;g[n]<=t&&n<d;n++)if(a=t-g[n],o=m[t]-t,h=(T=p[n])[a]/_[i]){for(r=1;r<=o;r++)T[r+a]-=h*_[r+i];f[n][t-g[n]]=h}var v,y,_=[],T=[],E=[],M=[],b=[],A=[];for(c=0,v=0,t=0;t<d;t++){for(i=g[t],a=m[t],y=p[t],n=t;n<=a;n++)y[n-i]&&(_[c]=t,T[c]=n,E[c]=y[n-i],c++);for(y=f[t],n=i;n<t;n++)y[n-i]&&(M[v]=t,b[v]=n,A[v]=y[n-i],v++);M[v]=t,b[v]=t,A[v]=1,v++}return{U:[_,T,E],L:[M,b,A]}},numeric.cLUsolve=function(e,t){var n,r,i=e.L,a=e.U,o=numeric.clone(t),s=i[0],u=i[1],l=i[2],c=a[0],d=a[1],h=a[2],f=c.length,p=(s.length,o.length);for(r=0,n=0;n<p;n++){for(;u[r]<n;)o[n]-=l[r]*o[u[r]],r++;r++}for(r=f-1,n=p-1;n>=0;n--){for(;d[r]>n;)o[n]-=h[r]*o[d[r]],r--;o[n]/=h[r],r--}return o},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,i,a=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(i=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(a[n][r]=i,i++);return a},numeric.cdelsq=function(e){var t,n,r,i,a,o=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),u=s[0],l=s[1],c=[],d=[],h=[];for(t=1;t<u-1;t++)for(n=1;n<l-1;n++)if(!(e[t][n]<0)){for(r=0;r<4;r++)i=t+o[r][0],a=n+o[r][1],e[i][a]<0||(c.push(e[t][n]),d.push(e[i][a]),h.push(-1));c.push(e[t][n]),d.push(e[t][n]),h.push(4)}return[c,d,h]},numeric.cdotMV=function(e,t){var n,r,i,a=e[0],o=e[1],s=e[2],u=a.length;for(i=0,r=0;r<u;r++)a[r]>i&&(i=a[r]);for(i++,n=numeric.rep([i],0),r=0;r<u;r++)n[a[r]]+=s[r]*t[o[r]];return n},numeric.Spline=function(e,t,n,r,i){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=i},numeric.Spline.prototype._at=function(e,t){var n,r,i,a=this.x,o=this.yl,s=this.yr,u=this.kl,l=this.kr,c=numeric.add,d=numeric.sub,h=numeric.mul;n=d(h(u[t],a[t+1]-a[t]),d(s[t+1],o[t])),r=c(h(l[t+1],a[t]-a[t+1]),d(s[t+1],o[t]));var f=(i=(e-a[t])/(a[t+1]-a[t]))*(1-i);return c(c(c(h(1-i,o[t]),h(i,s[t+1])),h(n,f*(1-i))),h(r,f*i))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,i=this.x,a=i.length,o=Math.floor;for(t=0,n=a-1;n-t>1;)i[r=o((t+n)/2)]<=e?t=r:n=r;return this._at(e,t)}a=e.length;var s,u=Array(a);for(s=a-1;-1!==s;--s)u[s]=this.at(e[s]);return u},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,i=this.yl,a=this.yr,o=this.kl,s=this.kr,u=i.length,l=o,c=s,d=Array(u),h=Array(u),f=numeric.add,p=numeric.mul,g=numeric.div,m=numeric.sub;for(e=u-1;-1!==e;--e)t=r[e+1]-r[e],n=m(a[e+1],i[e]),d[e]=g(f(p(n,6),p(o[e],-4*t),p(s[e+1],-2*t)),t*t),h[e+1]=g(f(p(n,-6),p(o[e],2*t),p(s[e+1],4*t)),t*t);return new numeric.Spline(r,l,c,d,h)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,i=this.yr,a=this.kl,o=this.kr;"number"==typeof r[0]&&(r=[r],i=[i],a=[a],o=[o]);var s,u,l,c,d,h,f,p,g,m,v,y,_,T,E,M,b,A,w,S,x,D,I,C=r.length,N=n.length-1,L=(t=Array(C),Math.sqrt);for(s=0;s!==C;++s){for(c=r[s],d=i[s],h=a[s],f=o[s],p=[],u=0;u!==N;u++){for(u>0&&d[u]*c[u]<0&&p.push(n[u]),M=n[u+1]-n[u],n[u],v=c[u],y=d[u+1],g=h[u]/M,_=(m=f[u+1]/M)+3*v+2*g-3*y,T=3*(m+g+2*(v-y)),(E=e(g-m+3*(v-y))+12*m*v)<=0?b=(A=_/T)>n[u]&&A<n[u+1]?[n[u],A,n[u+1]]:[n[u],n[u+1]]:(A=(_-L(E))/T,w=(_+L(E))/T,b=[n[u]],A>n[u]&&A<n[u+1]&&b.push(A),w>n[u]&&w<n[u+1]&&b.push(w),b.push(n[u+1])),x=b[0],A=this._at(x,u),l=0;l<b.length-1;l++)if(D=b[l+1],w=this._at(D,u),0!==A)if(0===w||A*w>0)x=D,A=w;else{for(var O=0;!((I=(A*D-w*x)/(A-w))<=x||I>=D);)if((S=this._at(I,u))*w>0)D=I,w=S,-1===O&&(A*=.5),O=-1;else{if(!(S*A>0))break;x=I,A=S,1===O&&(w*=.5),O=1}p.push(I),x=b[l+1],A=this._at(x,u)}else p.push(x),x=D,A=w;0===w&&p.push(D)}t[s]=p}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var i,a=e.length,o=[],s=[],u=[],l=numeric.sub,c=numeric.mul,d=numeric.add;for(i=a-2;i>=0;i--)s[i]=e[i+1]-e[i],u[i]=l(t[i+1],t[i]);"string"!=typeof n&&"string"!=typeof r||(n=r="periodic");var h=[[],[],[]];switch(typeof n){case"undefined":o[0]=c(3/(s[0]*s[0]),u[0]),h[0].push(0,0),h[1].push(0,1),h[2].push(2/s[0],1/s[0]);break;case"string":o[0]=d(c(3/(s[a-2]*s[a-2]),u[a-2]),c(3/(s[0]*s[0]),u[0])),h[0].push(0,0,0),h[1].push(a-2,0,1),h[2].push(1/s[a-2],2/s[a-2]+2/s[0],1/s[0]);break;default:o[0]=n,h[0].push(0),h[1].push(0),h[2].push(1)}for(i=1;i<a-1;i++)o[i]=d(c(3/(s[i-1]*s[i-1]),u[i-1]),c(3/(s[i]*s[i]),u[i])),h[0].push(i,i,i),h[1].push(i-1,i,i+1),h[2].push(1/s[i-1],2/s[i-1]+2/s[i],1/s[i]);switch(typeof r){case"undefined":o[a-1]=c(3/(s[a-2]*s[a-2]),u[a-2]),h[0].push(a-1,a-1),h[1].push(a-2,a-1),h[2].push(1/s[a-2],2/s[a-2]);break;case"string":h[1][h[1].length-1]=0;break;default:o[a-1]=r,h[0].push(a-1),h[1].push(a-1),h[2].push(1)}o="number"!=typeof o[0]?numeric.transpose(o):[o];var f=Array(o.length);if("string"==typeof n)for(i=f.length-1;-1!==i;--i)f[i]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(h)),o[i]),f[i][a-1]=f[i][0];else for(i=f.length-1;-1!==i;--i)f[i]=numeric.cLUsolve(numeric.cLU(h),o[i]);return f="number"==typeof t[0]?f[0]:numeric.transpose(f),new numeric.Spline(e,t,t,f,f)},numeric.fftpow2=function e(t,n){var r=t.length;if(1!==r){var i,a,o=Math.cos,s=Math.sin,u=Array(r/2),l=Array(r/2),c=Array(r/2),d=Array(r/2);for(a=r/2,i=r-1;-1!==i;--i)c[--a]=t[i],d[a]=n[i],--i,u[a]=t[i],l[a]=n[i];e(u,l),e(c,d),a=r/2;var h,f,p,g=-6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--a&&(a=r/2-1),f=o(h=g*i),p=s(h),t[i]=u[a]+f*c[a]-p*d[a],n[i]=l[a]+f*d[a]+p*c[a]}},numeric._ifftpow2=function e(t,n){var r=t.length;if(1!==r){var i,a,o=Math.cos,s=Math.sin,u=Array(r/2),l=Array(r/2),c=Array(r/2),d=Array(r/2);for(a=r/2,i=r-1;-1!==i;--i)c[--a]=t[i],d[a]=n[i],--i,u[a]=t[i],l[a]=n[i];e(u,l),e(c,d),a=r/2;var h,f,p,g=6.283185307179586/r;for(i=r-1;-1!==i;--i)-1===--a&&(a=r/2-1),f=o(h=g*i),p=s(h),t[i]=u[a]+f*c[a]-p*d[a],n[i]=l[a]+f*d[a]+p*c[a]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){var i,a,o,s,u;for(numeric.fftpow2(e,t),numeric.fftpow2(n,r),i=e.length-1;-1!==i;--i)a=e[i],s=t[i],o=n[i],u=r[i],e[i]=a*o-s*u,t[i]=a*u+s*o;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),l=numeric.rep([u],0),c=numeric.rep([u],0),d=Math.cos,h=Math.sin,f=-3.141592653589793/i,p=numeric.rep([u],0),g=numeric.rep([u],0);Math.floor(i/2);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)g[e]=r[e];for(l[0]=1,e=1;e<=u/2;e++)t=f*e*e,l[e]=d(t),c[e]=h(t),l[u-e]=d(t),c[u-e]=h(t);var m=new numeric.T(p,g),v=new numeric.T(l,c);return m=m.mul(v),numeric.convpow2(m.x,m.y,numeric.clone(v.x),numeric.neg(v.y)),(m=m.mul(v)).x.length=i,m.y.length=i,m},numeric.T.prototype.ifft=function(){var e,t,n=this.x,r=this.y,i=n.length,a=Math.log,o=a(2),s=Math.ceil(a(2*i-1)/o),u=Math.pow(2,s),l=numeric.rep([u],0),c=numeric.rep([u],0),d=Math.cos,h=Math.sin,f=3.141592653589793/i,p=numeric.rep([u],0),g=numeric.rep([u],0);Math.floor(i/2);for(e=0;e<i;e++)p[e]=n[e];if(void 0!==r)for(e=0;e<i;e++)g[e]=r[e];for(l[0]=1,e=1;e<=u/2;e++)t=f*e*e,l[e]=d(t),c[e]=h(t),l[u-e]=d(t),c[u-e]=h(t);var m=new numeric.T(p,g),v=new numeric.T(l,c);return m=m.mul(v),numeric.convpow2(m.x,m.y,numeric.clone(v.x),numeric.neg(v.y)),(m=m.mul(v)).x.length=i,m.y.length=i,m.div(i)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var i,a,o,s,u,l,c,d,h,f=Math.max,p=numeric.clone(t),g=Array(n),m=(numeric.div,numeric.sub,f=Math.max,Math.abs),v=Math.min,y=0;for(i=0;i<n;i++)for(var _=f(1e-6*r,1e-8);;){if(++y>20)throw new Error("Numerical gradient fails");if(p[i]=t[i]+_,a=e(p),p[i]=t[i]-_,o=e(p),p[i]=t[i],isNaN(a)||isNaN(o))_/=16;else{if(g[i]=(a-o)/(2*_),s=t[i]-_,u=t[i],l=t[i]+_,c=(a-r)/_,d=(r-o)/_,h=f(m(g[i]),m(r),m(a),m(o),m(s),m(u),m(l),1e-8),!(v(f(m(c-g[i]),m(d-g[i]),m(c-d))/h,_/h)>.001))break;_/=16}}return g},numeric.uncmin=function(e,t,n,r,i,a,o){var s=numeric.gradient;void 0===o&&(o={}),void 0===n&&(n=1e-8),void 0===r&&(r=function(t){return s(e,t)}),void 0===i&&(i=1e3);var u,l,c=(t=numeric.clone(t)).length,d=e(t);if(isNaN(d))throw new Error("uncmin: f(x0) is a NaN!");var h=Math.max,f=numeric.norm2;n=h(n,numeric.epsilon);var p,g,m,v,y,_,T,E,M,b,A=o.Hinv||numeric.identity(c),w=numeric.dot,S=(numeric.inv,numeric.sub),x=numeric.add,D=numeric.tensor,I=numeric.div,C=numeric.mul,N=numeric.all,L=numeric.isFinite,O=numeric.neg,R=0,j="";for(g=r(t);R<i;){if("function"==typeof a&&a(R,t,d,g,A)){j="Callback returned true";break}if(!N(L(g))){j="Gradient has Infinity or NaN";break}if(!N(L(p=O(w(A,g))))){j="Search direction has Infinity or NaN";break}if((b=f(p))<n){j="Newton step smaller than tol";break}for(M=1,l=w(g,p),y=t;R<i&&!(M*b<n)&&(y=x(t,v=C(p,M)),(u=e(y))-d>=.1*M*l||isNaN(u));)M*=.5,++R;if(M*b<n){j="Line search step size smaller than tol";break}if(R===i){j="maxit reached during line search";break}E=w(_=S(m=r(y),g),v),T=w(A,_),A=S(x(A,C((E+w(_,T))/(E*E),D(v,v))),I(x(D(T,v),D(v,T)),E)),t=y,d=u,g=m,++R}return{solution:t,f:d,gradient:g,invHessian:A,iterations:R,message:j}},numeric.Dopri=function(e,t,n,r,i,a,o){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=i,this.events=o,this.message=a},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,i,a,o,s,u,l,c,d,h=this.x,f=this.y,p=this.f,g=this.ymid,m=(h.length,Math.floor,numeric.add),v=numeric.mul,y=numeric.sub;return r=h[t],i=h[t+1],o=f[t],s=f[t+1],a=r+.5*(i-r),u=g[t],l=y(p[t],v(o,1/(r-a)+2/(r-i))),c=y(p[t+1],v(s,1/(i-a)+2/(i-r))),m(m(m(m(v(o,(d=[n(e-i)*(e-a)/n(r-i)/(r-a),n(e-r)*n(e-i)/n(r-a)/n(i-a),n(e-r)*(e-a)/n(i-r)/(i-a),(e-r)*n(e-i)*(e-a)/n(r-i)/(r-a),(e-i)*n(e-r)*(e-a)/n(r-i)/(i-a)])[0]),v(u,d[1])),v(s,d[2])),v(l,d[3])),v(c,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,i=Math.floor;if("number"!=typeof e){var a=e.length,o=Array(a);for(t=a-1;-1!==t;--t)o[t]=this.at(e[t]);return o}var s=this.x;for(t=0,n=s.length-1;n-t>1;)s[r=i(.5*(t+n))]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,i,a,o){void 0===i&&(i=1e-6),void 0===a&&(a=1e3);var s,u,l,c,d,h,f,p,g,m,v,y,_,T=[e],E=[n],M=[r(e,n)],b=[],A=[.075,.225],w=[44/45,-56/15,32/9],S=[19372/6561,-25360/2187,64448/6561,-212/729],x=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],D=[35/384,0,500/1113,125/192,-2187/6784,11/84],I=[.10013431883002395,0,.3918321794184259,-.02982460176594817,.05893268337240795,-.04497888809104361,.023904308236133973],C=[.2,.3,.8,8/9,1,1],N=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],L=0,O=(t-e)/10,R=0,j=numeric.add,P=numeric.mul,k=(Math.max,Math.min),U=Math.abs,B=numeric.norminf,F=Math.pow,z=numeric.any,G=numeric.lt,H=numeric.and,Y=(numeric.sub,new numeric.Dopri(T,E,M,b,-1,""));for("function"==typeof o&&(v=o(e,n));e<t&&R<a;)if(++R,e+O>t&&(O=t-e),s=r(e+C[0]*O,j(n,P(.2*O,M[L]))),u=r(e+C[1]*O,j(j(n,P(A[0]*O,M[L])),P(A[1]*O,s))),l=r(e+C[2]*O,j(j(j(n,P(w[0]*O,M[L])),P(w[1]*O,s)),P(w[2]*O,u))),c=r(e+C[3]*O,j(j(j(j(n,P(S[0]*O,M[L])),P(S[1]*O,s)),P(S[2]*O,u)),P(S[3]*O,l))),d=r(e+C[4]*O,j(j(j(j(j(n,P(x[0]*O,M[L])),P(x[1]*O,s)),P(x[2]*O,u)),P(x[3]*O,l)),P(x[4]*O,c))),h=r(e+O,g=j(j(j(j(j(n,P(M[L],O*D[0])),P(u,O*D[2])),P(l,O*D[3])),P(c,O*D[4])),P(d,O*D[5]))),(m="number"==typeof(f=j(j(j(j(j(P(M[L],O*N[0]),P(u,O*N[2])),P(l,O*N[3])),P(c,O*N[4])),P(d,O*N[5])),P(h,O*N[6])))?U(f):B(f))>i){if(e+(O=.2*O*F(i/m,.25))===e){Y.msg="Step size became too small";break}}else{if(b[L]=j(j(j(j(j(j(n,P(M[L],O*I[0])),P(u,O*I[2])),P(l,O*I[3])),P(c,O*I[4])),P(d,O*I[5])),P(h,O*I[6])),T[++L]=e+O,E[L]=g,M[L]=h,"function"==typeof o){var V,Q,q=e,W=e+.5*O;if(y=o(W,b[L-1]),z(_=H(G(v,0),G(0,y)))||(q=W,v=y,y=o(W=e+O,g),_=H(G(v,0),G(0,y))),z(_)){for(var X,K,Z=0,J=1,$=1;;){if("number"==typeof v)Q=($*y*q-J*v*W)/($*y-J*v);else for(Q=W,p=v.length-1;-1!==p;--p)v[p]<0&&y[p]>0&&(Q=k(Q,($*y[p]*q-J*v[p]*W)/($*y[p]-J*v[p])));if(Q<=q||Q>=W)break;K=o(Q,V=Y._at(Q,L-1)),z(X=H(G(v,0),G(0,K)))?(W=Q,y=K,_=X,$=1,-1===Z?J*=.5:J=1,Z=-1):(q=Q,v=K,J=1,1===Z?$*=.5:$=1,Z=1)}return g=Y._at(.5*(e+Q),L-1),Y.f[L]=r(Q,V),Y.x[L]=Q,Y.y[L]=V,Y.ymid[L-1]=g,Y.events=_,Y.iterations=R,Y}}e+=O,n=g,v=y,O=k(.8*O*F(i/m,.25),4*O)}return Y.iterations=R,Y},numeric.LU=function(e,t){t=t||!1;var n,r,i,a,o,s,u,l,c,d=Math.abs,h=e.length,f=h-1,p=new Array(h);for(t||(e=numeric.clone(e)),i=0;i<h;++i){for(u=i,c=d((s=e[i])[i]),r=i+1;r<h;++r)c<(a=d(e[r][i]))&&(c=a,u=r);for(p[i]=u,u!=i&&(e[i]=e[u],e[u]=s,s=e[i]),o=s[i],n=i+1;n<h;++n)e[n][i]/=o;for(n=i+1;n<h;++n){for(l=e[n],r=i+1;r<f;++r)l[r]-=l[i]*s[r],l[++r]-=l[i]*s[r];r===f&&(l[r]-=l[i]*s[r])}}return{LU:e,P:p}},numeric.LUsolve=function(e,t){var n,r,i,a,o,s=e.LU,u=s.length,l=numeric.clone(t),c=e.P;for(n=u-1;-1!==n;--n)l[n]=t[n];for(n=0;n<u;++n)for(i=c[n],c[n]!==n&&(o=l[n],l[n]=l[i],l[i]=o),a=s[n],r=0;r<n;++r)l[n]-=l[r]*a[r];for(n=u-1;n>=0;--n){for(a=s[n],r=n+1;r<u;++r)l[n]-=l[r]*a[r];l[n]/=a[n]}return l},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,i,a,o,s,u,l=numeric.dim(e),c=l[0],d=l[1],h=numeric.identity(c),f=Array(c),p=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;t<c;++t){for(r=0,a=e[t],o=h[t],n=1;n<d;++n)p(a[r])<p(a[n])&&(r=n);for(f[t]=r,g(o,a[r]),g(a,a[r]),n=0;n<c;++n)if(n!==t){for(u=(s=e[n])[r],i=d-1;-1!==i;--i)s[i]-=a[i]*u;for(s=h[n],i=c-1;-1!==i;--i)s[i]-=o[i]*u}}return{I:h,A:e,P:f}},numeric.__solveLP=function(e,t,n,r,i,a,o){var s,u,l,c,d=numeric.sum,h=(numeric.log,numeric.mul),f=numeric.sub,p=numeric.dot,g=numeric.div,m=numeric.add,v=e.length,y=n.length,_=!1,T=1,E=(numeric.transpose(t),numeric.svd,numeric.transpose),M=(numeric.leq,Math.sqrt),b=Math.abs,A=(numeric.muleq,numeric.norminf,numeric.any,Math.min),w=numeric.all,S=numeric.gt,x=Array(v),D=Array(y),I=(numeric.rep([y],1),numeric.solve),C=f(n,p(t,a)),N=p(e,e);for(l=0;l<i;++l){var L,O;for(L=y-1;-1!==L;--L)D[L]=g(t[L],C[L]);var R=E(D);for(L=v-1;-1!==L;--L)x[L]=d(R[L]);T=.25*b(N/p(e,x));var j=100*M(N/p(x,x));for((!isFinite(T)||T>j)&&(T=j),c=m(e,h(T,x)),u=p(R,D),L=v-1;-1!==L;--L)u[L][L]+=1;O=I(u,g(c,T),!0);var P=g(C,p(t,O)),k=1;for(L=y-1;-1!==L;--L)P[L]<0&&(k=A(k,-.999*P[L]));if(s=f(a,h(O,k)),!w(S(C=f(n,p(t,s)),0)))return{solution:a,message:"",iterations:l};if(a=s,T<r)return{solution:s,message:"",iterations:l};if(o){var U=p(e,c),B=p(t,c);for(_=!0,L=y-1;-1!==L;--L)if(U*B[L]<0){_=!1;break}}else _=!(a[v-1]>=0);if(_)return{solution:s,message:"Unbounded",iterations:l}}return{solution:a,message:"maximum iteration count exceeded",iterations:l}},numeric._solveLP=function(e,t,n,r,i){var a=e.length,o=n.length,s=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,l=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),c=numeric.rep([o,1],-1),d=numeric.blockMatrix([[t,c]]),h=n,f=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),p=numeric.__solveLP(l,d,h,r,i,f,!1),g=numeric.clone(p.solution);if(g.length=a,numeric.inf(s(n,u(t,g)))<0)return{solution:NaN,message:"Infeasible",iterations:p.iterations};var m=numeric.__solveLP(e,t,n,r,i-p.iterations,g,!0);return m.iterations+=p.iterations,m},numeric.solveLP=function(e,t,n,r,i,a,o){if(void 0===o&&(o=1e3),void 0===a&&(a=numeric.epsilon),void 0===r)return numeric._solveLP(e,t,n,a,o);var s,u=r.length,l=r[0].length,c=t.length,d=numeric.echelonize(r),h=numeric.rep([l],0),f=d.P,p=[];for(s=f.length-1;-1!==s;--s)h[f[s]]=1;for(s=l-1;-1!==s;--s)0===h[s]&&p.push(s);var g=numeric.getRange,m=numeric.linspace(0,u-1),v=numeric.linspace(0,c-1),y=g(r,m,p),_=g(t,v,f),T=g(t,v,p),E=numeric.dot,M=numeric.sub,b=E(_,d.I),A=M(T,E(b,y)),w=M(n,E(b,i)),S=Array(f.length),x=Array(p.length);for(s=f.length-1;-1!==s;--s)S[s]=e[f[s]];for(s=p.length-1;-1!==s;--s)x[s]=e[p[s]];var D=M(x,E(S,E(d.I,y))),I=numeric._solveLP(D,A,w,a,o),C=I.solution;if(C!=C)return I;var N=E(d.I,M(i,E(y,C))),L=Array(e.length);for(s=f.length-1;-1!==s;--s)L[f[s]]=N[s];for(s=p.length-1;-1!==s;--s)L[p[s]]=C[s];return{solution:L,message:I.message,iterations:I.iterations}},numeric.MPStoLP=function(e){e instanceof String&&e.split("\n");var t,n,r,i,a=0,o=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],s=e.length,u=0,l={},c=[],d=0,h={},f=0,p=[],g=[],m=[];function v(n){throw new Error("MPStoLP: "+n+"\nLine "+t+": "+e[t]+"\nCurrent state: "+o[a]+"\n")}for(t=0;t<s;++t){var y=(r=e[t]).match(/\S*/g),_=[];for(n=0;n<y.length;++n)""!==y[n]&&_.push(y[n]);if(0!==_.length){for(n=0;n<o.length&&r.substr(0,o[n].length)!==o[n];++n);if(n<o.length){if(a=n,1===n&&(i=_[1]),6===n)return{name:i,c:p,A:numeric.transpose(g),b:m,rows:l,vars:h}}else switch(a){case 0:case 1:v("Unexpected line");case 2:switch(_[0]){case"N":0===u?u=_[1]:v("Two or more N rows");break;case"L":l[_[1]]=d,c[d]=1,m[d]=0,++d;break;case"G":l[_[1]]=d,c[d]=-1,m[d]=0,++d;break;case"E":l[_[1]]=d,c[d]=0,m[d]=0,++d;break;default:v("Parse error "+numeric.prettyPrint(_))}break;case 3:h.hasOwnProperty(_[0])||(h[_[0]]=f,p[f]=0,g[f]=numeric.rep([d],0),++f);var T=h[_[0]];for(n=1;n<_.length;n+=2)if(_[n]!==u){var E=l[_[n]];g[T][E]=(c[E]<0?-1:1)*parseFloat(_[n+1])}else p[T]=parseFloat(_[n+1]);break;case 4:for(n=1;n<_.length;n+=2)m[l[_[n]]]=(c[l[_[n]]]<0?-1:1)*parseFloat(_[n+1]);break;case 5:break;case 6:v("Internal error")}}}v("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,i,a,o){function s(e){var t,n,r=this,i=e.length,a=0,o=r.i=r.j=r.m=0;for(r.S=[],r.c=[],i||(e=[i++]);a<256;)r.S[a]=a++;for(a=0;a<256;a++)o=c(o+(t=r.S[a])+e[a%i]),n=r.S[o],r.S[a]=n,r.S[o]=t;r.g=function(e){var t=r.S,n=c(r.i+1),i=t[n],a=c(r.j+i),o=t[a];t[n]=o,t[a]=i;for(var s=t[c(i+o)];--e;)n=c(n+1),o=t[a=c(a+(i=t[n]))],t[n]=o,t[a]=i,s=256*s+t[c(i+o)];return r.i=n,r.j=a,s},r.g(256)}function u(e,t,n,r,i){if(n=[],i=typeof e,t&&"object"==i)for(r in e)if(r.indexOf("S")<5)try{n.push(u(e[r],t-1))}catch(e){}return n.length?n:e+("string"!=i?"\0":"")}function l(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[c(r)]=c((n^=19*t[c(r)])+e.charCodeAt(r));for(r in e="",t)e+=String.fromCharCode(t[r]);return e}function c(e){return 255&e}t.seedrandom=function(n,r){var c,d=[];return n=l(u(r?[n,e]:arguments.length?n:[(new Date).getTime(),e,window],3),d),l((c=new s(d)).S,e),t.random=function(){for(var e=c.g(6),t=o,n=0;e<i;)e=256*(e+n),t*=256,n=c.g(1);for(;e>=a;)e/=2,t/=2,n>>>=1;return(e+n)/t},n},o=t.pow(256,6),i=t.pow(2,i),a=2*i,l(t.random(),e)}([],numeric.seedrandom,0,0,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],i=e.length;for(n=0;n<i;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],i=e.length;for(t=1;t<i;t++)r[t-1]=n(e[t]);return r}function r(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p,g){var m,v,y,_,T,E,M,b,A,w,S,x,D,I,C,N,L,O,R,j,P,k,U,B,F,z,G;D=Math.min(r,l),y=2*r+D*(D+5)/2+2*l+1,B=1e-60;do{F=1+.1*(B+=B),z=1+.2*B}while(F<=1||z<=1);for(m=1;m<=r;m+=1)p[m]=t[m];for(m=r+1;m<=y;m+=1)p[m]=0;for(m=1;m<=l;m+=1)d[m]=0;if(T=[],0===g[1]){if(function(e,t,n,r){var i,a,o,s,u,l;for(a=1;a<=n;a+=1){if(r[1]=a,l=0,(o=a-1)<1){if((l=e[a][a]-l)<=0)break;e[a][a]=Math.sqrt(l)}else{for(s=1;s<=o;s+=1){for(u=e[s][a],i=1;i<s;i+=1)u-=e[i][a]*e[i][s];u/=e[s][s],e[s][a]=u,l+=u*u}if((l=e[a][a]-l)<=0)break;e[a][a]=Math.sqrt(l)}r[1]=0}}(e,0,r,T),0!==T[1])return void(g[1]=2);!function(e,t,n,r){var i,a,o,s;for(a=1;a<=n;a+=1){for(s=0,i=1;i<a;i+=1)s+=e[i][a]*r[i];r[a]=(r[a]-s)/e[a][a]}for(o=1;o<=n;o+=1)for(r[a=n+1-o]=r[a]/e[a][a],s=-r[a],i=1;i<a;i+=1)r[i]=r[i]+s*e[i][a]}(e,0,r,t),function(e,t,n){var r,i,a,o,s;for(a=1;a<=n;a+=1){for(e[a][a]=1/e[a][a],s=-e[a][a],r=1;r<a;r+=1)e[r][a]=s*e[r][a];if(n<(o=a+1))break;for(i=o;i<=n;i+=1)for(s=e[a][i],e[a][i]=0,r=1;r<=a;r+=1)e[r][i]=e[r][i]+s*e[r][a]}}(e,0,r)}else{for(v=1;v<=r;v+=1)for(i[v]=0,m=1;m<=v;m+=1)i[v]=i[v]+e[m][v]*t[m];for(v=1;v<=r;v+=1)for(t[v]=0,m=v;m<=r;m+=1)t[v]=t[v]+e[v][m]*i[m]}for(a[1]=0,v=1;v<=r;v+=1)for(i[v]=t[v],a[1]=a[1]+p[v]*i[v],p[v]=0,m=v+1;m<=r;m+=1)e[m][v]=0;for(a[1]=-a[1]/2,g[1]=0,I=(w=(A=(S=(b=(M=r)+r)+D)+D+1)+D*(D+1)/2)+l,m=1;m<=l;m+=1){for(N=0,v=1;v<=r;v+=1)N+=o[v][m]*o[v][m];p[I+m]=Math.sqrt(N)}function H(){for(f[1]=f[1]+1,y=w,m=1;m<=l;m+=1){for(y+=1,N=-s[m],v=1;v<=r;v+=1)N+=o[v][m]*i[v];if(Math.abs(N)<B&&(N=0),m>c)p[y]=N;else if(p[y]=-Math.abs(N),N>0){for(v=1;v<=r;v+=1)o[v][m]=-o[v][m];s[m]=-s[m]}}for(m=1;m<=h;m+=1)p[w+d[m]]=0;for(x=0,C=0,m=1;m<=l;m+=1)p[w+m]<C*p[I+m]&&(x=m,C=p[w+m]/p[I+m]);return 0===x?999:0}function Y(){for(m=1;m<=r;m+=1){for(N=0,v=1;v<=r;v+=1)N+=e[v][m]*o[v][x];p[m]=N}for(_=M,m=1;m<=r;m+=1)p[_+m]=0;for(v=h+1;v<=r;v+=1)for(m=1;m<=r;m+=1)p[_+m]=p[_+m]+e[m][v]*p[v];for(k=!0,m=h;m>=1;m-=1){for(N=p[m],_=(y=A+m*(m+3)/2)-m,v=m+1;v<=h;v+=1)N-=p[y]*p[b+v],y+=v;if(N/=p[_],p[b+m]=N,d[m]<c)break;if(N<0)break;k=!1,E=m}if(!k)for(L=p[S+E]/p[b+E],m=1;m<=h&&!(d[m]<c)&&!(p[b+m]<0);m+=1)(C=p[S+m]/p[b+m])<L&&(L=C,E=m);for(N=0,m=M+1;m<=M+r;m+=1)N+=p[m]*p[m];if(Math.abs(N)<=B){if(k)return g[1]=1,999;for(m=1;m<=h;m+=1)p[S+m]=p[S+m]-L*p[b+m];return p[S+h+1]=p[S+h+1]+L,700}for(N=0,m=1;m<=r;m+=1)N+=p[M+m]*o[m][x];for(O=-p[w+x]/N,U=!0,k||L<O&&(O=L,U=!1),m=1;m<=r;m+=1)i[m]=i[m]+O*p[M+m],Math.abs(i[m])<B&&(i[m]=0);for(a[1]=a[1]+O*N*(O/2+p[S+h+1]),m=1;m<=h;m+=1)p[S+m]=p[S+m]-O*p[b+m];if(p[S+h+1]=p[S+h+1]+O,!U){for(N=-s[x],v=1;v<=r;v+=1)N+=i[v]*o[v][x];if(x>c)p[w+x]=N;else if(p[w+x]=-Math.abs(N),N>0){for(v=1;v<=r;v+=1)o[v][x]=-o[v][x];s[x]=-s[x]}return 700}for(d[h+=1]=x,y=A+(h-1)*h/2+1,m=1;m<=h-1;m+=1)p[y]=p[m],y+=1;if(h===r)p[y]=p[r];else{for(m=r;m>=h+1&&0!==p[m]&&(R=Math.max(Math.abs(p[m-1]),Math.abs(p[m])),j=Math.min(Math.abs(p[m-1]),Math.abs(p[m])),C=p[m-1]>=0?Math.abs(R*Math.sqrt(1+j*j/(R*R))):-Math.abs(R*Math.sqrt(1+j*j/(R*R))),R=p[m-1]/C,j=p[m]/C,1!==R);m-=1)if(0===R)for(p[m-1]=j*C,v=1;v<=r;v+=1)C=e[v][m-1],e[v][m-1]=e[v][m],e[v][m]=C;else for(p[m-1]=C,P=j/(1+R),v=1;v<=r;v+=1)C=R*e[v][m-1]+j*e[v][m],e[v][m]=P*(e[v][m-1]+C)-e[v][m],e[v][m-1]=C;p[y]=p[h]}return 0}function V(){if(0===p[_=(y=A+E*(E+1)/2+1)+E])return 798;if(R=Math.max(Math.abs(p[_-1]),Math.abs(p[_])),j=Math.min(Math.abs(p[_-1]),Math.abs(p[_])),C=p[_-1]>=0?Math.abs(R*Math.sqrt(1+j*j/(R*R))):-Math.abs(R*Math.sqrt(1+j*j/(R*R))),R=p[_-1]/C,j=p[_]/C,1===R)return 798;if(0===R){for(m=E+1;m<=h;m+=1)C=p[_-1],p[_-1]=p[_],p[_]=C,_+=m;for(m=1;m<=r;m+=1)C=e[m][E],e[m][E]=e[m][E+1],e[m][E+1]=C}else{for(P=j/(1+R),m=E+1;m<=h;m+=1)C=R*p[_-1]+j*p[_],p[_]=P*(p[_-1]+C)-p[_],p[_-1]=C,_+=m;for(m=1;m<=r;m+=1)C=R*e[m][E]+j*e[m][E+1],e[m][E+1]=P*(e[m][E]+C)-e[m][E+1],e[m][E]=C}return 0}function Q(){for(_=y-E,m=1;m<=E;m+=1)p[_]=p[y],y+=1,_+=1;return p[S+E]=p[S+E+1],d[E]=d[E+1],(E+=1)<h?797:0}function q(){return p[S+h]=p[S+h+1],p[S+h+1]=0,d[h]=0,h-=1,f[2]=f[2]+1,0}for(h=0,f[1]=0,f[2]=0,G=0;;){if(999===(G=H()))return;for(;0!==(G=Y());){if(999===G)return;if(700===G)if(E===h)q();else{for(;V(),797===(G=Q()););q()}}}}e.solveQP=function(e,i,a,o,s,u){e=t(e),i=t(i),a=t(a);var l,c,d,h,f,p=[],g=[],m=[],v=[],y=[];if(s=s||0,u=u?t(u):[void 0,0],o=o?t(o):[],c=e.length-1,d=a[1].length-1,!o)for(l=1;l<=d;l+=1)o[l]=0;for(l=1;l<=d;l+=1)g[l]=0;for(0,h=Math.min(c,d),l=1;l<=c;l+=1)m[l]=0;for(p[1]=0,l=1;l<=2*c+h*(h+5)/2+2*d+1;l+=1)v[l]=0;for(l=1;l<=2;l+=1)y[l]=0;return r(e,i,0,c,m,p,a,o,0,d,s,g,0,y,v,u),f="",1===u[1]&&(f="constraints are inconsistent, no solution!"),2===u[1]&&(f="matrix D in quadratic function is not positive definite!"),{solution:n(m),value:n(p),unconstrained_solution:n(i),iterations:n(y),iact:n(g),message:f}}}(numeric),numeric.svd=function(e){var t,n=numeric.epsilon,r=1e-64/n,i=0,a=0,o=0,s=0,u=0,l=numeric.clone(e),c=l.length,d=l[0].length;if(c<d)throw"Need more rows than columns";var h=new Array(d),f=new Array(d);for(a=0;a<d;a++)h[a]=f[a]=0;var p=numeric.rep([d,d],0);function g(e,t){return(e=Math.abs(e))>(t=Math.abs(t))?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var m=0,v=0,y=0,_=0,T=0,E=0,M=0;for(a=0;a<d;a++){for(h[a]=v,M=0,u=a+1,o=a;o<c;o++)M+=l[o][a]*l[o][a];if(M<=r)v=0;else for(m=l[a][a],v=Math.sqrt(M),m>=0&&(v=-v),y=m*v-M,l[a][a]=m-v,o=u;o<d;o++){for(M=0,s=a;s<c;s++)M+=l[s][a]*l[s][o];for(m=M/y,s=a;s<c;s++)l[s][o]+=m*l[s][a]}for(f[a]=v,M=0,o=u;o<d;o++)M+=l[a][o]*l[a][o];if(M<=r)v=0;else{for(m=l[a][a+1],v=Math.sqrt(M),m>=0&&(v=-v),y=m*v-M,l[a][a+1]=m-v,o=u;o<d;o++)h[o]=l[a][o]/y;for(o=u;o<c;o++){for(M=0,s=u;s<d;s++)M+=l[o][s]*l[a][s];for(s=u;s<d;s++)l[o][s]+=M*h[s]}}(T=Math.abs(f[a])+Math.abs(h[a]))>_&&(_=T)}for(a=d-1;-1!=a;a+=-1){if(0!=v){for(y=v*l[a][a+1],o=u;o<d;o++)p[o][a]=l[a][o]/y;for(o=u;o<d;o++){for(M=0,s=u;s<d;s++)M+=l[a][s]*p[s][o];for(s=u;s<d;s++)p[s][o]+=M*p[s][a]}}for(o=u;o<d;o++)p[a][o]=0,p[o][a]=0;p[a][a]=1,v=h[a],u=a}for(a=d-1;-1!=a;a+=-1){for(u=a+1,v=f[a],o=u;o<d;o++)l[a][o]=0;if(0!=v){for(y=l[a][a]*v,o=u;o<d;o++){for(M=0,s=u;s<c;s++)M+=l[s][a]*l[s][o];for(m=M/y,s=a;s<c;s++)l[s][o]+=m*l[s][a]}for(o=a;o<c;o++)l[o][a]=l[o][a]/v}else for(o=a;o<c;o++)l[o][a]=0;l[a][a]+=1}for(n*=_,s=d-1;-1!=s;s+=-1)for(var b=0;b<50;b++){var A=!1;for(u=s;-1!=u;u+=-1){if(Math.abs(h[u])<=n){A=!0;break}if(Math.abs(f[u-1])<=n)break}if(!A){i=0,M=1;var w=u-1;for(a=u;a<s+1&&(m=M*h[a],h[a]=i*h[a],!(Math.abs(m)<=n));a++)for(y=g(m,v=f[a]),f[a]=y,i=v/y,M=-m/y,o=0;o<c;o++)T=l[o][w],E=l[o][a],l[o][w]=T*i+E*M,l[o][a]=-T*M+E*i}if(E=f[s],u==s){if(E<0)for(f[s]=-E,o=0;o<d;o++)p[o][s]=-p[o][s];break}if(b>=49)throw"Error: no convergence.";for(_=f[u],v=g(m=(((T=f[s-1])-E)*(T+E)+((v=h[s-1])-(y=h[s]))*(v+y))/(2*y*T),1),m=m<0?((_-E)*(_+E)+y*(T/(m-v)-y))/_:((_-E)*(_+E)+y*(T/(m+v)-y))/_,i=1,M=1,a=u+1;a<s+1;a++){for(v=h[a],T=f[a],y=M*v,v*=i,E=g(m,y),h[a-1]=E,m=_*(i=m/E)+v*(M=y/E),v=-_*M+v*i,y=T*M,T*=i,o=0;o<d;o++)_=p[o][a-1],E=p[o][a],p[o][a-1]=_*i+E*M,p[o][a]=-_*M+E*i;for(E=g(m,y),f[a-1]=E,m=(i=m/E)*v+(M=y/E)*T,_=-M*v+i*T,o=0;o<c;o++)T=l[o][a-1],E=l[o][a],l[o][a-1]=T*i+E*M,l[o][a]=-T*M+E*i}h[u]=0,h[s]=m,f[s]=_}for(a=0;a<f.length;a++)f[a]<n&&(f[a]=0);for(a=0;a<d;a++)for(o=a-1;o>=0;o--)if(f[o]<f[a]){for(i=f[o],f[o]=f[a],f[a]=i,s=0;s<l.length;s++)t=l[s][a],l[s][a]=l[s][o],l[s][o]=t;for(s=0;s<p.length;s++)t=p[s][a],p[s][a]=p[s][o],p[s][o]=t;a=o}return{U:l,S:f,V:p}}}).call(this,__webpack_require__(13))},function(e,t,n){"use strict";var r=n(115),i=n(315),a=n(316),o=n(318);function s(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),a=0,o=0;a<e.length;++a)a!==t&&(i[o++]=e[r][a]);return n}function u(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",u(e.slice(0,t)),",",u(e.slice(t)),")"].join("")}function l(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",u(l(s(e,n))),",",(r=n,1&r?"-":""),e[0][n],")"].join(""));return t;var r}function c(e){for(var t=[],n=[],c=function(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}(e),d=[],h=0;h<e;++h)0==(1&h)?t.push.apply(t,l(s(c,h))):n.push.apply(n,l(s(c,h))),d.push("m"+h);var f=u(t),p=u(n),g="orientation"+e+"Exact",m=["function ",g,"(",d.join(),"){var p=",f,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",g].join("");return new Function("sum","prod","scale","sub",m)(i,r,a,o)}var d=c(3),h=c(4),f=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),o=i-a;if(i>0){if(a<=0)return o;r=i+a}else{if(!(i<0))return o;if(a>=0)return o;r=-(i+a)}var s=33306690738754716e-32*r;return o>=s||o<=-s?o:d(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],a=t[0]-r[0],o=n[0]-r[0],s=e[1]-r[1],u=t[1]-r[1],l=n[1]-r[1],c=e[2]-r[2],d=t[2]-r[2],f=n[2]-r[2],p=a*l,g=o*u,m=o*s,v=i*l,y=i*u,_=a*s,T=c*(p-g)+d*(m-v)+f*(y-_),E=7771561172376103e-31*((Math.abs(p)+Math.abs(g))*Math.abs(c)+(Math.abs(m)+Math.abs(v))*Math.abs(d)+(Math.abs(y)+Math.abs(_))*Math.abs(f));return T>E||-T>E?T:h(e,t,n,r)}];function p(e){var t=f[e.length];return t||(t=f[e.length]=c(e.length)),t.apply(void 0,e)}!function(){for(;f.length<=5;)f.push(c(f.length));for(var t=[],n=["slow"],r=0;r<=5;++r)t.push("a"+r),n.push("o"+r);var i=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=5;++r)i.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");i.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),n.push(i.join(""));var a=Function.apply(void 0,n);for(e.exports=a.apply(void 0,[p].concat(f)),r=0;r<=5;++r)e.exports[r]=f[r]}()},function(e,t,n){"use strict";(function(e){if(e.AnalyserNode&&!e.AnalyserNode.prototype.getFloatTimeDomainData){var t=new Uint8Array(2048);e.AnalyserNode.prototype.getFloatTimeDomainData=function(e){this.getByteTimeDomainData(t);for(var n=0,r=e.length;n<r;n++)e[n]=.0078125*(t[n]-128)}}}).call(this,n(13))},function(e,t,n){"use strict";var r,i,a=n(22).parseType,o=function(e){return new Date(1e3*e-20828448e5)},s=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},u=function(e){var t,n,r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=[];for(t=0;t+4<e.length;t+=n)if(n=r.getUint32(t),t+=4,n<=0)i.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:i.push("slice_layer_without_partitioning_rbsp");break;case 5:i.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:i.push("sei_rbsp");break;case 7:i.push("seq_parameter_set_rbsp");break;case 8:i.push("pic_parameter_set_rbsp");break;case 9:i.push("access_unit_delimiter_rbsp");break;default:i.push("UNKNOWN NAL - "+e[t]&31)}return i},l={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:r(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,r,i,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(r=6,i=0;i<s;i++)n=a.getUint16(r),r+=2,o.sps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;for(t=e[r],r++,i=0;i<t;i++)n=a.getUint16(r),r+=2,o.pps.push(new Uint8Array(e.subarray(r,r+n))),r+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:a(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},r=8;r<e.byteLength;)n.compatibleBrands.push(a(e.subarray(r,r+4))),r+=4;return n},dinf:function(e){return{boxes:r(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:r(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:a(e.subarray(8,12)),name:""},n=8;for(n=24;n<e.byteLength;n++){if(0===e[n]){n++;break}t.name+=String.fromCharCode(e[n])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:u(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=4,i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===i.version?(r+=4,i.creationTime=o(n.getUint32(r)),r+=8,i.modificationTime=o(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=8,i.duration=n.getUint32(r)):(i.creationTime=o(n.getUint32(r)),r+=4,i.modificationTime=o(n.getUint32(r)),r+=4,i.timescale=n.getUint32(r),r+=4,i.duration=n.getUint32(r)),r+=4,t=n.getUint16(r),i.language+=String.fromCharCode(96+(t>>10)),i.language+=String.fromCharCode(96+((992&t)>>5)),i.language+=String.fromCharCode(96+(31&t)),i},mdia:function(e){return{boxes:r(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:r(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=r(e.subarray(28))[0]),n},moof:function(e){return{boxes:r(e)}},moov:function(e){return{boxes:r(e)}},mvex:function(e){return{boxes:r(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=o(t.getUint32(n)),n+=8,r.modificationTime=o(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=8,r.duration=t.getUint32(n)):(r.creationTime=o(t.getUint32(n)),n+=4,r.modificationTime=o(t.getUint32(n)),n+=4,r.timescale=t.getUint32(n),n+=4,r.duration=t.getUint32(n)),n+=4,r.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,r.nextTrackId=t.getUint32(n),r},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:n.getUint32(4),timescale:n.getUint32(8),earliestPresentationTime:n.getUint32(12),firstOffset:n.getUint32(16)},i=n.getUint16(22);for(t=24;i;t+=12,i--)r.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&n.getUint32(t),subsegmentDuration:n.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&n.getUint32(t+8)});return r},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:r(e)}},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},i=n.getUint32(4);for(t=8;i;t+=4,i--)r.chunkOffsets.push(n.getUint32(t));return r},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r=n.getUint32(4),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;r;t+=12,r--)i.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return i},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:r(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)r.entries.push(n.getUint32(t));return r},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},i=n.getUint32(4);for(t=8;i;t+=8,i--)r.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return r},styp:function(e){return l.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},i=1&r.flags[2],a=2&r.flags[2],o=8&r.flags[2],s=16&r.flags[2],u=32&r.flags[2],l=65536&r.flags[0],c=131072&r.flags[0];return t=8,i&&(t+=4,r.baseDataOffset=n.getUint32(12),t+=4),a&&(r.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(r.defaultSampleDuration=n.getUint32(t),t+=4),s&&(r.defaultSampleSize=n.getUint32(t),t+=4),u&&(r.defaultSampleFlags=n.getUint32(t)),l&&(r.durationIsEmpty=!0),!i&&c&&(r.baseDataOffsetIsMoof=!0),r},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,r={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===r.version?(n+=4,r.creationTime=o(t.getUint32(n)),n+=8,r.modificationTime=o(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=8,r.duration=t.getUint32(n)):(r.creationTime=o(t.getUint32(n)),n+=4,r.modificationTime=o(t.getUint32(n)),n+=4,r.trackId=t.getUint32(n),n+=4,n+=4,r.duration=t.getUint32(n)),n+=4,n+=8,r.layer=t.getUint16(n),n+=2,r.alternateGroup=t.getUint16(n),n+=2,r.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,r.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,r.width=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,r.height=t.getUint16(n)+t.getUint16(n+2)/16,r},traf:function(e){return{boxes:r(e)}},trak:function(e){return{boxes:r(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},r=new DataView(e.buffer,e.byteOffset,e.byteLength),i=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],u=2&n.flags[1],l=4&n.flags[1],c=8&n.flags[1],d=r.getUint32(4),h=8;for(i&&(n.dataOffset=r.getInt32(h),h+=4),a&&d&&(t={flags:s(e.subarray(h,h+4))},h+=4,o&&(t.duration=r.getUint32(h),h+=4),u&&(t.size=r.getUint32(h),h+=4),c&&(t.compositionTimeOffset=r.getUint32(h),h+=4),n.samples.push(t),d--);d--;)t={},o&&(t.duration=r.getUint32(h),h+=4),u&&(t.size=r.getUint32(h),h+=4),l&&(t.flags=s(e.subarray(h,h+4)),h+=4),c&&(t.compositionTimeOffset=r.getUint32(h),h+=4),n.samples.push(t);return n},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};r=function(e){for(var t,n,r,i,o,s=0,u=[],c=new ArrayBuffer(e.length),d=new Uint8Array(c),h=0;h<e.length;++h)d[h]=e[h];for(t=new DataView(c);s<e.byteLength;)n=t.getUint32(s),r=a(e.subarray(s+4,s+8)),i=n>1?s+n:e.byteLength,(o=(l[r]||function(e){return{data:e}})(e.subarray(s+8,i))).size=n,o.type=r,u.push(o),s=i;return u},i=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map((function(e,r){return n+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var r=n+"  "+t+": ",i=e[t];if(i instanceof Uint8Array||i instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?r+"<"+a.join("").slice(1)+">":r+"<\n"+a.map((function(e){return n+"  "+e})).join("\n")+"\n"+n+"  >":r+"<>"}return r+JSON.stringify(i,null,2).split("\n").map((function(e,t){return 0===t?e:n+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+i(e.boxes,t+1):"")})).join("\n")},e.exports={inspect:r,textify:i,parseTfdt:l.tfdt,parseHdlr:l.hdlr,parseTfhd:l.tfhd,parseTrun:l.trun,parseSidx:l.sidx}},function(e,t,n){"use strict";var r=n(0),i=n(279),a=n(280),o=n(281);function s(e,t,n){var r=e;return i(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=o(t,{uri:e}),r.callback=n,r}function u(e,t,n){return l(t=s(e,t,n))}function l(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,r,i){t||(t=!0,e.callback(n,r,i))};function r(){var e=void 0;if(e=c.response?c.response:c.responseText||function(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML;return null}(c),v)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(d),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,y)}function o(){if(!l){var t;clearTimeout(d),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var i=y,o=null;return 0!==t?(i={body:r(),statusCode:t,method:f,headers:{},url:h,rawRequest:c},c.getAllResponseHeaders&&(i.headers=a(c.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,i,i.body)}}var s,l,c=e.xhr||null;c||(c=e.cors||e.useXDR?new u.XDomainRequest:new u.XMLHttpRequest);var d,h=c.url=e.uri||e.url,f=c.method=e.method||"GET",p=e.body||e.data,g=c.headers=e.headers||{},m=!!e.sync,v=!1,y={body:void 0,headers:{},statusCode:0,method:f,url:h,rawRequest:c};if("json"in e&&!1!==e.json&&(v=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==f&&"HEAD"!==f&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),p=JSON.stringify(!0===e.json?p:e.json))),c.onreadystatechange=function(){4===c.readyState&&setTimeout(o,0)},c.onload=o,c.onerror=i,c.onprogress=function(){},c.onabort=function(){l=!0},c.ontimeout=i,c.open(f,h,!m,e.username,e.password),m||(c.withCredentials=!!e.withCredentials),!m&&e.timeout>0&&(d=setTimeout((function(){if(!l){l=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}}),e.timeout)),c.setRequestHeader)for(s in g)g.hasOwnProperty(s)&&c.setRequestHeader(s,g[s]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(p||null),c}e.exports=u,u.XMLHttpRequest=r.XMLHttpRequest||function(){},u.XDomainRequest="withCredentials"in new u.XMLHttpRequest?u.XMLHttpRequest:r.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){u["delete"===e?"del":e]=function(t,n,r){return(n=s(t,n,r)).method=e.toUpperCase(),l(n)}}))},function(e,t,n){var r=n(0),i=e.exports={WebVTT:n(282),VTTCue:n(283),VTTRegion:n(284)};r.vttjs=i,r.WebVTT=i.WebVTT;var a=i.VTTCue,o=i.VTTRegion,s=r.VTTCue,u=r.VTTRegion;i.shim=function(){r.VTTCue=a,r.VTTRegion=o},i.restore=function(){r.VTTCue=s,r.VTTRegion=u},r.VTTCue||i.shim()},function(e,t,n){var r,i,a,o,s;r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,i=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(e,t,n){if(n=n||{},e=e.trim(),!(t=t.trim())){if(!n.alwaysNormalize)return e;var r=s.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=s.normalizePath(r.path),s.buildURLFromParts(r)}var a=s.parseURL(t);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return n.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):t;var o=s.parseURL(e);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var u=i.exec(o.path);o.netLoc=u[1],o.path=u[2]}o.netLoc&&!o.path&&(o.path="/");var l={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(l.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var c=o.path,d=c.substring(0,c.lastIndexOf("/")+1)+a.path;l.path=s.normalizePath(d)}else l.path=o.path,a.params||(l.params=o.params,a.query||(l.query=o.query));return null===l.path&&(l.path=n.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=U(n(76)),i=U(n(4)),a=U(n(14)),o=U(n(123)),s=U(n(125)),u=U(n(56)),l=U(n(94)),c=U(n(197)),d=U(n(209)),h=U(n(210)),f=U(n(49)),p=U(n(39)),g=U(n(47)),m=U(n(211)),v=U(n(213)),y=U(n(214)),_=U(n(87)),T=U(n(216)),E=U(n(217)),M=U(n(6)),b=U(n(9)),A=U(n(5)),w=U(n(7)),S=U(n(93)),x=U(n(1)),D=U(n(101)),I=n(102),C=U(n(218)),N=U(n(229)),L=U(n(241)),O=n(11),R=U(n(242)),j=U(n(48)),P=U(n(8)),k=n(17);function U(e){return e&&e.__esModule?e:{default:e}}function B(){var e="You must first call initialize() and set a source before calling this method",t="You must first call initialize() and set a valid source and view before calling this method",n="You must first call attachView() to set the video element before calling this method",U="You must first call attachSource() with a valid source before calling this method",B=this.context,F=(0,A.default)(B).getInstance(),z=(0,D.default)(B).getInstance(),G=(0,M.default)(B).getInstance({settings:z}),H=void 0,Y=void 0,V=void 0,Q=void 0,q=void 0,W=void 0,X=void 0,K=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0,ue=void 0,le=void 0,ce=void 0,de=void 0,he=void 0,fe=void 0,pe=void 0;function ge(){return!!V&&!!de.getElement()}function me(){return(0,I.getVersionString)()}function ve(){if(!X)throw t;return ue.isPaused()}function ye(e){var t=le.getCurrentDVRInfo();if(!t)return 0;var n=ue.getLiveDelay(),r=t.range.start+e;return r>t.range.end-n&&(r=t.range.end-n),r}function _e(e){if(!X)throw t;var n=Ae().currentTime;if(void 0!==e)n=se.getTimeRelativeToStreamId(n,e);else if(ue.getIsDynamic()){var r=le.getCurrentDVRInfo();n=null===r?0:Te()-(r.range.end-r.time)}return n}function Te(){if(!X)throw t;var e=Ae().duration;if(ue.getIsDynamic()){var n,r=le.getCurrentDVRInfo();if(!r)return 0;e=(n=r.range.end-r.range.start)<r.manifestInfo.DVRWindowSize?n:r.manifestInfo.DVRWindowSize}return e}function Ee(e){(0,k.checkParameterType)(e,"boolean"),K=e}function Me(){ie.restoreDefaultUTCTimingSources()}function be(){return le}function Ae(){if(!de.getElement())throw n;return de.getElement()}function we(e){if(!q)throw"MediaPlayer not initialized!";de.setElement(e),e&&(Ne(),function(){if(te)return;var e=dashjs.MetricsReporting;if("function"==typeof e){var t=e(B).create();te=t.createMetricsReporting({debug:G,eventBus:F,mediaElement:Ae(),adapter:re,dashMetrics:le,events:w.default,constants:i.default,metricsConstants:a.default})}}(),function(){if(ne)return;var e=dashjs.MssHandler;"function"==typeof e&&(b.default.extend(e.errors),ne=e(B).create({eventBus:F,mediaPlayerModel:ie,dashMetrics:le,manifestModel:ce,playbackController:ue,protectionController:ee,baseURLController:(0,l.default)(B).getInstance(),errHandler:ae,events:w.default,constants:i.default,debug:G,initSegmentType:O.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:R.default,ISOBoxer:j.default,settings:z}))}(),se&&se.switchToVideoElement()),X&&Ie(),Oe()}function Se(t){if(!W)throw e;var n=se.getActiveStreamInfo();return $.getTracksFor(t,n)}function xe(e){if(!q)throw"MediaPlayer not initialized!";"string"==typeof e&&fe.initialize(e),V=e,(W||X)&&Ie(),ge()&&Oe()}function De(){if(!W)throw e;var t=se.getActiveStreamInfo();return t?se.getStreamById(t.id):null}function Ie(){X=!1,W=!1,re.reset(),se.reset(),ue.reset(),Z.reset(),$.reset(),he.reset(),ee&&(z.get().streaming.keepProtectionMediaKeys?ee.stop():(ee.reset(),ee=null,Ne()))}function Ce(){return(0,c.default)(B).create({errHandler:ae,dashMetrics:le,mediaPlayerModel:ie,requestModifier:(0,p.default)(B).getInstance(),mssHandler:ne,settings:z})}function Ne(){if(ee)return ee;var e=dashjs.Protection;if("function"==typeof e){var t=e(B).create();return w.default.extend(e.events),S.default.extend(e.events,{publicOnly:!0}),b.default.extend(e.errors),oe||(oe=(0,h.default)(B).getInstance()),ee=t.createProtectionSystem({debug:G,errHandler:ae,videoModel:de,capabilities:oe,eventBus:F,events:w.default,BASE64:R.default,constants:i.default})}return null}function Le(e){var t=le.getCurrentDVRInfo();return t?e+(t.manifestInfo.availableFrom.getTime()/1e3+t.range.start):0}function Oe(){var e;!W&&V&&(W=!0,Y.info("Streaming Initialized"),e=Ce(),se||(se=(0,s.default)(B).getInstance()),$.setConfig({domStorage:pe}),se.setConfig({capabilities:oe,manifestLoader:e,manifestModel:ce,mediaPlayerModel:ie,protectionController:ee,adapter:re,dashMetrics:le,errHandler:ae,timelineConverter:J,videoModel:de,playbackController:ue,abrController:Z,mediaController:$,textController:he,settings:z}),ue.setConfig({streamController:se,dashMetrics:le,mediaPlayerModel:ie,adapter:re,videoModel:de,timelineConverter:J,uriFragmentModel:fe,settings:z}),Z.setConfig({streamController:se,domStorage:pe,mediaPlayerModel:ie,dashMetrics:le,adapter:re,videoModel:de,settings:z}),Z.createAbrRulesCollection(),he.setConfig({errHandler:ae,manifestModel:ce,adapter:re,mediaController:$,streamController:se,videoModel:de}),se.initialize(K,Q),"string"==typeof V?se.load(V):se.loadWithManifest(V)),!X&&ge()&&(X=!0,Y.info("Playback Initialized"))}return H={initialize:function(e,t,n){oe||(oe=(0,h.default)(B).getInstance()),ae=(0,d.default)(B).getInstance(),oe.supportsMediaSource()?q||(q=!0,J=(0,L.default)(B).getInstance(),Z||(Z=(0,_.default)(B).getInstance()),ue||(ue=(0,o.default)(B).getInstance()),$||($=(0,u.default)(B).getInstance()),re=(0,C.default)(B).getInstance(),ce=(0,v.default)(B).getInstance(),le=(0,N.default)(B).getInstance({settings:z}),he=(0,g.default)(B).getInstance(),pe=(0,E.default)(B).getInstance({settings:z}),re.setConfig({constants:i.default,cea608parser:r.default,errHandler:ae,BASE64:R.default}),Me(),Ee(void 0===n||n),e&&we(e),t&&xe(t),Y.info("[dash.js "+me()+"] MediaPlayer has been initialized")):ae.error(new P.default(b.default.CAPABILITY_MEDIASOURCE_ERROR_CODE,b.default.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},setConfig:function(e){e&&(e.capabilities&&(oe=e.capabilities),e.streamController&&(se=e.streamController),e.playbackController&&(ue=e.playbackController),e.mediaPlayerModel&&(ie=e.mediaPlayerModel),e.abrController&&(Z=e.abrController),e.mediaController&&($=e.mediaController),e.settings&&(z=e.settings))},on:function(e,t,n){F.on(e,t,n)},off:function(e,t,n){F.off(e,t,n)},extend:function(e,t,n){x.default.extend(e,t,n,B)},attachView:we,attachSource:xe,isReady:ge,preload:function(){if(de.getElement()||W)return!1;if(!V)throw U;Oe()},play:function(){if(!X)throw t;(!K||ve()&&X)&&ue.play()},isPaused:ve,pause:function(){if(!X)throw t;ue.pause()},isSeeking:function(){if(!X)throw t;return ue.isSeeking()},isDynamic:function(){if(!X)throw t;return ue.getIsDynamic()},seek:function(e){if(!X)throw t;if((0,k.checkParameterType)(e,"number"),isNaN(e))throw i.default.BAD_ARGUMENT_ERROR;var n=ue.getIsDynamic()?ye(e):e;ue.seek(n)},setPlaybackRate:function(e){Ae().playbackRate=e},getPlaybackRate:function(){return Ae().playbackRate},setMute:function(e){(0,k.checkParameterType)(e,"boolean"),Ae().muted=e},isMuted:function(){return Ae().muted},setVolume:function(e){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw i.default.BAD_ARGUMENT_ERROR;Ae().volume=e},getVolume:function(){return Ae().volume},time:_e,duration:Te,timeAsUTC:function(){if(!X)throw t;return _e()<0?NaN:Le(_e())},durationAsUTC:function(){if(!X)throw t;return Le(Te())},getActiveStream:De,getDVRWindowSize:function(){var e=le.getCurrentDVRInfo();return e?e.manifestInfo.DVRWindowSize:0},getDVRSeekOffset:ye,convertToTimeCode:function(e){e=Math.max(e,0);var t=Math.floor(e/3600),n=Math.floor(e%3600/60),r=Math.floor(e%3600%60);return(0===t?"":t<10?"0"+t.toString()+":":t.toString()+":")+(n<10?"0"+n.toString():n.toString())+":"+(r<10?"0"+r.toString():r.toString())},formatUTC:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=new Date(1e3*e),a=i.toLocaleDateString(t),o=i.toLocaleTimeString(t,{hour12:n});return r?o+" "+a:o},getVersion:me,getDebug:function(){return G},getBufferLength:function(e){var t=[i.default.VIDEO,i.default.AUDIO,i.default.FRAGMENTED_TEXT];if(e){if(-1!==t.indexOf(e)){var n=be().getCurrentBufferLevel(e);return n||NaN}return Y.warn("getBufferLength requested for invalid type"),NaN}var r=t.map((function(e){return Se(e).length>0?be().getCurrentBufferLevel(e):Number.MAX_VALUE})).reduce((function(e,t){return Math.min(e,t)}));return r===Number.MAX_VALUE?NaN:r},getTTMLRenderingDiv:function(){return de?de.getTTMLRenderingDiv():null},getVideoElement:Ae,getSource:function(){if(!V)throw U;return V},getCurrentLiveLatency:function(){if(!q)throw"MediaPlayer not initialized!";return X?ue.getCurrentLiveLatency():NaN},getTopBitrateInfoFor:function(t){if(!W)throw e;return Z.getTopBitrateInfoFor(t)},setAutoPlay:Ee,getAutoPlay:function(){return K},getDashMetrics:be,getQualityFor:function(t){if(!W)throw e;if(t===i.default.IMAGE){var n=De();if(!n)return-1;var r=n.getThumbnailController();return r?r.getCurrentTrackIndex():-1}return Z.getQualityFor(t)},setQualityFor:function(t,n){if(!W)throw e;if(t===i.default.IMAGE){var r=De();if(!r)return;var a=r.getThumbnailController();a&&a.setTrackByIndex(n)}Z.setPlaybackQuality(t,se.getActiveStreamInfo(),n)},updatePortalSize:function(){Z.setElementSize(),Z.setWindowResizeEventCalled(!0)},setTextDefaultLanguage:function(e){void 0===he&&(he=(0,g.default)(B).getInstance()),he.setTextDefaultLanguage(e)},getTextDefaultLanguage:function(){return void 0===he&&(he=(0,g.default)(B).getInstance()),he.getTextDefaultLanguage()},setTextDefaultEnabled:function(e){void 0===he&&(he=(0,g.default)(B).getInstance()),he.setTextDefaultEnabled(e)},getTextDefaultEnabled:function(){return void 0===he&&(he=(0,g.default)(B).getInstance()),he.getTextDefaultEnabled()},enableText:function(e){void 0===he&&(he=(0,g.default)(B).getInstance()),he.enableText(e)},enableForcedTextStreaming:function(e){void 0===he&&(he=(0,g.default)(B).getInstance()),he.enableForcedTextStreaming(e)},isTextEnabled:function(){return void 0===he&&(he=(0,g.default)(B).getInstance()),he.isTextEnabled()},setTextTrack:function(e){if(!X)throw t;void 0===he&&(he=(0,g.default)(B).getInstance()),he.setTextTrack(e)},getBitrateInfoListFor:function(t){if(!W)throw e;var n=De();return n?n.getBitrateListFor(t):[]},getStreamsFromManifest:function(t){if(!W)throw e;return re.getStreamsInfo(t)},getTracksFor:Se,getTracksForTypeFromManifest:function(t,n,r){if(!W)throw e;return(r=r||re.getStreamsInfo(n,1)[0])?re.getAllMediaInfoForType(r,t,n):[]},getCurrentTrackFor:function(t){if(!W)throw e;var n=se.getActiveStreamInfo();return $.getCurrentTrackFor(t,n)},setInitialMediaSettingsFor:function(e,t){if(!q)throw"MediaPlayer not initialized!";$.setInitialSettings(e,t)},getInitialMediaSettingsFor:function(e){if(!q)throw"MediaPlayer not initialized!";return $.getInitialSettings(e)},setCurrentTrack:function(t){if(!W)throw e;$.setTrack(t)},getTrackSwitchModeFor:function(e){if(!q)throw"MediaPlayer not initialized!";return $.getSwitchMode(e)},setTrackSwitchModeFor:function(e,t){if(!q)throw"MediaPlayer not initialized!";$.setSwitchMode(e,t)},setSelectionModeForInitialTrack:function(e){if(!q)throw"MediaPlayer not initialized!";$.setSelectionModeForInitialTrack(e)},getSelectionModeForInitialTrack:function(){if(!q)throw"MediaPlayer not initialized!";return $.getSelectionModeForInitialTrack()},addABRCustomRule:function(e,t,n){ie.addABRCustomRule(e,t,n)},removeABRCustomRule:function(e){ie.removeABRCustomRule(e)},removeAllABRCustomRule:function(){ie.removeABRCustomRule()},getAverageThroughput:function(e){var t=Z.getThroughputHistory();return t?t.getAverageThroughput(e):0},retrieveManifest:function(e,t){var n=Ce(),r=this;F.on(w.default.INTERNAL_MANIFEST_LOADED,(function e(i){i.error?t(null,i.error):t(i.manifest),F.off(w.default.INTERNAL_MANIFEST_LOADED,e,r),n.reset()}),r),fe.initialize(e),n.load(e)},addUTCTimingSource:function(e,t){ie.addUTCTimingSource(e,t)},removeUTCTimingSource:function(e,t){ie.removeUTCTimingSource(e,t)},clearDefaultUTCTimingSources:function(){ie.clearDefaultUTCTimingSources()},restoreDefaultUTCTimingSources:Me,setXHRWithCredentialsForType:function(e,t){ie.setXHRWithCredentialsForType(e,t)},getXHRWithCredentialsForType:function(e){return ie.getXHRWithCredentialsForType(e)},getProtectionController:function(){return Ne()},attachProtectionController:function(e){ee=e},setProtectionData:function(e){Q=e,se&&se.setProtectionData(Q)},displayCaptionsOnTop:function(e){var t=(0,f.default)(B).getInstance();t.setConfig({videoModel:de}),t.initialize(),t.setDisplayCConTop(e)},attachTTMLRenderingDiv:function(e){if(!de.getElement())throw n;de.setTTMLRenderingDiv(e)},getCurrentTextTrackIndex:function(){var e=NaN;return he&&(e=he.getCurrentTrackIdx()),e},getThumbnail:function(e,t){if(e<0)return null;var n=ue.getIsDynamic()?ye(e):e,r=se.getStreamForTime(n);if(null===r)return null;var i=r.getThumbnailController();if(!i)return null;var a=se.getTimeRelativeToStreamId(n,r.getId());return i.get(a,t)},getDashAdapter:function(){return re},getSettings:function(){return z.get()},updateSettings:function(e){z.update(e)},resetSettings:function(){z.reset()},reset:function(){xe(null),we(null),Q=null,ee&&(ee.reset(),ee=null),te&&(te.reset(),te=null),z.reset()}},Y=G.getLogger(H),q=!1,X=!1,W=!1,K=!0,ee=null,Q=null,re=null,w.default.extend(S.default),ie=(0,y.default)(B).getInstance(),de=(0,T.default)(B).getInstance(),fe=(0,m.default)(B).getInstance(),H}B.__dashjs_factory_name="MediaPlayer";var F=x.default.getClassFactory(B);F.events=S.default,F.errors=b.default,x.default.updateClassFactory(B.__dashjs_factory_name,F),t.default=F},function(e,t,n){"use strict";!function(e){var t={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},n=function(e){var n=e;return t.hasOwnProperty(e)&&(n=t[e]),String.fromCharCode(n)},r={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},i={17:2,18:4,21:6,22:8,23:10,19:13,20:15},a={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},o={25:2,26:4,29:6,30:8,31:10,27:13,28:15},s=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){var n=this.verboseFilter[e];this.verboseLevel>=n&&console.log(this.time+" ["+e+"] "+t)}},l=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].toString(16));return t},c=function(e,t,n,r,i){this.foreground=e||"white",this.underline=t||!1,this.italics=n||!1,this.background=r||"black",this.flash=i||!1};c.prototype={reset:function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},setStyles:function(e){for(var t=["foreground","underline","italics","background","flash"],n=0;n<t.length;n++){var r=t[n];e.hasOwnProperty(r)&&(this[r]=e[r])}},isDefault:function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},equals:function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},copy:function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},toString:function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}};var d=function(e,t,n,r,i,a){this.uchar=e||" ",this.penState=new c(t,n,r,i,a)};d.prototype={reset:function(){this.uchar=" ",this.penState.reset()},setChar:function(e,t){this.uchar=e,this.penState.copy(t)},setPenState:function(e){this.penState.copy(e)},equals:function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},copy:function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},isEmpty:function(){return" "===this.uchar&&this.penState.isDefault()}};var h=function(){this.chars=[];for(var e=0;e<32;e++)this.chars.push(new d);this.pos=0,this.currPenState=new c};h.prototype={equals:function(e){for(var t=!0,n=0;n<32;n++)if(!this.chars[n].equals(e.chars[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<32;t++)this.chars[t].copy(e.chars[t])},isEmpty:function(){for(var e=!0,t=0;t<32;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},setCursor:function(e){this.pos!==e&&(this.pos=e),this.pos<0?(u.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>32&&(u.log("ERROR","Too large cursor position "+this.pos),this.pos=32)},moveCursor:function(e){var t=this.pos+e;if(e>1)for(var n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)},backSpace:function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},insertChar:function(e){e>=144&&this.backSpace();var t=n(e);this.pos>=32?u.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},clearFromPos:function(e){var t;for(t=e;t<32;t++)this.chars[t].reset()},clear:function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},clearToEndOfRow:function(){this.clearFromPos(this.pos)},getTextString:function(){for(var e=[],t=!0,n=0;n<32;n++){var r=this.chars[n].uchar;" "!==r&&(t=!1),e.push(r)}return t?"":e.join("")},setPenStyles:function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}};var f=function(){this.rows=[];for(var e=0;e<15;e++)this.rows.push(new h);this.currRow=14,this.nrRollUpRows=null,this.reset()};f.prototype={reset:function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},equals:function(e){for(var t=!0,n=0;n<15;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t},copy:function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},isEmpty:function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},backSpace:function(){this.rows[this.currRow].backSpace()},clearToEndOfRow:function(){this.rows[this.currRow].clearToEndOfRow()},insertChar:function(e){this.rows[this.currRow].insertChar(e)},setPen:function(e){this.rows[this.currRow].setPenStyles(e)},moveCursor:function(e){this.rows[this.currRow].moveCursor(e)},setCursor:function(e){u.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},setPAC:function(e){u.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.currRow=t;var n=this.rows[this.currRow];if(null!==e.indent){var r=e.indent,i=Math.max(r-1,0);n.setCursor(e.indent),e.color=n.chars[i].penState.foreground}var a={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(a)},setBkgData:function(e){u.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},setRollUpRows:function(e){this.nrRollUpRows=e},rollUp:function(){if(null!==this.nrRollUpRows){u.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),u.log("INFO","Rolling up")}else u.log("DEBUG","roll_up but nrRollUpRows not set yet")},getDisplayText:function(e){e=e||!1;for(var t=[],n="",r=-1,i=0;i<15;i++){var a=this.rows[i].getTextString();a&&(r=i+1,e?t.push("Row "+r+': "'+a+'"'):t.push(a.trim()))}return t.length>0&&(n=e?"["+t.join(" | ")+"]":t.join("\n")),n},getTextAndFormat:function(){return this.rows}};var p=function(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new f,this.nonDisplayedMemory=new f,this.lastOutputScreen=new f,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null};p.prototype={modes:["MODE_ROLL-UP","MODE_POP-ON","MODE_PAINT-ON","MODE_TEXT"],reset:function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},getHandler:function(){return this.outputFilter},setHandler:function(e){this.outputFilter=e},setPAC:function(e){this.writeScreen.setPAC(e)},setBkgData:function(e){this.writeScreen.setBkgData(e)},setMode:function(e){e!==this.mode&&(this.mode=e,u.log("INFO","MODE="+e),"MODE_POP-ON"==this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},insertChars:function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";u.log("INFO",n+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(u.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},cc_RCL:function(){u.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},cc_BS:function(){u.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},cc_AOF:function(){},cc_AON:function(){},cc_DER:function(){u.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},cc_RU:function(e){u.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},cc_FON:function(){u.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},cc_RDC:function(){u.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},cc_TR:function(){u.log("INFO","TR"),this.setMode("MODE_TEXT")},cc_RTD:function(){u.log("INFO","RTD"),this.setMode("MODE_TEXT")},cc_EDM:function(){u.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate()},cc_CR:function(){u.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate()},cc_ENM:function(){u.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},cc_EOC:function(){if(u.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,u.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate()},cc_TO:function(e){u.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},cc_MIDROW:function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var n=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][n]}u.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},outputDataUpdate:function(){var e=u.time;null!==e&&this.outputFilter&&(this.outputFilter.updateData&&this.outputFilter.updateData(e,this.displayedMemory),null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},cueSplitAtTime:function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}};var g=function(e,t,n){this.field=e||1,this.outputs=[t,n],this.channels=[new p(1,t),new p(2,n)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}};g.prototype={getHandler:function(e){return this.channels[e].getHandler()},setHandler:function(e,t){this.channels[e].setHandler(t)},addData:function(e,t){var n,r,i,a=!1;this.lastTime=e,u.setTime(e);for(var o=0;o<t.length;o+=2)if(r=127&t[o],i=127&t[o+1],r>=16&&r<=31&&r===this.lastCmdA&&i===this.lastCmdB)this.lastCmdA=null,this.lastCmdB=null,u.log("DEBUG","Repeated command ("+l([r,i])+") is dropped");else if(0!==r||0!==i){if(u.log("DATA","["+l([t[o],t[o+1]])+"] -> ("+l([r,i])+")"),(n=this.parseCmd(r,i))||(n=this.parseMidrow(r,i)),n||(n=this.parsePAC(r,i)),n||(n=this.parseBackgroundAttributes(r,i)),!n)if(a=this.parseChars(r,i))if(this.currChNr&&this.currChNr>=0)this.channels[this.currChNr-1].insertChars(a);else u.log("WARNING","No channel found yet. TEXT-MODE?");n?this.dataCounters.cmd+=2:a?this.dataCounters.char+=2:(this.dataCounters.other+=2,u.log("WARNING","Couldn't parse cleaned data "+l([r,i])+" orig: "+l([t[o],t[o+1]])))}else this.dataCounters.padding+=2},parseCmd:function(e,t){var n=null;if(!((20===e||21===e||28===e||29===e)&&32<=t&&t<=47)&&!((23===e||31===e)&&33<=t&&t<=35))return!1;n=20===e||21===e||23===e?1:2;var r=this.channels[n-1];return 20===e||21===e||28===e||29===e?32===t?r.cc_RCL():33===t?r.cc_BS():34===t?r.cc_AOF():35===t?r.cc_AON():36===t?r.cc_DER():37===t?r.cc_RU(2):38===t?r.cc_RU(3):39===t?r.cc_RU(4):40===t?r.cc_FON():41===t?r.cc_RDC():42===t?r.cc_TR():43===t?r.cc_RTD():44===t?r.cc_EDM():45===t?r.cc_CR():46===t?r.cc_ENM():47===t&&r.cc_EOC():r.cc_TO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},parseMidrow:function(e,t){var n=null;if((17===e||25===e)&&32<=t&&t<=47){if((n=17===e?1:2)!==this.currChNr)return u.log("ERROR","Mismatch channel in midrow parsing"),!1;var r=this.channels[n-1];return r.insertChars([32]),r.cc_MIDROW(t),u.log("DEBUG","MIDROW ("+l([e,t])+")"),this.lastCmdA=e,this.lastCmdB=t,!0}return!1},parsePAC:function(e,t){var n,s=null;if(!((17<=e&&e<=23||25<=e&&e<=31)&&64<=t&&t<=127)&&!((16===e||24===e)&&64<=t&&t<=95))return!1;n=e<=23?1:2,s=64<=t&&t<=95?1===n?r[e]:a[e]:1===n?i[e]:o[e];var u=this.interpretPAC(s,t);return this.channels[n-1].setPAC(u),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=n,!0},interpretPAC:function(e,t){var n=t,r={color:null,italics:!1,indent:null,underline:!1,row:e};return n=t>95?t-96:t-64,r.underline=1==(1&n),n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=4*Math.floor((n-16)/2),r},parseChars:function(e,t){var r=null,i=null,a=null;if(e>=25?(r=2,a=e-8):(r=1,a=e),17<=a&&a<=19){var o=t;o=17===a?t+80:18===a?t+112:t+144,u.log("INFO","Special char '"+n(o)+"' in channel "+r),i=[o],this.lastCmdA=e,this.lastCmdB=t}else 32<=e&&e<=127&&(i=0===t?[e]:[e,t],this.lastCmdA=null,this.lastCmdB=null);if(i){var s=l(i);u.log("DEBUG","Char codes =  "+s.join(","))}return i},parseBackgroundAttributes:function(e,t){var n,r,i;return((16===e||24===e)&&32<=t&&t<=47||(23===e||31===e)&&45<=t&&t<=47)&&(n={},16===e||24===e?(r=Math.floor((t-32)/2),n.background=s[r],t%2==1&&(n.background=n.background+"_semi")):45===t?n.background="transparent":(n.foreground="black",47===t&&(n.underline=!0)),i=e<24?1:2,this.channels[i-1].setBkgData(n),this.lastCmdA=e,this.lastCmdB=t,!0)},reset:function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},cueSplitAtTime:function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)}};e.logger=u,e.PenState=c,e.CaptionScreen=f,e.Cea608Parser=g,e.findCea608Nalus=function(e,t,n){for(var r=0,i=t,a=[],o=function(e,t,n,r){if(4!==e||t<8)return null;var i=n.getUint8(r),a=n.getUint16(r+1),o=n.getUint32(r+3),s=n.getUint8(r+7);return 181==i&&49==a&&1195456820==o&&3==s};i<t+n;){if(r=e.getUint32(i),6===(31&e.getUint8(i+4)))for(var s=i+5,u=-1;s<i+4+r-1;){u=0;for(var l=255;255===l;)u+=l=e.getUint8(s),s++;var c=0;for(l=255;255===l;)c+=l=e.getUint8(s),s++;o(u,c,e,s)&&a.push([s,c]),s+=c}i+=r+4}return a},e.extractCea608DataFromRange=function(e,t){var n=t[0],r=[[],[]];n+=8;var i=31&e.getUint8(n);n+=2;for(var a=0;a<i;a++){var o=e.getUint8(n),s=4&o,u=3&o;n++;var l=e.getUint8(n);n++;var c=e.getUint8(n);n++,s&&(127&l)+(127&c)!=0&&(0===u?(r[0].push(l),r[0].push(c)):1===u&&(r[1].push(l),r[1].push(c)))}return r}}(t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(4)),i=_(n(14)),a=_(n(33)),o=_(n(78)),s=_(n(154)),u=_(n(87)),l=_(n(56)),c=_(n(5)),d=_(n(7)),h=_(n(27)),f=_(n(1)),p=_(n(6)),g=_(n(57)),m=_(n(8)),v=_(n(9)),y=n(11);function _(e){return e&&e.__esModule?e:{default:e}}function T(e){e=e||{};var t=this.context,n=(0,c.default)(t).getInstance(),f=e.dashMetrics,_=e.errHandler,T=e.streamController,E=e.mediaController,M=e.adapter,b=e.textController,A=e.abrController,w=e.playbackController,S=e.type,x=e.streamProcessor,D=e.settings,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0,k=void 0,U=void 0,B=void 0,F=void 0,z=void 0,G=void 0,H=void 0,Y=void 0,V=void 0,Q=void 0,q=void 0,W=void 0,X=void 0;function K(e,n){if(!Y||!e||!x)return null;if(j)try{"function"==typeof(U=n&&n[S]?(0,o.default)(t).create(j,e,te.bind(this),n[S]):(0,o.default)(t).create(j,e,te.bind(this))).getBuffer().initialize&&U.getBuffer().initialize(S,x)}catch(e){C.fatal("Caught error on create SourceBuffer: "+e),_.error(new m.default(v.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,v.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+S))}else U=(0,s.default)(t).create(te.bind(this));return _e(x.getRepresentationInfo(N).MSETimeOffset),U}function Z(e){e.fragmentModel===x.getFragmentModel()&&(C.info("Init fragment finished loading saving to",S+"'s init cache"),Y.save(e.chunk),C.debug("Append Init fragment",S," with representationId:",e.chunk.representationId," and quality:",e.chunk.quality,", data size:",e.chunk.bytes.byteLength),$(e.chunk))}function J(e){if(e.fragmentModel===x.getFragmentModel()){var n=e.chunk,r=n.bytes,i=n.quality,o=x.getRepresentationInfo(i),s=x.getRepresentationController(),u=s&&o?s.getRepresentationForQuality(o.quality):null,l=M.getEventsFor(o.mediaInfo),c=M.getEventsFor(o,u);if(l&&l.length>0||c&&c.length>0){var d=function(e,n,r,i){for(var a=Math.max(!n||isNaN(n.startTime)?0:n.startTime,0),o=[],s=[],u=r.concat(i),l=0,c=u.length;l<c;l++)o[u[l].schemeIdUri+"/"+u[l].value]=u[l];for(var d=(0,h.default)(t).getInstance().parse(e).getBoxes("emsg"),f=0,p=d.length;f<p;f++){var g=M.getEvent(d[f],o,a);g&&s.push(g)}return s}(r,x.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,quality:i,index:n.index})[0],l,c);x.addInbandEvents(d)}if(W){X=n;var f=U&&U.getAllBufferRanges();f&&f.length>0&&w.getTimeToStreamEnd()>.5&&(C.debug("Clearing buffer because track changed - "+(f.end(f.length-1)+.5)),me([{start:0,end:f.end(f.length-1)+.5,force:!0}]))}else $(n)}}function $(e){U.append(e),e.mediaInfo.type===r.default.VIDEO&&n.trigger(d.default.VIDEO_CHUNK_RECEIVED,{chunk:e})}function ee(e){if(e&&e.length>0)for(var t=0,n=e.length;t<n;t++)C.debug("Buffered Range",e.start(t)," - ",e.end(t)," currentTime = ",w.getTime())}function te(e){if(e.error){if(22===e.error.code&&(R=.8*Se(),C.warn("Quota exceeded, Critical Buffer: "+R),R>0)){var t=Math.max(.2*R,1),r=R-t,i={streaming:{bufferToKeep:parseFloat(t.toFixed(5)),bufferAheadToKeep:parseFloat(r.toFixed(5))}};D.update(i)}22!==e.error.code&&xe()||(C.warn("Clearing playback buffer to overcome quota exceed situation"),n.trigger(d.default.QUOTA_EXCEEDED,{sender:I,criticalBufferLevel:R}),ae())}else{(z=e.chunk)&&!isNaN(z.index)&&(P=Math.max(z.index,P),he());var a=U.getAllBufferRanges();if(z.segmentType===y.HTTPRequest.MEDIA_SEGMENT_TYPE)ee(a),oe();else if(W){var o=w.getTime();C.debug("AppendToBuffer seek target should be "+o),x.getScheduleController().setSeekTarget(o),x.setIndexHandlerTime(o)}var s={sender:I,quality:z.quality,startTime:z.start,index:z.index,bufferedRanges:a};z&&!z.endFragment?n.trigger(d.default.BYTES_APPENDED,s):z&&n.trigger(d.default.BYTES_APPENDED_END_FRAGMENT,s)}}function ne(e){N!==e.newQuality&&S===e.mediaType&&x.getStreamInfo().id===e.streamInfo.id&&(_e(x.getRepresentationInfo(e.newQuality).MSETimeOffset),N=e.newQuality)}function re(){L&&(Q=!0,L=!1,k=Number.POSITIVE_INFINITY),S!==r.default.FRAGMENTED_TEXT?ae():oe()}function ie(){V=void 0}function ae(){U.waitForUpdateEnd((function(){var e=function(){var e=[],t=U.getAllBufferRanges();if(!t||0===t.length)return e;var n=w.getTime(),r=t.end(t.length-1)+.5,i=x.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i){var o={start:0,end:i.startTime-.5},s=x.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime-i.duration/2,threshold:.01})[0];s&&s.startTime!=i.startTime&&(o.end=s.startTime),o.start<o.end&&o.end>t.start(0)&&e.push(o);var u={start:i.startTime+i.duration+.5,end:r},l=x.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:i.startTime+i.duration+.5,threshold:.01})[0];l&&l.startTime!==i.startTime&&(u.start=l.startTime+l.duration+.5),u.start<u.end&&u.start<r&&e.push(u)}else C.debug("getAllRangesWithSafetyFactor - No request found in current time position, removing full buffer 0 -",r),e.push({start:0,end:r});return e}();e&&0!==e.length||oe(),me(e)}))}function oe(){(!W||S===r.default.FRAGMENTED_TEXT&&b.isTextEnabled())&&(ce(),de())}function se(){fe()}function ue(){fe()}function le(e,t){var n=U.getAllBufferRanges(),r=0,i=0,a=null,o=null,s=0,u=void 0,l=void 0,c=t||.15;if(null!=n){for(l=0,u=n.length;l<u;l++)if(r=n.start(l),i=n.end(l),null===a)s=Math.abs(r-e),e>=r&&e<i?(a=r,o=i):s<=c&&(a=r,o=i);else{if(!((s=r-o)<=c))break;o=i}if(null!==a)return{start:a,end:o}}return null}function ce(){var e,t,r;w&&(e=function(){var e=w.getTime();if(V){var t=U.getAllBufferRanges();t&&t.length&&(e=Math.max(t.start(0),V))}return e}()||0,O=null===(r=le(e,t))?0:r.end-e,n.trigger(d.default.BUFFER_LEVEL_UPDATED,{sender:I,bufferLevel:O}),fe())}function de(){x&&T&&x.getStreamInfo()&&(f.addBufferState(S,F,x.getScheduleController().getBufferTarget()),f.addBufferLevel(S,new Date,1e3*O))}function he(){P>=k-1&&!L&&void 0===U.discharge&&(L=!0,C.debug("checkIfBufferingCompleted trigger BUFFERING_COMPLETED"),n.trigger(d.default.BUFFERING_COMPLETED,{sender:I,streamInfo:x.getStreamInfo()}))}function fe(){"audio"!==S&&"video"!==S||(Q&&!L&&O>0&&w&&w.getTimeToStreamEnd()-O<.5&&(Q=!1,L=!0,C.debug("checkIfSufficientBuffer trigger BUFFERING_COMPLETED"),n.trigger(d.default.BUFFERING_COMPLETED,{sender:I,streamInfo:x.getStreamInfo()})),(!D.get().streaming.lowLatencyEnabled&&O<.5||0===O)&&!L?pe(i.default.BUFFER_EMPTY):(L||O>=x.getStreamInfo().manifestInfo.minBufferTime)&&pe(i.default.BUFFER_LOADED))}function pe(e){F===e||e===i.default.BUFFER_EMPTY&&0===w.getTime()||S===r.default.FRAGMENTED_TEXT&&!b.isTextEnabled()||(F=e,de(),n.trigger(d.default.BUFFER_LEVEL_STATE_CHANGED,{sender:I,state:e,mediaType:S,streamInfo:x.getStreamInfo()}),n.trigger(e===i.default.BUFFER_LOADED?d.default.BUFFER_LOADED:d.default.BUFFER_EMPTY,{mediaType:S}),C.debug(e===i.default.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ge(){U&&S!==r.default.FRAGMENTED_TEXT&&(L||me(function(){var e=[],t=U.getAllBufferRanges();if(!t||0===t.length)return e;var n=w.getTime(),r={start:Math.max(0,n-D.get().streaming.bufferToKeep),end:n+D.get().streaming.bufferAheadToKeep},i=x.getFragmentModel().getRequests({state:a.default.FRAGMENT_MODEL_EXECUTED,time:n,threshold:.01})[0];if(i)r.start=Math.min(i.startTime,r.start),r.end=Math.max(i.startTime+i.duration,r.end);else if(0===n&&w.getIsDynamic())return[];if(t.start(0)<=r.start){for(var o={start:0,end:r.start},s=0;s<t.length&&t.end(s)<=r.start;s++)o.end=t.end(s);o.start<o.end&&e.push(o)}if(t.end(t.length-1)>=r.end){var u={start:r.end,end:t.end(t.length-1)+.01};u.start<u.end&&e.push(u)}return e}()))}function me(e){e&&U&&0!==e.length&&(q.push.apply(q,e),H||ve())}function ve(){if(0===q.length||!U)return C.debug("Nothing to prune, halt pruning"),q=[],void(H=!1);var e=U.getBuffer();if(!e||!e.buffered||0===e.buffered.length)return C.debug("SourceBuffer is empty (or does not exist), halt pruning"),q=[],void(H=!1);var t=q.shift();C.debug("Removing buffer from:",t.start,"to",t.end),H=!0;var n=w.getTime();n<t.end&&(L=!1,P=0,W||(x.getScheduleController().setSeekTarget(n),x.setIndexHandlerTime(n))),U.remove(t.start,t.end,t.force)}function ye(e){U===e.buffer&&(C.debug("onRemoved buffer from:",e.from,"to",e.to),ee(U.getAllBufferRanges()),0===q.length&&(H=!1),e.unintended&&(C.warn("Detected unintended removal from:",e.from,"to",e.to,"setting index handler time to",e.from),x.setIndexHandlerTime(e.from)),H?ve():(W?(W=!1,X&&$(X)):(C.debug("onRemoved : call updateBufferLevel"),ce()),n.trigger(d.default.BUFFER_CLEARED,{sender:I,from:e.from,to:e.to,unintended:e.unintended,hasEnoughSpaceToAppend:xe()})))}function _e(e){U&&U.updateTimestampOffset&&U.updateTimestampOffset(e)}function Te(e){e.sender.getType()!==x.getType()||e.sender.getStreamId()!==x.getStreamInfo().id||e.error||_e(e.currentRepresentation.MSETimeOffset)}function Ee(e){e.fragmentModel===x.getFragmentModel()&&(k=e.request.index,he())}function Me(e){var t=U&&U.getAllBufferRanges();t&&e.newMediaInfo.type===S&&e.newMediaInfo.streamInfo.id===x.getStreamInfo().id&&(C.info("Track change asked"),E.getSwitchMode(S)===l.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&t&&t.length>0&&w.getTimeToStreamEnd()>.5&&(L=!1,k=Number.POSITIVE_INFINITY))}function be(){++G*(D.get().streaming.wallclockTimeUpdateInterval/1e3)>=D.get().streaming.bufferPruningInterval&&(G=0,ge())}function Ae(){fe()}function we(e,t){j=e,U&&t&&"function"==typeof U.discharge&&(B=U,K(t))}function Se(){var e,t=U.getAllBufferRanges(),n=0,r=void 0;if(!t)return n;for(r=0,e=t.length;r<e;r++)n+=t.end(r)-t.start(r);return n}function xe(){return Se()<R}function De(e,t){R=Number.POSITIVE_INFINITY,F=void 0,N=u.default.QUALITY_DEFAULT,k=Number.POSITIVE_INFINITY,P=0,z=null,L=!1,H=!1,Q=!1,O=0,G=0,q=[],U&&(e||U.abort(),U.reset(t),U=null),W=!1}return I={getBufferControllerType:function(){return"BufferController"},initialize:function(e){we(e),N=A.getQualityFor(S),n.on(d.default.DATA_UPDATE_COMPLETED,Te,this),n.on(d.default.INIT_FRAGMENT_LOADED,Z,this),n.on(d.default.MEDIA_FRAGMENT_LOADED,J,this),n.on(d.default.QUALITY_CHANGE_REQUESTED,ne,this),n.on(d.default.STREAM_COMPLETED,Ee,this),n.on(d.default.PLAYBACK_PLAYING,ue,this),n.on(d.default.PLAYBACK_PROGRESS,oe,this),n.on(d.default.PLAYBACK_TIME_UPDATED,oe,this),n.on(d.default.PLAYBACK_RATE_CHANGED,Ae,this),n.on(d.default.PLAYBACK_SEEKING,re,this),n.on(d.default.PLAYBACK_SEEKED,ie,this),n.on(d.default.PLAYBACK_STALLED,se,this),n.on(d.default.WALLCLOCK_TIME_UPDATED,be,this),n.on(d.default.CURRENT_TRACK_CHANGED,Me,this,c.default.EVENT_PRIORITY_HIGH),n.on(d.default.SOURCEBUFFER_REMOVE_COMPLETED,ye,this)},createBuffer:K,dischargePreBuffer:function(){if(U&&B&&"function"==typeof B.discharge){var e=B.getAllBufferRanges();if(e.length>0){for(var t="Beginning "+S+"PreBuffer discharge, adding buffer for:",n=0;n<e.length;n++)t+=" start: "+e.start(n)+", end: "+e.end(n)+";";C.debug(t)}else C.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");for(var r=B.discharge(),i=null,a=0;a<r.length;a++){var o=r[a],s=Y.extract(o.streamId,o.representationId);s&&(i!==s&&(U.append(s),i=s),U.append(o))}B.reset(),B=null}},getType:function(){return S},getStreamProcessor:function(){return x},setSeekStartTime:function(e){V=e},getBuffer:function(){return U},setBuffer:function(e){U=e},getBufferLevel:function(){return O},getRangeAt:le,setMediaSource:we,getMediaSource:function(){return j},getIsBufferingCompleted:function(){return L},switchInitData:function(e,t,r){var i=Y.extract(e,t);W=!0===r&&r,i?(C.info("Append Init fragment",S," with representationId:",i.representationId," and quality:",i.quality,", data size:",i.bytes.byteLength),$(i)):n.trigger(d.default.INIT_REQUESTED,{sender:I})},getIsPruningInProgress:function(){return H},reset:function(e,t){n.off(d.default.DATA_UPDATE_COMPLETED,Te,this),n.off(d.default.QUALITY_CHANGE_REQUESTED,ne,this),n.off(d.default.INIT_FRAGMENT_LOADED,Z,this),n.off(d.default.MEDIA_FRAGMENT_LOADED,J,this),n.off(d.default.STREAM_COMPLETED,Ee,this),n.off(d.default.CURRENT_TRACK_CHANGED,Me,this),n.off(d.default.PLAYBACK_PLAYING,ue,this),n.off(d.default.PLAYBACK_PROGRESS,oe,this),n.off(d.default.PLAYBACK_TIME_UPDATED,oe,this),n.off(d.default.PLAYBACK_RATE_CHANGED,Ae,this),n.off(d.default.PLAYBACK_SEEKING,re,this),n.off(d.default.PLAYBACK_SEEKED,ie,this),n.off(d.default.PLAYBACK_STALLED,se,this),n.off(d.default.WALLCLOCK_TIME_UPDATED,be,this),n.off(d.default.SOURCEBUFFER_REMOVE_COMPLETED,ye,this),De(e,t)}},C=(0,p.default)(t).getInstance().getLogger(I),Y=(0,g.default)(t).getInstance(),De(),I}T.__dashjs_factory_name="BufferController",t.default=f.default.getClassFactory(T)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(6)),i=c(n(8)),a=c(n(5)),o=c(n(7)),s=c(n(1)),u=c(n(47)),l=c(n(9));function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n,s){var c=this.context,d=(0,a.default)(c).getInstance(),h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=[],y=[],_=n;function T(){try{return p.buffered}catch(e){return f.error("getAllBufferRanges exception: "+e.message),null}}function E(){var e=this;if(y.length>0){g=!0;var t=y[0];y.splice(0,1);var n=[],r=function(){var r=T();!function(e,t,n,r){t&&t.length>0&&t.length<n.length&&function(e,t){for(var n=0;n<e.length;n++){var r=Math.round(e.start(n)),i=Math.round(e.end(n));if(i===t.start||r===t.end||t.start>=r&&t.end<=i)return!0}return!1}(t,r)&&d.trigger(o.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:e,from:n.end(n.length-2),to:n.start(n.length-1),unintended:!0})}(e,n,r,t),y.length>0?E.call(this):(g=!1,_&&_({chunk:t}))};try{0===t.bytes.length?r.call(this):(n=T(),p.appendBuffer?p.appendBuffer(t.bytes):p.append(t.bytes,t),S(r.bind(this)))}catch(e){f.fatal('SourceBuffer append failed "'+e+'"'),y.length>0?E():g=!1,_&&_({chunk:t,error:new i.default(e.code,e.message)})}}}function M(){if(v.length>0){var e=v.shift();p.updating?S(e):(e(),M())}}function b(){p.updating||M()}function A(){p.updating||M()}function w(){f.error("SourceBufferSink error",t.type)}function S(e){v.push(e),p.updating||M()}return h={getAllBufferRanges:T,getBuffer:function(){return p},append:function(e){e?(y.push(e),g||S(E.bind(this))):_({chunk:e,error:new i.default(l.default.APPEND_ERROR_CODE,l.default.APPEND_ERROR_MESSAGE)})},remove:function(t,n,r){var a=this;S((function(){try{t>=0&&n>t&&(r||"ended"!==e.readyState)&&p.remove(t,n),S((function(){d.trigger(o.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:a,from:t,to:n,unintended:!1})}))}catch(e){d.trigger(o.default.SOURCEBUFFER_REMOVE_COMPLETED,{buffer:a,from:t,to:n,unintended:!1,error:new i.default(e.code,e.message)})}}))},abort:function(){try{"open"===e.readyState?p.abort():p.setTextTrack&&"ended"===e.readyState&&p.abort()}catch(e){f.error('SourceBuffer append abort failed: "'+e+'"')}y=[]},reset:function(t){if(p){if("function"==typeof p.removeEventListener&&(p.removeEventListener("updateend",A,!1),p.removeEventListener("error",w,!1),p.removeEventListener("abort",w,!1)),clearInterval(m),!t){try{p.getClassName&&"TextSourceBuffer"===p.getClassName()||e.removeSourceBuffer(p)}catch(e){f.error("Failed to remove source buffer from media source.")}p=null}g=!1}y=[],_=null},updateTimestampOffset:function(e){p.timestampOffset===e||isNaN(e)||S((function(){p.timestampOffset=e}))},hasDiscontinuitiesAfter:function(e){try{var t=T();if(t&&t.length>1)for(var n=0,r=t.length;n<r;n++)if(n>0&&e<t.start(n)&&t.start(n)>t.end(n-1)+.1)return!0}catch(e){f.error("hasDiscontinuities exception: "+e.message)}return!1},waitForUpdateEnd:S},function(){f=(0,r.default)(c).getInstance().getLogger(h),g=!1;var n=t.codec;try{if(n.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))throw new Error("not really supported");(p=s||e.addSourceBuffer(n)).changeType&&s&&(f.debug("Doing period transition with changeType"),p.changeType(n));if("function"==typeof p.addEventListener)try{p.addEventListener("updateend",A,!1),p.addEventListener("error",w,!1),p.addEventListener("abort",w,!1)}catch(e){m=setInterval(b,50)}else m=setInterval(b,50)}catch(e){if(!t.isText&&-1===n.indexOf('codecs="stpp')&&-1===n.indexOf('codecs="wvtt'))throw e;var i=(0,u.default)(c).getInstance();p=i.getTextSourceBuffer()}}(),h}d.__dashjs_factory_name="SourceBufferSink";var h=s.default.getClassFactory(d);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r},o=n(17);function s(){return{customTimeRangeArray:[],length:0,add:function(e,t){var n=0;for(n=0;n<this.customTimeRangeArray.length&&e>this.customTimeRangeArray[n].start;n++);for(this.customTimeRangeArray.splice(n,0,{start:e,end:t}),n=0;n<this.customTimeRangeArray.length-1;n++)this.mergeRanges(n,n+1)&&n--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(e,t){for(var n=0;n<this.customTimeRangeArray.length;n++)if(e<=this.customTimeRangeArray[n].start&&t>=this.customTimeRangeArray[n].end)this.customTimeRangeArray.splice(n,1),n--;else{if(e>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end){this.customTimeRangeArray.splice(n+1,0,{start:t,end:this.customTimeRangeArray[n].end}),this.customTimeRangeArray[n].end=e;break}e>this.customTimeRangeArray[n].start&&e<this.customTimeRangeArray[n].end?this.customTimeRangeArray[n].end=e:t>this.customTimeRangeArray[n].start&&t<this.customTimeRangeArray[n].end&&(this.customTimeRangeArray[n].start=t)}this.length=this.customTimeRangeArray.length},mergeRanges:function(e,t){var n=this.customTimeRangeArray[e],r=this.customTimeRangeArray[t];return n.start<=r.start&&r.start<=n.end&&n.end<=r.end?(n.end=r.end,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&r.end<=n.end?(n.start=r.start,this.customTimeRangeArray.splice(t,1),!0):r.start<=n.start&&n.start<=r.end&&n.end<=r.end?(this.customTimeRangeArray.splice(e,1),!0):n.start<=r.start&&r.start<=n.end&&r.end<=n.end&&(this.customTimeRangeArray.splice(t,1),!0)},start:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].start},end:function(e){return(0,o.checkInteger)(e),e>=this.customTimeRangeArray.length||e<0?NaN:this.customTimeRangeArray[e].end}}}s.__dashjs_factory_name="CustomTimeRanges",t.default=a.default.getClassFactory(s)},function(e,t,n){t.generateISD=n(133).generateISD,t.fromXML=n(134).fromXML,t.renderHTML=n(150).render},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";(function(t,r){var i=n(37);e.exports=_;var a,o=n(81);_.ReadableState=y;n(52).EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n(83),l=n(38).Buffer,c=t.Uint8Array||function(){};var d=Object.create(n(28));d.inherits=n(23);var h=n(139),f=void 0;f=h&&h.debuglog?h.debuglog("stream"):function(){};var p,g=n(140),m=n(84);d.inherits(_,u);var v=["error","close","destroy","pause","resume"];function y(e,t){e=e||{};var r=t instanceof(a=a||n(20));this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new g,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=n(55).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function _(e){if(a=a||n(20),!(this instanceof _))return new _(e);this._readableState=new y(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function T(e,t,n,r,i){var a,o=e._readableState;null===t?(o.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,b(e)}(e,o)):(i||(a=function(e,t){var n;r=t,l.isBuffer(r)||r instanceof c||"string"==typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));var r;return n}(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):E(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?E(e,o,t,!1):w(e,o)):E(e,o,t,!1))):r||(o.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(o)}function E(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&b(e)),w(e,t)}Object.defineProperty(_.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),_.prototype.destroy=m.destroy,_.prototype._undestroy=m.undestroy,_.prototype._destroy=function(e,t){this.push(null),t(e)},_.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),T(this,e,t,!1,n)},_.prototype.unshift=function(e){return T(this,e,null,!0,!1)},_.prototype.isPaused=function(){return!1===this._readableState.flowing},_.prototype.setEncoding=function(e){return p||(p=n(55).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};function M(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=8388608?e=8388608:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function b(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?i.nextTick(A,e):A(e))}function A(e){f("emit readable"),e.emit("readable"),I(e)}function w(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(S,e,t))}function S(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function x(e){f("readable nexttick read 0"),e.read(0)}function D(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),I(e),t.flowing&&!t.reading&&e.read(0)}function I(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function C(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=function(e,t,n){var r;e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?function(e,t){var n=t.head,r=1,i=n.data;e-=i.length;for(;n=n.next;){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?i+=a:i+=a.slice(0,e),0===(e-=o)){o===a.length?(++r,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++r}return t.length-=r,i}(e,t):function(e,t){var n=l.allocUnsafe(e),r=t.head,i=1;r.data.copy(n),e-=r.data.length;for(;r=r.next;){var a=r.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),0===(e-=o)){o===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(o));break}++i}return t.length-=i,n}(e,t);return r}(e,t.buffer,t.decoder),n);var n}function N(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,i.nextTick(L,t,e))}function L(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function O(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}_.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?N(this):b(this),null;if(0===(e=M(e,t))&&t.ended)return 0===t.length&&N(this),null;var r,i=t.needReadable;return f("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",i=!0),t.ended||t.reading?f("reading or ended",i=!1):i&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=M(n,t))),null===(r=e>0?C(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&N(this)),null!==r&&this.emit("data",r),r},_.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},_.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,t);var u=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr?c:_;function l(t,r){f("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,f("cleanup"),e.removeListener("close",v),e.removeListener("finish",y),e.removeListener("drain",d),e.removeListener("error",m),e.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",_),n.removeListener("data",g),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d())}function c(){f("onend"),e.end()}a.endEmitted?i.nextTick(u):n.once("end",u),e.on("unpipe",l);var d=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,I(e))}}(n);e.on("drain",d);var h=!1;var p=!1;function g(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==O(a.pipes,e))&&!h&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function m(t){f("onerror",t),_(),e.removeListener("error",m),0===s(e,"error")&&e.emit("error",t)}function v(){e.removeListener("finish",y),_()}function y(){f("onfinish"),e.removeListener("close",v),_()}function _(){f("unpipe"),n.unpipe(e)}return n.on("data",g),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",m),e.once("close",v),e.once("finish",y),e.emit("pipe",n),a.flowing||(f("pipe resume"),n.resume()),e},_.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,n);return this}var o=O(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},_.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&b(this):i.nextTick(x,this))}return n},_.prototype.addListener=_.prototype.on,_.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(D,e,t))}(this,e)),this},_.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},_.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){(f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<v.length;a++)e.on(v[a],this.emit.bind(this,v[a]));return this._read=function(t){f("wrapped _read",t),r&&(r=!1,e.resume())},this},Object.defineProperty(_.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),_._fromList=C}).call(this,n(13),n(36))},function(e,t,n){e.exports=n(52).EventEmitter},function(e,t,n){"use strict";var r=n(37);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(r.nextTick(i,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,n){"use strict";e.exports=o;var r=n(20),i=Object.create(n(28));function a(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);r.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}i.inherits=n(23),i.inherits(o,r),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,r.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;r.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"extend",value:function(e,t){if(e){var n=!!t&&t.override,r=!!t&&t.publicOnly;for(var i in e)!e.hasOwnProperty(i)||this[i]&&!n||r&&-1===e[i].indexOf("public_")||(this[i]=e[i])}}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(88)),i=_(n(4)),a=_(n(14)),o=_(n(89)),s=_(n(33)),u=_(n(5)),l=_(n(7)),c=_(n(1)),d=_(n(161)),h=_(n(16)),f=_(n(162)),p=_(n(163)),g=_(n(164)),m=_(n(6)),v=n(11),y=n(17);function _(e){return e&&e.__esModule?e:{default:e}}function T(){var e=this.context,t=(0,m.default)(e).getInstance(),n=(0,u.default)(e).getInstance(),c=void 0,_=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0,w=void 0,S=void 0,x=void 0,D=void 0,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0,k=void 0,U=void 0,B=void 0,F=void 0;function z(){(T=(0,r.default)(e).create({dashMetrics:B,mediaPlayerModel:L,settings:F})).initialize()}function G(){M={},b={},w={},A={},j={},U={},void 0===x&&(x=!1),R=void 0,P=void 0,k=void 0,clearTimeout(S),S=null}function H(e){e.mediaType===i.default.VIDEO&&(R=e.oldQuality,P.push(R,N.getPlaybackQuality()))}function Y(e){e.metric!==a.default.HTTP_REQUEST||!e.value||e.value.type!==v.HTTPRequest.MEDIA_SEGMENT_TYPE||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||k.push(e.mediaType,e.value,F.get().streaming.abr.useDeadTimeLatency),e.metric!==a.default.BUFFER_LEVEL||e.mediaType!==i.default.AUDIO&&e.mediaType!==i.default.VIDEO||function(e,t){var n=F.get().streaming.ABRStrategy;if(n===i.default.ABR_STRATEGY_BOLA)return void(U[e]=!0);if(n===i.default.ABR_STRATEGY_THROUGHPUT)return void(U[e]=!1);var r=L.getStableBufferTime(),a=r,o=.5*r,s=U[e],u=t>(s?o:a);U[e]=u,u!==s&&(u?_.info("["+e+"] switching from throughput to buffer occupancy ABR rule (buffer: "+t.toFixed(3)+")."):_.info("["+e+"] switching from buffer occupancy to throughput ABR rule (buffer: "+t.toFixed(3)+")."))}(e.mediaType,.001*e.value.level)}function V(e,t){return M[t]=M[t]||{},M[t].hasOwnProperty(e)||(M[t][e]=0),function(e,t){if(t!==i.default.VIDEO||!F.get().streaming.abr.limitBitrateByPortal||!A[t])return e;x||te();var n=C.getAdaptationForType(0,t).Representation,r=e;if(D>0&&I>0){for(;r>0&&n[r]&&D<n[r].width&&D-n[r-1].width<n[r].width-D;)r-=1;for(;r<n.length-1&&n[r].width===n[r+1].width;)r+=1}return r}(function(e,t,n){var r=F.get().streaming.abr.maxRepresentationRatio[t];if(isNaN(r)||r>=1||r<0)return e;return Math.min(e,Math.round(n*r))}(function(e,t){var n=e;if(!A[t])return n;var r=q(t);void 0!==r&&(n=Math.max(e,r));var i=Q(t);void 0!==i&&(n=Math.min(n,i));return n}(M[t][e],e),e,M[t][e]),e)}function Q(e){var t=function(e){return F.get().streaming.abr.maxBitrate[e]}(e);return t>-1?Z(A[e].getMediaInfo(),t):void 0}function q(e){var t=function(e){return F.get().streaming.abr.minBitrate[e]}(e);if(t>-1){var n=A[e].getMediaInfo(),r=J(n),i=Z(n,t);return r[i]&&i<r.length-1&&r[i].bitrate<1e3*t&&i++,i}}function W(e,t,n,r){var i=t.id,a=ee(e);(0,y.checkInteger)(n);var o=V(e,i);n!==a&&n>=0&&n<=o&&X(e,a,n,o,r)}function X(e,t,r,i,a){if(e&&A[e]){var o=A[e].getStreamInfo(),s=o?o.id:null;if(F.get().debug.logLevel===m.default.LOG_LEVEL_DEBUG){var u=B.getCurrentBufferLevel(e,!0);_.info("["+e+"] switch from "+t+" to "+r+"/"+i+" (buffer: "+u+") "+(a?JSON.stringify(a):"."))}!function(e,t,n){b[t]=b[t]||{},b[t][e]=n}(e,s,r),n.trigger(l.default.QUALITY_CHANGE_REQUESTED,{mediaType:e,streamInfo:o,oldQuality:t,newQuality:r,reason:a});var c=k.getAverageThroughput(e);isNaN(c)||O.setSavedBitrateSettings(e,c)}}function K(e,t){w[e].state=t}function Z(e,t,n){var r=e&&e.type?A[e.type].getRepresentationInfo():null;if(F.get().streaming.abr.useDeadTimeLatency&&n&&r&&r.fragmentDuration){n/=1e3;var i=r.fragmentDuration;if(n>i)return 0;t*=1-n/i}for(var a=J(e),o=a.length-1;o>=0;o--){if(1e3*t>=a[o].bitrate)return o}return 0}function J(e){var t=[];if(!e||!e.bitrateList)return t;for(var n=e.bitrateList,r=e.type,i=void 0,a=0,s=n.length;a<s;a++)(i=new o.default).mediaType=r,i.qualityIndex=a,i.bitrate=n[a].bandwidth,i.width=n[a].width,i.height=n[a].height,i.scanType=n[a].scanType,t.push(i);return t}function $(e){return U[e]}function ee(e){if(e&&A[e]){var t=A[e].getStreamInfo(),n=t?t.id:null;if(n)return b[n]=b[n]||{},b[n].hasOwnProperty(e)||(b[n][e]=0),b[n][e]}return 0}function te(){if(N){var e=F.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;D=N.getClientWidth()*e,I=N.getClientHeight()*e}}function ne(t){var n=t.request.mediaType;if(F.get().streaming.abr.autoSwitchBitrate[n]){var r=A[n];if(!r)return;var i=(0,d.default)(e).create({abrController:c,streamProcessor:r,currentRequest:t.request,useBufferOccupancyABR:$(n)}),o=T.shouldAbandonFragment(i);if(o.quality>h.default.NO_CHANGE){var u=r.getFragmentModel();u.getRequests({state:s.default.FRAGMENT_MODEL_LOADING,index:t.request.index})[0]&&(u.abortRequests(),K(n,a.default.ABANDON_LOAD),j[n].reset(),j[n].push({oldValue:ee(n),newValue:o.quality,confidence:1,reason:o.reason}),W(n,E.getActiveStreamInfo(),o.quality,o.reason),clearTimeout(S),S=setTimeout((function(){K(n,a.default.ALLOW_LOAD),S=null}),F.get().streaming.abandonLoadTimeout))}}}return c={isPlayingAtTopQuality:function(e){var t=e?e.id:null,n=ee(i.default.AUDIO),r=ee(i.default.VIDEO);return n===V(i.default.AUDIO,t)&&r===V(i.default.VIDEO,t)},updateTopQualityIndex:function(e){var t=e.type,n=e.streamInfo.id,r=e.representationCount-1;return function(e,t,n){M[t]=M[t]||{},M[t][e]=n}(t,n,r),r},getThroughputHistory:function(){return k},getBitrateList:J,getQualityForBitrate:Z,getTopBitrateInfoFor:function(e){if(e&&A&&A[e]){var t=A[e].getStreamInfo();if(t&&t.id){var n=V(e,t.id),r=J(A[e].getMediaInfo());return r[n]?r[n]:null}}return null},getMaxAllowedIndexFor:Q,getMinAllowedIndexFor:q,getInitialBitrateFor:function(e){if(function(){if(!O||!O.hasOwnProperty("getSavedBitrateSettings"))throw new Error(i.default.MISSING_CONFIG_ERROR)}(),e===i.default.TEXT||e===i.default.FRAGMENTED_TEXT)return NaN;var t=O.getSavedBitrateSettings(e),n=F.get().streaming.abr.initialBitrate[e],r=F.get().streaming.abr.initialRepresentationRatio[e];if(-1===n)if(r>-1){var a=C.getAdaptationForType(0,e).Representation;if(Array.isArray(a))n=a[Math.max(Math.round(a.length*r)-1,0)].bandwidth;else n=0}else n=isNaN(t)?e===i.default.VIDEO?1e3:100:t;return n},getQualityFor:ee,getAbandonmentStateFor:function(e){return w[e]?w[e].state:null},setPlaybackQuality:W,checkPlaybackQuality:function(t){if(t&&A&&A[t]){var n=A[t].getStreamInfo(),r=n?n.id:null,i=ee(t),o=(0,d.default)(e).create({abrController:c,streamProcessor:A[t],currentValue:i,switchHistory:j[t],droppedFramesHistory:P,useBufferOccupancyABR:$(t)});if(P){var s=N.getPlaybackQuality();s&&P.push(R,s)}if(F.get().streaming.abr.autoSwitchBitrate[t]){var u=q(t),l=V(t,r),f=T.getMaxQuality(o),p=f.quality;if(void 0!==u&&(p>h.default.NO_CHANGE?p:i)<u&&(p=u),p>l&&(p=l),j[t].push({oldValue:i,newValue:p}),p>h.default.NO_CHANGE&&p!=i)(w[t].state===a.default.ALLOW_LOAD||p>i)&&X(t,i,p,l,f.reason);else if(F.get().debug.logLevel===m.default.LOG_LEVEL_DEBUG){var g=B.getCurrentBufferLevel(t,!0);_.debug("["+t+"] stay on "+i+"/"+l+" (buffer: "+g+")")}}}},getTopQualityIndexFor:V,setElementSize:te,setWindowResizeEventCalled:function(e){x=e},createAbrRulesCollection:z,registerStreamType:function(t,r){j[t]=j[t]||(0,f.default)(e).create(),A[t]=r,w[t]=w[t]||{},w[t].state=a.default.ALLOW_LOAD,U[t]=!1,n.on(l.default.LOADING_PROGRESS,ne,this),t==i.default.VIDEO&&(n.on(l.default.QUALITY_CHANGE_RENDERED,H,this),P=P||(0,p.default)(e).create(),te()),n.on(l.default.METRIC_ADDED,Y,this),n.on(l.default.PERIOD_SWITCH_COMPLETED,z,this),k=k||(0,g.default)(e).create({settings:F})},unRegisterStreamType:function(e){delete A[e]},setConfig:function(e){e&&(e.streamController&&(E=e.streamController),e.domStorage&&(O=e.domStorage),e.mediaPlayerModel&&(L=e.mediaPlayerModel),e.dashMetrics&&(B=e.dashMetrics),e.adapter&&(C=e.adapter),e.videoModel&&(N=e.videoModel),e.settings&&(F=e.settings))},reset:function(){G(),n.off(l.default.LOADING_PROGRESS,ne,this),n.off(l.default.QUALITY_CHANGE_RENDERED,H,this),n.off(l.default.METRIC_ADDED,Y,this),n.off(l.default.PERIOD_SWITCH_COMPLETED,z,this),T&&T.reset()}},_=t.getLogger(c),G(),c}T.__dashjs_factory_name="AbrController";var E=c.default.getSingletonFactory(T);E.QUALITY_DEFAULT=0,c.default.updateSingletonFactory(T.__dashjs_factory_name,E),t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(155)),i=d(n(156)),a=d(n(157)),o=d(n(158)),s=d(n(159)),u=d(n(160)),l=d(n(1)),c=d(n(16));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,l=e.dashMetrics,d=e.settings,h=void 0,f=void 0;function p(e){return e.filter((function(e){return e.quality>c.default.NO_CHANGE}))}function g(e){var n,r={},i=void 0,a=void 0,o=void 0,s=void 0;if(0!==e.length){for(r[c.default.PRIORITY.STRONG]=c.default.NO_CHANGE,r[c.default.PRIORITY.WEAK]=c.default.NO_CHANGE,r[c.default.PRIORITY.DEFAULT]=c.default.NO_CHANGE,i=0,n=e.length;i<n;i+=1)(a=e[i]).quality!==c.default.NO_CHANGE&&(r[a.priority]=r[a.priority]>c.default.NO_CHANGE?Math.min(r[a.priority],a.quality):a.quality);return r[c.default.PRIORITY.WEAK]!==c.default.NO_CHANGE&&(o=r[c.default.PRIORITY.WEAK]),r[c.default.PRIORITY.DEFAULT]!==c.default.NO_CHANGE&&(o=r[c.default.PRIORITY.DEFAULT]),r[c.default.PRIORITY.STRONG]!==c.default.NO_CHANGE&&(o=r[c.default.PRIORITY.STRONG]),o!==c.default.NO_CHANGE&&(s=o),(0,c.default)(t).create(s)}}return{initialize:function(){h=[],f=[],d.get().streaming.abr.useDefaultABRRules&&(h.push((0,u.default)(t).create({dashMetrics:l,mediaPlayerModel:n,settings:d})),h.push((0,r.default)(t).create({dashMetrics:l})),h.push((0,i.default)(t).create({dashMetrics:l})),h.push((0,s.default)(t).create()),h.push((0,o.default)(t).create()),f.push((0,a.default)(t).create({dashMetrics:l,mediaPlayerModel:n,settings:d}))),n.getABRCustomRules().forEach((function(e){"qualitySwitchRules"===e.type&&h.push(e.rule(t).create()),"abandonFragmentRules"===e.type&&f.push(e.rule(t).create())}))},reset:function(){[h,f].forEach((function(e){e&&e.length&&e.forEach((function(e){return e.reset&&e.reset()}))})),h=[],f=[]},getMaxQuality:function(e){return g(p(h.map((function(t){return t.getMaxIndex(e)}))))||(0,c.default)(t).create()},shouldAbandonFragment:function(e){return g(p(f.map((function(t){return t.shouldAbandon(e)}))))||(0,c.default)(t).create()}}}h.__dashjs_factory_name="ABRRulesCollection";var f=l.default.getClassFactory(h);f.QUALITY_SWITCH_RULES="qualitySwitchRules",f.ABANDON_FRAGMENT_RULES="abandonFragmentRules",l.default.updateSingletonFactory(h.__dashjs_factory_name,f),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.bitrate=null,this.width=null,this.height=null,this.scanType=null,this.qualityIndex=NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(15)),i=f(n(19)),a=n(11),o=f(n(7)),s=f(n(5)),u=f(n(1)),l=f(n(6)),c=f(n(18)),d=n(24),h=f(n(172));function f(e){return e&&e.__esModule?e:{default:e}}function p(e){e=e||{};var t=this.context,n=(0,s.default)(t).getInstance(),u=(0,c.default)(t).getInstance(),f=e.type,p=e.streamInfo,g=e.timelineConverter,m=e.dashMetrics,v=e.baseURLController,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0,w=void 0;function S(){return f}function x(){T=-1,E=null}function D(){x(),b=0,M=null,w=null}function I(e,t,n){var r=v.resolve(n.path),i=void 0,a=void 0;return r&&t!==r.url&&u.isRelative(t)?(i=r.url,a=r.serviceLocation,t&&(i=u.resolve(t,i))):i=t,!u.isRelative(i)&&(e.url=i,e.serviceLocation=a,!0)}function C(e){var t,r,i;e.sender.getType()===S()&&(t=e.representation,r=t.hasInitialization(),i=t.hasSegments(),r&&i?n.trigger(o.default.REPRESENTATION_UPDATE_COMPLETED,{sender:y,representation:t}):w.update(t,S(),r,i))}function N(e,t){if(null==t)return null;var n=new i.default,r=t.representation,o=r.adaptation.period.mpd.manifest.Period_asArray[r.adaptation.period.index].AdaptationSet_asArray[r.adaptation.index].Representation_asArray[r.index].bandwidth,s=t.media;return s=(0,d.replaceTokenForTemplate)(s,"Number",t.replacementNumber),s=(0,d.replaceTokenForTemplate)(s,"Time",t.replacementTime),s=(0,d.replaceTokenForTemplate)(s,"Bandwidth",o),s=(0,d.replaceIDForTemplate)(s,r.id),s=(0,d.unescapeDollarsInTemplate)(s),n.mediaType=S(),n.type=a.HTTPRequest.MEDIA_SEGMENT_TYPE,n.range=t.mediaRange,n.startTime=t.presentationStartTime,n.duration=t.duration,n.timescale=r.timescale,n.availabilityStartTime=t.availabilityStartTime,n.availabilityEndTime=t.availabilityEndTime,n.wallStartTime=t.wallStartTime,n.quality=r.index,n.index=t.availabilityIdx,n.mediaInfo=e,n.adaptationIndex=r.adaptation.index,n.representationId=r.id,I(n,s,r)?n:void 0}function L(e){var t=!1;if(!e)return t;if(A){if(E){var n=parseFloat((E.presentationStartTime-e.adaptation.period.start).toFixed(5));t=(E.duration>0?n+1.5*E.duration:n)>=e.adaptation.period.duration}}else T>=e.availableSegmentsNumber&&(t=!0);return t}function O(e){var t=e.representation;t.segments&&n.trigger(o.default.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:t})}function R(e){if(!e.error&&S()===e.mediaType){var t,r=e.segments,i=e.representation,a=[],s=0,u=void 0,l=void 0,c=void 0;for(u=0,t=r?r.length:0;u<t;u++)l=r[u],(c=(0,d.getTimeBasedSegment)(g,A,i,l.startTime,l.duration,l.timescale,l.media,l.mediaRange,s))&&(a.push(c),c=null,s++);if(a.length>0)if(i.segmentAvailabilityRange={start:a[0].presentationStartTime,end:a[t-1].presentationStartTime},i.availableSegmentsNumber=a.length,i.segments=a,A)!function(e){g.setExpectedLiveEdge(e),m.updateManifestUpdateInfo({presentationStartTime:e})}(a[a.length-1].presentationStartTime-8);i.hasInitialization()&&n.trigger(o.default.REPRESENTATION_UPDATE_COMPLETED,{sender:this,representation:i})}}return y={initialize:function(e){A=e,w.initialize(e)},getType:S,getStreamInfo:function(){return p},getInitRequest:function(e,t){return t?function(e,t,n){var r=new i.default,o=t.adaptation.period,s=o.start;if(r.mediaType=n,r.type=a.HTTPRequest.INIT_SEGMENT_TYPE,r.range=t.range,r.availabilityStartTime=g.calcAvailabilityStartTimeFromPresentationTime(s,o.mpd,A),r.availabilityEndTime=g.calcAvailabilityEndTimeFromPresentationTime(s+o.duration,o.mpd,A),r.quality=t.index,r.mediaInfo=e,r.representationId=t.id,I(r,t.initialization,t))return r.url=(0,d.replaceTokenForTemplate)(r.url,"Bandwidth",t.bandwidth),r}(e,t,S()):null},getSegmentRequestForTime:function(e,t,n,a){var o=null;if(!t||!t.segmentInfoType)return o;var s=T,u=!!a&&a.keepIdx,l=!(!a||!a.ignoreIsFinished);M!==n&&(M=n,_.debug("Getting the request for time : "+n));var c=w.getSegmentByTime(t,n);return c?(T=c.availabilityIdx,E=c,_.debug("Index for time "+n+" is "+T),o=N(e,c)):!l&&L(t)&&((o=new i.default).action=i.default.ACTION_COMPLETE,o.index=T-1,o.mediaType=f,o.mediaInfo=e,_.debug("Signal complete in getSegmentRequestForTime")),u&&s>=0&&(T=t.segmentInfoType===r.default.SEGMENT_TIMELINE&&A?T:s),o},getNextSegmentRequest:function(e,t){var n=null;if(!t||!t.segmentInfoType)return null;M=null;var r=T+1;_.debug("Getting the next request at index: "+r);var a=w.getSegmentByIndex(t,r,E?E.mediaStartTime:-1);return!a&&function(e){return!isFinite(e.adaptation.period.duration)}(t)?(_.debug("No segment found at index: "+r+". Wait for next loop"),null):(a?(n=N(e,a),T=a.availabilityIdx):T=A?r-1:r,a?E=a:L(t)&&((n=new i.default).action=i.default.ACTION_COMPLETE,n.index=T-1,n.mediaType=S(),n.mediaInfo=e,_.debug("Signal complete")),n)},setCurrentTime:function(e){b=e},getCurrentTime:function(){return b},reset:function(){D(),n.off(o.default.INITIALIZATION_LOADED,O,y),n.off(o.default.SEGMENTS_LOADED,R,y),n.off(o.default.REPRESENTATION_UPDATE_STARTED,C,y)},resetIndex:x},_=(0,l.default)(t).getInstance().getLogger(y),D(),w=(0,h.default)(t).create(e),n.on(o.default.INITIALIZATION_LOADED,O,y),n.on(o.default.SEGMENTS_LOADED,R,y),n.on(o.default.REPRESENTATION_UPDATE_STARTED,C,y),y}p.__dashjs_factory_name="DashHandler",t.default=u.default.getClassFactory(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(39)),i=p(n(59)),a=p(n(8)),o=p(n(7)),s=p(n(5)),u=p(n(27)),l=p(n(1)),c=p(n(6)),d=p(n(19)),h=p(n(29)),f=p(n(9));function p(e){return e&&e.__esModule?e:{default:e}}function g(){var e=this.context,t=(0,s.default)(e).getInstance(),n=void 0,l=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0;function E(){if(!T||!T.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function M(e){if(e.url){var t=new d.default;return t.setInfo(e),t}}function b(e,n,r){e?t.trigger(o.default.SEGMENTS_LOADED,{segments:e,representation:n,mediaType:r}):t.trigger(o.default.SEGMENTS_LOADED,{segments:null,representation:n,mediaType:r,error:new a.default(f.default.SEGMENT_BASE_LOADER_ERROR_CODE,f.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}return n={setConfig:function(e){e.baseURLController&&(T=e.baseURLController),e.dashMetrics&&(v=e.dashMetrics),e.mediaPlayerModel&&(y=e.mediaPlayerModel),e.errHandler&&(p=e.errHandler)},initialize:function(){g=(0,u.default)(e).getInstance(),m=(0,r.default)(e).getInstance(),_=(0,h.default)(e).create({errHandler:p,dashMetrics:v,mediaPlayerModel:y,requestModifier:m})},loadInitialization:function e(n,r){E();var i=null,a=n?T.resolve(n.path):null,s=r||{init:!0,url:a?a.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:n&&n.adaptation?n.adaptation.type:null};l.debug("Start searching for initialization.");var u=M(s);_.load({request:u,success:function(r){s.bytesLoaded=s.range.end,(i=g.findInitRange(r))?(n.range=i,t.trigger(o.default.INITIALIZATION_LOADED,{representation:n})):(s.range.end=s.bytesLoaded+s.bytesToLoad,e(n,s))},error:function(){t.trigger(o.default.INITIALIZATION_LOADED,{representation:n})}}),l.debug("Perform init search: "+s.url)},loadSegments:function e(t,n,r,a,o){if(E(),r&&(void 0===r.start||void 0===r.end)){var s=r?r.toString().split("-"):null;r=s?{start:parseFloat(s[0]),end:parseFloat(s[1])}:null}o=o||b;var u=null,c=null,d=!!r,h=t?T.resolve(t.path):null,f={init:!1,url:h?h.url:void 0,range:d?r:{start:0,end:1500},searching:!d,bytesLoaded:a?a.bytesLoaded:0,bytesToLoad:1500,mediaType:t&&t.adaptation?t.adaptation.type:null},p=M(f);_.load({request:p,success:function(r){var a=f.bytesToLoad,s=r.byteLength;if(f.bytesLoaded=f.range.end-f.range.start,u=g.parse(r),(c=u.getBox("sidx"))&&c.isComplete){var d=c.references,h=void 0,p=void 0;if(null!=d&&d.length>0&&(h=1===d[0].reference_type),h){l.debug("Initiate multiple SIDX load."),f.range.end=f.range.start+c.size;var m=void 0,v=void 0,y=void 0,_=void 0,T=[],E=0,M=(c.offset||f.range.start)+c.size,b=function(e){e?(T=T.concat(e),++E>=v&&(T.sort((function(e,t){return e.startTime-t.startTime<0?-1:0})),o(T,t,n))):o(null,t,n)};for(m=0,v=d.length;m<v;m++)y=M,_=M+d[m].referenced_size-1,M+=d[m].referenced_size,e(t,null,{start:y,end:_},f,b)}else l.debug("Parsing segments from SIDX. representation "+t.id+" for range : "+f.range.start+" - "+f.range.end),p=function(e,t){for(var n=e.references,r=n.length,a=e.timescale,o=e.earliest_presentation_time,s=t.range.start+e.offset+e.first_offset+e.size,u=[],l=void 0,c=void 0,d=void 0,h=void 0,f=0;f<r;f++)d=n[f].subsegment_duration,h=n[f].referenced_size,(l=new i.default).duration=d,l.startTime=o,l.timescale=a,c=s+h-1,l.mediaRange=s+"-"+c,u.push(l),o+=d,s+=h;return u}(c,f),o(p,t,n)}else{if(c)f.range.start=c.offset||f.range.start,f.range.end=f.range.start+(c.size||a);else{if(s<f.bytesLoaded)return void o(null,t,n);var A=u.getLastBox();A&&A.size?(f.range.start=A.offset+A.size,f.range.end=f.range.start+a):f.range.end+=a}e(t,n,f.range,f,o)}},error:function(){o(null,t,n)}}),l.debug("Perform SIDX load: "+f.url+" with range : "+f.range.start+" - "+f.range.end)},reset:function(){_.abort(),_=null,p=null,g=null,m=null}},l=(0,c.default)(e).getInstance().getLogger(n),n}g.__dashjs_factory_name="SegmentBaseLoader",t.default=l.default.getSingletonFactory(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THUMBNAILS_SCHEME_ID_URIS=void 0;var r=f(n(4)),i=f(n(15)),a=f(n(1)),o=f(n(187)),s=f(n(18)),u=n(24),l=f(n(91)),c=f(n(27)),d=f(n(60)),h=f(n(90));function f(e){return e&&e.__esModule?e:{default:e}}var p=t.THUMBNAILS_SCHEME_ID_URIS=["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"];function g(e){var t,n=this.context,a=e.adapter,f=e.baseURLController,g=e.stream,m=e.timelineConverter,v=e.dashMetrics,y=e.mediaPlayerModel,_=e.errHandler,T=(0,s.default)(n).getInstance(),E=void 0,M=void 0,b=void 0,A=void 0,w=void 0,S=void 0,x=void 0;function D(){C(),w=(0,d.default)(n).create({}),x=(0,c.default)(n).getInstance(),(S=(0,l.default)(n).getInstance()).setConfig({baseURLController:f,dashMetrics:v,mediaPlayerModel:y,errHandler:_}),(M=(0,h.default)(n).create({timelineConverter:m,baseURLController:f})).initialize(!!a&&a.getIsDynamic()),function(){if(!g||!a)return;var e=g.getStreamInfo();if(!e)return;if(!(A=a.getMediaInfoForType(e,r.default.IMAGE)))return;var t=a.getVoRepresentations(A);t&&t.length>0&&t.forEach((function(e){(e.segmentInfoType===i.default.SEGMENT_TEMPLATE&&e.segmentDuration>0&&e.media||e.segmentInfoType===i.default.SEGMENT_TIMELINE)&&I(e),e.segmentInfoType===i.default.SEGMENT_BASE&&I(e,!0)}));E.length>0&&(E.sort((function(e,t){return e.bitrate-t.bitrate})),b=E.length-1)}()}function I(e,t){var n=new o.default;n.id=e.id,n.bitrate=e.bandwidth,n.width=e.width,n.height=e.height,n.tilesHor=1,n.tilesVert=1,e.essentialProperties&&e.essentialProperties.forEach((function(e){if(p.indexOf(e.schemeIdUri)>=0&&e.value){var t=e.value.split("x");2!==t.length||isNaN(t[0])||isNaN(t[1])||(n.tilesHor=parseInt(t[0],10),n.tilesVert=parseInt(t[1],10))}})),t?S.loadSegments(e,r.default.IMAGE,e.indexRange,{},(function(e,t){var r=[];e=function(e,t){var n,r=[],i=0,o=void 0,s=void 0,l=void 0;for(o=0,n=e.length;o<n;o++)s=e[o],(l=(0,u.getTimeBasedSegment)(m,a.getIsDynamic(),t,s.startTime,s.duration,s.timescale,s.media,s.mediaRange,i))&&(r.push(l),l=null,i++);return r}(e,t),n.segmentDuration=e[0].duration,n.readThumbnail=function(n,i){var a=null;r.some((function(e){if(e.start<=n&&e.end>n)return a=e.url,!0})),a?i(a):e.some((function(e){if(e.mediaStartTime<=n&&e.mediaStartTime+e.duration>n){var a=f.resolve(t.path);return w.load({method:"get",url:a.url,request:{range:e.mediaRange,responseType:"arraybuffer"},onload:function(t){var n=x.getSamplesInfo(t.target.response),a=new Blob([t.target.response.slice(n.sampleList[0].offset,n.sampleList[0].offset+n.sampleList[0].size)],{type:"image/jpeg"}),o=window.URL.createObjectURL(a);r.push({start:e.mediaStartTime,end:e.mediaStartTime+e.duration,url:o}),i&&i(o)}}),!0}}))}})):(n.startNumber=e.startNumber,n.segmentDuration=e.segmentDuration,n.timescale=e.timescale,n.templateUrl=function(e){var t=T.isRelative(e.media)?T.resolve(e.media,f.resolve(e.path).url):e.media;if(!t)return"";return(0,u.replaceIDForTemplate)(t,e.id)}(e)),n.tilesHor>0&&n.tilesVert>0&&(n.widthPerTile=n.width/n.tilesHor,n.heightPerTile=n.height/n.tilesVert,E.push(n))}function C(){E=[],b=-1,A=null}return t={initialize:D,getTracks:function(){return E},reset:C,setTrackByIndex:function(e){E&&0!==E.length&&(e>=E.length&&(e=E.length-1),b=e)},getCurrentTrack:function(){return b<0?null:E[b]},getCurrentTrackIndex:function(){return b},getThumbnailRequestForTime:function(e){for(var t=void 0,n=a.getVoRepresentations(A),r=0;r<n.length;r++)if(E[b].id===n[r].id){t=n[r];break}return M.getSegmentRequestForTime(A,t,e)}},D(),t}g.__dashjs_factory_name="ThumbnailTracks",t.default=a.default.getClassFactory(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(32);var a=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.AST_IN_FUTURE="astInFuture",e.BUFFER_EMPTY="bufferStalled",e.BUFFER_LOADED="bufferLoaded",e.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",e.ERROR="error",e.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",e.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",e.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",e.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",e.LOG="log",e.MANIFEST_LOADED="manifestLoaded",e.METRICS_CHANGED="metricsChanged",e.METRIC_CHANGED="metricChanged",e.METRIC_ADDED="metricAdded",e.METRIC_UPDATED="metricUpdated",e.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",e.PERIOD_SWITCH_STARTED="periodSwitchStarted",e.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",e.QUALITY_CHANGE_RENDERED="qualityChangeRendered",e.TRACK_CHANGE_RENDERED="trackChangeRendered",e.SOURCE_INITIALIZED="sourceInitialized",e.STREAM_INITIALIZING="streamInitializing",e.STREAM_INITIALIZED="streamInitialized",e.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",e.TEXT_TRACKS_ADDED="allTextTracksAdded",e.TEXT_TRACK_ADDED="textTrackAdded",e.TTML_PARSED="ttmlParsed",e.TTML_TO_PARSE="ttmlToParse",e.CAPTION_RENDERED="captionRendered",e.CAPTION_CONTAINER_RESIZE="captionContainerResize",e.CAN_PLAY="canPlay",e.PLAYBACK_ENDED="playbackEnded",e.PLAYBACK_ERROR="playbackError",e.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",e.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",e.PLAYBACK_PAUSED="playbackPaused",e.PLAYBACK_PLAYING="playbackPlaying",e.PLAYBACK_PROGRESS="playbackProgress",e.PLAYBACK_RATE_CHANGED="playbackRateChanged",e.PLAYBACK_SEEKED="playbackSeeked",e.PLAYBACK_SEEKING="playbackSeeking",e.PLAYBACK_SEEK_ASKED="playbackSeekAsked",e.PLAYBACK_STALLED="playbackStalled",e.PLAYBACK_STARTED="playbackStarted",e.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",e.PLAYBACK_WAITING="playbackWaiting",e.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(190)),i=c(n(192)),a=c(n(18)),o=c(n(96)),s=c(n(1)),u=c(n(5)),l=c(n(7));function c(e){return e&&e.__esModule?e:{default:e}}function d(){var e=void 0,t=void 0,n=this.context,s=(0,u.default)(n).getInstance(),c=(0,a.default)(n).getInstance(),d=void 0,h=void 0;function f(e){d.invalidateSelectedIndexes(e.entry)}return e={reset:function(){d.reset(),h.reset()},initialize:function(e){var n;d.setConfig({adapter:t}),n=e,d.update(n),h.chooseSelector(t.getIsDVB(n))},resolve:function(e){var t=d.getForPath(e).reduce((function(e,t){var n=h.select(t);return n?(c.isRelative(n.url)?e.url=c.resolve(n.url,e.url):(e.url=n.url,e.serviceLocation=n.serviceLocation),e.availabilityTimeOffset=n.availabilityTimeOffset,e.availabilityTimeComplete=n.availabilityTimeComplete,e):new o.default}),new o.default);if(!c.isRelative(t.url))return t},setConfig:function(e){e.baseURLTreeModel&&(d=e.baseURLTreeModel),e.baseURLSelector&&(h=e.baseURLSelector),e.adapter&&(t=e.adapter)}},d=(0,r.default)(n).create(),h=(0,i.default)(n).create(),s.on(l.default.SERVICE_LOCATION_BLACKLIST_CHANGED,f,e),e}d.__dashjs_factory_name="BaseURLController",t.default=s.default.getSingletonFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(191));function a(e){return e&&e.__esModule?e:{default:e}}function o(){return{areEqual:function(e,t){return(0,i.default)(e,t)}}}o.__dashjs_factory_name="ObjectUtils",t.default=r.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||"",this.serviceLocation=n||t||"",this.dvb_priority=r||1,this.dvb_weight=i||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0};r.DEFAULT_DVB_PRIORITY=1,r.DEFAULT_DVB_WEIGHT=1,t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(4));function i(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.url=e||null,i.type=n||null,i.mediaType=r.default.STREAM,i.responseType="",i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(i(n(19)).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||{},function(){void 0===e.escapeMode&&(e.escapeMode=!0);void 0===e.attributePrefix&&(e.attributePrefix="_");e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0);e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0);void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0);e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1);e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1);void 0===e.ignoreRoot&&(e.ignoreRoot=!1)}();var t=1,n=3,r=4,i=8,a=9;function o(e){var t=e.localName;return null==t&&(t=e.baseName),null!=t&&""!=t||(t=e.nodeName),t}function s(e){return"string"==typeof e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"):e}function u(e,t,n,r){for(var i=0;i<e.length;i++){var a=e[i];if("string"==typeof a){if(a==r)break}else if(a instanceof RegExp){if(a.test(r))break}else if("function"==typeof a&&a(t,n,r))break}return i!=e.length}function l(t,n,r){switch(e.arrayAccessForm){case"property":t[n]instanceof Array?t[n+"_asArray"]=t[n]:t[n+"_asArray"]=[t[n]]}!(t[n]instanceof Array)&&e.arrayAccessFormPaths.length>0&&u(e.arrayAccessFormPaths,t,n,r)&&(t[n]=[t[n]])}function c(e){var t=e.split(/[-T:+Z]/g),n=new Date(t[0],t[1]-1,t[2]),r=t[5].split(".");if(n.setHours(t[3],t[4],r[0]),r.length>1&&n.setMilliseconds(r[1]),t[6]&&t[7]){var i=60*t[6]+Number(t[7]);i=0+("-"==(/\d\d-\d\d:\d\d$/.test(e)?"-":"+")?-1*i:i),n.setMinutes(n.getMinutes()-i-n.getTimezoneOffset())}else-1!==e.indexOf("Z",e.length-1)&&(n=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds())));return n}function d(n,r,i,a){return!(r==t&&e.xmlElementsFilter.length>0)||u(e.xmlElementsFilter,n,i,a)}function h(s,f){if(s.nodeType==a){for(var p=new Object,g=s.childNodes,m=0;m<g.length;m++){if((y=g[m]).nodeType==t)if(e.ignoreRoot)p=h(y);else(p={})[_=o(y)]=h(y)}return p}if(s.nodeType==t){(p=new Object).__cnt=0;var v=[];for(g=s.childNodes,m=0;m<g.length;m++){var y,_=o(y=g[m]);if(y.nodeType!=i){var T=f+"."+_;if(d(p,y.nodeType,_,T))if(p.__cnt++,null==p[_]){var E=h(y,T);if("#text"!=_||/[^\s]/.test(E))(M={})[_]=E,v.push(M);p[_]=E,l(p,_,T)}else{null!=p[_]&&(p[_]instanceof Array||(p[_]=[p[_]],l(p,_,T)));var M;E=h(y,T);if("#text"!=_||/[^\s]/.test(E))(M={})[_]=E,v.push(M);p[_][p[_].length]=E}}}p.__children=v;for(var b=o(s),A=0;A<s.attributes.length;A++){var w=s.attributes[A];p.__cnt++;for(var S=w.value,x=0,D=e.matchers.length;x<D;x++){var I=e.matchers[x];I.test(w,b)&&(S=I.converter(w.value))}p[e.attributePrefix+w.name]=S}var C=function(e){return e.prefix}(s);return null!=C&&""!=C&&(p.__cnt++,p.__prefix=C),null!=p["#text"]&&(p.__text=p["#text"],p.__text instanceof Array&&(p.__text=p.__text.join("\n")),e.stripWhitespaces&&(p.__text=p.__text.trim()),delete p["#text"],"property"==e.arrayAccessForm&&delete p["#text_asArray"],p.__text=function(t,n,r){if(e.datetimeAccessFormPaths.length>0){var i=r.split(".#")[0];return u(e.datetimeAccessFormPaths,t,n,i)?c(t):t}return t}(p.__text,_,f+"."+_)),null!=p["#cdata-section"]&&(p.__cdata=p["#cdata-section"],delete p["#cdata-section"],"property"==e.arrayAccessForm&&delete p["#cdata-section_asArray"]),0==p.__cnt&&"text"==e.emptyNodeForm?p="":1==p.__cnt&&null!=p.__text?p=p.__text:1!=p.__cnt||null==p.__cdata||e.keepCData?p.__cnt>1&&null!=p.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==p.__text||""==p.__text.trim())&&delete p.__text:p=p.__cdata,delete p.__cnt,!e.enableToStringFunc||null==p.__text&&null==p.__cdata||(p.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),p}if(s.nodeType==n||s.nodeType==r)return s.nodeValue}function f(t,n,r,i){var a="<"+(null!=t&&null!=t.__prefix?t.__prefix+":":"")+n;if(null!=r)for(var o=0;o<r.length;o++){var u=r[o],l=t[u];e.escapeMode&&(l=s(l)),a+=" "+u.substr(e.attributePrefix.length)+"=",e.useDoubleQuotes?a+='"'+l+'"':a+="'"+l+"'"}return a+=i?"/>":">"}function p(e,t){return"</"+(null!=e.__prefix?e.__prefix+":":"")+t+">"}function g(t,n){return"property"==e.arrayAccessForm&&(r=n.toString(),i="_asArray",-1!==r.indexOf(i,r.length-i.length))||0==n.toString().indexOf(e.attributePrefix)||0==n.toString().indexOf("__")||t[n]instanceof Function;var r,i}function m(e){var t=0;if(e instanceof Object)for(var n in e)g(e,n)||t++;return t}function v(t,n,r){return 0==e.jsonPropertiesFilter.length||""==r||u(e.jsonPropertiesFilter,t,n,r)}function y(t){var n=[];if(t instanceof Object)for(var r in t)-1==r.toString().indexOf("__")&&0==r.toString().indexOf(e.attributePrefix)&&n.push(r);return n}function _(t){var n="";return t instanceof Object?n+=function(t){var n="";return null!=t.__cdata&&(n+="<![CDATA["+t.__cdata+"]]>"),null!=t.__text&&(e.escapeMode?n+=s(t.__text):n+=t.__text),n}(t):null!=t&&(e.escapeMode?n+=s(t):n+=t),n}function T(e,t){return""===e?t:e+"."+t}function E(e,t,n,r){var i="";if(0==e.length)i+=f(e,t,n,!0);else for(var a=0;a<e.length;a++)i+=f(e[a],t,y(e[a]),!1),i+=M(e[a],T(r,t)),i+=p(e[a],t);return i}function M(e,t){var n="";if(m(e)>0)for(var r in e)if(!g(e,r)&&(""==t||v(e,r,T(t,r)))){var i=e[r],a=y(i);if(null==i||null==i)n+=f(i,r,a,!0);else if(i instanceof Object)if(i instanceof Array)n+=E(i,r,a,t);else if(i instanceof Date)n+=f(i,r,a,!1),n+=i.toISOString(),n+=p(i,r);else{m(i)>0||null!=i.__text||null!=i.__cdata?(n+=f(i,r,a,!1),n+=M(i,T(t,r)),n+=p(i,r)):n+=f(i,r,a,!0)}else n+=f(i,r,a,!1),n+=_(i),n+=p(i,r)}return n+=_(e)}this.parseXmlString=function(e){var t;window.ActiveXObject||window;if(void 0===e)return null;if(window.DOMParser){var n=new window.DOMParser;try{(t=n.parseFromString(e,"text/xml")).getElementsByTagNameNS("*","parsererror").length>0&&(t=null)}catch(e){t=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),(t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e);return t},this.asArray=function(e){return void 0===e||null==e?[]:e instanceof Array?e:[e]},this.toXmlDateTime=function(e){return e instanceof Date?e.toISOString():"number"==typeof e?new Date(e).toISOString():null},this.asDateTime=function(e){return"string"==typeof e?c(e):e},this.xml2json=function(e){return h(e)},this.xml_str2json=function(e){var t=this.parseXmlString(e);return null!=t?this.xml2json(t):null},this.json2xml_str=function(e){return M(e,"")},this.json2xml=function(e){var t=this.json2xml_str(e);return this.parseXmlString(t)},this.getVersion=function(){return"1.2.0"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(207),o=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=t||"",this._properties=[],this._children=r||[],Array.isArray(n)&&n.forEach((function(e){i._properties.push(new o.default(e))}))}return i(e,[{key:"name",get:function(){return this._name}},{key:"children",get:function(){return this._children}},{key:"properties",get:function(){return this._properties}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=l(n(1)),a=l(n(215)),o=l(n(6)),s=l(n(4)),u=n(11);function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(){var e,t,n={debug:{logLevel:o.default.LOG_LEVEL_WARNING},streaming:{metricsMaxListDepth:1e3,abandonLoadTimeout:1e4,liveDelayFragmentCount:4,liveDelay:null,scheduleWhilePaused:!0,fastSwitchEnabled:!1,bufferPruningInterval:10,bufferToKeep:20,bufferAheadToKeep:80,jumpGaps:!0,smallGapLimit:1.5,stableBufferTime:12,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,longFormContentDurationThreshold:600,wallclockTimeUpdateInterval:50,lowLatencyEnabled:!1,keepProtectionMediaKeys:!1,useManifestDateHeaderTimeSource:!0,useSuggestedPresentationDelay:!1,manifestUpdateRetryInterval:100,liveCatchUpMinDrift:.02,liveCatchUpMaxDrift:0,liveCatchUpPlaybackRate:.5,lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},cacheLoadThresholds:{video:50,audio:5},retryIntervals:(e={},c(e,u.HTTPRequest.MPD_TYPE,500),c(e,u.HTTPRequest.XLINK_EXPANSION_TYPE,500),c(e,u.HTTPRequest.MEDIA_SEGMENT_TYPE,1e3),c(e,u.HTTPRequest.INIT_SEGMENT_TYPE,1e3),c(e,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,1e3),c(e,u.HTTPRequest.INDEX_SEGMENT_TYPE,1e3),c(e,u.HTTPRequest.OTHER_TYPE,1e3),e),retryAttempts:(t={},c(t,u.HTTPRequest.MPD_TYPE,3),c(t,u.HTTPRequest.XLINK_EXPANSION_TYPE,1),c(t,u.HTTPRequest.MEDIA_SEGMENT_TYPE,3),c(t,u.HTTPRequest.INIT_SEGMENT_TYPE,3),c(t,u.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE,3),c(t,u.HTTPRequest.INDEX_SEGMENT_TYPE,3),c(t,u.HTTPRequest.OTHER_TYPE,3),t),abr:{movingAverageMethod:s.default.MOVING_AVERAGE_SLIDING_WINDOW,ABRStrategy:s.default.ABR_STRATEGY_DYNAMIC,bandwidthSafetyFactor:.9,useDefaultABRRules:!0,useBufferOccupancyABR:!1,useDeadTimeLatency:!0,limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},maxRepresentationRatio:{audio:1,video:1},initialBitrate:{audio:-1,video:-1},initialRepresentationRatio:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}}}},i=a.default.clone(n);return{get:function(){return i},update:function(e){"object"===(void 0===e?"undefined":r(e))&&function e(t,n,i){for(var o in t)t.hasOwnProperty(o)&&n.hasOwnProperty(o)&&("object"===r(t[o])?e(t[o],n[o],i.slice()+o+"."):n[o]=a.default.clone(t[o]))}(e,i,"")},reset:function(){i=a.default.clone(n)}}}d.__dashjs_factory_name="Settings";var h=i.default.getSingletonFactory(d);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVersionString=function(){return"3.0.1"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(250),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var t={"urn:dvb:dash:reporting:2014":a.default},n=this.context,r=void 0,i=e.debug?e.debug.getLogger(r):{},o=e.metricsConstants;return r={create:function(e,r){var a=void 0;try{(a=t[e.schemeIdUri](n).create({metricsConstants:o})).initialize(e,r)}catch(t){a=null,i.error("ReportingFactory: could not create Reporting with schemeIdUri "+e.schemeIdUri+" ("+t.message+")")}return a},register:function(e,n){t[e]=n},unregister:function(e){delete t[e]}}}o.__dashjs_factory_name="ReportingFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(254)),i=s(n(255)),a=s(n(256)),o=s(n(257));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=void 0,n=(e=e||{}).debug?e.debug.getLogger(t):{},s=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/,u=this.context,l={BufferLevel:r.default,DVBErrors:i.default,HttpList:a.default,PlayList:o.default,RepSwitchList:o.default,TcpList:o.default};return t={create:function(t,r){var i,a=t.match(s);if(a){try{(i=l[a[1]](u).create({eventBus:e.eventBus,metricsConstants:e.metricsConstants})).initialize(a[1],r,a[3],a[5])}catch(e){i=null,n.error("MetricsHandlerFactory: Could not create handler for type "+a[1]+" with args "+a[3]+", "+a[5]+" ("+e.message+")")}return i}},register:function(e,t){l[e]=t},unregister:function(e){delete l[e]}}}u.__dashjs_factory_name="MetricsHandlerFactory",t.default=dashjs.FactoryMaker.getSingletonFactory(u)},function(e,t,n){"use strict";function r(){return{reconstructFullMetricName:function(e,t,n){var r=e;return t&&(r+="("+t,n&&n.length&&(r+=","+n),r+=")"),r},validateN:function(e){if(!e)throw new Error("missing n");if(isNaN(e))throw new Error("n is NaN");if(e<0)throw new Error("n must be positive");return e}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="HandlerHelpers",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},function(e,t){e.exports={toUnsigned:function(e){return e>>>0},toHexString:function(e){return("00"+e.toString(16)).slice(-2)}}},function(e,t,n){"use strict";e.exports={parseSei:function(e){for(var t=0,n={payloadType:-1,payloadSize:0},r=0,i=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)r+=255,t++;for(r+=e[t++];255===e[t];)i+=255,t++;if(i+=e[t++],!n.payload&&4===r){n.payloadType=r,n.payloadSize=i,n.payload=e.subarray(t,t+i);break}t+=i,r=0,i=0}return n},parseUserData:function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},parseCaptionPackets:function(e,t){var n,r,i,a,o=[];if(!(64&t[0]))return o;for(r=31&t[0],n=0;n<r;n++)a={type:3&t[(i=3*n)+2],pts:e},4&t[i+2]&&(a.ccData=t[i+3]<<8|t[i+4],o.push(a));return o},discardEmulationPreventionBytes:function(e){for(var t,n,r=e.byteLength,i=[],a=1;a<r-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(i.push(a+2),a+=2):a++;if(0===i.length)return e;t=r-i.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===i[0]&&(o++,i.shift()),n[a]=e[o];return n},USER_DATA_REGISTERED_ITU_T_T35:4}},function(e,t,n){"use strict";var r=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var r;return!!e[t]&&(r=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(r,1),r>-1)},this.trigger=function(t){var n,r,i,a;if(n=e[t])if(2===arguments.length)for(i=n.length,r=0;r<i;++r)n[r].call(this,arguments[1]);else{for(a=[],r=arguments.length,r=1;r<arguments.length;++r)a.push(arguments[r]);for(i=n.length,r=0;r<i;++r)n[r].apply(this,a)}},this.dispose=function(){e={}}}};r.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},r.prototype.push=function(e){this.trigger("data",e)},r.prototype.flush=function(e){this.trigger("done",e)},r.prototype.partialFlush=function(e){this.trigger("partialdone",e)},r.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},r.prototype.reset=function(e){this.trigger("reset",e)},e.exports=r},function(e,t,n){"use strict";e.exports={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t){var n=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(299),i=n(300),a=n(302),o=Object.defineProperty;t.f=n(43)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i=e*t,a=r*e,o=a-(a-e),s=e-o,u=r*t,l=u-(u-t),c=t-l,d=s*c-(i-o*l-s*l-o*c);if(n)return n[0]=d,n[1]=i,n;return[d,i]};var r=+(Math.pow(2,27)+1)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._parseDimension=l,t._parseDefinition=c,t.parseDataSet=d;
/**
 * @fileOverview Parser for DDS files
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2015-2016 IRCAM, Paris, France
 * @license BSD-3-Clause
 */
var r=new RegExp("\\[\\s*(\\w+)\\s*=\\s*(\\d+)\\s*\\]","g"),i=new RegExp("\\[\\s*(\\w+)\\s*=\\s*(\\d+)\\s*\\]"),a="\\s*(\\w+)\\s*([\\w.]+)\\s*((?:\\[[^\\]]+\\]\\s*)+);\\s*",o=new RegExp(a,"g"),s=new RegExp(a),u=new RegExp("\\s*Dataset\\s*\\{\\s*((?:[^;]+;\\s*)*)\\s*\\}\\s*[\\w.]+\\s*;\\s*");function l(e){var t=[],n=e.match(r);return null!==n&&n.forEach((function(e){var n=i.exec(e);null!==n&&n.length>2&&t.push([n[1],Number(n[2])])})),t}function c(e){var t=[],n=e.match(o);return null!==n&&n.forEach((function(e){var n=s.exec(e);if(null!==n&&n.length>3){var r=[];r[0]=n[2],r[1]={},r[1].type=n[1],l(n[3]).forEach((function(e){r[1][e[0]]=e[1]})),t.push(r)}})),t}function d(e){var t={},n=u.exec(e);return null!==n&&n.length>1&&c(n[1]).forEach((function(e){t[e[0]]=e[1]})),t}t.default=d},function(e,t){e.exports=function(e,t){var n,r=null;try{n=JSON.parse(e,t)}catch(e){r=e}return[r,n]}},function(e,t,n){"use strict";var r=n(108).discardEmulationPreventionBytes,i=n(285).CaptionStream,a=n(22),o=n(71),s=function(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(n<i.size)return i;n-=i.size}return null},u=function(e,t){var n=a.findBox(e,["moof","traf"]),i=a.findBox(e,["mdat"]),u={},l=[];return i.forEach((function(e,t){var r=n[t];l.push({mdat:e,traf:r})})),l.forEach((function(e){var n,i=e.mdat,l=e.traf,c=a.findBox(l,["tfhd"]),d=o.parseTfhd(c[0]),h=d.trackId,f=a.findBox(l,["tfdt"]),p=f.length>0?o.parseTfdt(f[0]).baseMediaDecodeTime:0,g=a.findBox(l,["trun"]);t===h&&g.length>0&&(n=function(e,t,n){var i,a,o,u,l=new DataView(e.buffer,e.byteOffset,e.byteLength),c=[];for(a=0;a+4<e.length;a+=o)if(o=l.getUint32(a),a+=4,!(o<=0))switch(31&e[a]){case 6:var d=e.subarray(a+1,a+1+o),h=s(a,t);i={nalUnitType:"sei_rbsp",size:o,data:d,escapedRBSP:r(d),trackId:n},h?(i.pts=h.pts,i.dts=h.dts,u=h):(i.pts=u.pts,i.dts=u.dts),c.push(i)}return c}(i,function(e,t,n){var r=t,i=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,s=n.trackId,u=[];return e.forEach((function(e){var t=o.parseTrun(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=i),void 0===e.size&&(e.size=a),e.trackId=s,e.dts=r,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=r+e.compositionTimeOffset,r+=e.duration})),u=u.concat(t)})),u}(g,p,d),h),u[h]||(u[h]=[]),u[h]=u[h].concat(n))})),u};e.exports=function(){var e,t,n,r,a,o,s=!1;this.isInitialized=function(){return s},this.init=function(t){e=new i,s=!0,o=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/r,e.endTime=e.endPts/r,a.captions.push(e),a.captionStreams[e.stream]=!0}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||r!==t[n])},this.parse=function(e,i,o){var s;if(!this.isInitialized())return null;if(!i||!o)return null;if(this.isNewInit(i,o))n=i[0],r=o[n];else if(null===n||!r)return t.push(e),null;for(;t.length>0;){var l=t.shift();this.parse(l,i,o)}return null!==(s=function(e,t,n){return null===t?null:{seiNals:u(e,t)[t],timescale:n}}(e,n,r))&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),a):null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){a.captions=[],a.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,r=null,a?this.clearParsedCaptions():a={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},function(e,t,n){"use strict";var r=n(110),i=n(286).handleRollover,a={};a.ts=n(287),a.aac=n(288);var o=n(289).ONE_SECOND_IN_TS,s=function(e,t,n){for(var r,i,o,s,u=0,l=188,c=!1;l<=e.byteLength;)if(71!==e[u]||71!==e[l]&&l!==e.byteLength)u++,l++;else{switch(r=e.subarray(u,l),a.ts.parseType(r,t.pid)){case"pes":i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(s=a.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),c=!0)}if(c)break;u+=188,l+=188}for(u=(l=e.byteLength)-188,c=!1;u>=0;)if(71!==e[u]||71!==e[l]&&l!==e.byteLength)u--,l--;else{switch(r=e.subarray(u,l),a.ts.parseType(r,t.pid)){case"pes":i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"audio"===i&&o&&(s=a.ts.parsePesTime(r))&&(s.type="audio",n.audio.push(s),c=!0)}if(c)break;u-=188,l-=188}},u=function(e,t,n){for(var r,i,o,s,u,l,c,d=0,h=188,f=!1,p={data:[],size:0};h<e.byteLength;)if(71!==e[d]||71!==e[h])d++,h++;else{switch(r=e.subarray(d,h),a.ts.parseType(r,t.pid)){case"pes":if(i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&(o&&!f&&(s=a.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),f=!0),!n.firstKeyFrame)){if(o&&0!==p.size){for(u=new Uint8Array(p.size),l=0;p.data.length;)c=p.data.shift(),u.set(c,l),l+=c.byteLength;if(a.ts.videoPacketContainsKeyFrame(u)){var g=a.ts.parsePesTime(u);g?(n.firstKeyFrame=g,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(r),p.size+=r.byteLength}}if(f&&n.firstKeyFrame)break;d+=188,h+=188}for(d=(h=e.byteLength)-188,f=!1;d>=0;)if(71!==e[d]||71!==e[h])d--,h--;else{switch(r=e.subarray(d,h),a.ts.parseType(r,t.pid)){case"pes":i=a.ts.parsePesType(r,t.table),o=a.ts.parsePayloadUnitStartIndicator(r),"video"===i&&o&&(s=a.ts.parsePesTime(r))&&(s.type="video",n.video.push(s),f=!0)}if(f)break;d-=188,h-=188}},l=function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,r=0,i=188;i<e.byteLength;)if(71!==e[r]||71!==e[i])r++,i++;else{switch(n=e.subarray(r,i),a.ts.parseType(n,t.pid)){case"pat":t.pid||(t.pid=a.ts.parsePat(n));break;case"pmt":t.table||(t.table=a.ts.parsePmt(n))}if(t.pid&&t.table)return;r+=188,i+=188}}(e,t),t.table){if(t.table.hasOwnProperty(i))switch(t.table[i]){case r.H264_STREAM_TYPE:n.video=[],u(e,t,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],s(e,t,n),0===n.audio.length&&delete n.audio}}return n};e.exports={inspect:function(e,t){var n;return(n=a.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,r=0,i=null,s=null,u=0,l=0;e.length-l>=3;){switch(a.aac.parseType(e,l)){case"timed-metadata":if(e.length-l<10){n=!0;break}if((u=a.aac.parseId3TagSize(e,l))>e.length){n=!0;break}null===s&&(t=e.subarray(l,l+u),s=a.aac.parseAacTimestamp(t)),l+=u;break;case"audio":if(e.length-l<7){n=!0;break}if((u=a.aac.parseAdtsSize(e,l))>e.length){n=!0;break}null===i&&(t=e.subarray(l,l+u),i=a.aac.parseSampleRate(t)),r++,l+=u;break;default:l++}if(n)return null}if(null===i||null===s)return null;var c=o/i;return{audio:[{type:"audio",dts:s,pts:s},{type:"audio",dts:s+1024*r*c,pts:s+1024*r*c}]}}(e):l(e))&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;void 0===n&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=i(e.dts,n),e.pts=i(e.pts,n),e.dtsTime=e.dts/o,e.ptsTime=e.pts/o}))}if(e.video&&e.video.length){var r=t;if(void 0===r&&(r=e.video[0].dts),e.video.forEach((function(e){e.dts=i(e.dts,r),e.pts=i(e.pts,r),e.dtsTime=e.dts/o,e.ptsTime=e.pts/o})),e.firstKeyFrame){var a=e.firstKeyFrame;a.dts=i(a.dts,r),a.pts=i(a.pts,r),a.dtsTime=a.dts/o,a.ptsTime=a.dts/o}}}(n,t),n):null},parseAudioPes_:s}},function(e,t,n){var r;
/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(n,i){"use strict";var a=[],o=n.document,s=Object.getPrototypeOf,u=a.slice,l=a.concat,c=a.push,d=a.indexOf,h={},f=h.toString,p=h.hasOwnProperty,g=p.toString,m=g.call(Object),v={},y=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},_=function(e){return null!=e&&e===e.window},T={type:!0,src:!0,nonce:!0,noModule:!0};function E(e,t,n){var r,i,a=(n=n||o).createElement("script");if(a.text=e,t)for(r in T)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&a.setAttribute(r,i);n.head.appendChild(a).parentNode.removeChild(a)}function M(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?h[f.call(e)]||"object":typeof e}var b=function(e,t){return new b.fn.init(e,t)},A=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(e){var t=!!e&&"length"in e&&e.length,n=M(e);return!y(e)&&!_(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}b.fn=b.prototype={jquery:"3.4.1",constructor:b,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return b.each(this,e)},map:function(e){return this.pushStack(b.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:c,sort:a.sort,splice:a.splice},b.extend=b.fn.extend=function(){var e,t,n,r,i,a,o=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==typeof o||y(o)||(o={}),s===u&&(o=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&o!==r&&(l&&r&&(b.isPlainObject(r)||(i=Array.isArray(r)))?(n=o[t],a=i&&!Array.isArray(n)?[]:i||b.isPlainObject(n)?n:{},i=!1,o[t]=b.extend(l,a,r)):void 0!==r&&(o[t]=r));return o},b.extend({expando:"jQuery"+("3.4.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==f.call(e))&&(!(t=s(e))||"function"==typeof(n=p.call(t,"constructor")&&t.constructor)&&g.call(n)===m)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){E(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(w(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(A,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(w(Object(e))?b.merge(n,"string"==typeof e?[e]:e):c.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:d.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,a=e.length,o=!n;i<a;i++)!t(e[i],i)!==o&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,o=[];if(w(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&o.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&o.push(i);return l.apply([],o)},guid:1,support:v}),"function"==typeof Symbol&&(b.fn[Symbol.iterator]=a[Symbol.iterator]),b.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){h["[object "+t+"]"]=t.toLowerCase()}));var S=
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
function(e){var t,n,r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,_,T="sizzle"+1*new Date,E=e.document,M=0,b=0,A=ue(),w=ue(),S=ue(),x=ue(),D=function(e,t){return e===t&&(d=!0),0},I={}.hasOwnProperty,C=[],N=C.pop,L=C.push,O=C.push,R=C.slice,j=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},P="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="[\\x20\\t\\r\\n\\f]",U="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",B="\\["+k+"*("+U+")(?:"+k+"*([*^$|!~]?=)"+k+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+U+"))|)"+k+"*\\]",F=":("+U+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",z=new RegExp(k+"+","g"),G=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),H=new RegExp("^"+k+"*,"+k+"*"),Y=new RegExp("^"+k+"*([>+~]|"+k+")"+k+"*"),V=new RegExp(k+"|>"),Q=new RegExp(F),q=new RegExp("^"+U+"$"),W={ID:new RegExp("^#("+U+")"),CLASS:new RegExp("^\\.("+U+")"),TAG:new RegExp("^("+U+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),bool:new RegExp("^(?:"+P+")$","i"),needsContext:new RegExp("^"+k+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+k+"*((?:-\\d)?\\d*)"+k+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,$=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+k+"?|("+k+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},ae=function(){h()},oe=Te((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{O.apply(C=R.call(E.childNodes),E.childNodes),C[E.childNodes.length].nodeType}catch(e){O={apply:C.length?function(e,t){L.apply(e,R.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var a,s,l,c,d,p,v,y=t&&t.ownerDocument,M=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==M&&9!==M&&11!==M)return r;if(!i&&((t?t.ownerDocument||t:E)!==f&&h(t),t=t||f,g)){if(11!==M&&(d=$.exec(e)))if(a=d[1]){if(9===M){if(!(l=t.getElementById(a)))return r;if(l.id===a)return r.push(l),r}else if(y&&(l=y.getElementById(a))&&_(t,l)&&l.id===a)return r.push(l),r}else{if(d[2])return O.apply(r,t.getElementsByTagName(e)),r;if((a=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return O.apply(r,t.getElementsByClassName(a)),r}if(n.qsa&&!x[e+" "]&&(!m||!m.test(e))&&(1!==M||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===M&&V.test(e)){for((c=t.getAttribute("id"))?c=c.replace(re,ie):t.setAttribute("id",c=T),s=(p=o(e)).length;s--;)p[s]="#"+c+" "+_e(p[s]);v=p.join(","),y=ee.test(e)&&ve(t.parentNode)||t}try{return O.apply(r,y.querySelectorAll(v)),r}catch(t){x(e,!0)}finally{c===T&&t.removeAttribute("id")}}}return u(e.replace(G,"$1"),t,r,i)}function ue(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function le(e){return e[T]=!0,e}function ce(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function he(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&oe(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return le((function(t){return t=+t,le((function(n,r){for(var i,a=e([],n.length,t),o=a.length;o--;)n[i=a[o]]&&(n[i]=!(r[i]=n[i]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},a=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},h=se.setDocument=function(e){var t,i,o=e?e.ownerDocument||e:E;return o!==f&&9===o.nodeType&&o.documentElement?(p=(f=o).documentElement,g=!a(f),E!==f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ae,!1):i.attachEvent&&i.attachEvent("onunload",ae)),n.attributes=ce((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ce((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=J.test(f.getElementsByClassName),n.getById=ce((function(e){return p.appendChild(e).id=T,!f.getElementsByName||!f.getElementsByName(T).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,a=t.getElementById(e);if(a){if((n=a.getAttributeNode("id"))&&n.value===e)return[a];for(i=t.getElementsByName(e),r=0;a=i[r++];)if((n=a.getAttributeNode("id"))&&n.value===e)return[a]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,a=t.getElementsByTagName(e);if("*"===e){for(;n=a[i++];)1===n.nodeType&&r.push(n);return r}return a},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=J.test(f.querySelectorAll))&&(ce((function(e){p.appendChild(e).innerHTML="<a id='"+T+"'></a><select id='"+T+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+k+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+k+"*(?:value|"+P+")"),e.querySelectorAll("[id~="+T+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+T+"+*").length||m.push(".#.+[+~]")})),ce((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+k+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=J.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ce((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=J.test(p.compareDocumentPosition),_=t||J.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return d=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===f||e.ownerDocument===E&&_(E,e)?-1:t===f||t.ownerDocument===E&&_(E,t)?1:c?j(c,e)-j(c,t):0:4&r?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,r=0,i=e.parentNode,a=t.parentNode,o=[e],s=[t];if(!i||!a)return e===f?-1:t===f?1:i?-1:a?1:c?j(c,e)-j(c,t):0;if(i===a)return he(e,t);for(n=e;n=n.parentNode;)o.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;o[r]===s[r];)r++;return r?he(o[r],s[r]):o[r]===E?-1:s[r]===E?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==f&&h(e),n.matchesSelector&&g&&!x[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){x(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!==f&&h(e),_(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==f&&h(e);var i=r.attrHandle[t.toLowerCase()],a=i&&I.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==a?a:n.attributes||!g?e.getAttribute(t):(a=e.getAttributeNode(t))&&a.specified?a.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,a=0;if(d=!n.detectDuplicates,c=!n.sortStable&&e.slice(0),e.sort(D),d){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)e.splice(r[i],1)}return c=null,e},i=se.getText=function(e){var t,n="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:le,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&Q.test(n)&&(t=o(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=A[e+" "];return t||(t=new RegExp("(^|"+k+")"+e+"("+k+"|$)"))&&A(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(z," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,d,h,f,p,g=a!==o?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!u&&!s,_=!1;if(m){if(a){for(;g;){for(h=t;h=h[g];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[o?m.firstChild:m.lastChild],o&&y){for(_=(f=(l=(c=(d=(h=m)[T]||(h[T]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===M&&l[1])&&l[2],h=f&&m.childNodes[f];h=++f&&h&&h[g]||(_=f=0)||p.pop();)if(1===h.nodeType&&++_&&h===t){c[e]=[M,f,_];break}}else if(y&&(_=f=(l=(c=(d=(h=t)[T]||(h[T]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===M&&l[1]),!1===_)for(;(h=++f&&h&&h[g]||(_=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++_||(y&&((c=(d=h[T]||(h[T]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[M,_]),h!==t)););return(_-=i)===r||_%r==0&&_/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[T]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?le((function(e,n){for(var r,a=i(e,t),o=a.length;o--;)e[r=j(e,a[o])]=!(n[r]=a[o])})):function(e){return i(e,0,n)}):i}},pseudos:{not:le((function(e){var t=[],n=[],r=s(e.replace(G,"$1"));return r[T]?le((function(e,t,n,i){for(var a,o=r(e,null,i,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,i,a){return t[0]=e,r(t,null,a,n),t[0]=null,!n.pop()}})),has:le((function(e){return function(t){return se(e,t).length>0}})),contains:le((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:le((function(e){return q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:me((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}function _e(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function Te(e,t,n){var r=t.dir,i=t.next,a=i||r,o=n&&"parentNode"===a,s=b++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i);return!1}:function(t,n,u){var l,c,d,h=[M,s];if(u){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,u))return!0}else for(;t=t[r];)if(1===t.nodeType||o)if(c=(d=t[T]||(t[T]={}))[t.uniqueID]||(d[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((l=c[a])&&l[0]===M&&l[1]===s)return h[2]=l[2];if(c[a]=h,h[2]=e(t,n,u))return!0}return!1}}function Ee(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function Me(e,t,n,r,i){for(var a,o=[],s=0,u=e.length,l=null!=t;s<u;s++)(a=e[s])&&(n&&!n(a,r,i)||(o.push(a),l&&t.push(s)));return o}function be(e,t,n,r,i,a){return r&&!r[T]&&(r=be(r)),i&&!i[T]&&(i=be(i,a)),le((function(a,o,s,u){var l,c,d,h=[],f=[],p=o.length,g=a||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!a&&t?g:Me(g,h,e,s,u),v=n?i||(a?e:p||r)?[]:o:m;if(n&&n(m,v,s,u),r)for(l=Me(v,f),r(l,[],s,u),c=l.length;c--;)(d=l[c])&&(v[f[c]]=!(m[f[c]]=d));if(a){if(i||e){if(i){for(l=[],c=v.length;c--;)(d=v[c])&&l.push(m[c]=d);i(null,v=[],l,u)}for(c=v.length;c--;)(d=v[c])&&(l=i?j(a,d):h[c])>-1&&(a[l]=!(o[l]=d))}}else v=Me(v===o?v.splice(p,v.length):v),i?i(null,o,v,u):O.apply(o,v)}))}function Ae(e){for(var t,n,i,a=e.length,o=r.relative[e[0].type],s=o||r.relative[" "],u=o?1:0,c=Te((function(e){return e===t}),s,!0),d=Te((function(e){return j(t,e)>-1}),s,!0),h=[function(e,n,r){var i=!o&&(r||n!==l)||((t=n).nodeType?c(e,n,r):d(e,n,r));return t=null,i}];u<a;u++)if(n=r.relative[e[u].type])h=[Te(Ee(h),n)];else{if((n=r.filter[e[u].type].apply(null,e[u].matches))[T]){for(i=++u;i<a&&!r.relative[e[i].type];i++);return be(u>1&&Ee(h),u>1&&_e(e.slice(0,u-1).concat({value:" "===e[u-2].type?"*":""})).replace(G,"$1"),n,u<i&&Ae(e.slice(u,i)),i<a&&Ae(e=e.slice(i)),i<a&&_e(e))}h.push(n)}return Ee(h)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,o=se.tokenize=function(e,t){var n,i,a,o,s,u,l,c=w[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=r.preFilter;s;){for(o in n&&!(i=H.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(a=[])),n=!1,(i=Y.exec(s))&&(n=i.shift(),a.push({value:n,type:i[0].replace(G," ")}),s=s.slice(n.length)),r.filter)!(i=W[o].exec(s))||l[o]&&!(i=l[o](i))||(n=i.shift(),a.push({value:n,type:o,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):w(e,u).slice(0)},s=se.compile=function(e,t){var n,i=[],a=[],s=S[e+" "];if(!s){for(t||(t=o(e)),n=t.length;n--;)(s=Ae(t[n]))[T]?i.push(s):a.push(s);(s=S(e,function(e,t){var n=t.length>0,i=e.length>0,a=function(a,o,s,u,c){var d,p,m,v=0,y="0",_=a&&[],T=[],E=l,b=a||i&&r.find.TAG("*",c),A=M+=null==E?1:Math.random()||.1,w=b.length;for(c&&(l=o===f||o||c);y!==w&&null!=(d=b[y]);y++){if(i&&d){for(p=0,o||d.ownerDocument===f||(h(d),s=!g);m=e[p++];)if(m(d,o||f,s)){u.push(d);break}c&&(M=A)}n&&((d=!m&&d)&&v--,a&&_.push(d))}if(v+=y,n&&y!==v){for(p=0;m=t[p++];)m(_,T,o,s);if(a){if(v>0)for(;y--;)_[y]||T[y]||(T[y]=N.call(u));T=Me(T)}O.apply(u,T),c&&!a&&T.length>0&&v+t.length>1&&se.uniqueSort(u)}return c&&(M=A,l=E),_};return n?le(a):a}(a,i))).selector=e}return s},u=se.select=function(e,t,n,i){var a,u,l,c,d,h="function"==typeof e&&e,f=!i&&o(e=h.selector||e);if(n=n||[],1===f.length){if((u=f[0]=f[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===t.nodeType&&g&&r.relative[u[1].type]){if(!(t=(r.find.ID(l.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(u.shift().value.length)}for(a=W.needsContext.test(e)?0:u.length;a--&&(l=u[a],!r.relative[c=l.type]);)if((d=r.find[c])&&(i=d(l.matches[0].replace(te,ne),ee.test(u[0].type)&&ve(t.parentNode)||t))){if(u.splice(a,1),!(e=i.length&&_e(u)))return O.apply(n,i),n;break}}return(h||s(e,f))(i,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=T.split("").sort(D).join("")===T,n.detectDuplicates=!!d,h(),n.sortDetached=ce((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ce((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ce((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ce((function(e){return null==e.getAttribute("disabled")}))||de(P,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(n);b.find=S,b.expr=S.selectors,b.expr[":"]=b.expr.pseudos,b.uniqueSort=b.unique=S.uniqueSort,b.text=S.getText,b.isXMLDoc=S.isXML,b.contains=S.contains,b.escapeSelector=S.escape;var x=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&b(e).is(n))break;r.push(e)}return r},D=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},I=b.expr.match.needsContext;function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function L(e,t,n){return y(t)?b.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?b.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?b.grep(e,(function(e){return d.call(t,e)>-1!==n})):b.filter(t,e,n)}b.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?b.find.matchesSelector(r,e)?[r]:[]:b.find.matches(e,b.grep(t,(function(e){return 1===e.nodeType})))},b.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(b(e).filter((function(){for(t=0;t<r;t++)if(b.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)b.find(e,i[t],n);return r>1?b.uniqueSort(n):n},filter:function(e){return this.pushStack(L(this,e||[],!1))},not:function(e){return this.pushStack(L(this,e||[],!0))},is:function(e){return!!L(this,"string"==typeof e&&I.test(e)?b(e):e||[],!1).length}});var O,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(b.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||O,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof b?t[0]:t,b.merge(this,b.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:o,!0)),N.test(r[1])&&b.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=o.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(b):b.makeArray(e,this)}).prototype=b.fn,O=b(o);var j=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function k(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}b.fn.extend({has:function(e){var t=b(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(b.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,a=[],o="string"!=typeof e&&b(e);if(!I.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&b.find.matchesSelector(n,e))){a.push(n);break}return this.pushStack(a.length>1?b.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?d.call(b(e),this[0]):d.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(b.uniqueSort(b.merge(this.get(),b(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return x(e,"parentNode")},parentsUntil:function(e,t,n){return x(e,"parentNode",n)},next:function(e){return k(e,"nextSibling")},prev:function(e){return k(e,"previousSibling")},nextAll:function(e){return x(e,"nextSibling")},prevAll:function(e){return x(e,"previousSibling")},nextUntil:function(e,t,n){return x(e,"nextSibling",n)},prevUntil:function(e,t,n){return x(e,"previousSibling",n)},siblings:function(e){return D((e.parentNode||{}).firstChild,e)},children:function(e){return D(e.firstChild)},contents:function(e){return void 0!==e.contentDocument?e.contentDocument:(C(e,"template")&&(e=e.content||e),b.merge([],e.childNodes))}},(function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),this.length>1&&(P[e]||b.uniqueSort(i),j.test(e)&&i.reverse()),this.pushStack(i)}}));var U=/[^\x20\t\r\n\f]+/g;function B(e){return e}function F(e){throw e}function z(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}b.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return b.each(e.match(U)||[],(function(e,n){t[n]=!0})),t}(e):b.extend({},e);var t,n,r,i,a=[],o=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;o.length;s=-1)for(n=o.shift();++s<a.length;)!1===a[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=a.length,n=!1);e.memory||(n=!1),t=!1,i&&(a=n?[]:"")},l={add:function(){return a&&(n&&!t&&(s=a.length-1,o.push(n)),function t(n){b.each(n,(function(n,r){y(r)?e.unique&&l.has(r)||a.push(r):r&&r.length&&"string"!==M(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return b.each(arguments,(function(e,t){for(var n;(n=b.inArray(t,a,n))>-1;)a.splice(n,1),n<=s&&s--})),this},has:function(e){return e?b.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=o=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=o=[],n||t||(a=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],o.push(n),t||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},b.extend({Deferred:function(e){var t=[["notify","progress",b.Callbacks("memory"),b.Callbacks("memory"),2],["resolve","done",b.Callbacks("once memory"),b.Callbacks("once memory"),0,"resolved"],["reject","fail",b.Callbacks("once memory"),b.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return b.Deferred((function(n){b.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];a[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var a=0;function o(e,t,r,i){return function(){var s=this,u=arguments,l=function(){var n,l;if(!(e<a)){if((n=r.apply(s,u))===t.promise())throw new TypeError("Thenable self-resolution");l=n&&("object"==typeof n||"function"==typeof n)&&n.then,y(l)?i?l.call(n,o(a,t,B,i),o(a,t,F,i)):(a++,l.call(n,o(a,t,B,i),o(a,t,F,i),o(a,t,B,t.notifyWith))):(r!==B&&(s=void 0,u=[n]),(i||t.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(n){b.Deferred.exceptionHook&&b.Deferred.exceptionHook(n,c.stackTrace),e+1>=a&&(r!==F&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?c():(b.Deferred.getStackHook&&(c.stackTrace=b.Deferred.getStackHook()),n.setTimeout(c))}}return b.Deferred((function(n){t[0][3].add(o(0,n,y(i)?i:B,n.notifyWith)),t[1][3].add(o(0,n,y(e)?e:B)),t[2][3].add(o(0,n,y(r)?r:F))})).promise()},promise:function(e){return null!=e?b.extend(e,i):i}},a={};return b.each(t,(function(e,n){var o=n[2],s=n[5];i[n[1]]=o.add,s&&o.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),o.add(n[3].fire),a[n[0]]=function(){return a[n[0]+"With"](this===a?void 0:this,arguments),this},a[n[0]+"With"]=o.fireWith})),i.promise(a),e&&e.call(a,a),a},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),a=b.Deferred(),o=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||a.resolveWith(r,i)}};if(t<=1&&(z(e,a.done(o(n)).resolve,a.reject,!t),"pending"===a.state()||y(i[n]&&i[n].then)))return a.then();for(;n--;)z(i[n],o(n),a.reject);return a.promise()}});var G=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;b.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&G.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},b.readyException=function(e){n.setTimeout((function(){throw e}))};var H=b.Deferred();function Y(){o.removeEventListener("DOMContentLoaded",Y),n.removeEventListener("load",Y),b.ready()}b.fn.ready=function(e){return H.then(e).catch((function(e){b.readyException(e)})),this},b.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--b.readyWait:b.isReady)||(b.isReady=!0,!0!==e&&--b.readyWait>0||H.resolveWith(o,[b]))}}),b.ready.then=H.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?n.setTimeout(b.ready):(o.addEventListener("DOMContentLoaded",Y),n.addEventListener("load",Y));var V=function(e,t,n,r,i,a,o){var s=0,u=e.length,l=null==n;if("object"===M(n))for(s in i=!0,n)V(e,t,s,n[s],!0,a,o);else if(void 0!==r&&(i=!0,y(r)||(o=!0),l&&(o?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(b(e),n)})),t))for(;s<u;s++)t(e[s],n,o?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):a},Q=/^-ms-/,q=/-([a-z])/g;function W(e,t){return t.toUpperCase()}function X(e){return e.replace(Q,"ms-").replace(q,W)}var K=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=b.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},K(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(U)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||b.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!b.isEmptyObject(t)}};var J=new Z,$=new Z,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}$.set(e,t,n)}else n=void 0;return n}b.extend({hasData:function(e){return $.hasData(e)||J.hasData(e)},data:function(e,t,n){return $.access(e,t,n)},removeData:function(e,t){$.remove(e,t)},_data:function(e,t,n){return J.access(e,t,n)},_removeData:function(e,t){J.remove(e,t)}}),b.fn.extend({data:function(e,t){var n,r,i,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(i=$.get(a),1===a.nodeType&&!J.get(a,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(r=o[n].name).indexOf("data-")&&(r=X(r.slice(5)),ne(a,r,i[r]));J.set(a,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){$.set(this,e)})):V(this,(function(t){var n;if(a&&void 0===t)return void 0!==(n=$.get(a,e))?n:void 0!==(n=ne(a,e))?n:void 0;this.each((function(){$.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){$.remove(this,e)}))}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=J.get(e,t),n&&(!r||Array.isArray(n)?r=J.access(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),a=b._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete a.stop,i.call(e,(function(){b.dequeue(e,t)}),a)),!r&&a&&a.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return J.get(e,n)||J.access(e,n,{empty:b.Callbacks("once memory").add((function(){J.remove(e,[t+"queue",n])}))})}}),b.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?b.queue(this[0],e):void 0===t?this:this.each((function(){var n=b.queue(this,e,t);b._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&b.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){b.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=b.Deferred(),a=this,o=this.length,s=function(){--r||i.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(n=J.get(a[o],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var re=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ie=new RegExp("^(?:([+-])=|)("+re+")([a-z%]*)$","i"),ae=["Top","Right","Bottom","Left"],oe=o.documentElement,se=function(e){return b.contains(e.ownerDocument,e)},ue={composed:!0};oe.getRootNode&&(se=function(e){return b.contains(e.ownerDocument,e)||e.getRootNode(ue)===e.ownerDocument});var le=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===b.css(e,"display")},ce=function(e,t,n,r){var i,a,o={};for(a in t)o[a]=e.style[a],e.style[a]=t[a];for(a in i=n.apply(e,r||[]),t)e.style[a]=o[a];return i};function de(e,t,n,r){var i,a,o=20,s=r?function(){return r.cur()}:function(){return b.css(e,t,"")},u=s(),l=n&&n[3]||(b.cssNumber[t]?"":"px"),c=e.nodeType&&(b.cssNumber[t]||"px"!==l&&+u)&&ie.exec(b.css(e,t));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;o--;)b.style(e,t,c+l),(1-a)*(1-(a=s()/u||.5))<=0&&(o=0),c/=a;c*=2,b.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var he={};function fe(e){var t,n=e.ownerDocument,r=e.nodeName,i=he[r];return i||(t=n.body.appendChild(n.createElement(r)),i=b.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),he[r]=i,i)}function pe(e,t){for(var n,r,i=[],a=0,o=e.length;a<o;a++)(r=e[a]).style&&(n=r.style.display,t?("none"===n&&(i[a]=J.get(r,"display")||null,i[a]||(r.style.display="")),""===r.style.display&&le(r)&&(i[a]=fe(r))):"none"!==n&&(i[a]="none",J.set(r,"display",n)));for(a=0;a<o;a++)null!=i[a]&&(e[a].style.display=i[a]);return e}b.fn.extend({show:function(){return pe(this,!0)},hide:function(){return pe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){le(this)?b(this).show():b(this).hide()}))}});var ge=/^(?:checkbox|radio)$/i,me=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ve=/^$|^module$|\/(?:java|ecma)script/i,ye={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _e(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?b.merge([e],n):n}function Te(e,t){for(var n=0,r=e.length;n<r;n++)J.set(e[n],"globalEval",!t||J.get(t[n],"globalEval"))}ye.optgroup=ye.option,ye.tbody=ye.tfoot=ye.colgroup=ye.caption=ye.thead,ye.th=ye.td;var Ee,Me,be=/<|&#?\w+;/;function Ae(e,t,n,r,i){for(var a,o,s,u,l,c,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((a=e[f])||0===a)if("object"===M(a))b.merge(h,a.nodeType?[a]:a);else if(be.test(a)){for(o=o||d.appendChild(t.createElement("div")),s=(me.exec(a)||["",""])[1].toLowerCase(),u=ye[s]||ye._default,o.innerHTML=u[1]+b.htmlPrefilter(a)+u[2],c=u[0];c--;)o=o.lastChild;b.merge(h,o.childNodes),(o=d.firstChild).textContent=""}else h.push(t.createTextNode(a));for(d.textContent="",f=0;a=h[f++];)if(r&&b.inArray(a,r)>-1)i&&i.push(a);else if(l=se(a),o=_e(d.appendChild(a),"script"),l&&Te(o),n)for(c=0;a=o[c++];)ve.test(a.type||"")&&n.push(a);return d}Ee=o.createDocumentFragment().appendChild(o.createElement("div")),(Me=o.createElement("input")).setAttribute("type","radio"),Me.setAttribute("checked","checked"),Me.setAttribute("name","t"),Ee.appendChild(Me),v.checkClone=Ee.cloneNode(!0).cloneNode(!0).lastChild.checked,Ee.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Ee.cloneNode(!0).lastChild.defaultValue;var we=/^key/,Se=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xe=/^([^.]*)(?:\.(.+)|)/;function De(){return!0}function Ie(){return!1}function Ce(e,t){return e===function(){try{return o.activeElement}catch(e){}}()==("focus"===t)}function Ne(e,t,n,r,i,a){var o,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ne(e,s,n,r,t[s],a);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ie;else if(!i)return e;return 1===a&&(o=i,(i=function(e){return b().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=b.guid++)),e.each((function(){b.event.add(this,t,i,r,n)}))}function Le(e,t,n){n?(J.set(e,t,!1),b.event.add(e,t,{namespace:!1,handler:function(e){var r,i,a=J.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(b.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=u.call(arguments),J.set(this,t,a),r=n(this,t),this[t](),a!==(i=J.get(this,t))||r?J.set(this,t,!1):i={},a!==i)return e.stopImmediatePropagation(),e.preventDefault(),i.value}else a.length&&(J.set(this,t,{value:b.event.trigger(b.extend(a[0],b.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===J.get(e,t)&&b.event.add(e,t,De)}b.event={global:{},add:function(e,t,n,r,i){var a,o,s,u,l,c,d,h,f,p,g,m=J.get(e);if(m)for(n.handler&&(n=(a=n).handler,i=a.selector),i&&b.find.matchesSelector(oe,i),n.guid||(n.guid=b.guid++),(u=m.events)||(u=m.events={}),(o=m.handle)||(o=m.handle=function(t){return void 0!==b&&b.event.triggered!==t.type?b.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(U)||[""]).length;l--;)f=g=(s=xe.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=b.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,d=b.event.special[f]||{},c=b.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&b.expr.match.needsContext.test(i),namespace:p.join(".")},a),(h=u[f])||((h=u[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,r,p,o)||e.addEventListener&&e.addEventListener(f,o)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),b.event.global[f]=!0)},remove:function(e,t,n,r,i){var a,o,s,u,l,c,d,h,f,p,g,m=J.hasData(e)&&J.get(e);if(m&&(u=m.events)){for(l=(t=(t||"").match(U)||[""]).length;l--;)if(f=g=(s=xe.exec(t[l])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=b.event.special[f]||{},h=u[f=(r?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,m.handle)||b.removeEvent(e,f,m.handle),delete u[f])}else for(f in u)b.event.remove(e,f+t[l],n,r,!0);b.isEmptyObject(u)&&J.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,a,o,s=b.event.fix(e),u=new Array(arguments.length),l=(J.get(this,"events")||{})[s.type]||[],c=b.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){for(o=b.event.handlers.call(this,s,l),t=0;(i=o[t++])&&!s.isPropagationStopped();)for(s.currentTarget=i.elem,n=0;(a=i.handlers[n++])&&!s.isImmediatePropagationStopped();)s.rnamespace&&!1!==a.namespace&&!s.rnamespace.test(a.namespace)||(s.handleObj=a,s.data=a.data,void 0!==(r=((b.event.special[a.origType]||{}).handle||a.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,a,o,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],o={},n=0;n<u;n++)void 0===o[i=(r=t[n]).selector+" "]&&(o[i]=r.needsContext?b(i,this).index(l)>-1:b.find(i,this,null,[l]).length),o[i]&&a.push(r);a.length&&s.push({elem:l,handlers:a})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(b.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[b.expando]?e:new b.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return ge.test(t.type)&&t.click&&C(t,"input")&&Le(t,"click",De),!1},trigger:function(e){var t=this||e;return ge.test(t.type)&&t.click&&C(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return ge.test(t.type)&&t.click&&C(t,"input")&&J.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},b.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?De:Ie,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[b.expando]=!0},b.Event.prototype={constructor:b.Event,isDefaultPrevented:Ie,isPropagationStopped:Ie,isImmediatePropagationStopped:Ie,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=De,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=De,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=De,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},b.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&we.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Se.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},b.event.addProp),b.each({focus:"focusin",blur:"focusout"},(function(e,t){b.event.special[e]={setup:function(){return Le(this,e,Ce),!1},trigger:function(){return Le(this,e),!0},delegateType:t}})),b.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,a=e.handleObj;return i&&(i===r||b.contains(r,i))||(e.type=a.origType,n=a.handler.apply(this,arguments),e.type=t),n}}})),b.fn.extend({on:function(e,t,n,r){return Ne(this,e,t,n,r)},one:function(e,t,n,r){return Ne(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,b(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ie),this.each((function(){b.event.remove(this,e,n,t)}))}});var Oe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Re=/<script|<style|<link/i,je=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ke(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&b(e).children("tbody")[0]||e}function Ue(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Be(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Fe(e,t){var n,r,i,a,o,s,u,l;if(1===t.nodeType){if(J.hasData(e)&&(a=J.access(e),o=J.set(t,a),l=a.events))for(i in delete o.handle,o.events={},l)for(n=0,r=l[i].length;n<r;n++)b.event.add(t,i,l[i][n]);$.hasData(e)&&(s=$.access(e),u=b.extend({},s),$.set(t,u))}}function ze(e,t){var n=t.nodeName.toLowerCase();"input"===n&&ge.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Ge(e,t,n,r){t=l.apply([],t);var i,a,o,s,u,c,d=0,h=e.length,f=h-1,p=t[0],g=y(p);if(g||h>1&&"string"==typeof p&&!v.checkClone&&je.test(p))return e.each((function(i){var a=e.eq(i);g&&(t[0]=p.call(this,i,a.html())),Ge(a,t,n,r)}));if(h&&(a=(i=Ae(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(s=(o=b.map(_e(i,"script"),Ue)).length;d<h;d++)u=i,d!==f&&(u=b.clone(u,!0,!0),s&&b.merge(o,_e(u,"script"))),n.call(e[d],u,d);if(s)for(c=o[o.length-1].ownerDocument,b.map(o,Be),d=0;d<s;d++)u=o[d],ve.test(u.type||"")&&!J.access(u,"globalEval")&&b.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?b._evalUrl&&!u.noModule&&b._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):E(u.textContent.replace(Pe,""),u,c))}return e}function He(e,t,n){for(var r,i=t?b.filter(t,e):e,a=0;null!=(r=i[a]);a++)n||1!==r.nodeType||b.cleanData(_e(r)),r.parentNode&&(n&&se(r)&&Te(_e(r,"script")),r.parentNode.removeChild(r));return e}b.extend({htmlPrefilter:function(e){return e.replace(Oe,"<$1></$2>")},clone:function(e,t,n){var r,i,a,o,s=e.cloneNode(!0),u=se(e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(o=_e(s),r=0,i=(a=_e(e)).length;r<i;r++)ze(a[r],o[r]);if(t)if(n)for(a=a||_e(e),o=o||_e(s),r=0,i=a.length;r<i;r++)Fe(a[r],o[r]);else Fe(e,s);return(o=_e(s,"script")).length>0&&Te(o,!u&&_e(e,"script")),s},cleanData:function(e){for(var t,n,r,i=b.event.special,a=0;void 0!==(n=e[a]);a++)if(K(n)){if(t=n[J.expando]){if(t.events)for(r in t.events)i[r]?b.event.remove(n,r):b.removeEvent(n,r,t.handle);n[J.expando]=void 0}n[$.expando]&&(n[$.expando]=void 0)}}}),b.fn.extend({detach:function(e){return He(this,e,!0)},remove:function(e){return He(this,e)},text:function(e){return V(this,(function(e){return void 0===e?b.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ke(this,e).appendChild(e)}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=ke(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(b.cleanData(_e(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return b.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Re.test(e)&&!ye[(me.exec(e)||["",""])[1].toLowerCase()]){e=b.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(b.cleanData(_e(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var n=this.parentNode;b.inArray(this,e)<0&&(b.cleanData(_e(this)),n&&n.replaceChild(t,this))}),e)}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){b.fn[e]=function(e){for(var n,r=[],i=b(e),a=i.length-1,o=0;o<=a;o++)n=o===a?this:this.clone(!0),b(i[o])[t](n),c.apply(r,n.get());return this.pushStack(r)}}));var Ye=new RegExp("^("+re+")(?!px)[a-z%]+$","i"),Ve=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},Qe=new RegExp(ae.join("|"),"i");function qe(e,t,n){var r,i,a,o,s=e.style;return(n=n||Ve(e))&&(""!==(o=n.getPropertyValue(t)||n[t])||se(e)||(o=b.style(e,t)),!v.pixelBoxStyles()&&Ye.test(o)&&Qe.test(t)&&(r=s.width,i=s.minWidth,a=s.maxWidth,s.minWidth=s.maxWidth=s.width=o,o=n.width,s.width=r,s.minWidth=i,s.maxWidth=a)),void 0!==o?o+"":o}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",oe.appendChild(l).appendChild(c);var e=n.getComputedStyle(c);r="1%"!==e.top,u=12===t(e.marginLeft),c.style.right="60%",s=36===t(e.right),i=36===t(e.width),c.style.position="absolute",a=12===t(c.offsetWidth/3),oe.removeChild(l),c=null}}function t(e){return Math.round(parseFloat(e))}var r,i,a,s,u,l=o.createElement("div"),c=o.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,b.extend(v,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),s},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),a}}))}();var Xe=["Webkit","Moz","ms"],Ke=o.createElement("div").style,Ze={};function Je(e){var t=b.cssProps[e]||Ze[e];return t||(e in Ke?e:Ze[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Xe.length;n--;)if((e=Xe[n]+t)in Ke)return e}(e)||e)}var $e=/^(none|table(?!-c[ea]).+)/,et=/^--/,tt={position:"absolute",visibility:"hidden",display:"block"},nt={letterSpacing:"0",fontWeight:"400"};function rt(e,t,n){var r=ie.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function it(e,t,n,r,i,a){var o="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(u+=b.css(e,n+ae[o],!0,i)),r?("content"===n&&(u-=b.css(e,"padding"+ae[o],!0,i)),"margin"!==n&&(u-=b.css(e,"border"+ae[o]+"Width",!0,i))):(u+=b.css(e,"padding"+ae[o],!0,i),"padding"!==n?u+=b.css(e,"border"+ae[o]+"Width",!0,i):s+=b.css(e,"border"+ae[o]+"Width",!0,i));return!r&&a>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-u-s-.5))||0),u}function at(e,t,n){var r=Ve(e),i=(!v.boxSizingReliable()||n)&&"border-box"===b.css(e,"boxSizing",!1,r),a=i,o=qe(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ye.test(o)){if(!n)return o;o="auto"}return(!v.boxSizingReliable()&&i||"auto"===o||!parseFloat(o)&&"inline"===b.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===b.css(e,"boxSizing",!1,r),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+it(e,t,n||(i?"border":"content"),a,r,o)+"px"}function ot(e,t,n,r,i){return new ot.prototype.init(e,t,n,r,i)}b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=qe(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,a,o,s=X(t),u=et.test(t),l=e.style;if(u||(t=Je(s)),o=b.cssHooks[t]||b.cssHooks[s],void 0===n)return o&&"get"in o&&void 0!==(i=o.get(e,!1,r))?i:l[t];"string"===(a=typeof n)&&(i=ie.exec(n))&&i[1]&&(n=de(e,t,i),a="number"),null!=n&&n==n&&("number"!==a||u||(n+=i&&i[3]||(b.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(n=o.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,a,o,s=X(t);return et.test(t)||(t=Je(s)),(o=b.cssHooks[t]||b.cssHooks[s])&&"get"in o&&(i=o.get(e,!0,n)),void 0===i&&(i=qe(e,t,r)),"normal"===i&&t in nt&&(i=nt[t]),""===n||n?(a=parseFloat(i),!0===n||isFinite(a)?a||0:i):i}}),b.each(["height","width"],(function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return!$e.test(b.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?at(e,t,r):ce(e,tt,(function(){return at(e,t,r)}))},set:function(e,n,r){var i,a=Ve(e),o=!v.scrollboxSize()&&"absolute"===a.position,s=(o||r)&&"border-box"===b.css(e,"boxSizing",!1,a),u=r?it(e,t,r,s,a):0;return s&&o&&(u-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-it(e,t,"border",!1,a)-.5)),u&&(i=ie.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=b.css(e,t)),rt(0,n,u)}}})),b.cssHooks.marginLeft=We(v.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(qe(e,"marginLeft"))||e.getBoundingClientRect().left-ce(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),b.each({margin:"",padding:"",border:"Width"},(function(e,t){b.cssHooks[e+t]={expand:function(n){for(var r=0,i={},a="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ae[r]+t]=a[r]||a[r-2]||a[0];return i}},"margin"!==e&&(b.cssHooks[e+t].set=rt)})),b.fn.extend({css:function(e,t){return V(this,(function(e,t,n){var r,i,a={},o=0;if(Array.isArray(t)){for(r=Ve(e),i=t.length;o<i;o++)a[t[o]]=b.css(e,t[o],!1,r);return a}return void 0!==n?b.style(e,t,n):b.css(e,t)}),e,t,arguments.length>1)}}),b.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,n,r,i,a){this.elem=e,this.prop=n,this.easing=i||b.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=a||(b.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=b.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):1!==e.elem.nodeType||!b.cssHooks[e.prop]&&null==e.elem.style[Je(e.prop)]?e.elem[e.prop]=e.now:b.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},b.fx=ot.prototype.init,b.fx.step={};var st,ut,lt=/^(?:toggle|show|hide)$/,ct=/queueHooks$/;function dt(){ut&&(!1===o.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(dt):n.setTimeout(dt,b.fx.interval),b.fx.tick())}function ht(){return n.setTimeout((function(){st=void 0})),st=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ae[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(gt.tweeners[t]||[]).concat(gt.tweeners["*"]),a=0,o=i.length;a<o;a++)if(r=i[a].call(n,t,e))return r}function gt(e,t,n){var r,i,a=0,o=gt.prefilters.length,s=b.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var t=st||ht(),n=Math.max(0,l.startTime+l.duration-t),r=1-(n/l.duration||0),a=0,o=l.tweens.length;a<o;a++)l.tweens[a].run(r);return s.notifyWith(e,[l,r,n]),r<1&&o?n:(o||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{},easing:b.easing._default},n),originalProperties:t,originalOptions:n,startTime:st||ht(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(!function(e,t){var n,r,i,a,o;for(n in e)if(i=t[r=X(n)],a=e[n],Array.isArray(a)&&(i=a[1],a=e[n]=a[0]),n!==r&&(e[r]=a,delete e[n]),(o=b.cssHooks[r])&&"expand"in o)for(n in a=o.expand(a),delete e[r],a)n in e||(e[n]=a[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);a<o;a++)if(r=gt.prefilters[a].call(l,e,c,l.opts))return y(r.stop)&&(b._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return b.map(c,pt,l),y(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l}b.Animation=b.extend(gt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return de(n.elem,e,ie.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(U);for(var n,r=0,i=e.length;r<i;r++)n=e[r],gt.tweeners[n]=gt.tweeners[n]||[],gt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,a,o,s,u,l,c,d="width"in t||"height"in t,h=this,f={},p=e.style,g=e.nodeType&&le(e),m=J.get(e,"fxshow");for(r in n.queue||(null==(o=b._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,b.queue(e,"fx").length||o.empty.fire()}))}))),t)if(i=t[r],lt.test(i)){if(delete t[r],a=a||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||b.style(e,r)}if((u=!b.isEmptyObject(t))||!b.isEmptyObject(f))for(r in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=m&&m.display)&&(l=J.get(e,"display")),"none"===(c=b.css(e,"display"))&&(l?c=l:(pe([e],!0),l=e.style.display||l,c=b.css(e,"display"),pe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===b.css(e,"float")&&(u||(h.done((function(){p.display=l})),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,f)u||(m?"hidden"in m&&(g=m.hidden):m=J.access(e,"fxshow",{display:l}),a&&(m.hidden=!g),g&&pe([e],!0),h.done((function(){for(r in g||pe([e]),J.remove(e,"fxshow"),f)b.style(e,r,f[r])}))),u=pt(g?m[r]:0,r,h),r in m||(m[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?gt.prefilters.unshift(e):gt.prefilters.push(e)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return b.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in b.fx.speeds?r.duration=b.fx.speeds[r.duration]:r.duration=b.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(le).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),a=b.speed(t,n,r),o=function(){var t=gt(this,b.extend({},e),a);(i||J.get(this,"finish"))&&t.stop(!0)};return o.finish=o,i||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",a=b.timers,o=J.get(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&ct.test(i)&&r(o[i]);for(i=a.length;i--;)a[i].elem!==this||null!=e&&a[i].queue!==e||(a[i].anim.stop(n),t=!1,a.splice(i,1));!t&&n||b.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=J.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],a=b.timers,o=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),b.each(["toggle","show","hide"],(function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ft(t,!0),e,r,i)}})),b.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),b.timers=[],b.fx.tick=function(){var e,t=0,n=b.timers;for(st=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||b.fx.stop(),st=void 0},b.fx.timer=function(e){b.timers.push(e),b.fx.start()},b.fx.interval=13,b.fx.start=function(){ut||(ut=!0,dt())},b.fx.stop=function(){ut=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fn.delay=function(e,t){return e=b.fx&&b.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=o.createElement("input"),t=o.createElement("select").appendChild(o.createElement("option"));e.type="checkbox",v.checkOn=""!==e.value,v.optSelected=t.selected,(e=o.createElement("input")).value="t",e.type="radio",v.radioValue="t"===e.value}();var mt,vt=b.expr.attrHandle;b.fn.extend({attr:function(e,t){return V(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){b.removeAttr(this,e)}))}}),b.extend({attr:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?b.prop(e,t,n):(1===a&&b.isXMLDoc(e)||(i=b.attrHooks[t.toLowerCase()]||(b.expr.match.bool.test(t)?mt:void 0)),void 0!==n?null===n?void b.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=b.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&C(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(U);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),mt={set:function(e,t,n){return!1===t?b.removeAttr(e,n):e.setAttribute(n,n),n}},b.each(b.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=vt[t]||b.find.attr;vt[t]=function(e,t,r){var i,a,o=t.toLowerCase();return r||(a=vt[o],vt[o]=i,i=null!=n(e,t,r)?o:null,vt[o]=a),i}}));var yt=/^(?:input|select|textarea|button)$/i,_t=/^(?:a|area)$/i;function Tt(e){return(e.match(U)||[]).join(" ")}function Et(e){return e.getAttribute&&e.getAttribute("class")||""}function Mt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(U)||[]}b.fn.extend({prop:function(e,t){return V(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[b.propFix[e]||e]}))}}),b.extend({prop:function(e,t,n){var r,i,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&b.isXMLDoc(e)||(t=b.propFix[t]||t,i=b.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=b.find.attr(e,"tabindex");return t?parseInt(t,10):yt.test(e.nodeName)||_t.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(b.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){b.propFix[this.toLowerCase()]=this})),b.fn.extend({addClass:function(e){var t,n,r,i,a,o,s,u=0;if(y(e))return this.each((function(t){b(this).addClass(e.call(this,t,Et(this)))}));if((t=Mt(e)).length)for(;n=this[u++];)if(i=Et(n),r=1===n.nodeType&&" "+Tt(i)+" "){for(o=0;a=t[o++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i!==(s=Tt(r))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,r,i,a,o,s,u=0;if(y(e))return this.each((function(t){b(this).removeClass(e.call(this,t,Et(this)))}));if(!arguments.length)return this.attr("class","");if((t=Mt(e)).length)for(;n=this[u++];)if(i=Et(n),r=1===n.nodeType&&" "+Tt(i)+" "){for(o=0;a=t[o++];)for(;r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");i!==(s=Tt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,r="string"===n||Array.isArray(e);return"boolean"==typeof t&&r?t?this.addClass(e):this.removeClass(e):y(e)?this.each((function(n){b(this).toggleClass(e.call(this,n,Et(this),t),t)})):this.each((function(){var t,i,a,o;if(r)for(i=0,a=b(this),o=Mt(e);t=o[i++];)a.hasClass(t)?a.removeClass(t):a.addClass(t);else void 0!==e&&"boolean"!==n||((t=Et(this))&&J.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":J.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+Tt(Et(n))+" ").indexOf(t)>-1)return!0;return!1}});var bt=/\r/g;b.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,b(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=b.map(i,(function(e){return null==e?"":e+""}))),(t=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=b.valHooks[i.type]||b.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(bt,""):null==n?"":n:void 0}}),b.extend({valHooks:{option:{get:function(e){var t=b.find.attr(e,"value");return null!=t?t:Tt(b.text(e))}},select:{get:function(e){var t,n,r,i=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],u=o?a+1:i.length;for(r=a<0?u:o?a:0;r<u;r++)if(((n=i[r]).selected||r===a)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,a=b.makeArray(t),o=i.length;o--;)((r=i[o]).selected=b.inArray(b.valHooks.option.get(r),a)>-1)&&(n=!0);return n||(e.selectedIndex=-1),a}}}}),b.each(["radio","checkbox"],(function(){b.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=b.inArray(b(e).val(),t)>-1}},v.checkOn||(b.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),v.focusin="onfocusin"in n;var At=/^(?:focusinfocus|focusoutblur)$/,wt=function(e){e.stopPropagation()};b.extend(b.event,{trigger:function(e,t,r,i){var a,s,u,l,c,d,h,f,g=[r||o],m=p.call(e,"type")?e.type:e,v=p.call(e,"namespace")?e.namespace.split("."):[];if(s=f=u=r=r||o,3!==r.nodeType&&8!==r.nodeType&&!At.test(m+b.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),c=m.indexOf(":")<0&&"on"+m,(e=e[b.expando]?e:new b.Event(m,"object"==typeof e&&e)).isTrigger=i?2:3,e.namespace=v.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:b.makeArray(t,[e]),h=b.event.special[m]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!_(r)){for(l=h.delegateType||m,At.test(l+m)||(s=s.parentNode);s;s=s.parentNode)g.push(s),u=s;u===(r.ownerDocument||o)&&g.push(u.defaultView||u.parentWindow||n)}for(a=0;(s=g[a++])&&!e.isPropagationStopped();)f=s,e.type=a>1?l:h.bindType||m,(d=(J.get(s,"events")||{})[e.type]&&J.get(s,"handle"))&&d.apply(s,t),(d=c&&s[c])&&d.apply&&K(s)&&(e.result=d.apply(s,t),!1===e.result&&e.preventDefault());return e.type=m,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(g.pop(),t)||!K(r)||c&&y(r[m])&&!_(r)&&((u=r[c])&&(r[c]=null),b.event.triggered=m,e.isPropagationStopped()&&f.addEventListener(m,wt),r[m](),e.isPropagationStopped()&&f.removeEventListener(m,wt),b.event.triggered=void 0,u&&(r[c]=u)),e.result}},simulate:function(e,t,n){var r=b.extend(new b.Event,n,{type:e,isSimulated:!0});b.event.trigger(r,null,t)}}),b.fn.extend({trigger:function(e,t){return this.each((function(){b.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),v.focusin||b.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){b.event.simulate(t,e.target,b.event.fix(e))};b.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=J.access(r,t);i||r.addEventListener(e,n,!0),J.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=J.access(r,t)-1;i?J.access(r,t,i):(r.removeEventListener(e,n,!0),J.remove(r,t))}}}));var St=n.location,xt=Date.now(),Dt=/\?/;b.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+e),t};var It=/\[\]$/,Ct=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,n,r){var i;if(Array.isArray(t))b.each(t,(function(t,i){n||It.test(e)?r(e,i):Ot(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==M(t))r(e,t);else for(i in t)Ot(e+"["+i+"]",t[i],n,r)}b.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,(function(){i(this.name,this.value)}));else for(n in e)Ot(n,e[n],t,i);return r.join("&")},b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&Lt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!ge.test(e))})).map((function(e,t){var n=b(this).val();return null==n?null:Array.isArray(n)?b.map(n,(function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}})):{name:t.name,value:n.replace(Ct,"\r\n")}})).get()}});var Rt=/%20/g,jt=/#.*$/,Pt=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:GET|HEAD)$/,Bt=/^\/\//,Ft={},zt={},Gt="*/".concat("*"),Ht=o.createElement("a");function Yt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,a=t.toLowerCase().match(U)||[];if(y(n))for(;r=a[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Vt(e,t,n,r){var i={},a=e===zt;function o(s){var u;return i[s]=!0,b.each(e[s]||[],(function(e,s){var l=s(t,n,r);return"string"!=typeof l||a||i[l]?a?!(u=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),u}return o(t.dataTypes[0])||!i["*"]&&o("*")}function Qt(e,t){var n,r,i=b.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&b.extend(!0,e,r),e}Ht.href=St.href,b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:St.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(St.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Gt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Qt(Qt(e,b.ajaxSettings),t):Qt(b.ajaxSettings,e)},ajaxPrefilter:Yt(Ft),ajaxTransport:Yt(zt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,a,s,u,l,c,d,h,f,p=b.ajaxSetup({},t),g=p.context||p,m=p.context&&(g.nodeType||g.jquery)?b(g):b.event,v=b.Deferred(),y=b.Callbacks("once memory"),_=p.statusCode||{},T={},E={},M="canceled",A={readyState:0,getResponseHeader:function(e){var t;if(c){if(!s)for(s={};t=kt.exec(a);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?a:null},setRequestHeader:function(e,t){return null==c&&(e=E[e.toLowerCase()]=E[e.toLowerCase()]||e,T[e]=t),this},overrideMimeType:function(e){return null==c&&(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)A.always(e[A.status]);else for(t in e)_[t]=[_[t],e[t]];return this},abort:function(e){var t=e||M;return r&&r.abort(t),w(0,t),this}};if(v.promise(A),p.url=((e||p.url||St.href)+"").replace(Bt,St.protocol+"//"),p.type=t.method||t.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(U)||[""],null==p.crossDomain){l=o.createElement("a");try{l.href=p.url,l.href=l.href,p.crossDomain=Ht.protocol+"//"+Ht.host!=l.protocol+"//"+l.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),Vt(Ft,p,t,A),c)return A;for(h in(d=b.event&&p.global)&&0==b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Ut.test(p.type),i=p.url.replace(jt,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Rt,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Dt.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Pt,"$1"),f=(Dt.test(i)?"&":"?")+"_="+xt+++f),p.url=i+f),p.ifModified&&(b.lastModified[i]&&A.setRequestHeader("If-Modified-Since",b.lastModified[i]),b.etag[i]&&A.setRequestHeader("If-None-Match",b.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||t.contentType)&&A.setRequestHeader("Content-Type",p.contentType),A.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Gt+"; q=0.01":""):p.accepts["*"]),p.headers)A.setRequestHeader(h,p.headers[h]);if(p.beforeSend&&(!1===p.beforeSend.call(g,A,p)||c))return A.abort();if(M="abort",y.add(p.complete),A.done(p.success),A.fail(p.error),r=Vt(zt,p,t,A)){if(A.readyState=1,d&&m.trigger("ajaxSend",[A,p]),c)return A;p.async&&p.timeout>0&&(u=n.setTimeout((function(){A.abort("timeout")}),p.timeout));try{c=!1,r.send(T,w)}catch(e){if(c)throw e;w(-1,e)}}else w(-1,"No Transport");function w(e,t,o,s){var l,h,f,T,E,M=t;c||(c=!0,u&&n.clearTimeout(u),r=void 0,a=s||"",A.readyState=e>0?4:0,l=e>=200&&e<300||304===e,o&&(T=function(e,t,n){for(var r,i,a,o,s=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)a=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){a=i;break}o||(o=i)}a=a||o}if(a)return a!==u[0]&&u.unshift(a),n[a]}(p,A,o)),T=function(e,t,n,r){var i,a,o,s,u,l={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(n[e.responseFields[a]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=a,a=c.shift())if("*"===a)a=u;else if("*"!==u&&u!==a){if(!(o=l[u+" "+a]||l["* "+a]))for(i in l)if((s=i.split(" "))[1]===a&&(o=l[u+" "+s[0]]||l["* "+s[0]])){!0===o?o=l[i]:!0!==l[i]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+a}}}return{state:"success",data:t}}(p,T,A,l),l?(p.ifModified&&((E=A.getResponseHeader("Last-Modified"))&&(b.lastModified[i]=E),(E=A.getResponseHeader("etag"))&&(b.etag[i]=E)),204===e||"HEAD"===p.type?M="nocontent":304===e?M="notmodified":(M=T.state,h=T.data,l=!(f=T.error))):(f=M,!e&&M||(M="error",e<0&&(e=0))),A.status=e,A.statusText=(t||M)+"",l?v.resolveWith(g,[h,M,A]):v.rejectWith(g,[A,M,f]),A.statusCode(_),_=void 0,d&&m.trigger(l?"ajaxSuccess":"ajaxError",[A,p,l?h:f]),y.fireWith(g,[A,M]),d&&(m.trigger("ajaxComplete",[A,p]),--b.active||b.event.trigger("ajaxStop")))}return A},getJSON:function(e,t,n){return b.get(e,t,n,"json")},getScript:function(e,t){return b.get(e,void 0,t,"script")}}),b.each(["get","post"],(function(e,t){b[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),b.ajax(b.extend({url:e,type:t,dataType:i,data:n,success:r},b.isPlainObject(e)&&e))}})),b._evalUrl=function(e,t){return b.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){b.globalEval(e,t)}})},b.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=b(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){b(this).wrapInner(e.call(this,t))})):this.each((function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){b(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){b(this).replaceWith(this.childNodes)})),this}}),b.expr.pseudos.hidden=function(e){return!b.expr.pseudos.visible(e)},b.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},b.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},Wt=b.ajaxSettings.xhr();v.cors=!!Wt&&"withCredentials"in Wt,v.ajax=Wt=!!Wt,b.ajaxTransport((function(e){var t,r;if(v.cors||Wt&&!e.crossDomain)return{send:function(i,a){var o,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)s[o]=e.xhrFields[o];for(o in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(o,i[o]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),b.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),b.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=b("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),o.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Xt,Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||b.expando+"_"+xt++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",(function(e,t,r){var i,a,o,s=!1!==e.jsonp&&(Zt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Zt,"$1"+i):!1!==e.jsonp&&(e.url+=(Dt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return o||b.error(i+" was not called"),o[0]},e.dataTypes[0]="json",a=n[i],n[i]=function(){o=arguments},r.always((function(){void 0===a?b(n).removeProp(i):n[i]=a,e[i]&&(e.jsonpCallback=t.jsonpCallback,Kt.push(i)),o&&y(a)&&a(o[0]),o=a=void 0})),"script"})),v.createHTMLDocument=((Xt=o.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Xt.childNodes.length),b.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(v.createHTMLDocument?((r=(t=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,t.head.appendChild(r)):t=o),a=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=Ae([e],t,a),a&&a.length&&b(a).remove(),b.merge([],i.childNodes)));var r,i,a},b.fn.load=function(e,t,n){var r,i,a,o=this,s=e.indexOf(" ");return s>-1&&(r=Tt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),o.length>0&&b.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){a=arguments,o.html(r?b("<div>").append(b.parseHTML(e)).find(r):e)})).always(n&&function(e,t){o.each((function(){n.apply(this,a||[e.responseText,t,e])}))}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){b.fn[t]=function(e){return this.on(t,e)}})),b.expr.pseudos.animated=function(e){return b.grep(b.timers,(function(t){return e===t.elem})).length},b.offset={setOffset:function(e,t,n){var r,i,a,o,s,u,l=b.css(e,"position"),c=b(e),d={};"static"===l&&(e.style.position="relative"),s=c.offset(),a=b.css(e,"top"),u=b.css(e,"left"),("absolute"===l||"fixed"===l)&&(a+u).indexOf("auto")>-1?(o=(r=c.position()).top,i=r.left):(o=parseFloat(a)||0,i=parseFloat(u)||0),y(t)&&(t=t.call(e,n,b.extend({},s))),null!=t.top&&(d.top=t.top-s.top+o),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},b.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){b.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===b.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===b.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=b(e).offset()).top+=b.css(e,"borderTopWidth",!0),i.left+=b.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-b.css(r,"marginTop",!0),left:t.left-i.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===b.css(e,"position");)e=e.offsetParent;return e||oe}))}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;b.fn[e]=function(r){return V(this,(function(e,r,i){var a;if(_(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===i)return a?a[t]:e[r];a?a.scrollTo(n?a.pageXOffset:i,n?i:a.pageYOffset):e[r]=i}),e,r,arguments.length)}})),b.each(["top","left"],(function(e,t){b.cssHooks[t]=We(v.pixelPosition,(function(e,n){if(n)return n=qe(e,t),Ye.test(n)?b(e).position()[t]+"px":n}))})),b.each({Height:"height",Width:"width"},(function(e,t){b.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){b.fn[r]=function(i,a){var o=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===a?"margin":"border");return V(this,(function(t,n,i){var a;return _(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===i?b.css(t,n,s):b.style(t,n,i,s)}),t,o?i:void 0,o)}}))})),b.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}})),b.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),b.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),b.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=u.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(u.call(arguments)))}).guid=e.guid=e.guid||b.guid++,i},b.holdReady=function(e){e?b.readyWait++:b.ready(!0)},b.isArray=Array.isArray,b.parseJSON=JSON.parse,b.nodeName=C,b.isFunction=y,b.isWindow=_,b.camelCase=X,b.type=M,b.now=Date.now,b.isNumeric=function(e){var t=b.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},void 0===(r=function(){return b}.apply(t,[]))||(e.exports=r);var Jt=n.jQuery,$t=n.$;return b.noConflict=function(e){return n.$===b&&(n.$=$t),e&&n.jQuery===b&&(n.jQuery=Jt),b},i||(n.jQuery=n.$=b),b}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Debug=t.MediaPlayerFactory=t.MetricsReporting=t.Protection=t.MediaPlayer=void 0;var r=n(122),i=u(n(243)),a=u(n(262)),o=u(n(277)),s=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}dashjs.Protection=a.default,dashjs.MetricsReporting=i.default,dashjs.MediaPlayerFactory=o.default,dashjs.Debug=s.default,t.default=dashjs,t.MediaPlayer=r.MediaPlayer,t.Protection=a.default,t.MetricsReporting=i.default,t.MediaPlayerFactory=o.default,t.Debug=s.default},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.Debug=t.FactoryMaker=t.MediaPlayer=void 0;var r=s(n(75)),i=s(n(1)),a=s(n(6)),o=n(102);function s(e){return e&&e.__esModule?e:{default:e}}var u="undefined"!=typeof window&&window||e,l=u.dashjs;l||(l=u.dashjs={}),l.MediaPlayer=r.default,l.FactoryMaker=i.default,l.Debug=a.default,l.Version=(0,o.getVersionString)(),t.default=l,t.MediaPlayer=r.default,t.FactoryMaker=i.default,t.Debug=a.default}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(4)),i=l(n(14)),a=l(n(5)),o=l(n(7)),s=l(n(1)),u=l(n(6));function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0,s=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0,w=void 0,S=void 0,x=void 0,D=void 0,I=void 0,C=void 0;function N(e){!T&&e.fromStreamInfo&&void 0!==m[e.fromStreamInfo.id]&&(delete y[e.fromStreamInfo.id],delete m[e.fromStreamInfo.id])}function L(){return parseFloat((O()-B()).toFixed(5))}function O(){var e=q(!0),t=T&&_?e-_.start:0;return e+(_?_.duration-t:t)}function R(){_&&h&&h.getElement()?h.play():M=!0}function j(){return _&&h?h.isPaused():null}function P(){_&&h&&h.pause()}function k(){return _&&h?h.isSeeking():null}function U(e,n,r){_&&h&&(!0===r?e!==h.getTime()&&(h.removeEventListener("seeking",re),s.info("Requesting seek to time: "+e),h.setCurrentTime(e,n)):(t.trigger(o.default.PLAYBACK_SEEK_ASKED),_&&(delete y[_.id],delete m[_.id]),s.info("Requesting seek to time: "+e),h.setCurrentTime(e,n)))}function B(){return _&&h?h.getTime():null}function F(){var e=B();if(T&&!isNaN(A)){var t=A/1e3;e>t&&(e-=t)}return e}function z(){return _&&h?h.getPlaybackRate():null}function G(){return _&&h?h.getEnded():null}function H(){return T}function Y(){if(!T||isNaN(A))return NaN;var e=F();if(isNaN(e)||0===e)return 0;var t=(new Date).getTime()+1e3*f.getClientTimeOffset();return Math.max(((t-A-1e3*e)/1e3).toFixed(3),0)}function V(){p=NaN,M=!1,m={},v=0,A=0,y={},h&&(t.off(o.default.DATA_UPDATE_COMPLETED,Z,this),t.off(o.default.BUFFER_LEVEL_STATE_CHANGED,ve,this),t.off(o.default.BYTES_APPENDED_END_FRAGMENT,ge,this),t.off(o.default.LOADING_PROGRESS,me,this),t.off(o.default.PERIOD_SWITCH_STARTED,N,this),t.off(o.default.PLAYBACK_PROGRESS,fe,this),t.off(o.default.PLAYBACK_TIME_UPDATED,fe,this),t.off(o.default.PLAYBACK_ENDED,ce,this),t.off(o.default.STREAM_INITIALIZING,_e,this),X(),h.removeEventListener("canplay",J),h.removeEventListener("play",$),h.removeEventListener("waiting",ee),h.removeEventListener("playing",te),h.removeEventListener("pause",ne),h.removeEventListener("error",de),h.removeEventListener("seeking",re),h.removeEventListener("seeked",ie),h.removeEventListener("timeupdate",ae),h.removeEventListener("progress",oe),h.removeEventListener("ratechange",se),h.removeEventListener("loadedmetadata",ue),h.removeEventListener("stalled",ye),h.removeEventListener("ended",le)),g=null,h=null,_=null,T=null}function Q(){var e=I.getURIFragmentData(),t=void 0;if(e){t={};var n=parseInt(e.r,10);n>=0&&_&&n<_.manifestInfo.DVRWindowSize&&null===e.t&&(e.t=Math.max(Math.floor(Date.now()/1e3)-_.manifestInfo.DVRWindowSize,_.manifestInfo.availableFrom.getTime()/1e3+_.start)+n),t.fragS=parseFloat(e.s),t.fragT=parseFloat(e.t)}return t}function q(e,t){var n=void 0,r=NaN;if(e)r=_?_.start:r;else{var i=Q();r=i?isNaN(i.fragS)?i.fragT:i.fragS:0}if(T)!isNaN(r)&&_&&((n=r-_.manifestInfo.availableFrom.getTime()/1e3)>p||n<(isNaN(t)?NaN:t-_.manifestInfo.DVRWindowSize))&&(n=null),n=n||p;else if(_)if(!isNaN(r)&&r<Math.max(_.manifestInfo.duration,_.duration)&&r>=0)n=r;else{var a=m[_.id];n=void 0!==a?Math.max(void 0!==a.audio?a.audio:0,void 0!==a.video?a.video:0,_.start):_.start}return n}function W(){if(null===g){g=setInterval((function(){var e;t.trigger(o.default.WALLCLOCK_TIME_UPDATED,{isDynamic:T,time:new Date}),H()&&j()&&(e=Date.now(),(!b||e>b+500)&&(b=e,ae()))}),C.get().streaming.wallclockTimeUpdateInterval)}}function X(){clearInterval(g),g=null}function K(){if(!j()&&T&&0!==h.getReadyState()){var e=F(),t=function(e){var t=c.getCurrentDVRInfo(),n=t?t.range:null;return n?e>n.end?Math.max(n.end-2*_.manifestInfo.minBufferTime,n.start):e+.25<n.start&&n.start-e>n.start-31536e4?n.start:e:NaN}(e);!isNaN(t)&&t!==e&&U(t)}}function Z(e){if(!e.error){var t=d.convertDataToRepresentationInfo(e.currentRepresentation),n=t?t.mediaInfo.streamInfo:null;null!==n&&_.id===n.id&&(_=n,K())}}function J(){t.trigger(o.default.CAN_PLAY)}function $(){s.info("Native video element event: play"),K(),W(),t.trigger(o.default.PLAYBACK_STARTED,{startTime:B()})}function ee(){s.info("Native video element event: waiting"),t.trigger(o.default.PLAYBACK_WAITING,{playingTime:B()})}function te(){s.info("Native video element event: playing"),t.trigger(o.default.PLAYBACK_PLAYING,{playingTime:B()})}function ne(){s.info("Native video element event: pause"),t.trigger(o.default.PLAYBACK_PAUSED,{ended:G()})}function re(){var e=B();s.info("Seeking to: "+e),W(),t.trigger(o.default.PLAYBACK_SEEKING,{seekTime:e})}function ie(){s.info("Native video element event: seeked"),t.trigger(o.default.PLAYBACK_SEEKED),h.addEventListener("seeking",re)}function ae(){_&&t.trigger(o.default.PLAYBACK_TIME_UPDATED,{timeToEnd:L(),time:B()})}function oe(){t.trigger(o.default.PLAYBACK_PROGRESS)}function se(){var e=z();s.info("Native video element event: ratechange: ",e),t.trigger(o.default.PLAYBACK_RATE_CHANGED,{playbackRate:e})}function ue(){s.info("Native video element event: loadedmetadata"),t.trigger(o.default.PLAYBACK_METADATA_LOADED),W()}function le(){s.info("Native video element event: ended"),P(),X(),t.trigger(o.default.PLAYBACK_ENDED,{isLast:l.getActiveStreamInfo().isLast})}function ce(e){g&&e.isLast&&(s.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended"),h.setCurrentTime(O()),P(),X())}function de(e){var n=e.target||e.srcElement;t.trigger(o.default.PLAYBACK_ERROR,{error:n.error})}function he(e,t){if(t&&t.length>0)for(var n=0,r=t.length;n<r;n++)if(e>=t.start(n)&&e<t.end(n))return!0;return!1}function fe(){T&&C.get().streaming.lowLatencyEnabled&&C.get().streaming.liveCatchUpPlaybackRate>0&&!j()&&!k()&&(C.get().streaming.liveCatchUpPlaybackRate>0&&B()>0&&Math.abs(Y()-E.getLiveDelay())>C.get().streaming.liveCatchUpMinDrift?function(){if(h){var e=C.get().streaming.liveCatchUpPlaybackRate,t=E.getLiveDelay(),n=Y()-t,r=5*n,i=2*e/(1+Math.pow(Math.E,-r)),a=1-e+i;if(x)(function(){var e=null;return l.getActiveStreamProcessors().forEach((function(t){var n=t.getBufferLevel();e=null===e?n:Math.min(e,n)})),e})()>t/2?x=!1:n>0&&(a=1);Math.abs(h.getPlaybackRate()-a)>D&&h.setPlaybackRate(a),C.get().streaming.liveCatchUpMaxDrift>0&&!S&&n>C.get().streaming.liveCatchUpMaxDrift?(s.info("Low Latency catchup mechanism. Latency too high, doing a seek to live point"),S=!0,U(((o=c.getCurrentDVRInfo())?o.range:null).end-E.getLiveDelay(),!0,!1)):S=!1}var o}():pe())}function pe(){h&&h.setPlaybackRate(1)}function ge(e){var t,n=void 0,i=e.bufferedRanges;if(i&&i.length&&(!m[_.id]||!0!==m[_.id].started)){var a=e.sender.getType();void 0===y[_.id]&&(y[_.id]=[]),y[_.id][a]=i,void 0===m[_.id]&&(m[_.id]=[],m[_.id].started=!1),void 0===m[_.id][a]&&(m[_.id][a]=Math.max(i.start(0),_.start));var o=l.isTrackTypePresent(r.default.VIDEO),s=l.isTrackTypePresent(r.default.AUDIO);t=q(!0),s&&o?isNaN(m[_.id].audio)||isNaN(m[_.id].video)||(m[_.id].audio<m[_.id].video?(n=m[_.id].video>t?m[_.id].video:t,i=y[_.id].audio):(n=m[_.id].audio>t?m[_.id].audio:t,i=y[_.id].video),he(n,i)&&(he(F(),y[_.id].audio)&&he(F(),y[_.id].video)||w||0===n||U(n,!0,!0),m[_.id].started=!0)):m[_.id][a]&&(n=m[_.id][a]>t?m[_.id][a]:t,w||U(n,!1,!0),m[_.id].started=!0)}}function me(e){if(!1===e.stream&&C.get().streaming.lowLatencyEnabled&&!isNaN(e.request.duration)){var t=1.2*e.request.duration;if(t>E.getLiveDelay()){s.warn("Browser does not support fetch API with StreamReader. Increasing live delay to be 20% higher than segment duration:",t.toFixed(2));var n={streaming:{liveDelay:t}};C.update(n)}}}function ve(e){e.streamInfo.id===_.id&&(C.get().streaming.lowLatencyEnabled?e.state!==i.default.BUFFER_EMPTY||k()||x||(x=!0,pe()):h.setStallState(e.mediaType,e.state===i.default.BUFFER_EMPTY))}function ye(e){t.trigger(o.default.PLAYBACK_STALLED,{e:e})}function _e(e){!function(e,t){if(e&&e.manifestInfo&&e.manifestInfo.serviceDescriptions){for(var n=void 0,i=0;i<e.manifestInfo.serviceDescriptions.length;i++){var a=e.manifestInfo.serviceDescriptions[i];if(a.schemeIdUri===r.default.SERVICE_DESCRIPTION_LL_SCHEME){n=a;break}}n&&t&&t.supplementalProperties&&"true"===t.supplementalProperties[r.default.SUPPLEMENTAL_PROPERTY_LL_SCHEME]&&(n.latency&&n.latency.target>0&&(s.debug("Apply LL properties coming from service description. Target Latency (ms):",n.latency.target),C.update({streaming:{lowLatencyEnabled:!0,liveDelay:n.latency.target/1e3,liveCatchUpMinDrift:n.latency.max>n.latency.target?(n.latency.max-n.latency.target)/1e3:void 0}})),n.playbackRate&&n.playbackRate.max>1&&(s.debug("Apply LL properties coming from service description. Max PlaybackRate:",n.playbackRate.max),C.update({streaming:{lowLatencyEnabled:!0,liveCatchUpPlaybackRate:n.playbackRate.max-1}})))}}(e.streamInfo,e.mediaInfo)}return n={initialize:function(e,n){_=e,h.addEventListener("canplay",J),h.addEventListener("play",$),h.addEventListener("waiting",ee),h.addEventListener("playing",te),h.addEventListener("pause",ne),h.addEventListener("error",de),h.addEventListener("seeking",re),h.addEventListener("seeked",ie),h.addEventListener("timeupdate",ae),h.addEventListener("progress",oe),h.addEventListener("ratechange",se),h.addEventListener("loadedmetadata",ue),h.addEventListener("stalled",ye),h.addEventListener("ended",le),T=_.manifestInfo.isDynamic,S=!1,x=!1,p=_.start,w=n;var r="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",i=/safari/.test(r)&&!/chrome/.test(r);D=i?.25:.02,t.on(o.default.DATA_UPDATE_COMPLETED,Z,this),t.on(o.default.BYTES_APPENDED_END_FRAGMENT,ge,this),t.on(o.default.LOADING_PROGRESS,me,this),t.on(o.default.BUFFER_LEVEL_STATE_CHANGED,ve,this),t.on(o.default.PERIOD_SWITCH_STARTED,N,this),t.on(o.default.PLAYBACK_PROGRESS,fe,this),t.on(o.default.PLAYBACK_TIME_UPDATED,fe,this),t.on(o.default.PLAYBACK_ENDED,ce,this),t.on(o.default.STREAM_INITIALIZING,_e,this),M&&(M=!1,R())},setConfig:function(e){e&&(e.streamController&&(l=e.streamController),e.dashMetrics&&(c=e.dashMetrics),e.mediaPlayerModel&&(E=e.mediaPlayerModel),e.adapter&&(d=e.adapter),e.videoModel&&(h=e.videoModel),e.timelineConverter&&(f=e.timelineConverter),e.uriFragmentModel&&(I=e.uriFragmentModel),e.settings&&(C=e.settings))},getStartTimeFromUriParameters:Q,getStreamStartTime:q,getTimeToStreamEnd:L,getTime:B,getNormalizedTime:F,getPlaybackRate:z,getPlayedRanges:function(){return _&&h?h.getPlayedRanges():null},getEnded:G,getIsDynamic:H,getStreamController:function(){return l},setLiveStartTime:function(e){p=e},getLiveStartTime:function(){return p},computeLiveDelay:function(e,t){var n,r=void 0,i=void 0,a=d.getSuggestedPresentationDelay();if(r=C.get().streaming.useSuggestedPresentationDelay&&null!==a?a:C.get().streaming.lowLatencyEnabled?0:E.getLiveDelay()?E.getLiveDelay():isNaN(e)?2*_.manifestInfo.minBufferTime:e*C.get().streaming.liveDelayFragmentCount,null!==(n=d.getAvailabilityStartTime())&&(A=n),t>0){var o=Math.max(t-10,t/2);i=Math.min(r,o)}else i=r;return v=i,i},getLiveDelay:function(){return v},getCurrentLiveLatency:Y,play:R,isPaused:j,pause:P,isSeeking:k,seek:U,reset:V},s=(0,u.default)(e).getInstance().getLogger(n),V(),n}c.__dashjs_factory_name="PlaybackController",t.default=s.default.getSingletonFactory(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(32);var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.BUFFERING_COMPLETED="bufferingCompleted",e.BUFFER_CLEARED="bufferCleared",e.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",e.BYTES_APPENDED="bytesAppended",e.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",e.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",e.CURRENT_TRACK_CHANGED="currentTrackChanged",e.DATA_UPDATE_COMPLETED="dataUpdateCompleted",e.DATA_UPDATE_STARTED="dataUpdateStarted",e.INITIALIZATION_LOADED="initializationLoaded",e.INIT_FRAGMENT_LOADED="initFragmentLoaded",e.INIT_REQUESTED="initRequested",e.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",e.LIVE_EDGE_SEARCH_COMPLETED="liveEdgeSearchCompleted",e.LOADING_COMPLETED="loadingCompleted",e.LOADING_PROGRESS="loadingProgress",e.LOADING_DATA_PROGRESS="loadingDataProgress",e.LOADING_ABANDONED="loadingAborted",e.MANIFEST_UPDATED="manifestUpdated",e.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",e.QUOTA_EXCEEDED="quotaExceeded",e.REPRESENTATION_UPDATE_STARTED="representationUpdateStarted",e.REPRESENTATION_UPDATE_COMPLETED="representationUpdateCompleted",e.SEGMENTS_LOADED="segmentsLoaded",e.SERVICE_LOCATION_BLACKLIST_ADD="serviceLocationBlacklistAdd",e.SERVICE_LOCATION_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",e.SOURCEBUFFER_REMOVE_COMPLETED="sourceBufferRemoveCompleted",e.STREAMS_COMPOSED="streamsComposed",e.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",e.STREAM_COMPLETED="streamCompleted",e.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",e.TIMED_TEXT_REQUESTED="timedTextRequested",e.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",e.URL_RESOLUTION_FAILED="urlResolutionFailed",e.VIDEO_CHUNK_RECEIVED="videoChunkReceived",e.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",e.XLINK_ELEMENT_LOADED="xlinkElementLoaded",e.XLINK_READY="xlinkReady",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(n(4)),i=T(n(14)),a=T(n(126)),o=T(n(188)),s=T(n(5)),u=T(n(7)),l=T(n(1)),c=n(58),d=T(n(6)),h=T(n(57)),f=T(n(18)),p=T(n(93)),g=T(n(189)),m=T(n(94)),v=T(n(196)),y=T(n(8)),_=T(n(9));function T(e){return e&&e.__esModule?e:{default:e}}function E(){var e=this.context,t=(0,s.default)(e).getInstance(),n=void 0,l=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0,w=void 0,S=void 0,x=void 0,D=void 0,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0,k=void 0,U=void 0,B=void 0,F=void 0,z=void 0,G=void 0,H=void 0,Y=void 0,V=void 0,Q=void 0,q=void 0,W=void 0,X=void 0,K=void 0,Z=void 0,J=void 0,$=void 0,ee=void 0,te=void 0,ne=void 0,re=void 0,ie=void 0,ae=void 0,oe=void 0,se=void 0;function ue(){if(Ie(r.default.VIDEO)){var e=V.getPlaybackQuality();e&&w.addDroppedFrames(e)}}function le(){if(!(!se.get().streaming.jumpGaps||0===_e()||Q.isSeeking()||W||z||G||H)&&++te>=40){var e=Q.getTime();ae===e?function(e){for(var n=_e(),r=se.get().streaming.smallGapLimit,i=void 0,a=0;a<n.length;a++){var o=n[a].getBuffer().getAllBufferRanges(),s=void 0;if(o&&!(o.length<=1)){for(var c=0;c<o.length;c++)if(e<o.start(c)){s=o.start(c);break}if(s>0){var d=s-e;d>0&&d<=r&&(void 0===i||s>i)&&(i=s)}}}var h=Q.getTimeToStreamEnd();void 0===i&&!isNaN(h)&&h<r&&(i=e+h);i>0&&(!isNaN(h)&&i>=e+h?(l.info("Jumping media gap (discontinuity) at time ",e,". Jumping to end of the stream"),t.trigger(u.default.PLAYBACK_ENDED,{isLast:Re().isLast})):(l.info("Jumping media gap (discontinuity) at time ",e,". Jumping to time position",i),Q.seek(i,!0,!0)))}(e):ae=e,te=0}}function ce(e){var t=ye(e.seekTime);$&&(fe(),J=!1),ee&&(l.debug("[PreloadTimer] stop period preload timer."),clearTimeout(ee),ee=void 0),t===k&&ie&&ie.deactivate(!0),t&&(t!==k||ie&&!k.isActive())?(Ne(c.PlayListTrace.END_OF_PERIOD_STOP_REASON),Me(k,t,e.seekTime)):Ne(c.PlayListTrace.USER_REQUEST_STOP_REASON),Le(c.PlayList.SEEK_START_REASON)}function de(){l.debug("[onPlaybackStarted]"),X?(X=!1,Le(c.PlayList.INITIAL_PLAYOUT_START_REASON)):W&&(W=!1,Le(c.PlayList.RESUME_FROM_PAUSE_START_REASON),pe())}function he(e){l.debug("[onPlaybackPaused]"),e.ended||(W=!0,Ne(c.PlayListTrace.USER_REQUEST_STOP_REASON),pe())}function fe(){l.debug("[toggleEndPeriodTimer] stop end period timer."),clearTimeout($),$=void 0}function pe(){if(J)if($)fe();else{var e=Q.getTimeToStreamEnd(),n=e>0?1e3*e:0,r=n<2e3?n/4:n-2e3;l.debug("[toggleEndPeriodTimer] Going to fire preload in",r,"milliseconds"),ee=setTimeout(ve,r),l.debug("[toggleEndPeriodTimer] start-up of timer to notify PLAYBACK_ENDED event. It will be triggered in",n,"milliseconds"),$=setTimeout((function(){t.trigger(u.default.PLAYBACK_ENDED,{isLast:Re().isLast})}),n)}}function ge(e){if(e.sender&&(e.sender.getType()===r.default.AUDIO||e.sender.getType()===r.default.VIDEO)){var t=Re().isLast;Y&&!t&&void 0===$&&(l.info("[onTrackBufferingCompleted] end of period detected. Track",e.sender.getType(),"has finished"),J=!0,!1===W&&pe())}}function me(){var e=Re().isLast;Y&&e&&(l.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),S.signalEndOfStream(Y))}function ve(){var e=Re().isLast;if(Y&&!e){var t=Ee();(re=k.isProtectionCompatible(t)&&(oe||k.isMediaCodecCompatible(t)))&&(l.info("[onStreamCanLoadNext] Preloading next stream"),k.stopEventController(),k.deactivate(!0),t.preload(Y,ne),ie=t,t.getProcessors().forEach((function(e){e.setIndexHandlerTime(t.getStartTime())})))}}function ye(e){var t=0,n=null,r=P.length;r>0&&(t+=P[0].getStartTime());for(var i=0;i<r;i++)if(n=P[i],e<(t=parseFloat((t+n.getDuration()).toFixed(5))))return n;return null}function _e(){return k?k.getProcessors():[]}function Te(){var e=Ee();e?(Z=void 0,K=void 0,Me(k,e,NaN)):l.debug("StreamController no next stream found"),Ne(e?c.PlayListTrace.END_OF_PERIOD_STOP_REASON:c.PlayListTrace.END_OF_CONTENT_STOP_REASON),$=void 0,J=!1}function Ee(){if(k){var e=Re().start,t=Re().duration;return P.filter((function(n){return n.getStreamInfo().start===parseFloat((e+t).toFixed(5))}))[0]}}function Me(e,n,r){z||!n||e===n&&n.isActive()||(z=!0,t.trigger(u.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:e?e.getStreamInfo():null,toStreamInfo:n.getStreamInfo()}),re=!1,e&&(e.stopEventController(),re=k.isProtectionCompatible(n)&&(oe||k.isMediaCodecCompatible(n))&&!r||n.getPreloaded(),e.deactivate(re)),k=n,ie=!1,Q.initialize(Re(),re),V.getElement()?be(r,e,!1,re):function(e){Ae(e,re)}(r))}function be(e,n,r,i){var a=void 0;function o(){Y&&"open"==Y.readyState&&(l.debug("MediaSource is open!"),window.URL.revokeObjectURL(a),Y.removeEventListener("sourceopen",o),Y.removeEventListener("webkitsourceopen",o),we(),n||t.trigger(u.default.SOURCE_INITIALIZED),r?k.setMediaSource(Y):Ae(e,i))}Y?i?(Ae(e,i),n||t.trigger(u.default.SOURCE_INITIALIZED)):(S.detachMediaSource(V),Y.addEventListener("sourceopen",o,!1),Y.addEventListener("webkitsourceopen",o,!1),a=S.attachMediaSource(Y,V),l.debug("MediaSource attached to element.  Waiting on open...")):((Y=S.createMediaSource()).addEventListener("sourceopen",o,!1),Y.addEventListener("webkitsourceopen",o,!1),a=S.attachMediaSource(Y,V),l.debug("MediaSource attached to element.  Waiting on open..."))}function Ae(e,n){if(ne=k.activate(Y,n?ne:void 0),Z=Ce(r.default.AUDIO),K=Ce(r.default.VIDEO),ne){var i=Object.keys(ne);i.length>0&&ne[i[0]].changeType&&(l.debug("SourceBuffer changeType method supported. Use it to switch codecs in periods transitions"),oe=!0)}if(!X)if(isNaN(e)){var a=Q.getStreamStartTime(!0);n||_e().forEach((function(e){e.setIndexHandlerTime(a)}))}else Q.seek(e);k.startEventController(),!F&&X||Q.play(),z=!1,t.trigger(u.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:Re()})}function we(e){var t=e||Re().manifestInfo.duration,n=S.setDuration(Y,t);l.debug("Duration successfully set to: "+n)}function Se(e){for(var t=0,n=P.length;t<n;t++)if(P[t].getId()===e.id)return P[t];return null}function xe(){var r=b.getValue();U&&(t.trigger(u.default.PROTECTION_CREATED,{controller:U,manifest:r}),U.setMediaElement(V.getElement()),B&&U.setProtectionData(B)),function(){try{var r=A.getStreamsInfo();if(0===r.length)throw new Error("There are no streams");w.updateManifestUpdateInfo({currentTime:Q.getTime(),buffered:V.getBufferRange(),presentationStartTime:r[0].start,clientTimeOffset:j.getClientTimeOffset()});for(var i=0,o=r.length;i<o;i++){var s=r[i],l=Se(s);l?l.updateData(s):(l=(0,a.default)(e).create({manifestModel:b,mediaPlayerModel:q,dashMetrics:w,manifestUpdater:E,adapter:A,timelineConverter:j,capabilities:T,errHandler:R,baseURLController:D,abrController:I,playbackController:Q,mediaController:C,textController:N,videoModel:V,streamController:n,settings:se}),P.push(l),l.initialize(s,U)),w.addManifestUpdateStreamInfo(s)}if(!k){var c=Q.getStartTimeFromUriParameters(),d=null;if(c)d=ye(isNaN(c.fragS)?c.fragT:c.fragS);Me(null,null!==d?d:P[0],NaN)}t.trigger(u.default.STREAMS_COMPOSED)}catch(e){R.error(new y.default(_.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e.message+"nostreamscomposed",b.getValue())),H=!0,Ue()}}()}function De(e){if(e.error)H=!0,Ue();else{var t=e.manifest;A.updatePeriods(t);var n=A.getStreamsInfo(void 0,1)[0],i=A.getMediaInfoForType(n,r.default.VIDEO)||A.getMediaInfoForType(n,r.default.AUDIO),a=void 0;if(i&&(a=A.getUseCalculatedLiveEdgeTimeForMediaInfo(i))){l.debug("SegmentTimeline detected using calculated Live Edge Time");se.update({streaming:{useManifestDateHeaderTimeSource:!1}})}var o=A.getUTCTimingSources(),s=!A.getIsDynamic()||a?o:o.concat(q.getUTCTimingSources()),u=O.isHTTPS(e.manifest.url);s.forEach((function(e){e.value.replace(/.*?:\/\//g,"")===q.getDefaultUtcTimingSource().value.replace(/.*?:\/\//g,"")&&(e.value=e.value.replace(u?new RegExp(/^(http:)?\/\//i):new RegExp(/^(https:)?\/\//i),u?"https://":"http://"),l.debug("Matching default timing source protocol to manifest protocol: ",e.value))})),D.initialize(t),x.setConfig({dashMetrics:w,baseURLController:D}),x.initialize(s,se.get().streaming.useManifestDateHeaderTimeSource)}}function Ie(e){var t=void 0;if(!e)return t;switch(e){case r.default.VIDEO:t=K;break;case r.default.AUDIO:t=Z}return t}function Ce(e){var t=!1;return _e().forEach((function(n){n.getMediaInfo().type===e&&(t=!0)})),t}function Ne(e,t){t=t||new Date,_e().forEach((function(n){var r=n.getScheduleController();r&&r.finalisePlayList(t,e)})),w.addPlayList()}function Le(e){w.createPlaylistMetrics(1e3*Q.getTime(),e)}function Oe(e){if(e.error){var t="";switch(e.error.code){case 1:t="MEDIA_ERR_ABORTED";break;case 2:t="MEDIA_ERR_NETWORK";break;case 3:t="MEDIA_ERR_DECODE";break;case 4:t="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:t="MEDIA_ERR_ENCRYPTED";break;default:t="UNKNOWN"}G=!0,e.error.message&&(t+=" ("+e.error.message+")"),e.error.msExtendedCode&&(t+=" (0x"+(e.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),l.fatal("Video Element Error: "+t),e.error&&l.fatal(e.error),R.error(new y.default(e.error.code,t)),Ue()}}function Re(){return k?k.getStreamInfo():null}function je(){if(!(M&&M.hasOwnProperty("load")&&j&&j.hasOwnProperty("initialize")&&j.hasOwnProperty("reset")&&j.hasOwnProperty("getClientTimeOffset")&&b&&R&&w&&Q))throw new Error(r.default.MISSING_CONFIG_ERROR)}function Pe(e){isNaN(e.newDuration)||we(e.newDuration)}function ke(){P=[],U=null,z=!1,k=null,G=!1,H=!1,K=void 0,Z=void 0,X=!0,W=!1,F=!0,$=void 0,J=!1,te=0}function Ue(){je(),x.reset(),Ne(G||H?c.PlayListTrace.FAILURE_STOP_REASON:c.PlayListTrace.USER_REQUEST_STOP_REASON);for(var e=0,n=P?P.length:0;e<n;e++){P[e].reset(G)}!function(){t.off(u.default.PLAYBACK_TIME_UPDATED,ue,this),t.off(u.default.PLAYBACK_SEEKING,ce,this),t.off(u.default.PLAYBACK_ERROR,Oe,this),t.off(u.default.PLAYBACK_STARTED,de,this),t.off(u.default.PLAYBACK_PAUSED,he,this),t.off(u.default.PLAYBACK_ENDED,Te,this),t.off(u.default.MANIFEST_UPDATED,De,this),t.off(u.default.BUFFERING_COMPLETED,ge,this),t.off(u.default.STREAM_BUFFERING_COMPLETED,me,this),t.off(u.default.MANIFEST_VALIDITY_CHANGED,Pe,this),t.off(u.default.TIME_SYNCHRONIZATION_COMPLETED,xe,this),t.off(u.default.WALLCLOCK_TIME_UPDATED,le,this),t.off(p.default.METRIC_ADDED,Be,this)}(),D.reset(),E.reset(),w.clearAllCurrentMetrics(),b.setValue(null),M.reset(),j.reset(),L.reset(),Y&&(S.detachMediaSource(V),Y=null),V=null,U&&(U.setMediaElement(null),U=null,B=null,b.getValue()&&t.trigger(u.default.PROTECTION_DESTROYED,{data:b.getValue().url})),t.trigger(u.default.STREAM_TEARDOWN_COMPLETE),ke()}function Be(e){e.metric===i.default.DVR_INFO&&e.mediaType===r.default.AUDIO&&S.setSeekable(Y,e.value.range.start,e.value.range.end)}return n={initialize:function(n,r){je(),F=n,B=r,j.initialize(),(E=(0,o.default)(e).create()).setConfig({manifestModel:b,adapter:A,manifestLoader:M,errHandler:R,settings:se}),E.initialize(),D.setConfig({adapter:A}),function(){t.on(u.default.PLAYBACK_TIME_UPDATED,ue,this),t.on(u.default.PLAYBACK_SEEKING,ce,this),t.on(u.default.PLAYBACK_ERROR,Oe,this),t.on(u.default.PLAYBACK_STARTED,de,this),t.on(u.default.PLAYBACK_PAUSED,he,this),t.on(u.default.PLAYBACK_ENDED,Te,this),t.on(u.default.MANIFEST_UPDATED,De,this),t.on(u.default.BUFFERING_COMPLETED,ge,this),t.on(u.default.STREAM_BUFFERING_COMPLETED,me,this),t.on(u.default.MANIFEST_VALIDITY_CHANGED,Pe,this),t.on(u.default.TIME_SYNCHRONIZATION_COMPLETED,xe,this),t.on(u.default.WALLCLOCK_TIME_UPDATED,le,this),t.on(p.default.METRIC_ADDED,Be,this)}()},getActiveStreamInfo:Re,isTrackTypePresent:Ie,switchToVideoElement:function(e){k&&(Q.initialize(Re()),be(e,null,!0,!1))},getStreamById:function(e){return P.filter((function(t){return t.getId()===e}))[0]},getStreamForTime:ye,getTimeRelativeToStreamId:function(e,t){for(var n=null,r=0,i=0,a=null,o=0;o<P.length;o++){if(i=(n=P[o]).getStartTime(),a=n.getDuration(),Number.isFinite(i)&&(r=i),n.getId()===t)return e-r;Number.isFinite(a)&&(r+=a)}return null},load:function(e){je(),M.load(e)},loadWithManifest:function(e){!function(){if(!E||!E.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")}(),E.setManifest(e)},getActiveStreamProcessors:_e,setConfig:function(e){e&&(e.capabilities&&(T=e.capabilities),e.manifestLoader&&(M=e.manifestLoader),e.manifestModel&&(b=e.manifestModel),e.mediaPlayerModel&&(q=e.mediaPlayerModel),e.protectionController&&(U=e.protectionController),e.adapter&&(A=e.adapter),e.dashMetrics&&(w=e.dashMetrics),e.errHandler&&(R=e.errHandler),e.timelineConverter&&(j=e.timelineConverter),e.videoModel&&(V=e.videoModel),e.playbackController&&(Q=e.playbackController),e.abrController&&(I=e.abrController),e.mediaController&&(C=e.mediaController),e.textController&&(N=e.textController),e.settings&&(se=e.settings))},setProtectionData:function(e){B=e},reset:Ue},l=(0,d.default)(e).getInstance().getLogger(n),x=(0,g.default)(e).getInstance(),D=(0,m.default)(e).getInstance(),S=(0,v.default)(e).getInstance(),L=(0,h.default)(e).getInstance(),O=(0,f.default)(e).getInstance(),ke(),n}E.__dashjs_factory_name="StreamController",t.default=l.default.getSingletonFactory(E)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(4)),i=p(n(127)),a=p(n(180)),o=p(n(181)),s=p(n(185)),u=p(n(5)),l=p(n(7)),c=p(n(6)),d=p(n(9)),h=p(n(1)),f=p(n(8));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){e=e||{};var t=this.context,n=(0,u.default)(t).getInstance(),h=e.manifestModel,p=e.mediaPlayerModel,g=e.manifestUpdater,m=e.adapter,v=e.capabilities,y=e.errHandler,_=e.timelineConverter,T=e.dashMetrics,E=e.abrController,M=e.playbackController,b=e.mediaController,A=e.textController,w=e.videoModel,S=e.settings,x=void 0,D=void 0,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0,k=void 0,U=void 0,B=void 0,F=void 0,z=[{codec:"avc1",compatibleCodecs:["avc3"]},{codec:"avc3",compatibleCodecs:["avc1"]}];function G(e){for(var t=I?I.length:0,r=0;r<t;r++){I[r].getFragmentModel().removeExecutedRequestsBeforeTime(Q()+V()),I[r].reset(!1,e)}I=[],C=!1,N=!1,de(!1),n.off(l.default.CURRENT_TRACK_CHANGED,J,x)}function H(){G(),L=null,O={},R=!1}function Y(){X(),M&&M.pause(),P&&(P.reset(),P=null),H(),n.off(l.default.DATA_UPDATE_COMPLETED,oe,x),n.off(l.default.BUFFERING_COMPLETED,ae,x),j&&(n.off(l.default.KEY_ERROR,K,x),n.off(l.default.SERVER_CERTIFICATE_UPDATED,K,x),n.off(l.default.LICENSE_REQUEST_COMPLETE,K,x),n.off(l.default.KEY_SYSTEM_SELECTED,K,x),n.off(l.default.KEY_SESSION_CREATED,K,x),n.off(l.default.KEY_STATUSES_CHANGED,K,x)),de(!1)}function V(){return L?L.duration:NaN}function Q(){return L?L.start:NaN}function q(){return L}function W(){if(!(w&&E&&E.hasOwnProperty("getBitrateList")&&m&&m.hasOwnProperty("getAllMediaInfoForType")&&m.hasOwnProperty("getEventsFor")))throw new Error(r.default.MISSING_CONFIG_ERROR)}function X(){U&&U.stop()}function K(e){e.error&&(y.error(e.error),D.fatal(e.error.message),Y())}function Z(e){var t,n=e?e.type:null,i=void 0;if(n===r.default.MUXED)return i="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",D.fatal(i),y.error(new f.default(d.default.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,i,h.getValue())),!1;if(n===r.default.TEXT||n===r.default.FRAGMENTED_TEXT||n===r.default.EMBEDDED_TEXT||n===r.default.IMAGE)return!0;if(t=e.codec,D.debug(n+" codec: "+t),e.contentProtection&&!v.supportsEncryptedMedia())y.error(new f.default(d.default.CAPABILITY_MEDIAKEYS_ERROR_CODE,d.default.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE));else if(!v.supportsCodec(t))return i=n+"Codec ("+t+") is not supported.",D.error(i),!1;return!0}function J(e){if(L&&e.newMediaInfo.streamInfo.id===L.id){var t=e.newMediaInfo,n=h.getValue();m.setCurrentMediaInfo(L.id,t.type,t);var i=se(t);if(i){var a=M.getTime();D.info("Stream -  Process track changed at current time "+a),D.debug("Stream -  Update stream controller"),n.refreshManifestOnSwitchTrack?(D.debug("Stream -  Refreshing manifest for switch track"),F=e,g.refreshManifest()):(i.selectMediaInfo(t),t.type!==r.default.FRAGMENTED_TEXT?(E.updateTopQualityIndex(t),i.switchTrackAsked(),i.getFragmentModel().abortRequests()):(i.getScheduleController().setSeekTarget(a),i.setIndexHandlerTime(a),i.resetIndexHandler()))}}}function $(a,o){var u=m.getAllMediaInfoForType(L,a),c=null,d=void 0;if(u&&0!==u.length){for(var f=0,g=u.length;f<g;f++)if(c=u[f],a===r.default.EMBEDDED_TEXT)A.addEmbeddedTrack(c);else{if(!Z(c))continue;b.addTrack(c)}a!==r.default.EMBEDDED_TEXT&&0!==b.getTracksFor(a,L).length&&(a!==r.default.IMAGE?((a!==r.default.FRAGMENTED_TEXT||a===r.default.FRAGMENTED_TEXT&&A.getTextDefaultEnabled())&&(b.checkInitialMediaSettingsForType(a,L),d=b.getCurrentTrackFor(a,L)),a!==r.default.FRAGMENTED_TEXT||A.getTextDefaultEnabled()||(d=b.getTracksFor(a,L)[0]),n.trigger(l.default.STREAM_INITIALIZING,{streamInfo:L,mediaInfo:c}),function(n,a,o,s){var u=(0,i.default)(t).create({type:n?n.type:null,mimeType:n?n.mimeType:null,timelineConverter:_,adapter:m,manifestModel:h,mediaPlayerModel:p,dashMetrics:e.dashMetrics,baseURLController:e.baseURLController,stream:x,abrController:E,playbackController:M,mediaController:b,streamController:e.streamController,textController:A,errHandler:y,settings:S});if(u.initialize(o),E.updateTopQualityIndex(n),s?(u.setBuffer(s.buffer),u.setIndexHandlerTime(s.currentTime),I[s.replaceIdx]=u):I.push(u),!s||!s.ignoreMediaInfo)if(!n||n.type!==r.default.TEXT&&n.type!==r.default.FRAGMENTED_TEXT)u.addMediaInfo(n,!0);else{for(var l=void 0,c=0;c<a.length;c++)a[c].index===n.index&&(l=c),u.addMediaInfo(a[c]);u.selectMediaInfo(a[l])}}(d,u,o)):k=(0,s.default)(t).create({adapter:m,baseURLController:e.baseURLController,stream:x,timelineConverter:e.timelineConverter}))}else D.info("No "+a+" data.")}function ee(){U||((U=(0,a.default)(t).create()).setConfig({manifestUpdater:g,playbackController:M}),te())}function te(){var e=m.getEventsFor(L);U.addInlineEvents(e)}function ne(e){var t=m.getAdaptationForType(L?L.index:null,e,L);t&&Array.isArray(t.Representation_asArray)&&(t.Representation_asArray=t.Representation_asArray.filter((function(e,n){if(0===n)return!0;var r=m.getCodec(t,n,!0);return!!v.supportsCodec(r)||(D.error("[Stream] codec not supported: "+r),!1)})))}function re(){for(var e=I.length,t=!!O.audio||!!O.video?new f.default(d.default.DATA_UPDATE_FAILED_ERROR_CODE,d.default.DATA_UPDATE_FAILED_ERROR_MESSAGE):null,i=0;i<e;i++)if(I[i].isUpdating()||R)return;if(N){if(j)for(var a=0;a<e&&I[a];a++)I[a].getType()!==r.default.AUDIO&&I[a].getType()!==r.default.VIDEO&&I[a].getType()!==r.default.FRAGMENTED_TEXT||j.initializeForMedia(I[a].getMediaInfo());t?y.error(t):n.trigger(l.default.STREAM_INITIALIZED,{streamInfo:L})}}function ie(e){for(var t={},n=0,r=I.length;n<r;n++){var i=I[n].createBuffer(e);i&&(t[I[n].getType()]=i.getBuffer())}return t}function ae(e){if(e.streamInfo===L){var t=ue(),i=t.length;if(0!==i){for(var a=0;a<i;a++)if(!t[a].isBufferingCompleted()&&(t[a].getType()===r.default.AUDIO||t[a].getType()===r.default.VIDEO))return void D.warn("onBufferingCompleted - One streamProcessor has finished but",t[a].getType(),"one is not buffering completed");D.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),n.trigger(l.default.STREAM_BUFFERING_COMPLETED,{streamInfo:L})}else D.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}}function oe(e){L&&e.sender.getStreamId()===L.id&&(O[e.sender.getType()]=e.error,re())}function se(e){return e?ue().filter((function(t){return t.getType()===e.type}))[0]:null}function ue(){for(var e=[],t=void 0,n=void 0,i=0;i<I.length;i++)(t=(n=I[i]).getType())!==r.default.AUDIO&&t!==r.default.VIDEO&&t!==r.default.FRAGMENTED_TEXT&&t!==r.default.TEXT||e.push(n);return e}function le(e,t){if(!e)return!1;var n=e.getStreamInfo(),r=q();if(!n||!r)return!1;var i=m.getAdaptationForType(n.index,t,n),a=m.getAdaptationForType(r.index,t,r);return i&&a?!i.ContentProtection&&!a.ContentProtection:!i&&!a}function ce(e,t){if(!e||!e.hasOwnProperty("getStreamInfo"))return!1;var n=e.getStreamInfo(),r=q();if(!n||!r)return!1;var i=m.getAdaptationForType(n.index,t,n),a=m.getAdaptationForType(r.index,t,r);if(!i||!a)return!i&&!a;var o=i&&a&&i.mimeType===a.mimeType,s=a.Representation_asArray.map((function(e){return e.codecs})),u=i.Representation_asArray.map((function(e){return e.codecs})),l=u.some((function(e){return s.indexOf(e)>-1})),c=u.some((function(e){return s.some((function(t){return function(e,t){for(var n=e.split(".")[0],r=0===t.indexOf(n),i=void 0,a=0;a<z.length;a++)if(z[a].codec===n){i=z[a];break}if(i)return r||i.compatibleCodecs.some((function(e){return 0===t.indexOf(e)}));return r}(t,e)}))}));return l||c&&o}function de(e){B=e}function he(){return B}return x={initialize:function(e,t){L=e,(j=t)&&(n.on(l.default.KEY_ERROR,K,x),n.on(l.default.SERVER_CERTIFICATE_UPDATED,K,x),n.on(l.default.LICENSE_REQUEST_COMPLETE,K,x),n.on(l.default.KEY_SYSTEM_SELECTED,K,x),n.on(l.default.KEY_SESSION_CREATED,K,x),n.on(l.default.KEY_STATUSES_CHANGED,K,x))},activate:function(e,t){if(!C){var i=void 0;return n.on(l.default.CURRENT_TRACK_CHANGED,J,x),he()?(!function(){if(R=!0,W(),ne(r.default.VIDEO),ne(r.default.AUDIO),N=!0,R=!1,0===I.length){var e="No streams to play.";y.error(new f.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,e,h.getValue())),D.debug(e)}else re()}(),i=t):i=function(e,t){W();var n=w.getElement();ee(),R=!0,ne(r.default.VIDEO),ne(r.default.AUDIO),(!n||n&&/^VIDEO$/i.test(n.nodeName))&&$(r.default.VIDEO,e);$(r.default.AUDIO,e),$(r.default.TEXT,e),$(r.default.FRAGMENTED_TEXT,e),$(r.default.EMBEDDED_TEXT,e),$(r.default.MUXED,e),$(r.default.IMAGE,e);var i=ie(t);if(N=!0,R=!1,0===I.length){var a="No streams to play.";y.error(new f.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,a,h.getValue())),D.fatal(a)}else re();return i}(e,t),C=!0,i}return t},deactivate:G,isActive:function(){return C},getDuration:V,getStartTime:Q,getId:function(){return L?L.id:null},getStreamInfo:q,preload:function(e,t){ee(),$(r.default.VIDEO,e),$(r.default.AUDIO,e),$(r.default.TEXT,e),$(r.default.FRAGMENTED_TEXT,e),$(r.default.EMBEDDED_TEXT,e),$(r.default.MUXED,e),$(r.default.IMAGE,e),ie(t),n.on(l.default.CURRENT_TRACK_CHANGED,J,x);for(var i=0;i<I.length&&I[i];i++)I[i].getScheduleController().start();de(!0)},getFragmentController:function(){return P},getThumbnailController:function(){return k},getBitrateListFor:function(e){if(W(),e===r.default.IMAGE)return k?k.getBitrateList():[];var t=function(e){for(var t=null,n=0;n<I.length;n++)if((t=I[n]).getType()===e)return t.getMediaInfo();return null}(e);return E.getBitrateList(t)},startEventController:function(){U&&U.start()},stopEventController:X,updateData:function(e){D.info("Manifest updated... updating data system wide."),C=!1,R=!0,L=e,U&&te(),ne(r.default.VIDEO),ne(r.default.AUDIO);for(var t=0,n=I.length;t<n;t++){var i=I[t],a=m.getMediaInfoForType(L,i.getType());E.updateTopQualityIndex(a),i.addMediaInfo(a,!0)}if(F&&F.newMediaInfo.type!==r.default.FRAGMENTED_TEXT){var o=se(F.oldMediaInfo);if(!o)return;o.switchTrackAsked(),F=void 0}R=!1,re()},reset:Y,getProcessors:ue,setMediaSource:function(e){for(var t=0;t<I.length;)Z(I[t].getMediaInfo())?(I[t].setMediaSource(e),t++):(I[t].reset(),I.splice(t,1));for(var n=0;n<I.length;n++)I[n].dischargePreBuffer();if(0===I.length){var r="No streams to play.";y.error(new f.default(d.default.MANIFEST_ERROR_ID_NOSTREAMS_CODE,r+"nostreams",h.getValue())),D.fatal(r)}},isMediaCodecCompatible:function(e){return ce(e,r.default.VIDEO)&&ce(e,r.default.AUDIO)},isProtectionCompatible:function(e){return le(e,r.default.VIDEO)&&le(e,r.default.AUDIO)},getPreloaded:he,addInbandEvents:function(e){U&&U.addInbandEvents(e)}},D=(0,c.default)(t).getInstance().getLogger(x),H(),P=(0,o.default)(t).create({mediaPlayerModel:p,dashMetrics:T,errHandler:y,settings:S}),n.on(l.default.BUFFERING_COMPLETED,ae,x),n.on(l.default.DATA_UPDATE_COMPLETED,oe,x),x}g.__dashjs_factory_name="Stream",t.default=h.default.getClassFactory(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=p(n(4)),i=p(n(77)),a=p(n(165)),o=p(n(167)),s=p(n(171)),u=p(n(1)),l=n(17),c=p(n(5)),d=p(n(7)),h=p(n(90)),f=p(n(9));function p(e){return e&&e.__esModule?e:{default:e}}function g(e){e=e||{};var t=this.context,n=(0,c.default)(t).getInstance(),u=e.type,p=e.errHandler,g=e.mimeType,m=e.timelineConverter,v=e.adapter,y=e.manifestModel,_=e.mediaPlayerModel,T=e.stream,E=e.abrController,M=e.playbackController,b=e.streamController,A=e.mediaController,w=e.textController,S=e.dashMetrics,x=e.settings,D=void 0,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0;function k(){j=[]}function U(){C=[],I=null,k()}function B(e){e.sender.getType()===G()&&e.sender.getStreamId()===H().id&&e.error&&e.error.code===f.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE&&z()}function F(e){e.sender.getStreamProcessor()===D&&(y.getValue().doNotUpdateDVRWindowOnBufferUpdated||z())}function z(){var e=H(),t=e?e.manifestInfo:null,n=t?t.isDynamic:null,r=m.calcSegmentAvailabilityRange(O.getCurrentRepresentation(),n);S.addDVRInfo(G(),M.getTime(),t,r)}function G(){return u}function H(){return T?T.getStreamInfo():null}function Y(){return I}return D={initialize:function(n){(P=(0,h.default)(t).create({type:u,mimeType:g,timelineConverter:m,dashMetrics:S,mediaPlayerModel:_,baseURLController:e.baseURLController,errHandler:p,settings:x,streamInfo:H()})).initialize(M.getIsDynamic()),E.registerStreamType(u,D),(R=T.getFragmentController().getModel(u)).setStreamProcessor(D),N=function(e){var n=null;n=e===r.default.VIDEO||e===r.default.AUDIO?(0,i.default)(t).create({type:e,dashMetrics:S,mediaPlayerModel:_,manifestModel:y,errHandler:p,streamController:b,mediaController:A,adapter:v,textController:w,abrController:E,playbackController:M,streamProcessor:D,settings:x}):(0,a.default)(t).create({type:e,mimeType:g,dashMetrics:S,mediaPlayerModel:_,manifestModel:y,errHandler:p,streamController:b,mediaController:A,adapter:v,textController:w,abrController:E,playbackController:M,streamProcessor:D,settings:x});return n}(u),L=(0,o.default)(t).create({type:u,mimeType:g,adapter:v,dashMetrics:S,timelineConverter:m,mediaPlayerModel:_,abrController:E,playbackController:M,streamController:b,textController:w,streamProcessor:D,mediaController:A,settings:x}),(O=(0,s.default)(t).create()).setConfig({abrController:E,dashMetrics:S,manifestModel:y,playbackController:M,timelineConverter:m,streamProcessor:D,type:u,streamId:H()?H().id:null}),N.initialize(n),L.initialize()},isUpdating:function(){return!!O&&O.isUpdating()},getType:G,getBufferController:function(){return N},getFragmentModel:function(){return R},getScheduleController:function(){return L},getRepresentationController:function(){return O},getRepresentationInfo:function(e){var t=void 0;return void 0!==e?((0,l.checkInteger)(e),t=O?O.getRepresentationForQuality(e):null):t=O?O.getCurrentRepresentation():null,v.convertDataToRepresentationInfo(t)},getBufferLevel:function(){return N?N.getBufferLevel():0},switchInitData:function(e,t){if(N){var n=H();N.switchInitData(n?n.id:null,e,t)}},isBufferingCompleted:function(){return!!N&&N.getIsBufferingCompleted()},createBuffer:function(e){return N.getBuffer()||N.createBuffer(I,e)},getStreamInfo:H,selectMediaInfo:function(e){e===I||e&&I&&e.type!==I.type||(I=e);var t=H(),n=v.getRealAdaptation(t,I),i=v.getVoRepresentations(I);if(O){var a=O.getData(),o=E.getTopQualityIndexFor(u,t?t.id:null),s=E.getMinAllowedIndexFor(u),l=void 0,c=null;null!==a&&a.id==n.id||u===r.default.FRAGMENTED_TEXT?l=E.getQualityFor(u):(c=E.getThroughputHistory().getAverageThroughput(u)||E.getInitialBitrateFor(u),l=E.getQualityForBitrate(I,c)),void 0!==s&&l<s&&(l=s),l>o&&(l=o),O.updateData(n,i,u,l)}},addMediaInfo:function(e,t){-1===C.indexOf(e)&&C.push(e),t&&this.selectMediaInfo(e)},switchTrackAsked:function(){L.switchTrackAsked()},getMediaInfoArr:function(){return C},getMediaInfo:Y,getMediaSource:function(){return N.getMediaSource()},setMediaSource:function(e){N.setMediaSource(e,Y())},dischargePreBuffer:function(){N.dischargePreBuffer()},getBuffer:function(){return N.getBuffer()},setBuffer:function(e){N.setBuffer(e)},registerExternalController:function(e){j.push(e)},unregisterExternalController:function(e){var t=j.indexOf(e);-1!==t&&j.splice(t,1)},getExternalControllers:function(){return j},unregisterAllExternalController:k,addInbandEvents:function(e){T&&T.addInbandEvents(e)},setIndexHandlerTime:function(e){P&&P.setCurrentTime(e)},getIndexHandlerTime:function(){return P?P.getCurrentTime():NaN},resetIndexHandler:function(){P&&P.resetIndex()},getInitRequest:function(e){(0,l.checkInteger)(e);var t=O?O.getRepresentationForQuality(e):null;return P?P.getInitRequest(Y(),t):null},getFragmentRequest:function(e,t,n){var r=null;if(P){var i=O&&e?O.getRepresentationForQuality(e.quality):null;r=void 0!==t&&void 0!==n?P.getSegmentRequestForTime(Y(),i,t,n):P.getNextSegmentRequest(Y(),i)}return r},reset:function(e,t){P.reset(),N&&(N.reset(e,t),N=null),L&&(L.reset(),L=null),O&&(O.reset(),O=null),E&&E.unRegisterStreamType(u),j.forEach((function(e){e.reset()})),n.off(d.default.BUFFER_LEVEL_UPDATED,F,D),n.off(d.default.DATA_UPDATE_COMPLETED,B,D),U(),u=null,T=null}},U(),n.on(d.default.BUFFER_LEVEL_UPDATED,F,D),n.on(d.default.DATA_UPDATE_COMPLETED,B,D),D}g.__dashjs_factory_name="StreamProcessor",t.default=u.default.getClassFactory(g)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(4)),i=n(11),a=y(n(129)),o=y(n(27)),s=y(n(79)),u=y(n(1)),l=y(n(6)),c=y(n(49)),d=y(n(151)),h=y(n(48)),f=y(n(76)),p=y(n(5)),g=y(n(7)),m=y(n(8)),v=y(n(9));function y(e){return e&&e.__esModule?e:{default:e}}function _(){var e=this.context,t=(0,p.default)(e).getInstance(),n=!1,u=void 0,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0,b=void 0,A=void 0,w=void 0,S=void 0,x=void 0,D=void 0,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0,k=void 0,U=void 0,B=void 0,F=void 0,z=void 0,G=void 0;function H(){I=null,N=NaN,L=[],j=null,C=!1}function Y(){H(),x=[],A=null}function V(e){var t=e.chunk;t.mediaInfo.embeddedCaptions&&X(t.bytes,t)}function Q(){k=[],(D=(0,c.default)(e).getInstance()).setConfig({videoModel:O}),D.initialize(),_=(0,o.default)(e).getInstance(),P=null,U=0,F=[],B=null,n=!0,z=(0,d.default)(e).getInstance();var r=R.getActiveStreamProcessors();for(var i in r)if("video"===r[i].getType()){G=r[i].getRepresentationInfo().MSETimeOffset;break}t.on(g.default.VIDEO_CHUNK_RECEIVED,V,this),t.on(g.default.BUFFER_CLEARED,Z,this)}function q(e){P=e}function W(e,t){var n,i,o=new a.default,s={subtitle:"subtitles",caption:"captions"};o.captionData=e,o.lang=t.lang,o.labels=t.labels,o.id=t.id?t.id:t.index,o.index=t.index,o.isTTML=(n=!1,t.codec&&t.codec.search(r.default.STPP)>=0&&(n=!0),t.mimeType&&t.mimeType.search(r.default.TTML)>=0&&(n=!0),n),o.defaultTrack=function(e){var t=!1;k.length>1&&e.isEmbedded?t=e.id&&e.id===r.default.CC1:1===k.length?e.id&&"string"==typeof e.id&&"CC"===e.id.substring(0,2)&&(t=!0):0===k.length&&(t=e.index===x[0].index);return t}(t),o.isFragmented=!E.getIsTextTrack(t.mimeType),o.isEmbedded=!!t.isEmbedded,o.kind=i=(i=t.roles.length>0?s[t.roles[0]]:s.caption)===s.caption||i===s.subtitle?i:s.caption,o.roles=t.roles,o.accessibility=t.accessibility;var u=(x?x.length:0)+k.length;D.addTextTrack(o,u)}function X(e,t){var n=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=t.mediaInfo,p=d.type,g=d.mimeType,E=d.codec||g;if(E){if(p===r.default.FRAGMENTED_TEXT)if(C||"InitializationSegment"!==t.segmentType){if(!C)return;if(a=(l=_.getSamplesInfo(e)).sampleList,null===j&&a.length>0&&(j=a[0].cts-t.start*N),E.search(r.default.STPP)>=0)for(A=null!==A?A:K(E),o=0;o<a.length;o++){var b=a[o],w=b.cts,S=w-j;this.buffered.add(S/N,(S+b.duration)/N);var x=new DataView(e,b.offset,b.subSizes[0]);c=h.default.Utils.dataViewToString(x,r.default.UTF8);var L=[],R=b.offset+b.subSizes[0];for(s=1;s<b.subSizes.length;s++){var H=new Uint8Array(e,R,b.subSizes[s]),Y=String.fromCharCode.apply(null,H);L.push(Y),R+=b.subSizes[s]}try{var V=M.getValue().ttmlTimeIsRelative?w/N:0;n=A.parse(c,V,w/N,(w+b.duration)/N,L),D.addCaptions(P,j/N,n)}catch(e){I.removeExecutedRequestsBeforeTime(),this.remove(),y.error("TTML parser error: "+e.message)}}else{var Q=[];for(o=0;o<a.length;o++){var q=a[o];q.cts-=j,this.buffered.add(q.cts/N,(q.cts+q.duration)/N);var X=e.slice(q.offset,q.offset+q.size),Z=h.default.parseBuffer(X);for(s=0;s<Z.boxes.length;s++){var J=Z.boxes[s];if(y.debug("VTT box1: "+J.type),"vtte"!==J.type&&"vttc"===J.type)for(y.debug("VTT vttc boxes.length = "+J.boxes.length),u=0;u<J.boxes.length;u++){var $=J.boxes[u];if(y.debug("VTT box2: "+$.type),"payl"===$.type){var ee=$.cue_text;y.debug("VTT cue_text = "+ee);var te=q.cts/N,ne=(q.cts+q.duration)/N;Q.push({start:te,end:ne,data:ee,styles:{}}),y.debug("VTT "+te+"-"+ne+" : "+ee)}}}}Q.length>0&&D.addCaptions(P,0,Q)}}else C=!0,N=_.getMediaTimescaleFromMoov(e);else if(p===r.default.TEXT){var re=new DataView(e,0,e.byteLength);c=h.default.Utils.dataViewToString(re,r.default.UTF8);try{n=K(E).parse(c,0),D.addCaptions(D.getCurrentTrackIdx(),0,n)}catch(e){T.error(new m.default(v.default.TIMED_TEXT_ERROR_ID_PARSE_CODE,v.default.TIMED_TEXT_ERROR_MESSAGE_PARSE+e.message,c))}}else if(p===r.default.VIDEO)if(t.segmentType===i.HTTPRequest.INIT_SEGMENT_TYPE){if(0===U)for(U=_.getMediaTimescaleFromMoov(e),o=0;o<k.length;o++)W(null,k[o])}else{if(0===U)return void y.warn("CEA-608: No timescale for embeddedTextTrack yet");var ie=function(e,t){return function(e,n,r){var i=null;i=O.getTTMLRenderingDiv()?z.createHTMLCaptionsFromScreen(O.getElement(),e,n,r):[{start:e,end:n,data:r.getDisplayText(),styles:{}}],i&&D.addCaptions(t,0,i)}},ae=(l=_.getSamplesInfo(e)).lastSequenceNumber;if(!F[0]&&!F[1]){var oe=void 0,se=void 0;for(o=0;o<k.length;o++){if(k[o].id===r.default.CC1?(0,se=D.getTrackIdxForId(r.default.CC1)):k[o].id===r.default.CC3&&(1,se=D.getTrackIdxForId(r.default.CC3)),-1===se)return void y.warn("CEA-608: data before track is ready.");oe=ie(0,se),F[o]=new f.default.Cea608Parser(o+1,{newCue:oe},null)}}if(U){if(null!==B&&ae!==B+l.numSequences)for(o=0;o<F.length;o++)F[o]&&F[o].reset();for(var ue=function(e,t){if(0===t.length)return null;for(var n={splits:[],fields:[[],[]]},r=new DataView(e),i=0;i<t.length;i++)for(var a=t[i],o=f.default.findCea608Nalus(r,a.offset,a.size),s=null,u=0,l=0;l<o.length;l++)for(var c=f.default.extractCea608DataFromRange(r,o[l]),d=0;d<2;d++)c[d].length>0&&(a.cts!==s?u=0:u+=1,n.fields[d].push([a.cts+G*U,c[d],u]),s=a.cts);return n.fields.forEach((function(e){e.sort((function(e,t){return e[0]===t[0]?e[2]-t[2]:e[0]-t[0]}))})),n}(e,l.sampleList),le=0;le<F.length;le++){var ce=ue.fields[le],de=F[le];if(de)for(o=0;o<ce.length;o++)de.addData(ce[o][0]/U,ce[o][1])}B=ae}}}else y.error("No text type defined")}function K(e){var t=void 0;return e.search(r.default.VTT)>=0?t=w:(e.search(r.default.TTML)>=0||e.search(r.default.STPP)>=0)&&(t=S),t}function Z(e){k.forEach((function(t){var n=D.getTrackIdxForId(t.id);n>=0&&D.deleteCuesFromTrackIdx(n,e.from,e.to)}))}return u={initialize:function(t,i){n||Q(),D.setConfig({videoModel:O}),D.initialize(),_||(_=(0,o.default)(e).getInstance()),function(t,n){var i=!E.getIsTextTrack(t);if(n){if(x=x.concat(n.getMediaInfoArr()),i){I=n.getFragmentModel(),u.buffered=(0,s.default)(e).create(),L=b.getTracksFor(r.default.FRAGMENTED_TEXT,n.getStreamInfo());for(var a=b.getCurrentTrackFor(r.default.FRAGMENTED_TEXT,n.getStreamInfo()),o=0;o<L.length;o++)if(L[o]===a){q(o);break}}for(var l=0;l<x.length;l++)W(null,x[l])}}(t,i)},append:X,abort:function(){D.deleteAllTextTracks(),H(),_=null,x=[]},addEmbeddedTrack:function(e){if(n||Q(),e)if(e.id===r.default.CC1||e.id===r.default.CC3){for(var t=0;t<k.length;t++)if(k[t].id===e.id)return;k.push(e)}else y.warn("Embedded track "+e.id+" not supported!")},resetEmbedded:function(){t.off(g.default.VIDEO_CHUNK_RECEIVED,V,this),t.off(g.default.BUFFER_CLEARED,Z,this),D&&D.deleteAllTextTracks(),n=!1,k=[],F=[null,null],B=null},setConfig:function(e){e&&(e.errHandler&&(T=e.errHandler),e.adapter&&(E=e.adapter),e.manifestModel&&(M=e.manifestModel),e.mediaController&&(b=e.mediaController),e.videoModel&&(O=e.videoModel),e.streamController&&(R=e.streamController),e.textTracks&&(D=e.textTracks),e.vttParser&&(w=e.vttParser),e.ttmlParser&&(S=e.ttmlParser))},getConfig:function(){return{fragmentModel:I,fragmentedTracks:L,videoModel:O}},setCurrentFragmentedTrackIdx:q,remove:function(e,t){void 0===e&&e===t&&(e=this.buffered.start(0),t=this.buffered.end(this.buffered.length-1)),this.buffered.remove(e,t)},reset:function(){Y(),R=null,O=null,D=null}},y=(0,l.default)(e).getInstance().getLogger(u),Y(),u}_.__dashjs_factory_name="TextSourceBuffer",t.default=u.default.getSingletonFactory(_)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.captionData=null,this.label=null,this.lang=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(131)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=void 0;function t(t){var r=[];if(!t||!e||"function"!=typeof e.fetchAll)return r;for(var i=e.fetchAll(t),a=void 0,o=0,s=i.length;o<s;o++)(a=n(i[o]))&&r.push(a);return r}function n(e){if(!e)return null;var t=new r.default(e);return e.hasOwnProperty("_incomplete")&&(t.isComplete=!e._incomplete),t}return{getBox:function(t){return t&&e&&e.boxes&&0!==e.boxes.length&&"function"==typeof e.fetch?n(e.fetch(t)):null},getBoxes:t,setData:function(t){e=t},getLastBox:function(){if(!e||!e.boxes||!e.boxes.length)return null;var n=t(e.boxes[e.boxes.length-1].type);return n.length>0?n[n.length-1]:null}}}o.__dashjs_factory_name="IsoFile",t.default=i.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offset=t._offset,this.type=t.type,this.size=t.size,this.boxes=[],t.boxes)for(var n=0;n<t.boxes.length;n++)this.boxes.push(new e(t.boxes[n]));switch(this.isComplete=!0,t.type){case"sidx":if(this.timescale=t.timescale,this.earliest_presentation_time=t.earliest_presentation_time,this.first_offset=t.first_offset,this.references=t.references,t.references){this.references=[];for(var r=0;r<t.references.length;r++){var i={reference_type:t.references[r].reference_type,referenced_size:t.references[r].referenced_size,subsegment_duration:t.references[r].subsegment_duration};this.references.push(i)}}break;case"emsg":this.id=t.id,this.value=t.value,this.timescale=t.timescale,this.scheme_id_uri=t.scheme_id_uri,this.presentation_time_delta=1===t.version?t.presentation_time:t.presentation_time_delta,this.event_duration=t.event_duration,this.message_data=t.message_data;break;case"mdhd":this.timescale=t.timescale;break;case"mfhd":this.sequence_number=t.sequence_number;break;case"subs":this.entry_count=t.entry_count,this.entries=t.entries;break;case"tfhd":this.base_data_offset=t.base_data_offset,this.sample_description_index=t.sample_description_index,this.default_sample_duration=t.default_sample_duration,this.default_sample_size=t.default_sample_size,this.default_sample_flags=t.default_sample_flags,this.flags=t.flags;break;case"tfdt":this.version=t.version,this.baseMediaDecodeTime=t.baseMediaDecodeTime,this.flags=t.flags;break;case"trun":if(this.sample_count=t.sample_count,this.first_sample_flags=t.first_sample_flags,this.data_offset=t.data_offset,this.flags=t.flags,this.samples=t.samples,t.samples){this.samples=[];for(var a=0,o=t.samples.length;a<o;a++){var s={sample_size:t.samples[a].sample_size,sample_duration:t.samples[a].sample_duration,sample_composition_time_offset:t.samples[a].sample_composition_time_offset};this.samples.push(s)}}}}return r(e,[{key:"getChildBox",value:function(e){for(var t=0;t<this.boxes.length;t++)if(this.boxes[t].type===e)return this.boxes[t]}},{key:"getChildBoxes",value:function(e){for(var t=[],n=0;n<this.boxes.length;n++)this.boxes[n].type===e&&t.push(this.boxes[n]);return t}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lastCompletedOffset=t,this.found=n,this.size=r}},function(e,t,n){!function(e,t,n,r){e.generateISD=function(e,t,n){var r=new o(e),i={};for(var s in e.head.layout.regions){var u=a(e,t,e.head.layout.regions[s],e.body,null,"",e.head.layout.regions[s],n,i);null!==u&&r.contents.push(u.element)}return r};var i=[n.byName.color.qname,n.byName.textCombine.qname,n.byName.textDecoration.qname,n.byName.textEmphasis.qname,n.byName.textOutline.qname,n.byName.textShadow.qname];function a(e,t,o,l,c,d,h,f,p){if(t<h.begin||t>=h.end)return null;var g="regionID"in h&&""!==h.regionID?h.regionID:d;if(null!==c&&g!==o.id&&(!("contents"in h)||"contents"in h&&0===h.contents.length||""!==g))return null;var m=new s(h);for(var v in h.sets)t<h.sets[v].begin||t>=h.sets[v].end||(m.styleAttrs[h.sets[v].qname]=h.sets[v].value);var y,_={};for(var T in m.styleAttrs)if(_[T]=!0,T===n.byName.writingMode.qname&&!(n.byName.direction.qname in m.styleAttrs)){var E=m.styleAttrs[T];"lrtb"===E||"lr"===E?m.styleAttrs[n.byName.direction.qname]="ltr":"rltb"!==E&&"rl"!==E||(m.styleAttrs[n.byName.direction.qname]="rtl")}if(null!==c)for(var M in n.all){var b=n.all[M];if(b.qname===n.byName.textDecoration.qname){var A=c.styleAttrs[b.qname],w=m.styleAttrs[b.qname],S=[];void 0===w?S=A:-1===w.indexOf("none")?((-1===w.indexOf("noUnderline")&&-1!==A.indexOf("underline")||-1!==w.indexOf("underline"))&&S.push("underline"),(-1===w.indexOf("noLineThrough")&&-1!==A.indexOf("lineThrough")||-1!==w.indexOf("lineThrough"))&&S.push("lineThrough"),(-1===w.indexOf("noOverline")&&-1!==A.indexOf("overline")||-1!==w.indexOf("overline"))&&S.push("overline")):S.push("none"),m.styleAttrs[b.qname]=S}else if(b.qname!==n.byName.fontSize.qname||b.qname in m.styleAttrs||"span"!==m.kind||"textContainer"!==m.styleAttrs[n.byName.ruby.qname])if(b.qname!==n.byName.fontSize.qname||b.qname in m.styleAttrs||"span"!==m.kind||"text"!==m.styleAttrs[n.byName.ruby.qname])b.inherit&&b.qname in c.styleAttrs&&!(b.qname in m.styleAttrs)&&(m.styleAttrs[b.qname]=c.styleAttrs[b.qname]);else{var x=c.styleAttrs[n.byName.fontSize.qname];"textContainer"===c.styleAttrs[n.byName.ruby.qname]?m.styleAttrs[b.qname]=x:m.styleAttrs[b.qname]=new r.ComputedLength(.5*x.rw,.5*x.rh)}else{var D=c.styleAttrs[n.byName.fontSize.qname];m.styleAttrs[b.qname]=new r.ComputedLength(.5*D.rw,.5*D.rh)}}for(var I in n.all){var C=n.all[I];if(!(C.qname in m.styleAttrs)&&!(C.qname===n.byName.position.qname&&n.byName.origin.qname in m.styleAttrs||C.qname===n.byName.origin.qname&&n.byName.position.qname in m.styleAttrs)){var N=e.head.styling.initials[C.qname]||C.initial;("region"===m.kind||!1===C.inherit&&null!==N)&&(m.styleAttrs[C.qname]=C.parse(N),_[C.qname]=!0)}}for(var L in n.all){var O=n.all[L];if(O.qname in _&&null!==O.compute){var R=O.compute(e,c,m,m.styleAttrs[O.qname],p);null!==R?m.styleAttrs[O.qname]=R:(m.styleAttrs[O.qname]=O.compute(e,c,m,O.parse(O.initial),p),u(f,"Style '"+O.qname+"' on element '"+m.kind+"' cannot be computed"))}}if("none"===m.styleAttrs[n.byName.display.qname])return null;for(var j in null===c?y=null===l?[]:[l]:"contents"in h&&(y=h.contents),y){var P=a(e,t,o,l,m,g,y[j],f,p);null!==P&&m.contents.push(P.element)}for(var k in m.styleAttrs){var U=!1;if("span"===m.kind){var B=m.styleAttrs[n.byName.ruby.qname];(U=("container"===B||"textContainer"===B||"baseContainer"===B)&&-1!==i.indexOf(k))||(U="container"!==B&&k===n.byName.rubyAlign.qname),U||(U=!("textContainer"===B||"text"===B)&&k===n.byName.rubyPosition.qname)}if(!U)U=-1===n.byQName[k].applies.indexOf(m.kind);U&&delete m.styleAttrs[k]}if("span"===m.kind&&m.text&&"default"===m.space){var F=m.text.replace(/[\t\r\n ]+/g," ");m.text=F}if("p"===m.kind){var z=[];!function e(t,n){if("contents"in t)for(var r in t.contents)e(t.contents[r],n);else"span"!==t.kind&&"br"!==t.kind||n.push(t)}(m,z);for(var G=0,H="after_br",Y=0;;)if("after_br"===H)G>=z.length||"br"===z[G].kind?(H="before_br",Y=G,G--):("preserve"!==z[G].space&&(z[G].text=z[G].text.replace(/^[\t\r\n ]+/g,"")),z[G].text.length>0?(H="looking_br",G++):z.splice(G,1));else if("before_br"===H)if(G<0||"br"===z[G].kind){if(H="after_br",(G=Y+1)>=z.length)break}else if("preserve"!==z[G].space&&(z[G].text=z[G].text.replace(/[\t\r\n ]+$/g,"")),z[G].text.length>0){if(H="after_br",(G=Y+1)>=z.length)break}else z.splice(G,1),G--;else G>=z.length||"br"===z[G].kind?(H="before_br",Y=G,G--):G++;!function e(t){if("br"===t.kind)return!1;if("text"in t)return 0===t.text.length;if("contents"in t){for(var n=t.contents.length;n--;)e(t.contents[n])&&t.contents.splice(n,1);return 0===t.contents.length}}(m)}return"div"===m.kind&&n.byName.backgroundImage.qname in m.styleAttrs||"br"===m.kind||"image"===m.kind||"contents"in m&&m.contents.length>0||"span"===m.kind&&null!==m.text||"region"===m.kind&&"always"===m.styleAttrs[n.byName.showBackground.qname]?{region_id:g,element:m}:null}function o(e){this.contents=[],this.aspectRatio=e.aspectRatio}function s(e){for(var t in this.kind=e.kind||"region",e.id&&(this.id=e.id),this.styleAttrs={},e.styleAttrs)this.styleAttrs[t]=e.styleAttrs[t];"src"in e&&(this.src=e.src),"type"in e&&(this.type=e.type),"text"in e?this.text=e.text:("region"===this.kind||"contents"in e)&&(this.contents=[]),"space"in e&&(this.space=e.space)}function u(e,t){if(e&&e.error&&e.error(t))throw t}}(t,"undefined"==typeof imscNames?n(34):imscNames,"undefined"==typeof imscStyles?n(50):imscStyles,"undefined"==typeof imscUtils?n(35):imscUtils)},function(e,t,n){!function(e,t,n,r,i){function a(e,t,n,r){var i=r&&"seq"===r.timeContainer,o=0;r&&(o=i&&n?n.end:r.begin),t.begin=t.explicit_begin?t.explicit_begin+o:o;var s=t.begin,u=null;for(var l in t.sets)a(e,t.sets[l],u,t),s="seq"===t.timeContainer?t.sets[l].end:Math.max(s,t.sets[l].end),u=t.sets[l];if("contents"in t)for(var c in t.contents)a(e,t.contents[c],u,t),s="seq"===t.timeContainer?t.contents[c].end:Math.max(s,t.contents[c].end),u=t.contents[c];else s=i?t.begin:Number.POSITIVE_INFINITY;null!==t.explicit_end&&null!==t.explicit_dur?t.end=Math.min(t.begin+t.explicit_dur,o+t.explicit_end):null===t.explicit_end&&null!==t.explicit_dur?t.end=t.begin+t.explicit_dur:null!==t.explicit_end&&null===t.explicit_dur?t.end=o+t.explicit_end:t.end=s,delete t.explicit_begin,delete t.explicit_dur,delete t.explicit_end,e._registerEvent(t)}function o(e){this.node=e}function s(){this.events=[],this.head=new u,this.body=null}function u(){this.styling=new l,this.layout=new h}function l(){this.styles={},this.initials={}}function c(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function d(){this.styleAttrs=null}function h(){this.regions={}}function f(e,t){p.call(this,"image"),this.src=e,this.type=t}function p(e){this.kind=e}function g(e){this.id=e}function m(e){this.regionID=e}function v(e){this.styleAttrs=e}function y(e){this.sets=e}function _(e){this.contents=e}function T(e,t,n){this.explicit_begin=e,this.explicit_end=t,this.explicit_dur=n}function E(){p.call(this,"body")}function M(){p.call(this,"div")}function b(){p.call(this,"p")}function A(){p.call(this,"span")}function w(){p.call(this,"span")}function S(){p.call(this,"br")}function x(){}function D(){}function I(e){return e&&"xml:id"in e.attributes&&e.attributes["xml:id"].value||null}function C(e){return e&&"style"in e.attributes?e.attributes.style.value.split(" "):[]}function N(e,t){var n={};if(null!==e)for(var i in e.attributes){var a=e.attributes[i].uri+" "+e.attributes[i].local,o=r.byQName[a];if(void 0!==o){var s=o.parse(e.attributes[i].value);null!==s?(n[a]=s,o===r.byName.zIndex&&k(t,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):U(t,"Cannot parse styling attribute "+a+" --\x3e "+e.attributes[i].value)}}return n}function L(e,t,n){for(var r in e.attributes)if(e.attributes[r].uri===t&&e.attributes[r].local===n)return e.attributes[r].value;return null}function O(e,t,n){var r,i=null;return null!==(r=/^(\d+(?:\.\d+)?)f$/.exec(n))?null!==t&&(i=parseFloat(r[1])/t):null!==(r=/^(\d+(?:\.\d+)?)t$/.exec(n))?null!==e&&(i=parseFloat(r[1])/e):null!==(r=/^(\d+(?:\.\d+)?)ms$/.exec(n))?i=parseFloat(r[1])/1e3:null!==(r=/^(\d+(?:\.\d+)?)s$/.exec(n))?i=parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)h$/.exec(n))?i=3600*parseFloat(r[1]):null!==(r=/^(\d+(?:\.\d+)?)m$/.exec(n))?i=60*parseFloat(r[1]):null!==(r=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(n))?i=3600*parseInt(r[1])+60*parseInt(r[2])+parseFloat(r[3]):null!==(r=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(n))&&null!==t&&(i=3600*parseInt(r[1])+60*parseInt(r[2])+parseInt(r[3])+(null===r[4]?0:parseInt(r[4])/t)),i}function R(e,t,n){for(;t.styleRefs.length>0;){var r=t.styleRefs.pop();r in e.styles?(R(e,e.styles[r],n),P(e.styles[r].styleAttrs,t.styleAttrs)):U(n,"Non-existant style id referenced")}}function j(e,t,n,r){for(var i=t.length-1;i>=0;i--){var a=t[i];a in e.styles?P(e.styles[a].styleAttrs,n):U(r,"Non-existant style id referenced")}}function P(e,t){for(var n in e)n in t||(t[n]=e[n])}function k(e,t){if(e&&e.warn&&e.warn(t))throw t}function U(e,t){if(e&&e.error&&e.error(t))throw t}function B(e,t){throw e&&e.fatal&&e.fatal(t),t}function F(e,t){for(var n,r=0,i=e.length-1;r<=i;){var a=e[n=Math.floor((r+i)/2)];if(a<t)r=n+1;else{if(!(a>t))return{found:!0,index:n};i=n-1}}return{found:!1,index:r}}e.fromXML=function(e,i,p){var g=t.parser(!0,{xmlns:!0}),m=[],v=[],y=[],_=0,T=null;g.onclosetag=function(e){if(m[0]instanceof l)for(var t in m[0].styles)R(m[0],m[0].styles[t],i);else if(m[0]instanceof b||m[0]instanceof A){if(m[0].contents.length>1){var r,a=[m[0].contents[0]];for(r=1;r<m[0].contents.length;r++)m[0].contents[r]instanceof w&&a[a.length-1]instanceof w?a[a.length-1].text+=m[0].contents[r].text:a.push(m[0].contents[r]);m[0].contents=a}m[0]instanceof A&&1===m[0].contents.length&&m[0].contents[0]instanceof w&&(m[0].text=m[0].contents[0].text,delete m[0].contents)}else m[0]instanceof o&&(m[0].node.uri===n.ns_tt&&"metadata"===m[0].node.local?_--:_>0&&p&&"onCloseTag"in p&&p.onCloseTag());y.shift(),v.shift(),m.shift()},g.ontext=function(e){if(void 0===m[0]);else if(m[0]instanceof A||m[0]instanceof b){if(m[0]instanceof A){var t=m[0].styleAttrs[r.byName.ruby.qname];if("container"===t||"textContainer"===t||"baseContainer"===t)return}var n=new w;n.initFromText(T,m[0],e,y[0],i),m[0].contents.push(n)}else m[0]instanceof o&&_>0&&p&&"onText"in p&&p.onText(e)},g.onopentag=function(e){var t=e.attributes["xml:space"];t?y.unshift(t.value):0===y.length?y.unshift("default"):y.unshift(y[0]);var a=e.attributes["xml:lang"];if(a?v.unshift(a.value):0===v.length?v.unshift(""):v.unshift(v[0]),e.uri===n.ns_tt)if("tt"===e.local)null!==T&&B(i,"Two <tt> elements at ("+this.line+","+this.column+")"),(T=new s).initFromNode(e,i),m.unshift(T);else if("head"===e.local)m[0]instanceof s||B(i,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),m.unshift(T.head);else if("styling"===e.local)m[0]instanceof u||B(i,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),m.unshift(T.head.styling);else if("style"===e.local){var g;m[0]instanceof l?((g=new c).initFromNode(e,i),g.id?T.head.styling.styles[g.id]=g:U(i,"<style> element missing @id attribute"),m.unshift(g)):m[0]instanceof x?((g=new c).initFromNode(e,i),P(g.styleAttrs,m[0].styleAttrs),m.unshift(g)):B(i,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if("initial"===e.local){var w;if(m[0]instanceof l){for(var I in(w=new d).initFromNode(e,i),w.styleAttrs)T.head.styling.initials[I]=w.styleAttrs[I];m.unshift(w)}else B(i,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if("layout"===e.local)m[0]instanceof u||B(i,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),m.unshift(T.head.layout);else if("region"===e.local){m[0]instanceof h||B(i,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var C=new x;C.initFromNode(T,e,i),!C.id||C.id in T.head.layout.regions?U(i,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):T.head.layout.regions[C.id]=C,m.unshift(C)}else if("body"===e.local){m[0]instanceof s||B(i,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),null!==T.body&&B(i,"Second <body> element at "+this.line+","+this.column+")");var N=new E;N.initFromNode(T,e,i),T.body=N,m.unshift(N)}else if("div"===e.local){m[0]instanceof M||m[0]instanceof E||B(i,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var L=new M;L.initFromNode(T,m[0],e,i);var O=L.styleAttrs[r.byName.backgroundImage.qname];O&&(L.contents.push(new f(O)),delete L.styleAttrs[r.byName.backgroundImage.qname]),m[0].contents.push(L),m.unshift(L)}else if("image"===e.local){m[0]instanceof M||B(i,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var R=new f;R.initFromNode(T,m[0],e,i),m[0].contents.push(R),m.unshift(R)}else if("p"===e.local){m[0]instanceof M||B(i,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var j=new b;j.initFromNode(T,m[0],e,i),m[0].contents.push(j),m.unshift(j)}else if("span"===e.local){m[0]instanceof A||m[0]instanceof b||B(i,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var k=new A;k.initFromNode(T,m[0],e,y[0],i),m[0].contents.push(k),m.unshift(k)}else if("br"===e.local){m[0]instanceof A||m[0]instanceof b||B(i,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var F=new S;F.initFromNode(T,m[0],e,i),m[0].contents.push(F),m.unshift(F)}else if("set"===e.local){m[0]instanceof A||m[0]instanceof b||m[0]instanceof M||m[0]instanceof E||m[0]instanceof x||m[0]instanceof S||B(i,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var z=new D;z.initFromNode(T,m[0],e,i),m[0].sets.push(z),m.unshift(z)}else m.unshift(new o(e));else m.unshift(new o(e));if(m[0]instanceof o)if(e.uri===n.ns_tt&&"metadata"===e.local)_++;else if(_>0&&p&&"onOpenTag"in p){var G=[];for(var H in e.attributes)G[e.attributes[H].uri+" "+e.attributes[H].local]={uri:e.attributes[H].uri,local:e.attributes[H].local,value:e.attributes[H].value};p.onOpenTag(e.uri,e.local,G)}},g.write(e).close(),delete T.head.styling.styles;var I=!1;for(var C in T.head.layout.regions){I=!0;break}if(!I){var N=x.prototype.createDefaultRegion();T.head.layout.regions[N.id]=N}for(var L in T.head.layout.regions)a(T,T.head.layout.regions[L],null,null);return T.body&&a(T,T.body,null,null),T.body&&function e(t){if(!("contents"in t))return;for(var n=("styleAttrs"in t?t.styleAttrs[r.byName.ruby.qname]:null),i="span"===t.kind&&("container"===n||"textContainer"===n||"baseContainer"===n),a=t.contents.length-1;a>=0;a--)!i||"styleAttrs"in t.contents[a]&&r.byName.ruby.qname in t.contents[a].styleAttrs?e(t.contents[a]):delete t.contents[a]}(T.body),T},s.prototype.initFromNode=function(e,t){var r=function(e,t){var r=L(e,n.ns_ttp,"cellResolution"),i=15,a=32;if(null!==r){var o=/(\d+) (\d+)/.exec(r);null!==o?(a=parseInt(o[1]),i=parseInt(o[2])):k(t,"Malformed cellResolution value (using initial value instead)")}return{w:a,h:i}}(e,t);this.cellLength={h:new i.ComputedLength(0,1/r.h),w:new i.ComputedLength(1/r.w,0)};var a=function(e,t){var r,i=L(e,n.ns_ttp,"frameRate"),a=30;if(null!==i){null!==(r=/(\d+)/.exec(i))?a=parseInt(r[1]):k(t,"Malformed frame rate attribute (using initial value instead)")}var o=L(e,n.ns_ttp,"frameRateMultiplier"),s=1;if(null!==o){null!==(r=/(\d+) (\d+)/.exec(o))?s=parseInt(r[1])/parseInt(r[2]):k(t,"Malformed frame rate multiplier attribute (using initial value instead)")}var u=s*a,l=1,c=L(e,n.ns_ttp,"tickRate");if(null===c)null!==i&&(l=u);else{null!==(r=/(\d+)/.exec(c))?l=parseInt(r[1]):k(t,"Malformed tick rate attribute (using initial value instead)")}return{effectiveFrameRate:u,tickRate:l}}(e,t);this.effectiveFrameRate=a.effectiveFrameRate,this.tickRate=a.tickRate,this.aspectRatio=function(e,t){var r=L(e,n.ns_ittp,"aspectRatio");null===r&&(r=L(e,n.ns_ttp,"displayAspectRatio"));var i=null;if(null!==r){var a=/(\d+)\s+(\d+)/.exec(r);if(null!==a){var o=parseInt(a[1]),s=parseInt(a[2]);0!==o&&0!==s?i=o/s:U(t,"Illegal aspectRatio values (ignoring)")}else U(t,"Malformed aspectRatio attribute (ignoring)")}return i}(e,t);var o=L(e,n.ns_ttp,"timeBase");null!==o&&"media"!==o&&B(t,"Unsupported time base");var s=function(e,t){var r=L(e,n.ns_tts,"extent");if(null===r)return null;var a=r.split(" ");if(2!==a.length)return k(t,"Malformed extent (ignoring)"),null;var o=i.parseLength(a[0]),s=i.parseLength(a[1]);if(!s||!o)return k(t,"Malformed extent values (ignoring)"),null;return{h:s,w:o}}(e,t);null===s?this.pxLength={h:null,w:null}:("px"===s.h.unit&&"px"===s.w.unit||B(t,"Extent on TT must be in px or absent"),this.pxLength={h:new i.ComputedLength(0,1/s.h.value),w:new i.ComputedLength(1/s.w.value,0)}),this.dimensions={h:new i.ComputedLength(0,1),w:new i.ComputedLength(1,0)}},s.prototype._registerEvent=function(e){if(!(e.end<=e.begin)){var t=F(this.events,e.begin);if(t.found||this.events.splice(t.index,0,e.begin),e.end!==Number.POSITIVE_INFINITY){var n=F(this.events,e.end);n.found||this.events.splice(n.index,0,e.end)}}},s.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},s.prototype.getMediaTimeEvents=function(){return this.events},c.prototype.initFromNode=function(e,t){this.id=I(e),this.styleAttrs=N(e,t),this.styleRefs=C(e)},d.prototype.initFromNode=function(e,t){for(var r in this.styleAttrs={},e.attributes)if(e.attributes[r].uri===n.ns_itts||e.attributes[r].uri===n.ns_ebutts||e.attributes[r].uri===n.ns_tts){var i=e.attributes[r].uri+" "+e.attributes[r].local;this.styleAttrs[i]=e.attributes[r].value}},f.prototype.initFromNode=function(e,t,n,r){this.src="src"in n.attributes?n.attributes.src.value:null,this.src||U(r,"Invalid image@src attribute"),this.type="type"in n.attributes?n.attributes.type.value:null,this.type||U(r,"Invalid image@type attribute"),v.prototype.initFromNode.call(this,e,t,n,r),T.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),m.prototype.initFromNode.call(this,e,t,n,r)},g.prototype.initFromNode=function(e,t,n,r){this.id=I(n)},m.prototype.initFromNode=function(e,t,n,r){this.regionID=function(e){return e&&"region"in e.attributes?e.attributes.region.value:""}(n)},v.prototype.initFromNode=function(e,t,n,r){this.styleAttrs=N(n,r),null!==e.head&&null!==e.head.styling&&j(e.head.styling,C(n),this.styleAttrs,r)},y.prototype.initFromNode=function(e,t,n,r){this.sets=[]},_.prototype.initFromNode=function(e,t,n,r){this.contents=[]},T.prototype.initFromNode=function(e,t,n,r){var i=function(e,t,n,r){var i=null;n&&"begin"in n.attributes&&null===(i=O(e.tickRate,e.effectiveFrameRate,n.attributes.begin.value))&&k(r,"Malformed begin value "+n.attributes.begin.value+" (using 0)");var a=null;n&&"dur"in n.attributes&&null===(a=O(e.tickRate,e.effectiveFrameRate,n.attributes.dur.value))&&k(r,"Malformed dur value "+n.attributes.dur.value+" (ignoring)");var o=null;n&&"end"in n.attributes&&null===(o=O(e.tickRate,e.effectiveFrameRate,n.attributes.end.value))&&k(r,"Malformed end value (ignoring)");return{explicit_begin:i,explicit_end:o,explicit_dur:a}}(e,0,n,r);this.explicit_begin=i.explicit_begin,this.explicit_end=i.explicit_end,this.explicit_dur=i.explicit_dur,this.timeContainer=function(e,t){var n=e&&"timeContainer"in e.attributes?e.attributes.timeContainer.value:null;return n&&"par"!==n?"seq"===n?"seq":(U(t,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(n,r)},E.prototype.initFromNode=function(e,t,n){v.prototype.initFromNode.call(this,e,null,t,n),T.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n),m.prototype.initFromNode.call(this,e,null,t,n),_.prototype.initFromNode.call(this,e,null,t,n)},M.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,t,n,r),T.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),m.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r)},b.prototype.initFromNode=function(e,t,n,r){v.prototype.initFromNode.call(this,e,t,n,r),T.prototype.initFromNode.call(this,e,t,n,r),y.prototype.initFromNode.call(this,e,t,n,r),m.prototype.initFromNode.call(this,e,t,n,r),_.prototype.initFromNode.call(this,e,t,n,r)},A.prototype.initFromNode=function(e,t,n,r,i){v.prototype.initFromNode.call(this,e,t,n,i),T.prototype.initFromNode.call(this,e,t,n,i),y.prototype.initFromNode.call(this,e,t,n,i),m.prototype.initFromNode.call(this,e,t,n,i),_.prototype.initFromNode.call(this,e,t,n,i),this.space=r},w.prototype.initFromText=function(e,t,n,r,i){T.prototype.initFromNode.call(this,e,t,null,i),this.text=n,this.space=r},S.prototype.initFromNode=function(e,t,n,r){m.prototype.initFromNode.call(this,e,t,n,r),T.prototype.initFromNode.call(this,e,t,n,r)},x.prototype.createDefaultRegion=function(){var e=new x;return g.call(e,""),v.call(e,{}),y.call(e,[]),T.call(e,0,Number.POSITIVE_INFINITY,null),e},x.prototype.initFromNode=function(e,t,n){g.prototype.initFromNode.call(this,e,null,t,n),v.prototype.initFromNode.call(this,e,null,t,n),T.prototype.initFromNode.call(this,e,null,t,n),y.prototype.initFromNode.call(this,e,null,t,n),null!==e.head&&null!==e.head.styling&&j(e.head.styling,C(t),this.styleAttrs,n)},D.prototype.initFromNode=function(e,t,n,r){T.prototype.initFromNode.call(this,e,t,n,r);var i=N(n,r);for(var a in this.qname=null,this.value=null,i){if(this.qname){U(r,"More than one style specified on set");break}this.qname=a,this.value=i[a]}}}(t,"undefined"==typeof sax?n(135):sax,"undefined"==typeof imscNames?n(34):imscNames,"undefined"==typeof imscStyles?n(50):imscStyles,"undefined"==typeof imscUtils?n(35):imscUtils)},function(e,t,n){(function(e){!function(t){t.parser=function(e,t){return new a(e,t)},t.SAXParser=a,t.SAXStream=s,t.createStream=function(e,t){return new s(e,t)},t.MAX_BUFFER_LENGTH=65536;var r,i=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,n){if(!(this instanceof a))return new a(e,n);!function(e){for(var t=0,n=i.length;t<n;t++)e[i[t]]=""}(this),this.q=this.c="",this.bufferCheckPosition=t.MAX_BUFFER_LENGTH,this.opt=n||{},this.opt.lowercase=this.opt.lowercase||this.opt.lowercasetags,this.looseCase=this.opt.lowercase?"toLowerCase":"toUpperCase",this.tags=[],this.closed=this.closedRoot=this.sawRoot=!1,this.tag=this.error=null,this.strict=!!e,this.noscript=!(!e&&!this.opt.noscript),this.state=w.BEGIN,this.strictEntities=this.opt.strictEntities,this.ENTITIES=this.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),this.attribList=[],this.opt.xmlns&&(this.ns=Object.create(p)),this.trackPosition=!1!==this.opt.position,this.trackPosition&&(this.position=this.line=this.column=0),x(this,"onready")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}return t.prototype=e,new t}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),a.prototype={end:function(){L(this)},write:function(e){if(this.error)throw this.error;if(this.closed)return N(this,"Cannot write after close. Assign an onready handler.");if(null===e)return L(this);"object"==typeof e&&(e=e.toString());var n=0,r="";for(;r=z(e,n++),this.c=r,r;)switch(this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++),this.state){case w.BEGIN:if(this.state=w.BEGIN_WHITESPACE,"\ufeff"===r)continue;F(this,r);continue;case w.BEGIN_WHITESPACE:F(this,r);continue;case w.TEXT:if(this.sawRoot&&!this.closedRoot){for(var a=n-1;r&&"<"!==r&&"&"!==r;)(r=z(e,n++))&&this.trackPosition&&(this.position++,"\n"===r?(this.line++,this.column=0):this.column++);this.textNode+=e.substring(a,n-1)}"<"!==r||this.sawRoot&&this.closedRoot&&!this.strict?(!E(u,r)||this.sawRoot&&!this.closedRoot||O(this,"Text data outside of root node."),"&"===r?this.state=w.TEXT_ENTITY:this.textNode+=r):(this.state=w.OPEN_WAKA,this.startTagPosition=this.position);continue;case w.SCRIPT:"<"===r?this.state=w.SCRIPT_ENDING:this.script+=r;continue;case w.SCRIPT_ENDING:"/"===r?this.state=w.CLOSE_TAG:(this.script+="<"+r,this.state=w.SCRIPT);continue;case w.OPEN_WAKA:if("!"===r)this.state=w.SGML_DECL,this.sgmlDecl="";else if(T(u,r));else if(T(g,r))this.state=w.OPEN_TAG,this.tagName=r;else if("/"===r)this.state=w.CLOSE_TAG,this.tagName="";else if("?"===r)this.state=w.PROC_INST,this.procInstName=this.procInstBody="";else{if(O(this,"Unencoded <"),this.startTagPosition+1<this.position){var o=this.position-this.startTagPosition;r=new Array(o).join(" ")+r}this.textNode+="<"+r,this.state=w.TEXT}continue;case w.SGML_DECL:"[CDATA["===(this.sgmlDecl+r).toUpperCase()?(D(this,"onopencdata"),this.state=w.CDATA,this.sgmlDecl="",this.cdata=""):this.sgmlDecl+r==="--"?(this.state=w.COMMENT,this.comment="",this.sgmlDecl=""):"DOCTYPE"===(this.sgmlDecl+r).toUpperCase()?(this.state=w.DOCTYPE,(this.doctype||this.sawRoot)&&O(this,"Inappropriately located doctype declaration"),this.doctype="",this.sgmlDecl=""):">"===r?(D(this,"onsgmldeclaration",this.sgmlDecl),this.sgmlDecl="",this.state=w.TEXT):T(d,r)?(this.state=w.SGML_DECL_QUOTED,this.sgmlDecl+=r):this.sgmlDecl+=r;continue;case w.SGML_DECL_QUOTED:r===this.q&&(this.state=w.SGML_DECL,this.q=""),this.sgmlDecl+=r;continue;case w.DOCTYPE:">"===r?(this.state=w.TEXT,D(this,"ondoctype",this.doctype),this.doctype=!0):(this.doctype+=r,"["===r?this.state=w.DOCTYPE_DTD:T(d,r)&&(this.state=w.DOCTYPE_QUOTED,this.q=r));continue;case w.DOCTYPE_QUOTED:this.doctype+=r,r===this.q&&(this.q="",this.state=w.DOCTYPE);continue;case w.DOCTYPE_DTD:this.doctype+=r,"]"===r?this.state=w.DOCTYPE:T(d,r)&&(this.state=w.DOCTYPE_DTD_QUOTED,this.q=r);continue;case w.DOCTYPE_DTD_QUOTED:this.doctype+=r,r===this.q&&(this.state=w.DOCTYPE_DTD,this.q="");continue;case w.COMMENT:"-"===r?this.state=w.COMMENT_ENDING:this.comment+=r;continue;case w.COMMENT_ENDING:"-"===r?(this.state=w.COMMENT_ENDED,this.comment=C(this.opt,this.comment),this.comment&&D(this,"oncomment",this.comment),this.comment=""):(this.comment+="-"+r,this.state=w.COMMENT);continue;case w.COMMENT_ENDED:">"!==r?(O(this,"Malformed comment"),this.comment+="--"+r,this.state=w.COMMENT):this.state=w.TEXT;continue;case w.CDATA:"]"===r?this.state=w.CDATA_ENDING:this.cdata+=r;continue;case w.CDATA_ENDING:"]"===r?this.state=w.CDATA_ENDING_2:(this.cdata+="]"+r,this.state=w.CDATA);continue;case w.CDATA_ENDING_2:">"===r?(this.cdata&&D(this,"oncdata",this.cdata),D(this,"onclosecdata"),this.cdata="",this.state=w.TEXT):"]"===r?this.cdata+="]":(this.cdata+="]]"+r,this.state=w.CDATA);continue;case w.PROC_INST:"?"===r?this.state=w.PROC_INST_ENDING:T(u,r)?this.state=w.PROC_INST_BODY:this.procInstName+=r;continue;case w.PROC_INST_BODY:if(!this.procInstBody&&T(u,r))continue;"?"===r?this.state=w.PROC_INST_ENDING:this.procInstBody+=r;continue;case w.PROC_INST_ENDING:">"===r?(D(this,"onprocessinginstruction",{name:this.procInstName,body:this.procInstBody}),this.procInstName=this.procInstBody="",this.state=w.TEXT):(this.procInstBody+="?"+r,this.state=w.PROC_INST_BODY);continue;case w.OPEN_TAG:T(m,r)?this.tagName+=r:(R(this),">"===r?k(this):"/"===r?this.state=w.OPEN_TAG_SLASH:(E(u,r)&&O(this,"Invalid character in tag name"),this.state=w.ATTRIB));continue;case w.OPEN_TAG_SLASH:">"===r?(k(this,!0),U(this)):(O(this,"Forward-slash in opening tag not followed by >"),this.state=w.ATTRIB);continue;case w.ATTRIB:if(T(u,r))continue;">"===r?k(this):"/"===r?this.state=w.OPEN_TAG_SLASH:T(g,r)?(this.attribName=r,this.attribValue="",this.state=w.ATTRIB_NAME):O(this,"Invalid attribute name");continue;case w.ATTRIB_NAME:"="===r?this.state=w.ATTRIB_VALUE:">"===r?(O(this,"Attribute without value"),this.attribValue=this.attribName,P(this),k(this)):T(u,r)?this.state=w.ATTRIB_NAME_SAW_WHITE:T(m,r)?this.attribName+=r:O(this,"Invalid attribute name");continue;case w.ATTRIB_NAME_SAW_WHITE:if("="===r)this.state=w.ATTRIB_VALUE;else{if(T(u,r))continue;O(this,"Attribute without value"),this.tag.attributes[this.attribName]="",this.attribValue="",D(this,"onattribute",{name:this.attribName,value:""}),this.attribName="",">"===r?k(this):T(g,r)?(this.attribName=r,this.state=w.ATTRIB_NAME):(O(this,"Invalid attribute name"),this.state=w.ATTRIB)}continue;case w.ATTRIB_VALUE:if(T(u,r))continue;T(d,r)?(this.q=r,this.state=w.ATTRIB_VALUE_QUOTED):(O(this,"Unquoted attribute value"),this.state=w.ATTRIB_VALUE_UNQUOTED,this.attribValue=r);continue;case w.ATTRIB_VALUE_QUOTED:if(r!==this.q){"&"===r?this.state=w.ATTRIB_VALUE_ENTITY_Q:this.attribValue+=r;continue}P(this),this.q="",this.state=w.ATTRIB_VALUE_CLOSED;continue;case w.ATTRIB_VALUE_CLOSED:T(u,r)?this.state=w.ATTRIB:">"===r?k(this):"/"===r?this.state=w.OPEN_TAG_SLASH:T(g,r)?(O(this,"No whitespace between attributes"),this.attribName=r,this.attribValue="",this.state=w.ATTRIB_NAME):O(this,"Invalid attribute name");continue;case w.ATTRIB_VALUE_UNQUOTED:if(E(h,r)){"&"===r?this.state=w.ATTRIB_VALUE_ENTITY_U:this.attribValue+=r;continue}P(this),">"===r?k(this):this.state=w.ATTRIB;continue;case w.CLOSE_TAG:if(this.tagName)">"===r?U(this):T(m,r)?this.tagName+=r:this.script?(this.script+="</"+this.tagName,this.tagName="",this.state=w.SCRIPT):(E(u,r)&&O(this,"Invalid tagname in closing tag"),this.state=w.CLOSE_TAG_SAW_WHITE);else{if(T(u,r))continue;E(g,r)?this.script?(this.script+="</"+r,this.state=w.SCRIPT):O(this,"Invalid tagname in closing tag."):this.tagName=r}continue;case w.CLOSE_TAG_SAW_WHITE:if(T(u,r))continue;">"===r?U(this):O(this,"Invalid characters in closing tag");continue;case w.TEXT_ENTITY:case w.ATTRIB_VALUE_ENTITY_Q:case w.ATTRIB_VALUE_ENTITY_U:var s,l;switch(this.state){case w.TEXT_ENTITY:s=w.TEXT,l="textNode";break;case w.ATTRIB_VALUE_ENTITY_Q:s=w.ATTRIB_VALUE_QUOTED,l="attribValue";break;case w.ATTRIB_VALUE_ENTITY_U:s=w.ATTRIB_VALUE_UNQUOTED,l="attribValue"}";"===r?(this[l]+=B(this),this.entity="",this.state=s):T(this.entity.length?y:v,r)?this.entity+=r:(O(this,"Invalid character in entity name"),this[l]+="&"+this.entity+r,this.entity="",this.state=s);continue;default:throw new Error(this,"Unknown state: "+this.state)}this.position>=this.bufferCheckPosition&&function(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),r=0,a=0,o=i.length;a<o;a++){var s=e[i[a]].length;if(s>n)switch(i[a]){case"textNode":I(e);break;case"cdata":D(e,"oncdata",e.cdata),e.cdata="";break;case"script":D(e,"onscript",e.script),e.script="";break;default:N(e,"Max buffer length exceeded: "+i[a])}r=Math.max(r,s)}var u=t.MAX_BUFFER_LENGTH-r;e.bufferCheckPosition=u+e.position}(this);return this}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var e;I(e=this),""!==e.cdata&&(D(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(D(e,"onscript",e.script),e.script="")}};try{r=n(138).Stream}catch(e){r=function(){}}var o=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function s(e,t){if(!(this instanceof s))return new s(e,t);r.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,o.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}s.prototype=Object.create(r.prototype,{constructor:{value:s}}),s.prototype.write=function(t){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var r=n(55).StringDecoder;this._decoder=new r("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},s.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},s.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===o.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),r.prototype.on.call(n,e,t)};var u="\r\n\t ",l="0124356789",c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",d="'\"",h=u+">",f="http://www.w3.org/XML/1998/namespace",p={xml:f,xmlns:"http://www.w3.org/2000/xmlns/"};u=_(u),l=_(l),c=_(c);var g=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,m=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,v=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function _(e){return e.split("").reduce((function(e,t){return e[t]=!0,e}),{})}function T(e,t){return function(e){return"[object RegExp]"===Object.prototype.toString.call(e)}(e)?!!t.match(e):e[t]}function E(e,t){return!T(e,t)}d=_(d),h=_(h);var M,b,A,w=0;for(var S in t.STATE={BEGIN:w++,BEGIN_WHITESPACE:w++,TEXT:w++,TEXT_ENTITY:w++,OPEN_WAKA:w++,SGML_DECL:w++,SGML_DECL_QUOTED:w++,DOCTYPE:w++,DOCTYPE_QUOTED:w++,DOCTYPE_DTD:w++,DOCTYPE_DTD_QUOTED:w++,COMMENT_STARTING:w++,COMMENT:w++,COMMENT_ENDING:w++,COMMENT_ENDED:w++,CDATA:w++,CDATA_ENDING:w++,CDATA_ENDING_2:w++,PROC_INST:w++,PROC_INST_BODY:w++,PROC_INST_ENDING:w++,OPEN_TAG:w++,OPEN_TAG_SLASH:w++,ATTRIB:w++,ATTRIB_NAME:w++,ATTRIB_NAME_SAW_WHITE:w++,ATTRIB_VALUE:w++,ATTRIB_VALUE_QUOTED:w++,ATTRIB_VALUE_CLOSED:w++,ATTRIB_VALUE_UNQUOTED:w++,ATTRIB_VALUE_ENTITY_Q:w++,ATTRIB_VALUE_ENTITY_U:w++,CLOSE_TAG:w++,CLOSE_TAG_SAW_WHITE:w++,SCRIPT:w++,SCRIPT_ENDING:w++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],r="number"==typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=r})),t.STATE)t.STATE[t.STATE[S]]=S;function x(e,t,n){e[t]&&e[t](n)}function D(e,t,n){e.textNode&&I(e),x(e,t,n)}function I(e){e.textNode=C(e.opt,e.textNode),e.textNode&&x(e,"ontext",e.textNode),e.textNode=""}function C(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function N(e,t){return I(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,x(e,"onerror",t),e}function L(e){return e.sawRoot&&!e.closedRoot&&O(e,"Unclosed root tag"),e.state!==w.BEGIN&&e.state!==w.BEGIN_WHITESPACE&&e.state!==w.TEXT&&N(e,"Unexpected end"),I(e),e.c="",e.closed=!0,x(e,"onend"),a.call(e,e.strict,e.opt),e}function O(e,t){if("object"!=typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&N(e,t)}function R(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,D(e,"onopentagstart",n)}function j(e,t){var n=e.indexOf(":")<0?["",e]:e.split(":"),r=n[0],i=n[1];return t&&"xmlns"===e&&(r="xmlns",i=""),{prefix:r,local:i}}function P(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=j(e.attribName,!0),n=t.prefix,r=t.local;if("xmlns"===n)if("xml"===r&&e.attribValue!==f)O(e,"xml: prefix must be bound to "+f+"\nActual: "+e.attribValue);else if("xmlns"===r&&"http://www.w3.org/2000/xmlns/"!==e.attribValue)O(e,"xmlns: prefix must be bound to http://www.w3.org/2000/xmlns/\nActual: "+e.attribValue);else{var i=e.tag,a=e.tags[e.tags.length-1]||e;i.ns===a.ns&&(i.ns=Object.create(a.ns)),i.ns[r]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,D(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function k(e,t){if(e.opt.xmlns){var n=e.tag,r=j(e.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(O(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=r.prefix);var i=e.tags[e.tags.length-1]||e;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){D(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],u=s[0],l=s[1],c=j(u,!0),d=c.prefix,h=c.local,f=""===d?"":n.ns[d]||"",p={name:u,value:l,prefix:d,local:h,uri:f};d&&"xmlns"!==d&&!f&&(O(e,"Unbound namespace prefix: "+JSON.stringify(d)),p.uri=d),e.tag.attributes[u]=p,D(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),D(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=w.TEXT:e.state=w.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function U(e){if(!e.tagName)return O(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=w.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=w.SCRIPT);D(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());for(var r=n;t--;){if(e.tags[t].name===r)break;O(e,"Unexpected close tag")}if(t<0)return O(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=w.TEXT);e.tagName=n;for(var i=e.tags.length;i-- >t;){var a=e.tag=e.tags.pop();e.tagName=e.tag.name,D(e,"onclosetag",e.tagName);var o={};for(var s in a.ns)o[s]=a.ns[s];var u=e.tags[e.tags.length-1]||e;e.opt.xmlns&&a.ns!==u.ns&&Object.keys(a.ns).forEach((function(t){var n=a.ns[t];D(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=w.TEXT}function B(e){var t,n=e.entity,r=n.toLowerCase(),i="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[r]?e.ENTITIES[r]:("#"===(n=r).charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),i=(t=parseInt(n,16)).toString(16)):(n=n.slice(1),i=(t=parseInt(n,10)).toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(O(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function F(e,t){"<"===t?(e.state=w.OPEN_WAKA,e.startTagPosition=e.position):E(u,t)&&(O(e,"Non-whitespace before first tag."),e.textNode=t,e.state=w.TEXT)}function z(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}w=t.STATE,String.fromCodePoint||(M=String.fromCharCode,b=Math.floor,A=function(){var e,t,n=16384,r=[],i=-1,a=arguments.length;if(!a)return"";for(var o="";++i<a;){var s=Number(arguments[i]);if(!isFinite(s)||s<0||s>1114111||b(s)!==s)throw RangeError("Invalid code point: "+s);s<=65535?r.push(s):(e=55296+((s-=65536)>>10),t=s%1024+56320,r.push(e,t)),(i+1===a||r.length>n)&&(o+=M.apply(null,r),r.length=0)}return o},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:A,configurable:!0,writable:!0}):String.fromCodePoint=A)}(t)}).call(this,n(51).Buffer)},function(e,t,n){"use strict";t.byteLength=function(e){var t=l(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=l(e),o=r[0],s=r[1],u=new a(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),c=0,d=s>0?o-4:o;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[c++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t);return u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(c(e,o,o+16383>s?s:o+16383));1===i?(t=e[n-1],a.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],a.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return a.join("")};for(var r=[],i=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)r[s]=o[s],i[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,n){for(var i,a,o=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(r[(a=i)>>18&63]+r[a>>12&63]+r[a>>6&63]+r[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?i-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),a-=l}return(f?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,u,l=8*a-i-1,c=(1<<l)-1,d=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+d>=1?h/u:h*Math.pow(2,1-d))*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(o=o<<i|s,l+=i;l>0;e[n+f]=255&o,f+=p,o/=256,l-=8);e[n+f-p]|=128*g}},function(e,t,n){e.exports=i;var r=n(52).EventEmitter;function i(){r.call(this)}n(23)(i,r),i.Readable=n(53),i.Writable=n(146),i.Duplex=n(147),i.Transform=n(148),i.PassThrough=n(149),i.Stream=i,i.prototype.pipe=function(e,t){var n=this;function i(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(c(),0===r.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",i),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},function(e,t){},function(e,t,n){"use strict";var r=n(38).Buffer,i=n(141);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t,n,i,a=r.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=a,i=s,t.copy(n,i),s+=o.data.length,o=o.next;return a},e}(),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new a(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(143),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(13))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,a,o,s,u=1,l={},c=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick((function(){p(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},r=function(e){a.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(i=d.documentElement,r=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(p,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&p(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(o+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,r(u),u++},h.clearImmediate=f}function f(e){delete l[e]}function p(e){if(c)setTimeout(p,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{f(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(13),n(36))},function(e,t,n){(function(t){function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),r=!0}return e.apply(this,arguments)}}}).call(this,n(13))},function(e,t,n){"use strict";e.exports=a;var r=n(85),i=Object.create(n(28));function a(e){if(!(this instanceof a))return new a(e);r.call(this,e)}i.inherits=n(23),i.inherits(a,r),a.prototype._transform=function(e,t,n){n(null,e)}},function(e,t,n){e.exports=n(54)},function(e,t,n){e.exports=n(20)},function(e,t,n){e.exports=n(53).Transform},function(e,t,n){e.exports=n(53).PassThrough},function(e,t,n){!function(e,t,n){function r(e,t,s){var l;if("region"===s.kind)(l=document.createElement("div")).style.position="absolute";else if("body"===s.kind)l=document.createElement("div");else if("div"===s.kind)l=document.createElement("div");else if("image"===s.kind){if(l=document.createElement("img"),null!==e.imgResolver&&null!==s.src){var c=e.imgResolver(s.src,l);c&&(l.src=c),l.height=e.regionH,l.width=e.regionW}}else if("p"===s.kind)l=document.createElement("p");else if("span"===s.kind){if("container"===s.styleAttrs[n.byName.ruby.qname])l=document.createElement("ruby"),e.ruby=!0;else if("base"===s.styleAttrs[n.byName.ruby.qname])l=document.createElement("rb");else if("text"===s.styleAttrs[n.byName.ruby.qname])l=document.createElement("rt");else if("baseContainer"===s.styleAttrs[n.byName.ruby.qname])l=document.createElement("rbc");else if("textContainer"===s.styleAttrs[n.byName.ruby.qname])l=document.createElement("rtc");else{if("delimiter"===s.styleAttrs[n.byName.ruby.qname])return;l=document.createElement("span")}var d=s.styleAttrs[n.byName.textEmphasis.qname];d&&"none"!==d.style&&(e.textEmphasis=!0)}else"br"===s.kind&&(l=document.createElement("br"));if(l){for(var h in t.appendChild(l),l.style.margin="0",u){var f=u[h],p=s.styleAttrs[f.qname];void 0!==p&&null!==f.map&&f.map(e,l,s,p)}var g=l;if("region"===s.kind){var m=s.styleAttrs[n.byName.writingMode.qname];"lrtb"===m||"lr"===m?(e.ipd="lr",e.bpd="tb"):"rltb"===m||"rl"===m?(e.ipd="rl",e.bpd="tb"):"tblr"===m?(e.ipd="tb",e.bpd="lr"):"tbrl"!==m&&"tb"!==m||(e.ipd="tb",e.bpd="rl")}var v=s.styleAttrs[n.byName.linePadding.qname];if(v&&!v.isZero()){var y=v.toUsedLength(e.w,e.h);if(y>0){var _=Math.ceil(y)+"px";"tb"===e.bpd?(g.style.paddingLeft=_,g.style.paddingRight=_):(g.style.paddingTop=_,g.style.paddingBottom=_),e.lp=v}}var T=s.styleAttrs[n.byName.multiRowAlign.qname];if(T&&"auto"!==T){var E=document.createElement("span");E.style.display="inline-block",E.style.textAlign=T,l.appendChild(E),g=E,e.mra=T}var M=s.styleAttrs[n.byName.rubyReserve.qname];if(M&&"none"!==M[0]&&(e.rubyReserve=M),s.styleAttrs[n.byName.fillLineGap.qname]&&(e.flg=!0),"span"===s.kind&&s.text)if(n.byName.textCombine.qname in s.styleAttrs&&"all"===s.styleAttrs[n.byName.textCombine.qname][0])l.textContent=s.text;else for(var b="",A=0;A<s.text.length;A++){b+=s.text.charAt(A);var w=s.text.charCodeAt(A);if(w<55296||w>56319||A===s.text.length){var S=document.createElement("span");S.textContent=b,l.appendChild(S),b=""}}for(var x in s.contents)r(e,g,s.contents[x]);var D=[];if((e.lp||e.mra||e.flg||e.ruby||e.textEmphasis||e.rubyReserve)&&"p"===s.kind&&(o(e,g,D,null),e.rubyReserve&&(!function(e,t){for(var n=0;n<e.length;n++){var r,i,a=document.createElement("ruby"),o=document.createElement("rb");o.textContent="​",a.appendChild(o);var s=t.rubyReserve[1].toUsedLength(t.w,t.h)+"px";"both"===t.rubyReserve[0]?((r=document.createElement("rtc")).style.rubyPosition="under",r.textContent="​",r.style.fontSize=s,(i=document.createElement("rtc")).style.rubyPosition="over",i.textContent="​",i.style.fontSize=s,a.appendChild(r),a.appendChild(i)):((r=document.createElement("rtc")).textContent="​",r.style.fontSize=s,"after"===t.rubyReserve[0]||"outside"===t.rubyReserve[0]&&n>0?r.style.rubyPosition="tb"===t.bpd||"rl"===t.bpd?"under":"over":r.style.rubyPosition="tb"===t.bpd||"rl"===t.bpd?"over":"under",a.appendChild(r));e[n].elements[0].node.parentElement.insertBefore(a,e[n].elements[0].node)}}(D,e),e.rubyReserve=null),(e.ruby||e.rubyReserve)&&(!function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].rbc.length;r++){var i;if(!e[n].rbc[r].style.rubyPosition)i="tb"===t.bpd?0===n?"over":"under":"rl"===t.bpd?0===n?"over":"under":0===n?"under":"over",e[n].rbc[r].style.rubyPosition=i}}(D,e),e.ruby=null),e.textEmphasis&&(!function(e,t){for(var n=0;n<e.length;n++)for(var r=0;r<e[n].te.length;r++){var i;if(!e[n].te[r].style.textEmphasisPosition||"none"===e[n].te[r].style.textEmphasisPosition)i="tb"===t.bpd?0===n?"left over":"left under":"rl"===t.bpd?0===n?"right under":"left under":0===n?"left under":"right under",e[n].te[r].style.textEmphasisPosition=i}}(D,e),e.textEmphasis=null),e.mra&&(!function(e){for(var t=0;t<e.length-1;t++){var n=e[t].elements.length;if(0!==n&&!1===e[t].br){var r=document.createElement("br"),i=e[t].elements[n-1].node;i.parentElement.insertBefore(r,i.nextSibling)}}}(D),e.mra=null),e.lp&&(!function(e,t,n){for(var r in e){var i=e[r].elements.length,a=e[r].elements[e[r].start_elem],o=e[r].elements[e[r].end_elem],s=Math.ceil(t)+"px",u="-"+Math.ceil(t)+"px";0!==i&&("lr"===n.ipd?(a.node.style.borderLeftColor=a.bgcolor||"#00000000",a.node.style.borderLeftStyle="solid",a.node.style.borderLeftWidth=s,a.node.style.marginLeft=u):"rl"===n.ipd?(a.node.style.borderRightColor=a.bgcolor||"#00000000",a.node.style.borderRightStyle="solid",a.node.style.borderRightWidth=s,a.node.style.marginRight=u):"tb"===n.ipd&&(a.node.style.borderTopColor=a.bgcolor||"#00000000",a.node.style.borderTopStyle="solid",a.node.style.borderTopWidth=s,a.node.style.marginTop=u),"lr"===n.ipd?(o.node.style.borderRightColor=o.bgcolor||"#00000000",o.node.style.borderRightStyle="solid",o.node.style.borderRightWidth=s,o.node.style.marginRight=u):"rl"===n.ipd?(o.node.style.borderLeftColor=o.bgcolor||"#00000000",o.node.style.borderLeftStyle="solid",o.node.style.borderLeftWidth=s,o.node.style.marginLeft=u):"tb"===n.ipd&&(o.node.style.borderBottomColor=o.bgcolor||"#00000000",o.node.style.borderBottomStyle="solid",o.node.style.borderBottomWidth=s,o.node.style.marginBottom=u))}}(D,e.lp.toUsedLength(e.w,e.h),e),e.lp=null),e.flg)){var I=a(g.getBoundingClientRect(),e);!function(e,t,n,r){for(var i=Math.sign(n-t),a=0;a<=e.length;a++){var o,s,u;if(o=0===a?t:a===e.length?n:(e[a].before+e[a-1].after)/2,a>0)for(var l=0;l<e[a-1].elements.length;l++)null!==e[a-1].elements[l].bgcolor&&(u=e[a-1].elements[l],i*(u.after-o)<0&&(s=Math.ceil(Math.abs(o-u.after))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingRight=s:"rl"===r.bpd?u.node.style.paddingLeft=s:"tb"===r.bpd&&(u.node.style.paddingBottom=s)));if(a<e.length)for(var c=0;c<e[a].elements.length;c++)null!==(u=e[a].elements[c]).bgcolor&&i*(u.before-o)>0&&(s=Math.ceil(Math.abs(u.before-o))+"px",u.node.style.backgroundColor=u.bgcolor,"lr"===r.bpd?u.node.style.paddingLeft=s:"rl"===r.bpd?u.node.style.paddingRight=s:"tb"===r.bpd&&(u.node.style.paddingTop=s))}}(D,I.before,I.after,e),e.flg=null}if("region"===s.kind&&(o(e,g,D),"tb"===e.bpd&&e.enableRollUp&&s.contents.length>0&&"after"===s.styleAttrs[n.byName.displayAlign.qname])){var C=new i(""===s.id?"_":s.id,D);if(e.currentISDState[C.id]=C,e.previousISDState&&C.id in e.previousISDState&&e.previousISDState[C.id].plist.length>0&&C.plist.length>1&&C.plist[C.plist.length-2].text===e.previousISDState[C.id].plist[e.previousISDState[C.id].plist.length-1].text){var N=l.firstElementChild,L=C.plist[C.plist.length-1].after-C.plist[C.plist.length-1].before;N.style.bottom="-"+L+"px",N.style.transition="transform 0.4s",N.style.position="relative",N.style.transform="translateY(-"+L+"px)"}}}else!function(e,t){if(e&&e.error&&e.error(t))throw t}(e.errorHandler,"Error processing ISD element kind: "+s.kind)}function i(e,t){this.id=e,this.plist=t}function a(e,t){var n={before:null,after:null,start:null,end:null};return"tb"===t.bpd?(n.before=e.top,n.after=e.bottom,"lr"===t.ipd?(n.start=e.left,n.end=e.right):(n.start=e.right,n.end=e.left)):"lr"===t.bpd?(n.before=e.left,n.after=e.right,n.start=e.top,n.end=e.bottom):"rl"===t.bpd&&(n.before=e.right,n.after=e.left,n.start=e.top,n.end=e.bottom),n}function o(e,t,n,r){if("rt"!==t.localName&&"rtc"!==t.localName){var i,s,u,l,c=t.style.backgroundColor||r;if(0===t.childElementCount)if("span"===t.localName||"rb"===t.localName){var d=t.getBoundingClientRect();if(0===d.height||0===d.width)return;var h=a(d,e);if(0!==n.length&&(i=h.before,s=h.after,u=n[n.length-1].before,l=n[n.length-1].after,s<l&&i>u||l<=s&&u>=i)){var f=Math.sign(h.after-h.before),p=Math.sign(h.end-h.start);f*(h.before-n[n.length-1].before)<0&&(n[n.length-1].before=h.before),f*(h.after-n[n.length-1].after)>0&&(n[n.length-1].after=h.after),p*(h.start-n[n.length-1].start)<0&&(n[n.length-1].start=h.start,n[n.length-1].start_elem=n[n.length-1].elements.length),p*(h.end-n[n.length-1].end)>0&&(n[n.length-1].end=h.end,n[n.length-1].end_elem=n[n.length-1].elements.length)}else n.push({before:h.before,after:h.after,start:h.start,end:h.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});n[n.length-1].text+=t.textContent,n[n.length-1].elements.push({node:t,bgcolor:c,before:h.before,after:h.after})}else"br"===t.localName&&0!==n.length&&(n[n.length-1].br=!0);else for(var g=t.firstChild;g;)g.nodeType===Node.ELEMENT_NODE&&(o(e,g,n,c),"ruby"===g.localName||"rtc"===g.localName?n.length>0&&n[n.length-1].rbc.push(g):"span"===g.localName&&g.style.textEmphasisStyle&&"none"!==g.style.textEmphasisStyle&&n.length>0&&n[n.length-1].te.push(g)),g=g.nextSibling}}function s(e,t){this.qname=e,this.map=t}e.render=function(e,t,n,i,a,o,s,u,l){var c=i||t.clientHeight,d=a||t.clientWidth;if(null!==e.aspectRatio){var h=c*e.aspectRatio;h>d?c=Math.round(d/e.aspectRatio):d=h}var f=document.createElement("div");f.style.position="relative",f.style.width=d+"px",f.style.height=c+"px",f.style.margin="auto",f.style.top=0,f.style.bottom=0,f.style.left=0,f.style.right=0,f.style.zIndex=0;var p={h:c,w:d,regionH:null,regionW:null,imgResolver:n,displayForcedOnlyMode:o||!1,isd:e,errorHandler:s,previousISDState:u,enableRollUp:l||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};for(var g in t.appendChild(f),e.contents)r(p,f,e.contents[g]);return p.currentISDState};var u=[new s("http://www.w3.org/ns/ttml#styling backgroundColor",(function(e,t,n,r){0!==r[3]&&(t.style.backgroundColor="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")")})),new s("http://www.w3.org/ns/ttml#styling color",(function(e,t,n,r){t.style.color="rgba("+r[0].toString()+","+r[1].toString()+","+r[2].toString()+","+(r[3]/255).toString()+")"})),new s("http://www.w3.org/ns/ttml#styling direction",(function(e,t,n,r){t.style.direction=r})),new s("http://www.w3.org/ns/ttml#styling display",(function(e,t,n,r){})),new s("http://www.w3.org/ns/ttml#styling displayAlign",(function(e,t,n,r){t.style.display="flex",t.style.flexDirection="column","before"===r?t.style.justifyContent="flex-start":"center"===r?t.style.justifyContent="center":"after"===r&&(t.style.justifyContent="flex-end")})),new s("http://www.w3.org/ns/ttml#styling extent",(function(e,t,n,r){e.regionH=r.h.toUsedLength(e.w,e.h),e.regionW=r.w.toUsedLength(e.w,e.h);var i=0,a=0,o=n.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];o&&(i=o[0].toUsedLength(e.w,e.h)+o[2].toUsedLength(e.w,e.h),a=o[1].toUsedLength(e.w,e.h)+o[3].toUsedLength(e.w,e.h)),t.style.height=e.regionH-i+"px",t.style.width=e.regionW-a+"px"})),new s("http://www.w3.org/ns/ttml#styling fontFamily",(function(e,t,n,r){var i=[];for(var a in r)"monospaceSerif"===r[a]?(i.push("Courier New"),i.push('"Liberation Mono"'),i.push("Courier"),i.push("monospace")):"proportionalSansSerif"===r[a]?(i.push("Arial"),i.push("Helvetica"),i.push('"Liberation Sans"'),i.push("sans-serif")):"monospace"===r[a]?i.push("monospace"):"sansSerif"===r[a]?i.push("sans-serif"):"serif"===r[a]?i.push("serif"):"monospaceSansSerif"===r[a]?(i.push("Consolas"),i.push("monospace")):"proportionalSerif"===r[a]?i.push("serif"):i.push(r[a]);t.style.fontFamily=i.join(",")})),new s("http://www.w3.org/ns/ttml#styling shear",(function(e,t,n,r){if(0!==r){var i=-.9*r;"tb"===e.bpd?t.style.transform="skewX("+i+"deg)":t.style.transform="skewY("+i+"deg)"}})),new s("http://www.w3.org/ns/ttml#styling fontSize",(function(e,t,n,r){t.style.fontSize=r.toUsedLength(e.w,e.h)+"px"})),new s("http://www.w3.org/ns/ttml#styling fontStyle",(function(e,t,n,r){t.style.fontStyle=r})),new s("http://www.w3.org/ns/ttml#styling fontWeight",(function(e,t,n,r){t.style.fontWeight=r})),new s("http://www.w3.org/ns/ttml#styling lineHeight",(function(e,t,n,r){t.style.lineHeight="normal"===r?"normal":r.toUsedLength(e.w,e.h)+"px"})),new s("http://www.w3.org/ns/ttml#styling opacity",(function(e,t,n,r){t.style.opacity=r})),new s("http://www.w3.org/ns/ttml#styling origin",(function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"})),new s("http://www.w3.org/ns/ttml#styling overflow",(function(e,t,n,r){t.style.overflow=r})),new s("http://www.w3.org/ns/ttml#styling padding",(function(e,t,n,r){var i=[];i[0]=r[0].toUsedLength(e.w,e.h)+"px",i[1]=r[3].toUsedLength(e.w,e.h)+"px",i[2]=r[2].toUsedLength(e.w,e.h)+"px",i[3]=r[1].toUsedLength(e.w,e.h)+"px",t.style.padding=i.join(" ")})),new s("http://www.w3.org/ns/ttml#styling position",(function(e,t,n,r){t.style.top=r.h.toUsedLength(e.w,e.h)+"px",t.style.left=r.w.toUsedLength(e.w,e.h)+"px"})),new s("http://www.w3.org/ns/ttml#styling rubyAlign",(function(e,t,n,r){t.style.rubyAlign=r})),new s("http://www.w3.org/ns/ttml#styling rubyPosition",(function(e,t,n,r){var i;"before"!==r&&"after"!==r||(i="tb"===e.bpd?"before"===r?"over":"under":"rl"===e.bpd?"before"===r?"over":"under":"before"===r?"under":"over",t.parentElement.style.rubyPosition=i)})),new s("http://www.w3.org/ns/ttml#styling showBackground",null),new s("http://www.w3.org/ns/ttml#styling textAlign",(function(e,t,r,i){var a,o=r.styleAttrs[n.byName.direction.qname];a="start"===i?"rtl"===o?"right":"left":"end"===i?"rtl"===o?"left":"right":i,t.style.textAlign=a})),new s("http://www.w3.org/ns/ttml#styling textDecoration",(function(e,t,n,r){t.style.textDecoration=r.join(" ").replace("lineThrough","line-through")})),new s("http://www.w3.org/ns/ttml#styling textOutline",(function(e,t,n,r){})),new s("http://www.w3.org/ns/ttml#styling textShadow",(function(e,t,r,i){var a=r.styleAttrs[n.byName.textOutline.qname];if("none"===i&&"none"===a)t.style.textShadow="";else{var o=[];if("none"!==a&&o.push("rgba("+a.color[0].toString()+","+a.color[1].toString()+","+a.color[2].toString()+","+(a.color[3]/255).toString()+") 0px 0px "+a.thickness.toUsedLength(e.w,e.h)+"px"),"none"!==i)for(var s in i)o.push(i[s].x_off.toUsedLength(e.w,e.h)+"px "+i[s].y_off.toUsedLength(e.w,e.h)+"px "+i[s].b_radius.toUsedLength(e.w,e.h)+"px rgba("+i[s].color[0].toString()+","+i[s].color[1].toString()+","+i[s].color[2].toString()+","+(i[s].color[3]/255).toString()+")");t.style.textShadow=o.join(",")}})),new s("http://www.w3.org/ns/ttml#styling textCombine",(function(e,t,n,r){t.style.textCombineUpright=r.join(" ")})),new s("http://www.w3.org/ns/ttml#styling textEmphasis",(function(e,t,n,r){var i;"none"!==r.style?("auto"===r.style?t.style.textEmphasisStyle="filled":t.style.textEmphasisStyle=r.style+" "+r.symbol,("before"===r.position||"after"===r.position)&&(i="tb"===e.bpd?"before"===r.position?"left over":"left under":"rl"===e.bpd?"before"===r.position?"right under":"left under":"before"===r.position?"left under":"right under",t.style.textEmphasisPosition=i)):t.style.textEmphasisStyle="none"})),new s("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(e,t,n,r){var i;i="bidiOverride"===r?"bidi-override":r,t.style.unicodeBidi=i})),new s("http://www.w3.org/ns/ttml#styling visibility",(function(e,t,n,r){t.style.visibility=r})),new s("http://www.w3.org/ns/ttml#styling wrapOption",(function(e,t,n,r){"wrap"===r?"preserve"===n.space?t.style.whiteSpace="pre-wrap":t.style.whiteSpace="normal":"preserve"===n.space?t.style.whiteSpace="pre":t.style.whiteSpace="noWrap"})),new s("http://www.w3.org/ns/ttml#styling writingMode",(function(e,t,n,r){"lrtb"===r||"lr"===r?e.writingMode="horizontal-tb":"rltb"===r||"rl"===r?e.writingMode="horizontal-tb":"tblr"===r?e.writingMode="vertical-lr":"tbrl"!==r&&"tb"!==r||(e.writingMode="vertical-rl"),t.style.writingMode=e.writingMode})),new s("http://www.w3.org/ns/ttml#styling zIndex",(function(e,t,n,r){t.style.zIndex=r})),new s("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(e,t,n,r){e.displayForcedOnlyMode&&!1===r&&(t.style.visibility="hidden")}))],l={};for(var c in u)l[u[c].qname]=u[c]}(t,"undefined"==typeof imscNames?n(34):imscNames,"undefined"==typeof imscStyles?n(50):imscStyles,"undefined"==typeof imscUtils?n(35):imscUtils)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e=0;function t(e){for(var t="",n=0;n<e.length;++n){t+=e[n].uchar}return t.length-t.replace(/^\s+/,"").length}function n(e){return"left: "+3.125*e.x+"%; top: "+6.66*e.y1+"%; width: "+(100-3.125*e.x)+"%; height: "+6.66*Math.max(e.y2-1-e.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function r(e){return"red"===e?"rgb(255, 0, 0)":"green"===e?"rgb(0, 255, 0)":"blue"===e?"rgb(0, 0, 255)":"cyan"===e?"rgb(0, 255, 255)":"magenta"===e?"rgb(255, 0, 255)":"yellow"===e?"rgb(255, 255, 0)":"white"===e?"rgb(255, 255, 255)":"black"===e?"rgb(0, 0, 0)":e}function i(e,t){var n=e.videoHeight/15;return t?"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(t.foreground?r(t.foreground):"rgb(255, 255, 255)")+"; font-style: "+(t.italics?"italic":"normal")+"; text-decoration: "+(t.underline?"underline":"none")+"; white-space: pre; background-color: "+(t.background?r(t.background):"transparent")+";":"font-size: "+n+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function a(e){return e.replace(/^\s+/g,"")}function o(e){return e.replace(/\s+$/g,"")}return{createHTMLCaptionsFromScreen:function(r,s,u,l){var c=null,d=!1,h=-1,f={start:s,end:u,spans:[]},p="style_cea608_white_black",g={},m={},v=[],y=void 0,_=void 0;for(y=0;y<15;++y){var T=l.rows[y],E="",M=null;if(!1===T.isEmpty()){var b=t(T.chars);null===c&&(c={x:b,y1:y,y2:y+1,p:[]}),b!==h&&d&&(c.p.push(f),f={start:s,end:u,spans:[]},c.y2=y,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(v.push(c),g[c.name]=c):g[c.name].p.contat(c.p),c={x:b,y1:y,y2:y+1,p:[]});for(var A=0;A<T.chars.length;++A){var w=T.chars[A],S=w.penState;if(null===M||!S.equals(M)){E.trim().length>0&&(f.spans.push({name:p,line:E,row:y}),E="");var x="style_cea608_"+S.foreground+"_"+S.background;S.underline&&(x+="_underline"),S.italics&&(x+="_italics"),m.hasOwnProperty(x)||(m[x]=JSON.parse(JSON.stringify(S))),M=S,p=x}E+=w.uchar}E.trim().length>0&&f.spans.push({name:p,line:E,row:y}),d=!0,h=b}else d=!1,h=-1,c&&(c.p.push(f),f={start:s,end:u,spans:[]},c.y2=y,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(v.push(c),g[c.name]=c):g[c.name].p.contat(c.p),c=null)}c&&(c.p.push(f),c.y2=y+1,c.name="region_"+c.x+"_"+c.y1+"_"+c.y2,!1===g.hasOwnProperty(c.name)?(v.push(c),g[c.name]=c):g[c.name].p.contat(c.p),c=null);var D=[];for(y=0;y<v.length;++y){var I=v[y],C="sub_cea608_"+e++,N=document.createElement("div");N.id=C;var L=n(I);N.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+L;var O=document.createElement("div");O.className="paragraph bodyStyle",O.style.cssText=i(r);var R=document.createElement("div");R.className="cueUniWrapper",R.style.cssText="unicode-bidi: normal; direction: ltr;";for(var j=0;j<I.p.length;++j){var P=I.p[j],k=0;for(_=0;_<P.spans.length;++_){var U=P.spans[_];if(U.line.length>0){if(0!==_&&k!=U.row){var B=document.createElement("br");B.className="lineBreak",R.appendChild(B)}var F=!1;k===U.row&&(F=!0),k=U.row;var z=m[U.name],G=document.createElement("span");G.className="spanPadding "+U.name+" customSpanColor",G.style.cssText=i(r,z),0!==_&&F?_===P.spans.length-1?G.textContent=o(U.line):G.textContent=U.line:P.spans.length>1&&_<P.spans.length-1&&U.row===P.spans[_+1].row?G.textContent=a(U.line):G.textContent=U.line.trim(),R.appendChild(G)}}}O.appendChild(R),N.appendChild(O);var H={bodyStyle:["%",90]};for(var Y in m)m.hasOwnProperty(Y)&&(H[Y]=["%",90]);D.push({type:"html",start:s,end:u,cueHTMLElement:N,cueID:C,cellResolution:[32,15],isFromCEA608:!0,fontSize:H,lineHeight:{},linePadding:{}})}return D}}}o.__dashjs_factory_name="EmbeddedTextHtmlRender",t.default=a.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=this.context,t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,s=void 0;function u(e){var t=e.split(":"),n=t.length-1;return e=60*parseInt(t[n-1],10)+parseFloat(t[n]),2===n&&(e+=3600*parseInt(t[0],10)),e}function l(e){var t=e.split(a),n=t[1].split(s);return n.shift(),t[1]=n[0],n.shift(),{cuePoints:t,styles:c(n)}}function c(e){var t={};return e.forEach((function(e){if(e.split(/:/).length>1){var n=e.split(/:/)[1];n&&-1!=n.search(/%/)&&(n=parseInt(n.replace(/%/,""),10)),(e.match(/align/)||e.match(/A/))&&(t.align=n),(e.match(/line/)||e.match(/L/))&&(t.line=n),(e.match(/position/)||e.match(/P/))&&(t.position=n),(e.match(/size/)||e.match(/S/))&&(t.size=n)}})),t}function d(e,t){for(var n,r=t,i="",o="";""!==e[r]&&r<e.length;)r++;if((n=r-t)>1)for(var s=0;s<n;s++){if((o=e[t+s]).match(a)){i="";break}i+=o,s!==n-1&&(i+="\n")}else(o=e[t]).match(a)||(i=o);return i}return t={parse:function(e){var t,i=[],s=void 0;if(!e)return i;t=(e=e.split(r)).length,s=-1;for(var c=0;c<t;c++){var h=e[c];if(h.length>0&&"WEBVTT"!==h&&h.match(a)){var f=l(h),p=f.cuePoints,g=f.styles,m=d(e,c+1),v=u(p[0].replace(o,"")),y=u(p[1].replace(o,""));!isNaN(v)&&!isNaN(y)&&v>=s&&y>v?""!==m?(s=v,i.push({start:v,end:y,data:m,styles:g})):n.error("Skipping cue due to empty/malformed cue text"):n.error("Skipping cue due to incorrect cue timing")}}return i}},n=(0,i.default)(e).getInstance().getLogger(t),r=/(?:\r\n|\r|\n)/gm,a=/-->/,o=/(^[\s]+|[\s]+$)/g,s=/\s\b/g,t}o.__dashjs_factory_name="VTTParser",t.default=r.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),i=u(n(6)),a=u(n(5)),o=u(n(7)),s=n(80);function u(e){return e&&e.__esModule?e:{default:e}}function l(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0,r=void 0,u=0;return n={parse:function(e,n,i,a,l){var c="",d=[],h=void 0,f=void 0,p=void 0,g={},m={},v="",y="",_={onOpenTag:function(e,t,n){if("image"===t&&"http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"===e){if(!n[" imagetype"]||"PNG"!==n[" imagetype"].value)return void r.warn("smpte-tt imagetype != PNG. Discarded");v=n["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){v&&(m[v]=y.trim()),y="",v=""},onText:function(e){v&&(y+=e)}};if(!e)throw c="no ttml data to parse",new Error(c);g.data=e,t.trigger(o.default.TTML_TO_PARSE,g);var T=(0,s.fromXML)(g.data,(function(e){c=e}),_);t.trigger(o.default.TTML_PARSED,{ttmlString:g.data,ttmlDoc:T});var E,M=T.getMediaTimeEvents();for(p=0;p<M.length;p++){var b=(0,s.generateISD)(T,M[p],(function(e){c=e}));b.contents.some((function(e){return e.contents.length}))&&(h=M[p]+n<i?i:M[p]+n)<(f=M[p+1]+n>a?a:M[p+1]+n)&&d.push({start:h,end:f,type:"html",cueID:(E=void 0,E="cue_TTML_"+u,u++,E),isd:b,images:l,embeddedImages:m})}if(""!==c)throw r.error(c),new Error(c);return d}},r=(0,i.default)(e).getInstance().getLogger(n),n}l.__dashjs_factory_name="TTMLParser",t.default=r.default.getSingletonFactory(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(6)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=this.context,n=void 0,i=void 0,a=void 0,o=[],s=e;function u(e,t){o=o.filter((function(n){return!((isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e))}))}return n={getAllBufferRanges:function(){for(var e=[],t=0;t<o.length;t++){var n=o[t];0===e.length||n.start>e[e.length-1].end?e.push({start:n.start,end:n.end}):e[e.length-1].end=n.end}var r={start:function(t){return e[t].start},end:function(t){return e[t].end}};return Object.defineProperty(r,"length",{get:function(){return e.length}}),r},append:function(e){"InitializationSegment"!==e.segmentType?(o.push(e),o.sort((function(e,t){return e.start-t.start})),a=null):a=e,i.debug("PreBufferSink appended chunk s: "+e.start+"; e: "+e.end),s&&s({chunk:e})},remove:u,abort:function(){},discharge:function(e,t){var n=function(e,t){return o.filter((function(n){return(isNaN(t)||n.start<t)&&(isNaN(e)||n.end>e)}))}(e,t);return a&&(n.push(a),a=null),u(e,t),n},reset:function(){o=[],a=null,s=null},updateTimestampOffset:function(){},hasDiscontinuitiesAfter:function(){return!1},waitForUpdateEnd:function(e){e()},getBuffer:function(){return this}},i=(0,r.default)(t).getInstance().getLogger(n),n}o.__dashjs_factory_name="PreBufferSink";var s=i.default.getClassFactory(o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),i=u(n(6)),a=u(n(16)),o=u(n(4)),s=u(n(14));function u(e){return e&&e.__esModule?e:{default:e}}function l(e){e=e||{};var t=this.context,n=e.dashMetrics,r=void 0,u=void 0;return r={getMaxIndex:function(e){var r=(0,a.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("useBufferOccupancyABR")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("getScheduleController")))return r;!function(){if(!n||!n.hasOwnProperty("getLatestBufferInfoVO"))throw new Error(o.default.MISSING_CONFIG_ERROR)}();var i=e.getMediaInfo(),l=e.getMediaType(),c=n.getLatestBufferInfoVO(l,!0,s.default.BUFFER_STATE),d=e.getScheduleController(),h=e.getAbrController(),f=e.getStreamInfo(),p=f&&f.manifestInfo?f.manifestInfo.isDynamic:null,g=h.getThroughputHistory(),m=g.getSafeAverageThroughput(l,p),v=g.getAverageLatency(l),y=e.useBufferOccupancyABR();return isNaN(m)||!c||y?r:(h.getAbandonmentStateFor(l)!==s.default.ABANDON_LOAD&&(c.state===s.default.BUFFER_LOADED||p)&&(r.quality=h.getQualityForBitrate(i,m,v),d.setTimeToLoadDelay(0),u.debug("["+l+"] requesting switch to index: ",r.quality,"Average throughput",Math.round(m),"kbps"),r.reason={throughput:m,latency:v}),r)},reset:function(){}},u=(0,i.default)(t).getInstance().getLogger(r),r}l.__dashjs_factory_name="ThroughputRule",t.default=r.default.getClassFactory(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(5)),i=c(n(7)),a=c(n(1)),o=c(n(6)),s=c(n(16)),u=c(n(4)),l=c(n(14));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t=this.context,n=(0,r.default)(t).getInstance(),a=e.dashMetrics,c=void 0,d=void 0,h=void 0;function f(){h={}}function p(){f()}return c={getMaxIndex:function(e){var n=(0,s.default)(t).create();if(!e||!e.hasOwnProperty("getMediaType"))return n;!function(){if(!a||!a.hasOwnProperty("getCurrentBufferLevel")||!a.hasOwnProperty("getLatestBufferInfoVO"))throw new Error(u.default.MISSING_CONFIG_ERROR)}();var r=e.getMediaType(),i=a.getLatestBufferInfoVO(r,!0,l.default.BUFFER_STATE),o=e.getRepresentationInfo().fragmentDuration;if(!i||!function(e,t){h[e]=h[e]||{};var n=!1;h[e].firstBufferLoadedEvent?n=!0:t&&t.state===l.default.BUFFER_LOADED&&(h[e].firstBufferLoadedEvent=!0,n=!0);return n}(r,i)||!o)return n;if(i.state===l.default.BUFFER_EMPTY)d.debug("["+r+"] Switch to index 0; buffer is empty."),n.quality=0,n.reason="InsufficientBufferRule: Buffer is empty";else{var c=e.getMediaInfo(),f=e.getAbrController(),p=f.getThroughputHistory(),g=a.getCurrentBufferLevel(r,!0),m=p.getAverageThroughput(r),v=p.getAverageLatency(r),y=m*(g/o)*.5;n.quality=f.getQualityForBitrate(c,y,v),n.reason="InsufficientBufferRule: being conservative to avoid immediate rebuffering"}return n},reset:function(){f(),n.off(i.default.PLAYBACK_SEEKING,p,c)}},d=(0,o.default)(t).getInstance().getLogger(c),f(),n.on(i.default.PLAYBACK_SEEKING,p,c),c}d.__dashjs_factory_name="InsufficientBufferRule",t.default=a.default.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(16)),i=o(n(1)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e=e||{};var t=this.context,n=e.mediaPlayerModel,i=e.dashMetrics,o=e.settings,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0;function f(){c={},d={},h=[]}return u={shouldAbandon:function(e){var a=(0,r.default)(t).create(r.default.NO_CHANGE,{name:s.__dashjs_factory_name});if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getCurrentRequest")&&e.hasOwnProperty("getRepresentationInfo")&&e.hasOwnProperty("getAbrController")))return a;var u=e.getMediaInfo(),f=e.getMediaType(),p=e.getCurrentRequest();if(!isNaN(p.index)){!function(e,t){c[e]=c[e]||{},c[e][t]=c[e][t]||{}}(f,p.index);var g=n.getStableBufferTime();if(i.getCurrentBufferLevel(f,!0)>g)return a;var m=c[f][p.index];if(null===m||null===p.firstByteDate||d.hasOwnProperty(m.id))return a;if(void 0===m.firstByteTime&&(h[f]=[],m.firstByteTime=p.firstByteDate.getTime(),m.segmentDuration=p.duration,m.bytesTotal=p.bytesTotal,m.id=p.index),m.bytesLoaded=p.bytesLoaded,m.elapsedTime=(new Date).getTime()-m.firstByteTime,m.bytesLoaded>0&&m.elapsedTime>0&&function(e,t){h[e]=h[e]||[],h[e].push(t)}(f,Math.round(8*m.bytesLoaded/m.elapsedTime)),h[f].length>=5&&m.elapsedTime>500&&m.bytesLoaded<m.bytesTotal){var v=h[f].reduce((function(e,t){return e+t}),0);if(m.measuredBandwidthInKbps=Math.round(v/h[f].length),m.estimatedTimeOfDownload=+(8*m.bytesTotal/m.measuredBandwidthInKbps/1e3).toFixed(2),m.estimatedTimeOfDownload<1.8*m.segmentDuration||0===e.getRepresentationInfo().quality)return a;if(!d.hasOwnProperty(m.id)){var y=e.getAbrController(),_=m.bytesTotal-m.bytesLoaded,T=y.getBitrateList(u),E=y.getQualityForBitrate(u,m.measuredBandwidthInKbps*o.get().streaming.abr.bandwidthSafetyFactor),M=y.getMinAllowedIndexFor(f),b=void 0!==M?Math.max(M,E):E;_>m.bytesTotal*T[b].bitrate/T[y.getQualityFor(f)].bitrate&&(a.quality=b,a.reason.throughput=m.measuredBandwidthInKbps,a.reason.fragmentID=m.id,d[m.id]=m,l.debug("["+f+"] frag id",m.id," is asking to abandon and switch to quality to ",b," measured bandwidth was",m.measuredBandwidthInKbps),delete c[f][m.id])}}else m.bytesLoaded===m.bytesTotal&&delete c[f][m.id]}return a},reset:f},l=(0,a.default)(t).getInstance().getLogger(u),f(),u}s.__dashjs_factory_name="AbandonRequestsRule",t.default=i.default.getClassFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(16)),a=o(n(6));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=this.context,t=void 0,n=void 0;return t={getMaxIndex:function(t){var r=(0,i.default)(e).create();if(!t||!t.hasOwnProperty("getDroppedFramesHistory"))return r;var a=t.getDroppedFramesHistory();if(a){for(var o=a.getFrameHistory(),s=0,u=0,l=i.default.NO_CHANGE,c=1;c<o.length;c++)if(o[c]&&(s=o[c].droppedVideoFrames,(u=o[c].totalVideoFrames)>375&&s/u>.15)){l=c-1,n.debug("index: "+l+" Dropped Frames: "+s+" Total Frames: "+u);break}return(0,i.default)(e).create(l,{droppedFrames:s})}return r}},n=(0,a.default)(e).getInstance().getLogger(t),t}s.__dashjs_factory_name="DroppedFramesRule",t.default=r.default.getClassFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(6)),a=o(n(16));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=this.context,t=void 0,n=void 0;return t={getMaxIndex:function(t){for(var r=t?t.getSwitchHistory():null,i=r?r.getSwitchRequests():[],o=0,s=0,u=0,l=(0,a.default)(e).create(),c=0;c<i.length;c++)if(void 0!==i[c]&&(o+=i[c].drops,s+=i[c].noDrops,u+=i[c].dropSize,o+s>=6&&o/s>.075)){l.quality=c>0&&i[c].drops>0?c-1:c,l.reason={index:l.quality,drops:o,noDrops:s,dropSize:u},n.debug("Switch history rule index: "+l.quality+" samples: "+(o+s)+" drops: "+o);break}return l}},n=(0,i.default)(e).getInstance().getLogger(t),t}s.__dashjs_factory_name="SwitchHistoryRule",t.default=r.default.getClassFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(14)),i=c(n(16)),a=c(n(1)),o=n(11),s=c(n(5)),u=c(n(7)),l=c(n(6));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t=this.context,n=e.dashMetrics,a=e.mediaPlayerModel,c=(0,s.default)(t).getInstance(),d=void 0,h=void 0,f=void 0;function p(e,t,n){var r=n.reduce((function(e,t,r){return t>n[e]?r:e}),0);if(0===r)return null;var i=Math.max(e,10+2*t.length),a=(n[r]-1)/(i/10-1);return{gp:a,Vp:10/a}}function g(e){var t={},n=e.getMediaInfo().bitrateList.map((function(e){return e.bandwidth})),r=function(e){return e.map((function(e){return Math.log(e)}))}(n);r=r.map((function(e){return e-r[0]+1}));var i=a.getStableBufferTime(),o=p(i,n,r);return o?(t.state=1,t.bitrates=n,t.utilities=r,t.stableBufferTime=i,t.Vp=o.Vp,t.gp=o.gp,t.lastQuality=0,m(t)):t.state=0,t}function m(e){e.placeholderBuffer=0,e.mostAdvancedSegmentStart=NaN,e.lastSegmentWasReplacement=!1,e.lastSegmentStart=NaN,e.lastSegmentDurationS=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN}function v(e,t){var r=a.getStableBufferTime();if(e.stableBufferTime!==r){var i=p(r,e.bitrates,e.utilities);if(i.Vp!==e.Vp||i.gp!==e.gp){var o=n.getCurrentBufferLevel(t,!0),s=o+e.placeholderBuffer;s-=10,s*=i.Vp/e.Vp,s+=10,e.stableBufferTime=r,e.Vp=i.Vp,e.gp=i.gp,e.placeholderBuffer=Math.max(0,s-o)}}}function y(e,t){return e.Vp*(e.utilities[t]+e.gp)}function _(e,t){for(var n=e.bitrates[t],r=e.utilities[t],i=0,a=t-1;a>=0;--a)if(e.utilities[a]<e.utilities[t]){var o=e.bitrates[a],s=e.utilities[a],u=e.Vp*(e.gp+(n*s-o*r)/(n-o));i=Math.max(i,u)}return i}function T(){for(var e in f)f.hasOwnProperty(e)&&2===f[e].state&&(f[e].placeholderBuffer=0)}function E(){for(var e in f)if(f.hasOwnProperty(e)){var t=f[e];0!==t.state&&(t.state=1,m(t))}}function M(){}function b(e){if(e&&e.chunk&&e.chunk.mediaInfo){var t=f[e.chunk.mediaInfo.type];if(t&&0!==t.state){var n=e.chunk.start;isNaN(t.mostAdvancedSegmentStart)||n>t.mostAdvancedSegmentStart?(t.mostAdvancedSegmentStart=n,t.lastSegmentWasReplacement=!1):t.lastSegmentWasReplacement=!0,t.lastSegmentStart=n,t.lastSegmentDurationS=e.chunk.duration,t.lastQuality=e.chunk.quality,w(t,e.chunk.mediaInfo.type)}}}function A(e){if(e&&e.metric===r.default.HTTP_REQUEST&&e.value&&e.value.type===o.HTTPRequest.MEDIA_SEGMENT_TYPE&&e.value.trace&&e.value.trace.length){var t=f[e.mediaType];t&&0!==t.state&&(t.lastSegmentRequestTimeMs=e.value.trequest.getTime(),t.lastSegmentFinishTimeMs=e.value._tfinish.getTime(),w(t,e.mediaType))}}function w(e,t){if(!isNaN(e.lastSegmentStart)&&!isNaN(e.lastSegmentRequestTimeMs)&&!isNaN(e.placeholderBuffer)){if(e.placeholderBuffer*=.99,!isNaN(e.lastSegmentFinishTimeMs)){var r=n.getCurrentBufferLevel(t,!0)+.001*(e.lastSegmentFinishTimeMs-e.lastSegmentRequestTimeMs),i=y(e,e.lastQuality),a=Math.max(0,i-r);e.placeholderBuffer=Math.min(a,e.placeholderBuffer)}e.lastSegmentWasReplacement&&!isNaN(e.lastSegmentDurationS)&&(e.placeholderBuffer+=e.lastSegmentDurationS),e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN}}function S(e){if(e){var t=f[e.mediaType];t&&0!==t.state&&(t.abrQuality=e.newQuality)}}function x(e){if(e){var t=f[e.mediaType];if(t&&0!==t.state){var r=n.getCurrentBufferLevel(e.mediaType,!0),i=void 0;i=t.abrQuality>0?_(t,t.abrQuality):10;var a=Math.max(0,i-r);t.placeholderBuffer=Math.min(t.placeholderBuffer,a)}}}function D(){f={}}return d={getMaxIndex:function(e){var r=(0,i.default)(t).create();if(!(e&&e.hasOwnProperty("getMediaInfo")&&e.hasOwnProperty("getMediaType")&&e.hasOwnProperty("getScheduleController")&&e.hasOwnProperty("getStreamInfo")&&e.hasOwnProperty("getAbrController")&&e.hasOwnProperty("useBufferOccupancyABR")))return r;var a=e.getMediaInfo(),o=e.getMediaType(),s=e.getScheduleController(),u=e.getStreamInfo(),l=e.getAbrController(),c=l.getThroughputHistory(),d=u?u.id:null,p=u&&u.manifestInfo&&u.manifestInfo.isDynamic,T=e.useBufferOccupancyABR();if(r.reason=r.reason||{},!T)return r;s.setTimeToLoadDelay(0);var E=function(e){var t=e.getMediaType(),n=f[t];return n?0!==n.state&&v(n,t):(n=g(e),f[t]=n),n}(e);if(0===E.state)return r;var M=n.getCurrentBufferLevel(o,!0),b=c.getAverageThroughput(o,p),A=c.getSafeAverageThroughput(o,p),w=c.getAverageLatency(o),S=void 0;if(r.reason.state=E.state,r.reason.throughput=b,r.reason.latency=w,isNaN(b))return r;switch(E.state){case 1:S=l.getQualityForBitrate(a,A,w),r.quality=S,r.reason.throughput=A,E.placeholderBuffer=Math.max(0,_(E,S)-M),E.lastQuality=S,!isNaN(E.lastSegmentDurationS)&&M>=E.lastSegmentDurationS&&(E.state=2);break;case 2:!function(e,t){var n=Date.now();if(isNaN(e.lastSegmentFinishTimeMs)){if(!isNaN(e.lastCallTimeMs)){var r=.001*(n-e.lastCallTimeMs);e.placeholderBuffer+=Math.max(0,r)}}else{var i=.001*(n-e.lastSegmentFinishTimeMs);e.placeholderBuffer+=Math.max(0,i)}e.lastCallTimeMs=n,e.lastSegmentStart=NaN,e.lastSegmentRequestTimeMs=NaN,e.lastSegmentFinishTimeMs=NaN,v(e,t)}(E,o),S=function(e,t){for(var n=e.bitrates.length,r=NaN,i=NaN,a=0;a<n;++a){var o=(e.Vp*(e.utilities[a]+e.gp)-t)/e.bitrates[a];(isNaN(i)||o>=i)&&(i=o,r=a)}return r}(E,M+E.placeholderBuffer);var x=l.getQualityForBitrate(a,A,w);S>E.lastQuality&&S>x&&(S=Math.max(x,E.lastQuality));var D=Math.max(0,M+E.placeholderBuffer-y(E,S));D<=E.placeholderBuffer?(E.placeholderBuffer-=D,D=0):(D-=E.placeholderBuffer,E.placeholderBuffer=0,S<l.getTopQualityIndexFor(o,d)?s.setTimeToLoadDelay(1e3*D):D=0),r.quality=S,r.reason.throughput=b,r.reason.latency=w,r.reason.bufferLevel=M,r.reason.placeholderBuffer=E.placeholderBuffer,r.reason.delay=D,E.lastQuality=S;break;default:h.debug("BOLA ABR rule invoked in bad state."),r.quality=l.getQualityForBitrate(a,A,w),r.reason.state=E.state,r.reason.throughput=A,r.reason.latency=w,E.state=1,m(E)}return r},reset:function(){D(),c.off(u.default.BUFFER_EMPTY,T,d),c.off(u.default.PLAYBACK_SEEKING,E,d),c.off(u.default.PERIOD_SWITCH_STARTED,M,d),c.off(u.default.MEDIA_FRAGMENT_LOADED,b,d),c.off(u.default.METRIC_ADDED,A,d),c.off(u.default.QUALITY_CHANGE_REQUESTED,S,d),c.off(u.default.FRAGMENT_LOADING_ABANDONED,x,d)}},h=(0,l.default)(t).getInstance().getLogger(d),D(),c.on(u.default.BUFFER_EMPTY,T,d),c.on(u.default.PLAYBACK_SEEKING,E,d),c.on(u.default.PERIOD_SWITCH_STARTED,M,d),c.on(u.default.MEDIA_FRAGMENT_LOADED,b,d),c.on(u.default.METRIC_ADDED,A,d),c.on(u.default.QUALITY_CHANGE_REQUESTED,S,d),c.on(u.default.FRAGMENT_LOADING_ABANDONED,x,d),d}d.__dashjs_factory_name="BolaRule",t.default=a.default.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).abrController,n=e.switchHistory,r=e.droppedFramesHistory,i=e.currentRequest,a=e.useBufferOccupancyABR,o=e.streamProcessor?e.streamProcessor.getScheduleController():null,s=e.streamProcessor?e.streamProcessor.getRepresentationInfo():null;function u(){return s?s.mediaInfo:null}return{getMediaType:function(){var e=u();return e?e.type:null},getMediaInfo:u,getDroppedFramesHistory:function(){return r},getCurrentRequest:function(){return i},getSwitchHistory:function(){return n},getStreamInfo:function(){var e=u();return e?e.streamInfo:null},getScheduleController:function(){return o},getAbrController:function(){return t},getRepresentationInfo:function(){return s},useBufferOccupancyABR:function(){return a}}}o.__dashjs_factory_name="RulesContext",t.default=a.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(16));function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=[],t=[];return{push:function(n){n.newValue===i.default.NO_CHANGE&&(n.newValue=n.oldValue),e[n.oldValue]||(e[n.oldValue]={noDrops:0,drops:0,dropSize:0});var r=n.newValue-n.oldValue,a=r<0?1:0,o=a?-r:0,s=a?0:1;if(e[n.oldValue].drops+=a,e[n.oldValue].dropSize+=o,e[n.oldValue].noDrops+=s,t.push({idx:n.oldValue,noDrop:s,drop:a,dropSize:o}),t.length>8){var u=t.shift();e[u.idx].drops-=u.drop,e[u.idx].dropSize-=u.dropSize,e[u.idx].noDrops-=u.noDrop}},getSwitchRequests:function(){return e},reset:function(){e=[],t=[]}}}o.__dashjs_factory_name="SwitchRequestHistory";var s=r.default.getClassFactory(o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e=[],t=0,n=0;return{push:function(r,i){var a=i&&i.droppedVideoFrames?i.droppedVideoFrames:0,o=i&&i.totalVideoFrames?i.totalVideoFrames:0,s=a-t;t=a;var u=o-n;n=o,isNaN(r)||(e[r]?(e[r].droppedVideoFrames+=s,e[r].totalVideoFrames+=u):e[r]={droppedVideoFrames:s,totalVideoFrames:u})},getFrameHistory:function(){return e},reset:function(r){e=[],t=r.droppedVideoFrames,n=r.totalVideoFrames}}}o.__dashjs_factory_name="DroppedFramesHistory";var s=a.default.getClassFactory(o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(4)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(e=e||{}).settings,n=void 0,i=void 0,a=void 0,o=void 0,s=void 0;function u(e,t,n,r){var i=Math.pow(.5,n/r.fast);e.fastEstimate=(1-i)*t+i*e.fastEstimate;var a=Math.pow(.5,n/r.slow);e.slowEstimate=(1-a)*t+a*e.slowEstimate,e.totalWeight+=n}function l(e,u,l){return t.get().streaming.abr.movingAverageMethod!==r.default.MOVING_AVERAGE_SLIDING_WINDOW?function(e,t){var n=e?s.throughputHalfLife:s.latencyHalfLife,r=e?a[t]:o[t];if(!r||r.totalWeight<=0)return NaN;var i=r.fastEstimate/(1-Math.pow(.5,r.totalWeight/n.fast)),u=r.slowEstimate/(1-Math.pow(.5,r.totalWeight/n.slow));return e?Math.min(i,u):Math.max(i,u)}(e,u):function(e,t,r){var a=function(e,t,r){var a=void 0,o=void 0;if(e?(a=n[t],o=r?3:4):(a=i[t],o=4),a){if(o>=a.length)o=a.length;else if(e)for(var s=1;s<o;++s){var u=a[s]/a[s-1];if((u>=1.3||u<=1/1.3)&&(o+=1)===a.length)break}}else o=0;return o}(e,t,r),o=(e?n:i)[t];if(0===a||!o||0===o.length)return NaN;return(o=o.slice(-a)).reduce((function(e,t){return e+t}))/o.length}(e,u,l)}function c(e,t){return l(!0,e,t)}function d(e){n[e]=n[e]||[],i[e]=i[e]||[],a[e]=a[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0},o[e]=o[e]||{fastEstimate:0,slowEstimate:0,totalWeight:0}}function h(){n={},i={},a={},o={}}var f={push:function(e,l,c){if(l.trace&&l.trace.length){var h=l.tresponse.getTime()-l.trequest.getTime()||1,f=l._tfinish.getTime()-l.tresponse.getTime()||1,p=l.trace.reduce((function(e,t){return e+t.b[0]}),0),g=void 0;g=t.get().streaming.lowLatencyEnabled?l.trace.reduce((function(e,t){return e+t.d}),0):c?f:h+f;var m=Math.round(8*p/g);if(d(e),function(e,n,i){return e===r.default.VIDEO?i<t.get().streaming.cacheLoadThresholds[r.default.VIDEO]:e===r.default.AUDIO?i<t.get().streaming.cacheLoadThresholds[r.default.AUDIO]:void 0}(e,0,f)){if(n[e].length>0&&!n[e].hasCachedEntries)return;n[e].hasCachedEntries=!0}else n[e]&&n[e].hasCachedEntries&&function(e){delete n[e],delete i[e],delete a[e],delete o[e],d(e)}(e);n[e].push(m),n[e].length>20&&n[e].shift(),i[e].push(h),i[e].length>20&&i[e].shift(),u(a[e],m,.001*f,s.throughputHalfLife),u(o[e],h,1,s.latencyHalfLife)}},getAverageThroughput:c,getSafeAverageThroughput:function(e,n){var r=c(e,n);return isNaN(r)||(r*=t.get().streaming.abr.bandwidthSafetyFactor),r},getAverageLatency:function(e){return l(!1,e)},reset:h};return s={throughputHalfLife:{fast:3,slow:8},latencyHalfLife:{fast:1,slow:2}},h(),f}o.__dashjs_factory_name="ThroughputHistory",t.default=i.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(4)),i=s(n(1)),a=s(n(77)),o=s(n(166));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){e=e||{};var t,n=this.context,i=void 0;function s(){return i.getBuffer()}return t={getBufferControllerType:function(){return i.getBufferControllerType()},initialize:function(e,t){return i.initialize(e,t)},createBuffer:function(e){return i.createBuffer(e)},getType:function(){return i.getType()},getStreamProcessor:function(){i.getStreamProcessor()},setSeekStartTime:function(e){i.setSeekStartTime(e)},getBuffer:s,setBuffer:function(e){i.setBuffer(e)},getBufferLevel:function(){return i.getBufferLevel()},setMediaSource:function(e){i.setMediaSource(e)},getMediaSource:function(){return i.getMediaSource()},getIsBufferingCompleted:function(){return i.getIsBufferingCompleted()},getIsPruningInProgress:function(){return i.getIsPruningInProgress()},dischargePreBuffer:function(){return i.dischargePreBuffer()},switchInitData:function(e,t){i.switchInitData(e,t)},getRangeAt:function(e){return i.getRangeAt(e)},reset:function(e){i.reset(e)},updateTimestampOffset:function(e){var t=s();t.timestampOffset===e||isNaN(e)||(t.timestampOffset=e)}},i=e.type===r.default.FRAGMENTED_TEXT?(0,a.default)(n).create({type:e.type,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,manifestModel:e.manifestModel,errHandler:e.errHandler,streamController:e.streamController,mediaController:e.mediaController,adapter:e.adapter,textController:e.textController,abrController:e.abrController,playbackController:e.playbackController,streamProcessor:e.streamProcessor,settings:e.settings}):(0,o.default)(n).create({type:e.type,mimeType:e.mimeType,errHandler:e.errHandler,streamProcessor:e.streamProcessor}),t}u.__dashjs_factory_name="TextBufferController",t.default=i.default.getClassFactory(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(4)),i=h(n(5)),a=h(n(7)),o=h(n(1)),s=h(n(57)),u=h(n(78)),l=h(n(47)),c=h(n(8)),d=h(n(9));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){e=e||{};var t=this.context,n=(0,i.default)(t).getInstance(),o=(0,l.default)(t).getInstance(),h=e.errHandler,f=e.type,p=e.mimeType,g=e.streamProcessor,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0;function M(e){_=e}function b(e){if(e.sender.getType()===g.getType()&&!e.error){var t=e.sender.getStreamId(),r=e.sender.getCurrentRepresentation();E.extract(t,r?r.id:null)||n.trigger(a.default.TIMED_TEXT_REQUESTED,{index:0,sender:e.sender})}}function A(e){e.fragmentModel===g.getFragmentModel()&&e.chunk.bytes&&(E.save(e.chunk),T.append(e.chunk),n.trigger(a.default.STREAM_COMPLETED,{request:e.request,fragmentModel:e.fragmentModel}))}return m={getBufferControllerType:function(){return"NotFragmentedTextBufferController"},initialize:function(e){M(e),E=(0,s.default)(t).getInstance()},createBuffer:function(e){try{if(T=(0,u.default)(t).create(_,e),!y){var n=T.getBuffer();n.hasOwnProperty(r.default.INITIALIZE)&&n.initialize(p,g),y=!0}return T}catch(t){if(e&&(e.isText||-1!==e.codec.indexOf('codecs="stpp')||-1!==e.codec.indexOf('codecs="wvtt')))try{T=o.getTextSourceBuffer()}catch(e){h.error(new c.default(d.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,d.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+f+" : "+e.message))}else h.error(new c.default(d.default.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,d.default.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+f))}},getType:function(){return f},getStreamProcessor:function(){return g},setSeekStartTime:function(){},getBuffer:function(){return T},getBufferLevel:function(){return 0},setMediaSource:M,getMediaSource:function(){return _},getIsBufferingCompleted:function(){return v},getIsPruningInProgress:function(){return!1},dischargePreBuffer:function(){},switchInitData:function(e,t){E.extract(e,t)||n.trigger(a.default.TIMED_TEXT_REQUESTED,{index:0,sender:m})},getRangeAt:function(){return null},reset:function(e){n.off(a.default.DATA_UPDATE_COMPLETED,b,m),n.off(a.default.INIT_FRAGMENT_LOADED,A,m),!e&&T&&(T.abort(),T.reset(),T=null)},updateTimestampOffset:function(e){T.timestampOffset===e||isNaN(e)||(T.timestampOffset=e)}},y=!1,_=null,v=!1,n.on(a.default.DATA_UPDATE_COMPLETED,b,m),n.on(a.default.INIT_FRAGMENT_LOADED,A,m),m}f.__dashjs_factory_name="NotFragmentedTextBufferController",t.default=o.default.getClassFactory(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(4)),i=g(n(14)),a=n(58),o=g(n(168)),s=g(n(169)),u=g(n(33)),l=g(n(5)),c=g(n(7)),d=g(n(1)),h=g(n(6)),f=g(n(56)),p=g(n(170));function g(e){return e&&e.__esModule?e:{default:e}}function m(e){e=e||{};var t=this.context,n=(0,l.default)(t).getInstance(),d=e.adapter,g=e.dashMetrics,m=e.timelineConverter,v=e.mediaPlayerModel,y=e.abrController,_=e.playbackController,T=e.streamController,E=e.textController,M=e.type,b=e.streamProcessor,A=e.mediaController,w=e.settings,S=void 0,x=void 0,D=void 0,I=void 0,C=void 0,N=void 0,L=void 0,O=void 0,R=void 0,j=void 0,P=void 0,k=void 0,U=void 0,B=void 0,F=void 0,z=void 0,G=void 0,H=void 0,Y=void 0,V=void 0,Q=void 0;function q(){I&&!b.isBufferingCompleted()?(x.debug("Schedule Controller starts"),Me(),N=!1,C&&(C=!1),K(0)):x.warn("Start denied to Schedule Controller")}function W(){N||(x.debug("Schedule Controller stops"),N=!0,clearTimeout(R))}function X(){var e=b.getBufferController();if(N||L||!e||_.isPaused()&&!w.get().streaming.scheduleWhilePaused||!(M!==r.default.FRAGMENTED_TEXT&&M!==r.default.TEXT||E.isTextEnabled()))x.debug("Schedule stop!");else if(e.getIsBufferingCompleted())x.debug("Schedule stop because buffering is completed!");else{!function(){var e=_.getTime(),t=1.5;if(isNaN(I.fragmentDuration)){var n=g.getLatestBufferInfoVO(I.mediaInfo.type,!0,i.default.SCHEDULING_INFO);t=n?1.5*n.duration:1.5}var r=D.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:e+t,threshold:0})[0];if(r&&-1===z.indexOf(r)&&!d.getIsTextTrack(M)){var a=w.get().streaming.fastSwitchEnabled,o=b.getBufferLevel(),s=y.getAbandonmentStateFor(M),l=!A.isCurrentTrack(r.mediaInfo)&&A.getSwitchMode(r.mediaInfo.type)===f.default.TRACK_SWITCH_MODE_NEVER_REPLACE,c=r.quality<I.quality;a&&(l||c)&&o>=t&&s!==i.default.ABANDON_LOAD?(ee(r),Q=!0,x.debug("Reloading outdated fragment at index: ",r.index)):r.quality>I.quality&&!H&&_e(_.getTime()+o)}}();var t=z.length>0,n=b.getStreamInfo();if(H||isNaN(F)||G||t||function(e,t){B[t]=B[t]||{};var n=y.getTopQualityIndexFor(e,t);return B[t][e]!=n&&(x.info("Top quality "+e+" index has changed from "+B[t][e]+" to "+n),B[t][e]=n,!0)}(I.mediaInfo.type,n.id)||P.execute(b,T.isTrackTypePresent(r.default.VIDEO))){J(!0),t||G||y.checkPlaybackQuality(M),function(){if(I.quality===F&&!G||H){var e=z.shift();if(e&&e.isInitializationRequest())b.switchInitData(e.representationId);else{var t=void 0;b.getBufferController().getIsPruningInProgress()||(t=k.execute(b,j,e),_e(NaN),t&&!e&&(isNaN(t.startTime+t.duration)||b.setIndexHandlerTime(t.startTime+t.duration),t.delayLoadingTime=(new Date).getTime()+O,Te(0)),!t&&n.manifestInfo&&n.manifestInfo.isDynamic&&x.debug("Next fragment seems to be at the bleeding live edge and is not available yet. Rescheduling.")),t?(x.debug("Next fragment request url is "+t.url),D.executeRequest(t)):(J(!1),K(w.get().streaming.lowLatencyEnabled?100:500))}}else x.debug("Quality has changed, get init request for representationid = "+I.id),G?(H=A.getSwitchMode(M)===f.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,x.debug("Switch track has been asked, get init request for "+M+" with representationid = "+I.id+"bufferResetInProgress = "+H),b.switchInitData(I.id,H),G=!1):b.switchInitData(I.id),F=I.quality}()}else K(500)}}function K(e){clearTimeout(R),R=setTimeout(X,e)}function Z(e){e.sender&&e.sender.getStreamProcessor()===b&&$(I.quality)}function J(e){L!==e?L=e:x.debug("isFragmentProcessingInProgress is already equal to",e)}function $(e){var t=b.getInitRequest(e);t&&(J(!0),D.executeRequest(t))}function ee(e){z.push(e)}function te(e){if(M===e.mediaType&&b.getStreamInfo().id===e.streamInfo.id){if(null==(I=b.getRepresentationInfo(e.newQuality)))throw new Error("Unexpected error! - currentRepresentationInfo is null or undefined");Ee(new Date,a.PlayListTrace.REPRESENTATION_SWITCH_STOP_REASON),Me()}}function ne(e){if(_&&D){var t=D.getRequests({state:u.default.FRAGMENT_MODEL_EXECUTED,time:_.getTime(),threshold:0})[0];t&&_.getTime()>=t.startTime&&((!U.mediaInfo||t.mediaInfo.type===U.mediaInfo.type&&t.mediaInfo.id!==U.mediaInfo.id)&&e&&n.trigger(c.default.TRACK_CHANGE_RENDERED,{mediaType:M,oldMediaInfo:U.mediaInfo,newMediaInfo:t.mediaInfo}),t.quality===U.quality&&t.adaptationIndex===U.adaptationIndex||!e||n.trigger(c.default.QUALITY_CHANGE_RENDERED,{mediaType:M,oldQuality:U.quality,newQuality:t.quality}),U={mediaInfo:t.mediaInfo,quality:t.quality,adaptationIndex:t.adaptationIndex})}}function re(e){e.error||e.sender.getType()!==b.getType()||(I=d.convertDataToRepresentationInfo(e.currentRepresentation))}function ie(e){e.streamInfo&&b.getStreamInfo().id===e.streamInfo.id&&(I=b.getRepresentationInfo(),C&&(_.getIsDynamic()?(m.setTimeSyncCompleted(!0),function(){if(V){var e=V.getLiveEdge(b.getRepresentationInfo()),t=e-_.computeLiveDelay(I.fragmentDuration,I.mediaInfo.streamInfo.manifestInfo.DVRWindowSize),n=b.getFragmentRequest(I,t,{ignoreIsFinished:!0});if(n)if(w.get().streaming.lowLatencyEnabled){var r=n.duration<v.getLiveDelay()?n.startTime:n.startTime+n.duration-v.getLiveDelay();_.setLiveStartTime(r)}else _.setLiveStartTime(n.startTime);else x.debug("setLiveEdgeSeekTarget : getFragmentRequest returned undefined request object");_e(_.getStreamStartTime(!1,e)),b.getBufferController().setSeekStartTime(j),j>I.mediaInfo.streamInfo.start+I.mediaInfo.streamInfo.duration&&_.seek(j),g.updateManifestUpdateInfo({currentTime:j,presentationStartTime:e,latency:e-j,clientTimeOffset:m.getClientTimeOffset()})}}()):(_e(_.getStreamStartTime(!1)),b.getBufferController().setSeekStartTime(j))),N&&q())}function ae(e){e.fragmentModel===D&&(W(),J(!1),x.info("Stream is complete"))}function oe(e){e.sender===D&&(x.info("OnFragmentLoadingCompleted - Url:",e.request?e.request.url:"undefined",", Range:",e.request.range?e.request.range:"undefined"),d.getIsTextTrack(M)&&J(!1),e.error&&e.request.serviceLocation&&!N&&(ee(e.request),J(!1),K(0)),H&&(Y=e.request))}function se(){ne(!0)}function ue(e){if(e.sender.getStreamProcessor()===b)if(H&&!isNaN(e.startTime)&&(H=!1,D.addExecutedRequest(Y)),J(!1),Q&&!isNaN(e.startTime)){var t=_.getTime(),n=e.startTime+I.fragmentDuration,r=1.5*I.fragmentDuration;K(t+r>=n?0:1e3*(n-(t+r))),Q=!1}else K(0)}function le(e){e.streamProcessor===b&&(x.info("onFragmentLoadingAbandoned request: "+e.request.url+" has been aborted"),_.isSeeking()||G||(x.info("onFragmentLoadingAbandoned request: "+e.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),ee(e.request)),J(!1),K(0))}function ce(e){e.sender.getType()===b.getType()&&e.sender.getStreamId()===b.getStreamInfo().id&&W()}function de(e){if(e.sender.getStreamProcessor()===b){var t=b.getStreamInfo();t&&(e.unintended?D.removeExecutedRequestsAfterTime(e.from):D.syncExecutedRequestsWithBufferedRange(b.getBufferController().getBuffer().getAllBufferRanges(),t.duration)),e.hasEnoughSpaceToAppend&&N&&q()}}function he(e){e.sender.getStreamProcessor()!==b||e.state!==i.default.BUFFER_EMPTY||_.isSeeking()||(x.info("Buffer is empty! Stalling!"),Ee(new Date,a.PlayListTrace.REBUFFERING_REASON))}function fe(e){e.sender.getStreamProcessor()===b&&(W(),J(!1))}function pe(){D.abortRequests(),W()}function ge(e){var t=b.getStreamInfo(),n=t?t.id:null;e.sender.getStreamId()===n&&E.isTextEnabled()&&$(e.index)}function me(){!N&&w.get().streaming.scheduleWhilePaused||q()}function ve(e){_e(e.seekTime),Te(0),N&&q();var t=I.DVRWindow&&_?I.DVRWindow.end-_.getTime():NaN;g.updateManifestUpdateInfo({latency:t}),L?(x.debug("onPlaybackSeeking, call fragmentModel.abortRequests in order to seek quicker"),D.abortRequests()):K(0)}function ye(e){g.updatePlayListTraceMetrics({playbackspeed:e.playbackRate.toString()})}function _e(e){j=e}function Te(e){O=e}function Ee(e,t){g.pushPlayListTraceMetrics(e,t)}function Me(){if(I){var e=_.getPlaybackRate();g.createPlaylistTraceMetrics(I.id,1e3*_.getTime(),null!==e?e.toString():null)}}function be(){L=!1,O=0,j=NaN,C=!0,F=NaN,U={mediaInfo:void 0,quality:NaN,adaptationIndex:NaN},B={},z=[],N=!0,G=!1,H=!1,Y=null,Q=!1}return S={initialize:function(){D=b.getFragmentModel(),P=(0,o.default)(t).create({abrController:y,dashMetrics:g,mediaPlayerModel:v,textController:E,settings:w}),k=(0,s.default)(t).create({textController:E,playbackController:_}),d.getIsTextTrack(e.mimeType)&&n.on(c.default.TIMED_TEXT_REQUESTED,ge,this),n.on(c.default.QUALITY_CHANGE_REQUESTED,te,this),n.on(c.default.DATA_UPDATE_STARTED,ce,this),n.on(c.default.DATA_UPDATE_COMPLETED,re,this),n.on(c.default.FRAGMENT_LOADING_COMPLETED,oe,this),n.on(c.default.STREAM_COMPLETED,ae,this),n.on(c.default.STREAM_INITIALIZED,ie,this),n.on(c.default.BUFFER_LEVEL_STATE_CHANGED,he,this),n.on(c.default.BUFFER_CLEARED,de,this),n.on(c.default.BYTES_APPENDED_END_FRAGMENT,ue,this),n.on(c.default.INIT_REQUESTED,Z,this),n.on(c.default.QUOTA_EXCEEDED,fe,this),n.on(c.default.PLAYBACK_SEEKING,ve,this),n.on(c.default.PLAYBACK_STARTED,me,this),n.on(c.default.PLAYBACK_RATE_CHANGED,ye,this),n.on(c.default.PLAYBACK_TIME_UPDATED,se,this),n.on(c.default.URL_RESOLUTION_FAILED,pe,this),n.on(c.default.FRAGMENT_LOADING_ABANDONED,le,this)},getType:function(){return M},setSeekTarget:_e,setTimeToLoadDelay:Te,replaceRequest:ee,switchTrackAsked:function(){G=!0},isStarted:function(){return!1===N},start:q,stop:W,reset:function(){n.off(c.default.DATA_UPDATE_STARTED,ce,this),n.off(c.default.DATA_UPDATE_COMPLETED,re,this),n.off(c.default.BUFFER_LEVEL_STATE_CHANGED,he,this),n.off(c.default.QUALITY_CHANGE_REQUESTED,te,this),n.off(c.default.FRAGMENT_LOADING_COMPLETED,oe,this),n.off(c.default.STREAM_COMPLETED,ae,this),n.off(c.default.STREAM_INITIALIZED,ie,this),n.off(c.default.QUOTA_EXCEEDED,fe,this),n.off(c.default.BYTES_APPENDED_END_FRAGMENT,ue,this),n.off(c.default.BUFFER_CLEARED,de,this),n.off(c.default.INIT_REQUESTED,Z,this),n.off(c.default.PLAYBACK_RATE_CHANGED,ye,this),n.off(c.default.PLAYBACK_SEEKING,ve,this),n.off(c.default.PLAYBACK_STARTED,me,this),n.off(c.default.PLAYBACK_TIME_UPDATED,se,this),n.off(c.default.URL_RESOLUTION_FAILED,pe,this),n.off(c.default.FRAGMENT_LOADING_ABANDONED,le,this),d.getIsTextTrack(M)&&n.off(c.default.TIMED_TEXT_REQUESTED,ge,this),W(),ne(!1),be(),V&&(V.reset(),V=null)},getBufferTarget:function(){return P.getBufferTarget(b,T.isTrackTypePresent(r.default.VIDEO))},finalisePlayList:function(e,t){Ee(e,t)}},x=(0,h.default)(t).getInstance().getLogger(S),_&&_.getIsDynamic()&&(V=(0,p.default)(t).create({timelineConverter:m})),be(),S}m.__dashjs_factory_name="ScheduleController",t.default=d.default.getClassFactory(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(4)),i=o(n(1)),a=o(n(14));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=(e=e||{}).dashMetrics,n=e.mediaPlayerModel,i=e.textController,o=e.abrController,s=e.settings;function u(e,u){var l=NaN;if(!e)return l;var c=e.getType(),d=e.getRepresentationInfo();if(c===r.default.FRAGMENTED_TEXT)if(i.isTextEnabled())if(isNaN(d.fragmentDuration)){var h=t.getLatestBufferInfoVO(r.default.FRAGMENTED_TEXT,!0,a.default.SCHEDULING_INFO);l=h?h.duration:0}else l=d.fragmentDuration;else l=0;else if(c===r.default.AUDIO&&u){var f=t.getCurrentBufferLevel(r.default.VIDEO,!0);l=isNaN(d.fragmentDuration)?f:Math.max(f,d.fragmentDuration)}else{var p=d.mediaInfo.streamInfo;if(o.isPlayingAtTopQuality(p))l=p.manifestInfo.duration>=s.get().streaming.longFormContentDurationThreshold?s.get().streaming.bufferTimeAtTopQualityLongForm:s.get().streaming.bufferTimeAtTopQuality;else l=n.getStableBufferTime()}return l}return{execute:function(e,n){return!e||t.getCurrentBufferLevel(e.getType(),!0)<u(e,n)},getBufferTarget:u}}s.__dashjs_factory_name="BufferLevelRule",t.default=i.default.getClassFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(4)),i=s(n(6)),a=s(n(1)),o=s(n(19));function s(e){return e&&e.__esModule?e:{default:e}}function u(e){e=e||{};var t=this.context,n=e.textController,a=e.playbackController,s=void 0;return s={execute:function(e,t,i){if(!e)return null;var s=e.getRepresentationInfo(),u=e.getType(),l=!isNaN(t),c=e.getBufferController(),d=a.getNormalizedTime(),h=l?t:e.getIndexHandlerTime(),f=!1,p=void 0;if(isNaN(h)||u===r.default.FRAGMENTED_TEXT&&!n.isTextEnabled())return null;if(c){var g=c.getRangeAt(h),m=c.getRangeAt(d),v=c.getBuffer().hasDiscontinuitiesAfter(d);null===g&&null===m||l||(!g||m&&m.start!=g.start&&m.end!=g.end)&&(v&&u!==r.default.FRAGMENTED_TEXT&&(e.getFragmentModel().removeExecutedRequestsAfterTime(m.end),f=!0),g=m)}if(i)h=i.startTime+i.duration/2,p=e.getFragmentRequest(s,h,{timeThreshold:0,ignoreIsFinished:!0});else for(p=e.getFragmentRequest(s,l||f?h:void 0,{keepIdx:!l&&!f});p&&p.action!==o.default.ACTION_COMPLETE&&e.getFragmentModel().isFragmentLoaded(p);)p=e.getFragmentRequest(s);return p}},(0,i.default)(t).getInstance().getLogger(s),s}u.__dashjs_factory_name="NextFragmentRequestRule",t.default=a.default.getClassFactory(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(e=e||{}).timelineConverter;return{getLiveEdge:function(e){!function(){if(!t||!t.hasOwnProperty("getExpectedLiveEdge"))throw new Error(i.default.MISSING_CONFIG_ERROR)}();var n=e.DVRWindow?e.DVRWindow.end:0,r=n;return e.useCalculatedLiveEdgeTime&&(r=t.getExpectedLiveEdge(),t.setClientTimeOffset(r-n)),r},reset:function(){t=null}}}o.__dashjs_factory_name="LiveEdgeFinder",t.default=r.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(4)),i=c(n(9)),a=c(n(15)),o=c(n(8)),s=c(n(5)),u=c(n(7)),l=c(n(1));function c(e){return e&&e.__esModule?e:{default:e}}function d(){var e=this.context,t=(0,s.default)(e).getInstance(),n=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0;function T(){if(!(f&&m&&p&&g&&_))throw new Error(r.default.MISSING_CONFIG_ERROR)}function E(){return c}function M(){return h}function b(){l=null,c=!0,d=[],f=null,p=null,g=null,m=null}function A(){return v}function w(){T();var e=new Date,t=M(),n=1e3*p.getTime();t&&m.addRepresentationSwitch(t.adaptation.type,e,n,t.id)}function S(e){return null==e||e>=d.length?null:d[e]}function x(e,t){var n;(e.segmentAvailabilityRange=g.calcSegmentAvailabilityRange(e,t),e.segmentAvailabilityRange.end<e.segmentAvailabilityRange.start&&!e.useCalculatedLiveEdgeTime)?C(new o.default(i.default.SEGMENTS_UNAVAILABLE_ERROR_CODE,i.default.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE,{availabilityDelay:e.segmentAvailabilityRange.start-e.segmentAvailabilityRange.end})):t&&(n=e.segmentAvailabilityRange.end,g.setExpectedLiveEdge(n),m.updateManifestUpdateInfo({presentationStartTime:n}))}function D(e,r){T();for(var i=0,a=d.length;i<a;i++)x(d[i],e),r&&t.trigger(u.default.REPRESENTATION_UPDATE_STARTED,{sender:n,representation:d[i]})}function I(){c=!0,t.trigger(u.default.DATA_UPDATE_STARTED,{sender:n})}function C(e){c=!1;var r={sender:n,data:l,currentRepresentation:h};e&&(r.error=e),t.trigger(u.default.DATA_UPDATE_COMPLETED,r)}function N(e){var n=e;t.trigger(u.default.AST_IN_FUTURE,{delay:n}),setTimeout((function(){E()||(I(),d.forEach((function(e){e.segmentAvailabilityRange=null})),D(p.getIsDynamic(),!0))}),n)}function L(e){if(e.sender.getType()===A()&&e.sender.getStreamInfo().id===y&&E())if(e.error)C(e.error);else{var t,n=e.sender.getStreamInfo(),r=e.representation,s=m.getCurrentManifestUpdate(),u=!1,l=0,c=void 0;if(r.adaptation.period.mpd.manifest.type===a.default.DYNAMIC&&!r.adaptation.period.mpd.manifest.ignorePostponeTimePeriod){var g=r.segmentAvailabilityRange.end-r.segmentAvailabilityRange.start;l=1e3*(p.computeLiveDelay(h.segmentDuration,n.manifestInfo.DVRWindowSize)-g)}if(l>0)return N(l),void C(new o.default(i.default.SEGMENTS_UPDATE_FAILED_ERROR_CODE,i.default.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE));if(s){for(var v=0;v<s.representationInfo.length;v++)if((c=s.representationInfo[v]).index===r.index&&c.mediaType===A()){u=!0;break}u||m.addManifestUpdateRepresentationInfo(r,A())}(function(){for(var e=0,t=d.length;e<t;e++){var n=d[e].segmentInfoType;if(null===d[e].segmentAvailabilityRange||!d[e].hasInitialization()||(n===a.default.SEGMENT_BASE||n===a.default.BASE_URL)&&!d[e].segments)return!1}return!0})()&&(f.setPlaybackQuality(A(),n,(t=h,d.indexOf(t))),m.updateManifestUpdateInfo({latency:h.segmentAvailabilityRange.end-p.getTime()}),m.getCurrentRepresentationSwitch(M().adaptation.type)||w(),C())}}function O(e){e.isDynamic&&D(e.isDynamic)}function R(e){e.mediaType===A()&&y===e.streamInfo.id&&(h=S(e.newQuality),w())}function j(e){if(e.newDuration){var t=M();if(t&&t.adaptation.period)t.adaptation.period.duration=e.newDuration}}return n={setConfig:function(e){e.abrController&&(f=e.abrController),e.dashMetrics&&(m=e.dashMetrics),e.playbackController&&(p=e.playbackController),e.timelineConverter&&(g=e.timelineConverter),e.manifestModel&&(_=e.manifestModel),e.type&&(v=e.type),e.streamId&&(y=e.streamId)},getData:function(){return l},isUpdating:E,updateData:function(e,t,n,i){T(),I(),d=t,h=S(i),l=e,n===r.default.VIDEO||n===r.default.AUDIO||n===r.default.FRAGMENTED_TEXT?D(p.getIsDynamic(),!0):C()},updateRepresentation:x,getCurrentRepresentation:M,getRepresentationForQuality:S,getType:A,getStreamId:function(){return y},reset:function(){t.off(u.default.QUALITY_CHANGE_REQUESTED,R,n),t.off(u.default.REPRESENTATION_UPDATE_COMPLETED,L,n),t.off(u.default.WALLCLOCK_TIME_UPDATED,O,n),t.off(u.default.MANIFEST_VALIDITY_CHANGED,j,n),b()}},b(),t.on(u.default.QUALITY_CHANGE_REQUESTED,R,n),t.on(u.default.REPRESENTATION_UPDATE_COMPLETED,L,n),t.on(u.default.WALLCLOCK_TIME_UPDATED,O,n),t.on(u.default.MANIFEST_VALIDITY_CHANGED,j,n),n}d.__dashjs_factory_name="RepresentationController",t.default=l.default.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(15)),i=d(n(1)),a=d(n(173)),o=d(n(174)),s=d(n(175)),u=d(n(176)),l=d(n(91)),c=d(n(178));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){e=e||{};var t,n,i=this.context,d=e.dashMetrics,h=e.mediaPlayerModel,f=e.errHandler,p=e.baseURLController,g=void 0,m=void 0;function v(e){return e?e.segments?g[r.default.SEGMENT_BASE]:g[e.segmentInfoType]:null}return t={initialize:function(t){m.initialize(),g[r.default.SEGMENT_TIMELINE]=(0,a.default)(i).create(e,t),g[r.default.SEGMENT_TEMPLATE]=(0,o.default)(i).create(e,t),g[r.default.SEGMENT_LIST]=(0,s.default)(i).create(e,t),g[r.default.SEGMENT_BASE]=(0,u.default)(i).create(e,t)},update:function(e,t,n,r){n||function(e){m.loadInitialization(e)}(e),r||function(e,t){m.loadSegments(e,t,e?e.indexRange:null)}(e,t)},getSegmentByIndex:function(e,t,n){var r=v(e);return r?r.getSegmentByIndex(e,t,n):null},getSegmentByTime:function(e,t){var n=v(e);return n?n.getSegmentByTime(e,t):null}},g={},n=e.mimeType,(m="webm"===(n?n.split("/")[1]:"").toLowerCase()?(0,c.default)(i).getInstance():(0,l.default)(i).getInstance()).setConfig({baseURLController:p,dashMetrics:d,mediaPlayerModel:h,errHandler:f}),t}h.__dashjs_factory_name="SegmentsController";var f=i.default.getClassFactory(h);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(4)),a=n(24);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcMediaTimeFromPresentationTime")||!n.hasOwnProperty("calcSegmentAvailabilityRange"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(e,r){var i,a,o,s=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate||e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,u=s.SegmentTimeline,l=s.SegmentURL_asArray,c=0,d=0,h=-1,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0;o=e.timescale;var _=!1;for(p=0,a=(i=u.S_asArray).length;p<a&&!_;p++){if(m=0,(f=i[p]).hasOwnProperty("r")&&(m=f.r),f.hasOwnProperty("t")&&(d=(c=f.t)/o),m<0){if((y=i[p+1])&&y.hasOwnProperty("t"))v=y.t/o;else{var T=e.segmentAvailabilityRange?e.segmentAvailabilityRange.end:n.calcSegmentAvailabilityRange(e,t).end;v=n.calcMediaTimeFromPresentationTime(T,e),e.segmentDuration=f.d/o}m=Math.ceil((v-d)/(f.d/o))-1}for(g=0;g<=m&&!_;g++)(_=r(c,d,s,l,f,o,++h,p))&&(e.segmentDuration=f.d/o,(g<m-1||p<a-1)&&h++),d=(c+=f.d)/o}e.availableSegmentsNumber=h}return{getSegmentByIndex:function(e,i,s){if(r(),!e)return null;var u=null,l=!1;return o(e,(function(r,i,o,c,d,h,f,p){if(l||s<0){var g=o.media,m=d.mediaRange;return c&&(g=c[p].media||"",m=c[p].mediaRange),u=(0,a.getTimeBasedSegment)(n,t,e,r,d.d,h,g,m,f,d.tManifest),!0}return i>=s-.5*d.d/h&&(l=!0),!1})),u},getSegmentByTime:function(e,i){if(r(),!e)return null;void 0===i&&(i=null);var s=null,u=n.calcMediaTimeFromPresentationTime(i,e);return o(e,(function(r,i,o,l,c,d,h,f){if(i>=u-c.d/d*1.5){var p=o.media,g=c.mediaRange;return l&&(p=l[f].media||"",g=l[f].mediaRange),s=(0,a.getTimeBasedSegment)(n,t,e,r,c.d,d,p,g,h,c.tManifest),!0}return!1})),s}}}s.__dashjs_factory_name="TimelineSegmentsGetter";var u=r.default.getClassFactory(s);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(4)),a=n(24);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(e,i){if(r(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentTemplate;i=Math.max(i,0);var s=(0,a.getIndexBasedSegment)(n,t,e,i);if(s){s.replacementTime=(i-1)*e.segmentDuration;var u=o.media;u=(0,a.replaceTokenForTemplate)(u,"Number",s.replacementNumber),u=(0,a.replaceTokenForTemplate)(u,"Time",s.replacementTime),s.media=u}var l=e.segmentDuration,c=e.segmentAvailabilityRange;return isNaN(l)?e.availableSegmentsNumber=1:e.availableSegmentsNumber=Math.ceil((c.end-c.start)/l),s}return{getSegmentByIndex:o,getSegmentByTime:function(e,t){if(r(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return o(e,Math.floor(a/i))}}}s.__dashjs_factory_name="TemplateSegmentsGetter";var u=r.default.getClassFactory(s);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(4)),a=n(24);function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n=(e=e||{}).timelineConverter;function r(){if(!n||!n.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function o(e,i){if(r(),!e)return null;var o=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index].Representation_asArray[e.index].SegmentList,s=o.SegmentURL_asArray.length,u=e.startNumber,l=null;if(i<s){var c=o.SegmentURL_asArray[i];(l=(0,a.getIndexBasedSegment)(n,t,e,i)).replacementTime=(u+i-1)*e.segmentDuration,l.media=c.media?c.media:"",l.mediaRange=c.mediaRange,l.index=i,l.indexRange=c.indexRange}return e.availableSegmentsNumber=s,l}return{getSegmentByIndex:o,getSegmentByTime:function(e,t){if(r(),!e)return null;var i=e.segmentDuration;if(isNaN(i))return null;var a=n.calcPeriodRelativeTimeFromMpdRelativeTime(e,t);return o(e,Math.floor(a/i))}}}s.__dashjs_factory_name="ListSegmentsGetter";var u=r.default.getClassFactory(s);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=(e=e||{}).timelineConverter;function n(){if(!t||!t.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(i.default.MISSING_CONFIG_ERROR)}function r(e,t){if(n(),!e)return null;var r=e.segments?e.segments.length:-1,i=void 0;if(t<r&&(i=e.segments[t])&&i.availabilityIdx===t)return i;for(var a=0;a<r;a++)if((i=e.segments[a])&&i.availabilityIdx===t)return i;return null}return{getSegmentByIndex:r,getSegmentByTime:function(e,i){return n(),r(e,function(e,t){if(!e)return-1;var n=e.segments,r=n?n.length:null,i=-1,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0;if(n&&r>0)for(l=0;l<r;l++)if(o=n[l],s=o.presentationStartTime,u=o.duration,t+(a=u/2)>=s&&t-a<s+u){i=o.availabilityIdx;break}return i}(e,t.calcPeriodRelativeTimeFromMpdRelativeTime(e,i)))}}}o.__dashjs_factory_name="SegmentBaseGetter";var s=r.default.getClassFactory(o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).requestModifier,n=e.boxParser;function r(e,t){e.reader.read().then(t).catch((function(t){e.onerror&&200===e.response.status&&e.onerror(t)}))}function i(e,t){if((e=e.filter((function(n){return n.bytes>t/4/e.length}))).length>1){var n=0,r=(e[e.length-1].ts-e[0].ts)/e.length;return e.forEach((function(t,i){var a=e[i+1];if(a){var o=a.ts-t.ts;n+=o<r?o:0}})),n}return null}return{load:function(e){var a=new Date,o=e.request,s=new Headers;o.range&&s.append("Range","bytes="+o.range),o.requestStartDate||(o.requestStartDate=a),t&&t.modifyRequestHeader({setRequestHeader:function(e,t){s.append(e,t)}});var u=void 0;"function"==typeof window.AbortController&&(u=new AbortController,e.abortController=u);var l={method:e.method,headers:s,credentials:e.withCredentials?"include":void 0,signal:u?u.signal:void 0};fetch(e.url,l).then((function(t){e.response||(e.response={}),e.response.status=t.status,e.response.statusText=t.statusText,e.response.responseURL=t.url,t.ok||e.onerror();var a="",o=!0,s=!1,u=void 0;try{for(var l,c=t.headers.keys()[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;a+=d+": "+t.headers.get(d)+"\n"}}catch(e){s=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(s)throw u}}if(e.response.responseHeaders=a,!t.body)return t.arrayBuffer().then((function(t){e.response.response=t;var n={loaded:t.byteLength,total:t.byteLength,stream:!1};e.progress(n),e.onload(),e.onend()}));var h=parseInt(t.headers.get("Content-Length"),10),f=0,p=!1,g=new Uint8Array,m=0;e.reader=t.body.getReader();var v=[];r(e,(function t(a){var o=a.value;if(a.done)return g&&(e.progress({loaded:f,total:isNaN(h)?f:h,lengthComputable:!0,time:i(v,f),stream:!0}),e.response.response=g.buffer),e.onload(),void e.onend();if(o&&o.length>0){g=function(e,t){if(0===e.length)return t;var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(g,o),f+=o.length,v.push({ts:Date.now(),bytes:o.length});var s=n.findLastTopIsoBoxCompleted(["moov","mdat"],g,m);if(s.found){var u=s.lastCompletedOffset+s.size,l=void 0;u===g.length?(l=g,g=new Uint8Array):(l=new Uint8Array(g.subarray(0,u)),g=g.subarray(u)),e.progress({data:l.buffer,lengthComputable:!1,noTrace:!0}),m=0}else m=s.lastCompletedOffset,p||(e.progress({lengthComputable:!1,noTrace:!0}),p=!0)}r(e,t)}))})).catch((function(t){e.onerror&&e.onerror(t)}))},abort:function(e){if(e.abortController)e.abortController.abort();else if(e.reader)try{e.reader.cancel()}catch(e){}},calculateDownloadedTime:i}}o.__dashjs_factory_name="FetchLoader";var s=a.default.getClassFactory(o);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(7)),i=g(n(5)),a=g(n(179)),o=g(n(4)),s=g(n(1)),u=g(n(6)),l=g(n(39)),c=g(n(59)),d=g(n(19)),h=g(n(29)),f=g(n(8)),p=g(n(9));function g(e){return e&&e.__esModule?e:{default:e}}function m(){var e=this.context,t=(0,i.default)(e).getInstance(),n=void 0,s=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0;function M(t,n,r,i){var o,u,l=void 0,d=void 0,h=void 0,f=void 0,p=void 0,m=void 0;for(d=[],f=0,u=(o=function(t){var n=[],r=(0,a.default)(e).create({data:t}),i=void 0,o=void 0;for(r.consumeTagAndSize(g.Segment.Cues);r.moreData()&&r.consumeTagAndSize(g.Segment.Cues.CuePoint,!0);){for((i={}).CueTime=r.parseTag(g.Segment.Cues.CuePoint.CueTime),i.CueTracks=[];r.moreData()&&r.consumeTag(g.Segment.Cues.CuePoint.CueTrackPositions,!0);){var s=r.getMatroskaCodedNum(),u=r.getPos();if((o={}).Track=r.parseTag(g.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),0===o.Track)throw new Error("Cue track cannot be 0");o.ClusterPosition=r.parseTag(g.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),i.CueTracks.push(o),r.setPos(u+s)}if(0===i.CueTracks.length)throw new Error("Mandatory cuetrack not found");n.push(i)}if(0===n.length)throw new Error("mandatory cuepoint not found");return n}(t)).length;f<u;f+=1)h=new c.default,l=0,l=f<o.length-1?o[f+1].CueTime-o[f].CueTime:i-o[f].CueTime,h.duration=l,h.startTime=o[f].CueTime,h.timescale=1e3,p=o[f].CueTracks[0].ClusterPosition+n,m=f<o.length-1?o[f+1].CueTracks[0].ClusterPosition+n-1:r-1,h.mediaRange=p+"-"+m,d.push(h);return s.debug("Parsed cues: "+d.length+" cues."),d}function b(){if(!E||!E.hasOwnProperty("resolve"))throw new Error("setConfig function has to be called previously")}function A(e,n,i){e?t.trigger(r.default.SEGMENTS_LOADED,{segments:e,representation:n,mediaType:i}):t.trigger(r.default.SEGMENTS_LOADED,{segments:null,representation:n,mediaType:i,error:new f.default(p.default.SEGMENT_BASE_LOADER_ERROR_CODE,p.default.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function w(e){var t=new d.default;return t.setInfo(e),t}return n={setConfig:function(e){if(!(e.baseURLController&&e.dashMetrics&&e.mediaPlayerModel&&e.errHandler))throw new Error(o.default.MISSING_CONFIG_ERROR);E=e.baseURLController,y=e.dashMetrics,_=e.mediaPlayerModel,m=e.errHandler},initialize:function(){v=(0,l.default)(e).getInstance(),T=(0,h.default)(e).create({errHandler:m,dashMetrics:y,mediaPlayerModel:_,requestModifier:v})},loadInitialization:function(e,n){b();var i=null,a=e?E.resolve(e.path):null,o=e?e.range.split("-"):null,u=n||{range:{start:o?parseFloat(o[0]):null,end:o?parseFloat(o[1]):null},request:i,url:a?a.url:void 0,init:!0,mediaType:e&&e.adaptation?e.adaptation.type:null};s.info("Start loading initialization."),i=w(u),T.load({request:i,success:function(){t.trigger(r.default.INITIALIZATION_LOADED,{representation:e})},error:function(){t.trigger(r.default.INITIALIZATION_LOADED,{representation:e})}}),s.debug("Perform init load: "+u.url)},loadSegments:function(t,n,r,i){b();var o=null,u=t?E.resolve(t.path):null,l=u?u.url:void 0,c={bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:o,url:l,init:!1,mediaType:t&&t.adaptation?t.adaptation.type:null};i=i||A,o=w(c),s.debug("Parsing ebml header"),T.load({request:o,success:function(o){!function(t,n,r,i){if(t&&0!==t.byteLength){var o,u=(0,a.default)(e).create({data:t}),l=void 0,c=void 0,d=void 0,h=r?r.split("-"):null,f=null,p={url:n,range:{start:h?parseFloat(h[0]):null,end:h?parseFloat(h[1]):null},request:f};for(s.debug("Parse EBML header: "+p.url),u.skipOverElement(g.EBML),u.consumeTag(g.Segment),d=u.getMatroskaCodedNum(),d+=u.getPos(),o=u.getPos();u.moreData()&&!u.consumeTagAndSize(g.Segment.Info,!0);)if(!(u.skipOverElement(g.Segment.SeekHead,!0)||u.skipOverElement(g.Segment.Tracks,!0)||u.skipOverElement(g.Segment.Cues,!0)||u.skipOverElement(g.Void,!0)))throw new Error("no valid top level element found");for(;void 0===l;){var m=u.getMatroskaCodedNum(!0),v=u.getMatroskaCodedNum();switch(m){case g.Segment.Info.Duration.tag:l=u[g.Segment.Info.Duration.parse](v);break;default:u.setPos(u.getPos()+v)}}f=w(p);T.load({request:f,success:function(e){c=M(e,o,d,l),i(c)},error:function(){s.error("Download Error: Cues "+p.url),i(null)}}),s.debug("Perform cues load: "+p.url+" bytes="+p.range.start+"-"+p.range.end)}else i(null)}(o,l,r,(function(e){i(e,t,n)}))},error:function(){i(null,t,n)}})},reset:function(){m=null,v=null}},s=(0,u.default)(e).getInstance().getLogger(n),g={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},n}m.__dashjs_factory_name="WebmSegmentBaseLoader",t.default=s.default.getSingletonFactory(m)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=void 0,n=new DataView(e.data),r=0;function i(e,t){var i=!0,a=0;if(void 0===t&&(t=!1),e.tag>16777215?(n.getUint32(r)!==e.tag&&(i=!1),a=4):e.tag>65535?(256*n.getUint16(r)+n.getUint8(r+2)!==e.tag&&(i=!1),a=3):e.tag>255?(n.getUint16(r)!==e.tag&&(i=!1),a=2):(n.getUint8(r)!==e.tag&&(i=!1),a=1),!i&&e.required&&!t)throw new Error("required tag not found");return i&&(r+=a),i}function a(e){var t=1,i=128,a=-1,o=0,s=n.getUint8(r),u=0;for(u=0;u<8;u+=1){if((s&i)===i){o=void 0===e?s&~i:s,a=u;break}i>>=1}for(u=0;u<a;u+=1,t+=1)o=o<<8|255&n.getUint8(r+t);return r+=t,o}return t={getPos:function(){return r},setPos:function(e){r=e},consumeTag:i,consumeTagAndSize:function(e,t){var n=i(e,t);return n&&a(),n},parseTag:function(e){var n;return i(e),n=a(),t[e.parse](n)},skipOverElement:function(e,t){var n=i(e,t),o=void 0;return n&&(o=a(),r+=o),n},getMatroskaCodedNum:a,getMatroskaFloat:function(e){var t=void 0;switch(e){case 4:t=n.getFloat32(r),r+=4;break;case 8:t=n.getFloat64(r),r+=8}return t},getMatroskaUint:function(e){for(var t=0,i=0;i<e;i+=1)t<<=8,t|=255&n.getUint8(r+i);return r+=e,t},moreData:function(){return r<n.byteLength}}}o.__dashjs_factory_name="EBMLParser",t.default=a.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(1)),i=u(n(6)),a=u(n(5)),o=u(n(7)),s=u(n(60));function u(e){return e&&e.__esModule?e:{default:e}}function l(){var e=this.context,t=(0,a.default)(e).getInstance(),n=void 0,r=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0;function v(){m=!1,u={},l={},c={},d=null,h=100,f=Date.now()/1e3}function y(){if(!p||!g)throw new Error("setConfig function has to be called previously")}function _(){null!==d&&m&&(clearInterval(d),d=null,m=!1)}function T(e){if(1==e.eventStream.value){var n=e.eventStream.timescale||1,i=e.presentationTime/n,a=void 0;a=4294967295==e.presentationTime?NaN:(e.presentationTime+e.duration)/n,r.info("Manifest validity changed: Valid until: "+i+"; remaining duration: "+a),t.trigger(o.default.MANIFEST_VALIDITY_CHANGED,{id:e.id,validUntil:i,newDuration:a,newManifestValidAfter:NaN})}}function E(){var e=g.getTime(),t=e-f;f=e,M(l,t,e),M(u,t,e),function(){if(c)for(var e=g.getTime(),t=Object.keys(c),n=0;n<t.length;n++){var i=t[n],a=c[i];null!==a&&(a.duration+a.presentationTime)/a.eventStream.timescale<e&&(r.debug("Remove Event "+i+" at time "+e),a=null,delete c[i])}}()}function M(n,i,a){var o,u;if(n)for(var l=Object.keys(n),d=0;d<l.length;d++){var h=l[d],f=n[h];void 0!==f&&(0===(o=f.presentationTime/f.eventStream.timescale)||o<=a&&o+i>a?(r.debug("Start Event "+h+" at "+a),f.duration>0&&(c[h]=f),"urn:mpeg:dash:event:2012"==f.eventStream.schemeIdUri&&1==f.eventStream.value?0===f.duration&&0===f.presentationTimeDelta||(y(),p.refreshManifest()):"urn:mpeg:dash:event:callback:2015"==f.eventStream.schemeIdUri&&1==f.eventStream.value?(u=f.messageData,(0,s.default)(e).create({}).load({method:"get",url:u,request:{responseType:"arraybuffer"}})):t.trigger(f.eventStream.schemeIdUri,{event:f}),delete n[h]):o<=a-i&&delete n[h])}}return n={addInlineEvents:function(e){if(y(),u={},e)for(var t=0;t<e.length;t++){var n=e[t];u[n.id]=n,r.debug("Add inline event with id "+n.id)}r.debug("Added "+e.length+" inline events")},addInbandEvents:function(e){y();for(var t=0;t<e.length;t++){var n=e[t];n.id in l?r.debug("Repeated event with id "+n.id):("urn:mpeg:dash:event:2012"===n.eventStream.schemeIdUri&&void 0===l[n.id]&&T(n),l[n.id]=n,r.debug("Add inband event with id "+n.id))}},stop:_,start:function(){y(),r.debug("Start Event Controller"),m||isNaN(h)||(m=!0,d=setInterval(E,h))},setConfig:function(e){e&&(e.manifestUpdater&&(p=e.manifestUpdater),e.playbackController&&(g=e.playbackController))},reset:function(){_(),v()}},r=(0,i.default)(e).getInstance().getLogger(n),v(),n}l.__dashjs_factory_name="EventController",t.default=r.default.getClassFactory(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(4)),i=h(n(182)),a=h(n(33)),o=h(n(183)),s=h(n(39)),u=h(n(5)),l=h(n(7)),c=h(n(1)),d=h(n(6));function h(e){return e&&e.__esModule?e:{default:e}}function f(e){e=e||{};var t=this.context,n=(0,u.default)(t).getInstance(),c=e.errHandler,h=e.mediaPlayerModel,f=e.dashMetrics,p=void 0,g=void 0,m=void 0;function v(){for(var e in m)m[e].reset();m={}}function y(e){if(m[e.request.mediaType]===e.sender){var t=e.request,a=e.response,o=t.isInitializationRequest(),s=t.mediaInfo.streamInfo;if(e.error&&(e.request.mediaType!==r.default.AUDIO&&e.request.mediaType!==r.default.VIDEO&&e.request.mediaType!==r.default.FRAGMENTED_TEXT||n.trigger(l.default.SERVICE_LOCATION_BLACKLIST_ADD,{entry:e.request.serviceLocation})),a&&s){var u=function(e,t,n,r){var a=new i.default;return a.streamId=n,a.mediaInfo=t.mediaInfo,a.segmentType=t.type,a.start=t.startTime,a.duration=t.duration,a.end=a.start+a.duration,a.bytes=e,a.index=t.index,a.quality=t.quality,a.representationId=t.representationId,a.endFragment=r,a}(a,t,s.id,e.type!==l.default.FRAGMENT_LOADING_PROGRESS);n.trigger(o?l.default.INIT_FRAGMENT_LOADED:l.default.MEDIA_FRAGMENT_LOADED,{chunk:u,fragmentModel:e.sender})}else g.warn("No "+t.mediaType+" bytes to push or stream is inactive.")}}return p={getModel:function(n){var r=m[n];return r||(r=(0,a.default)(t).create({dashMetrics:f,fragmentLoader:(0,o.default)(t).create({dashMetrics:f,mediaPlayerModel:h,errHandler:c,requestModifier:(0,s.default)(t).getInstance(),settings:e.settings})}),m[n]=r),r},reset:function(){n.off(l.default.FRAGMENT_LOADING_COMPLETED,y,this),n.off(l.default.FRAGMENT_LOADING_PROGRESS,y,this),v()}},g=(0,d.default)(t).getInstance().getLogger(p),v(),n.on(l.default.FRAGMENT_LOADING_COMPLETED,y,p),n.on(l.default.FRAGMENT_LOADING_PROGRESS,y,p),p}f.__dashjs_factory_name="FragmentController",t.default=c.default.getClassFactory(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.streamId=null,this.mediaInfo=null,this.segmentType=null,this.quality=NaN,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representationId=null,this.endFragment=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(29)),i=d(n(184)),a=d(n(8)),o=d(n(5)),s=d(n(27)),u=d(n(7)),l=d(n(9)),c=d(n(1));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){e=e||{};var t,n=this.context,c=(0,o.default)(n).getInstance(),d=void 0,h=void 0;return d={checkForExistence:function(e){var t=function(t){c.trigger(u.default.CHECK_FOR_EXISTENCE_COMPLETED,{request:e,exists:t})};if(e){var n=new i.default(e.url);h.load({request:n,success:function(){t(!0)},error:function(){t(!1)}})}else t(!1)},load:function(e){var t=function(t,n){c.trigger(u.default.LOADING_COMPLETED,{request:e,response:t||null,error:n||null,sender:d})};e?h.load({request:e,progress:function(t){c.trigger(u.default.LOADING_PROGRESS,{request:e,stream:t.stream}),t.data&&c.trigger(u.default.LOADING_DATA_PROGRESS,{request:e,response:t.data||null,error:null,sender:d})},success:function(e){t(e)},error:function(e,n,r){t(void 0,new a.default(l.default.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,r,n))},abort:function(e){e&&c.trigger(u.default.LOADING_ABANDONED,{request:e,mediaType:e.mediaType,sender:d})}}):t(void 0,new a.default(l.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,l.default.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},abort:function(){h&&h.abort()},reset:function(){h&&(h.abort(),h=null)}},t=(0,s.default)(n).getInstance(),h=(0,r.default)(n).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier,boxParser:t,useFetch:e.settings.get().streaming.lowLatencyEnabled}),d}h.__dashjs_factory_name="FragmentLoader",t.default=c.default.getClassFactory(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(19);var a=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.url=e||null,n.checkForExistenceOnly=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(1)),i=l(n(4)),a=l(n(186)),o=l(n(92)),s=l(n(89)),u=n(24);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t,n=this.context,r=void 0;function l(){r&&r.reset()}return t={get:function(e,t){var n,i=r.getCurrentTrack(),o=void 0;if(!i||i.segmentDuration<=0||null==e)return null;isNaN(i.segmentDuration)&&(o=r.getThumbnailRequestForTime(e))&&(i.segmentDuration=o.duration),n=e%i.segmentDuration;var s=Math.floor(n*i.tilesHor*i.tilesVert/i.segmentDuration),l=new a.default;if(l.width=Math.floor(i.widthPerTile),l.height=Math.floor(i.heightPerTile),l.x=Math.floor(s%i.tilesHor)*i.widthPerTile,l.y=Math.floor(s/i.tilesHor)*i.heightPerTile,"readThumbnail"in i)return i.readThumbnail(e,(function(e){l.url=e,t&&t(l)}));if(o)l.url=o.url,i.segmentDuration=NaN;else{var c=Math.floor(e/i.segmentDuration);l.url=function(e,t){var n=t+e.startNumber,r=(0,u.replaceTokenForTemplate)(e.templateUrl,"Number",n);return r=(0,u.replaceTokenForTemplate)(r,"Time",(n-1)*e.segmentDuration),r=(0,u.replaceTokenForTemplate)(r,"Bandwidth",e.bandwidth),(0,u.unescapeDollarsInTemplate)(r)}(i,c)}return t&&t(l),l},setTrackByIndex:function(e){r.setTrackByIndex(e)},getCurrentTrackIndex:function(){return r.getCurrentTrackIndex()},getBitrateList:function(){var e=r.getTracks(),t=0;return e.map((function(e){var n=new s.default;return n.mediaType=i.default.IMAGE,n.qualityIndex=t++,n.bitrate=e.bitrate,n.width=e.width,n.height=e.height,n}))},reset:l},l(),r=(0,o.default)(n).create({adapter:e.adapter,baseURLController:e.baseURLController,stream:e.stream,timelineConverter:e.timelineConverter}),t}c.__dashjs_factory_name="ThumbnailController",t.default=r.default.getClassFactory(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(5)),i=u(n(7)),a=u(n(1)),o=u(n(6)),s=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}function l(){var e=this.context,t=(0,r.default)(e).getInstance(),n=void 0,a=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0;function v(){u=NaN,d=!1,c=!0,y()}function y(){null!==l&&(clearInterval(l),l=null)}function _(e){y(),isNaN(e)&&!isNaN(u)&&(e=1e3*u),isNaN(e)||(a.debug("Refresh manifest in "+e+" milliseconds."),l=setTimeout(M,e))}function T(){d=!0;var e=f.getValue(),t=e.url,n=p.getLocation(e);n&&(t=n),h.load(t)}function E(e){f.setValue(e);var n=new Date,r=(n.getTime()-e.loadedTime.getTime())/1e3;1e3*(u=p.getManifestUpdatePeriod(e,r))>2147483647&&(u=2147483.647),t.trigger(i.default.MANIFEST_UPDATED,{manifest:e}),a.info("Manifest has been refreshed at "+n+"["+n.getTime()/1e3+"] "),c||_()}function M(){c&&!m.get().streaming.scheduleWhilePaused||(d?_(m.get().streaming.manifestUpdateRetryInterval):T())}function b(e){e.error?e.error.code===s.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&g.error(e.error):E(e.manifest)}function A(){c=!1,_()}function w(){c=!0,y()}function S(){d=!1}return n={initialize:function(){v(),t.on(i.default.STREAMS_COMPOSED,S,this),t.on(i.default.PLAYBACK_STARTED,A,this),t.on(i.default.PLAYBACK_PAUSED,w,this),t.on(i.default.INTERNAL_MANIFEST_LOADED,b,this)},setManifest:function(e){E(e)},refreshManifest:T,setConfig:function(e){e&&(e.manifestModel&&(f=e.manifestModel),e.adapter&&(p=e.adapter),e.manifestLoader&&(h=e.manifestLoader),e.errHandler&&(g=e.errHandler),e.settings&&(m=e.settings))},reset:function(){t.off(i.default.PLAYBACK_STARTED,A,this),t.off(i.default.PLAYBACK_PAUSED,w,this),t.off(i.default.STREAMS_COMPOSED,S,this),t.off(i.default.INTERNAL_MANIFEST_LOADED,b,this),v()}},a=(0,o.default)(e).getInstance().getLogger(n),n}l.__dashjs_factory_name="ManifestUpdater",t.default=a.default.getClassFactory(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(8)),i=n(11),a=d(n(5)),o=d(n(7)),s=d(n(9)),u=d(n(1)),l=d(n(6)),c=d(n(18));function d(e){return e&&e.__esModule?e:{default:e}}function h(){var e=this.context,t=(0,a.default)(e).getInstance(),n=(0,c.default)(e).getInstance(),u=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0;function y(e){f=e}function _(e){h=e}function T(e){var t=Date.parse(e);return isNaN(t)&&(t=function(e){var t=void 0,n=void 0,r=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(e);return t=Date.UTC(parseInt(r[1],10),parseInt(r[2],10)-1,parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10),r[6]&&(parseInt(r[6],10)||0),r[7]&&1e3*parseFloat(r[7])||0),r[9]&&r[10]&&(n=60*parseInt(r[9],10)+parseInt(r[10],10),t+=("+"===r[8]?-1:1)*n*60*1e3),new Date(t).getTime()}(e)),t}function E(e){return Date.parse(e)}function M(e){return Date.parse(e)}function b(e,t,n){n()}function A(e,t,n){var r=T(e);isNaN(r)?n():t(r)}function w(e,t,r,a,o){var s,u,l=!1,c=new XMLHttpRequest,d=o?i.HTTPRequest.HEAD:i.HTTPRequest.GET,h=t.match(/\S+/g);if(t=h.shift(),s=function(){l||(l=!0,h.length?w(e,h.join(" "),r,a,o):a())},u=function(){var t=void 0,n=void 0;200===c.status&&(t=o?c.getResponseHeader("Date"):c.response,n=e(t),isNaN(n)||(r(n),l=!0))},n.isRelative(t)){var f=v.resolve();f&&(t=n.resolve(t,f.url))}c.open(d,t),c.timeout=5e3,c.onload=u,c.onloadend=s,c.send()}function S(e,t,n){w(M,e,t,n,!0)}function x(e,n,i){y(!1),t.trigger(o.default.TIME_SYNCHRONIZATION_COMPLETED,{time:n,offset:i,error:e?new r.default(s.default.TIME_SYNC_FAILED_ERROR_CODE,s.default.TIME_SYNC_FAILED_ERROR_MESSAGE):null})}return u={initialize:function(e,t){p=t,h=0,f=!1,g={"urn:mpeg:dash:utc:http-head:2014":S,"urn:mpeg:dash:utc:http-xsdate:2014":w.bind(null,T),"urn:mpeg:dash:utc:http-iso:2014":w.bind(null,E),"urn:mpeg:dash:utc:direct:2014":A,"urn:mpeg:dash:utc:http-head:2012":S,"urn:mpeg:dash:utc:http-xsdate:2012":w.bind(null,T),"urn:mpeg:dash:utc:http-iso:2012":w.bind(null,E),"urn:mpeg:dash:utc:direct:2012":A,"urn:mpeg:dash:utc:http-ntp:2014":b,"urn:mpeg:dash:utc:ntp:2014":b,"urn:mpeg:dash:utc:sntp:2014":b},f||function e(t,n){var r=n||0,i=t[r],a=function(e,t){var n,r,i=!e||!t;i&&p?(n=m.getLatestMPDRequestHeaderValueByID("Date"),r=null!==n?new Date(n).getTime():Number.NaN,isNaN(r)?x(!0):(_(r-(new Date).getTime()),x(!1,r/1e3,h))):x(i,e,t)};y(!0),i?g.hasOwnProperty(i.schemeIdUri)?g[i.schemeIdUri](i.value,(function(e){var t=(new Date).getTime(),n=function(e,t){return e-t}(e,t);_(n),d.info("Local time: "+new Date(t)),d.info("Server time: "+new Date(e)),d.info("Server Time - Local Time (ms): "+n),a(e,n)}),(function(){e(t,r+1)})):e(t,r+1):(_(0),a())}(e)},getOffsetToDeviceTimeMs:function(){return h},setConfig:function(e){e&&(e.dashMetrics&&(m=e.dashMetrics),e.baseURLController&&(v=e.baseURLController))},reset:function(){y(!1)}},d=(0,l.default)(e).getInstance().getLogger(u),u}h.__dashjs_factory_name="TimeSyncController";var f=u.default.getSingletonFactory(h);f.HTTP_TIMEOUT_MS=5e3,u.default.updateSingletonFactory(h.__dashjs_factory_name,f),t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(95)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var o=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={baseUrls:t||null,selectedIdx:n||NaN},this.children=[]};function s(){var e,t=void 0,n=void 0,i=this.context,a=(0,r.default)(i).getInstance();function s(e,t,r){var i=n.getBaseURLsFromElement(r);e[t]?a.areEqual(i,e[t].data.baseUrls)||(e[t].data.baseUrls=i,e[t].data.selectedIdx=NaN):e[t]=new o(i)}function u(e){!function(){if(!n||!n.hasOwnProperty("getBaseURLsFromElement")||!n.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")}();var r=n.getBaseURLsFromElement(e);a.areEqual(r,t.data.baseUrls)||(t.data.baseUrls=r,t.data.selectedIdx=NaN),e&&e.Period_asArray&&e.Period_asArray.forEach((function(e,r){s(t.children,r,e),e.AdaptationSet_asArray&&e.AdaptationSet_asArray.forEach((function(e,i){s(t.children[r].children,i,e),e.Representation_asArray&&e.Representation_asArray.sort(n.getRepresentationSortFunction()).forEach((function(e,n){s(t.children[r].children[i].children,n,e)}))}))}))}function l(){t=new o}return e={reset:l,update:function(e){u(e)},getForPath:function(e){var n=t,r=[n.data];return e&&e.forEach((function(e){(n=n.children[e])&&r.push(n.data)})),r.filter((function(e){return e.baseUrls.length}))},invalidateSelectedIndexes:function(e){!function e(n,r){var i=r||t;n(i.data),i.children&&i.children.forEach((function(t){return e(n,t)}))}((function(t){isNaN(t.selectedIdx)||e===t.baseUrls[t.selectedIdx].serviceLocation&&(t.selectedIdx=NaN)}))},setConfig:function(e){e.adapter&&(n=e.adapter)}},l(),e}s.__dashjs_factory_name="BaseURLTreeModel",t.default=i.default.getClassFactory(s)},function(e,t,n){"use strict";var r=Array.isArray,i=Object.keys,a=Object.prototype.hasOwnProperty;e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){var o,s,u,l=r(t),c=r(n);if(l&&c){if((s=t.length)!=n.length)return!1;for(o=s;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(l!=c)return!1;var d=t instanceof Date,h=n instanceof Date;if(d!=h)return!1;if(d&&h)return t.getTime()==n.getTime();var f=t instanceof RegExp,p=n instanceof RegExp;if(f!=p)return!1;if(f&&p)return t.toString()==n.toString();var g=i(t);if((s=g.length)!==i(n).length)return!1;for(o=s;0!=o--;)if(!a.call(n,g[o]))return!1;for(o=s;0!=o--;)if(!e(t[u=g[o]],n[u]))return!1;return!0}return t!=t&&n!=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=h(n(9)),i=h(n(5)),a=h(n(7)),o=h(n(193)),s=h(n(194)),u=h(n(195)),l=h(n(1)),c=h(n(8)),d=n(17);function h(e){return e&&e.__esModule?e:{default:e}}function f(){var e,t=this.context,n=(0,i.default)(t).getInstance(),l=void 0,h=void 0,f=void 0,p=void 0;function g(){l.reset()}return e={chooseSelector:function(e){(0,d.checkParameterType)(e,"boolean"),p=e?f:h},select:function(e){if(e){var t=e.baseUrls,i=e.selectedIdx;if(!isNaN(i))return t[i];var o=p.select(t);return o?(e.selectedIdx=t.indexOf(o),o):(n.trigger(a.default.URL_RESOLUTION_FAILED,{error:new c.default(r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,r.default.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(p===h&&g()))}},reset:g,setConfig:function(e){e.selector&&(p=e.selector)}},l=(0,o.default)(t).create({updateEventName:a.default.SERVICE_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:a.default.SERVICE_LOCATION_BLACKLIST_ADD}),h=(0,u.default)(t).create({blacklistController:l}),f=(0,s.default)(t).create({blacklistController:l}),p=h,e}f.__dashjs_factory_name="BaseURLSelector",t.default=l.default.getClassFactory(f)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(5));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e=e||{};var t=[],n=(0,i.default)(this.context).getInstance(),r=e.updateEventName,a=e.addBlacklistEventName;function o(e){-1===t.indexOf(e)&&(t.push(e),n.trigger(r,{entry:e}))}function s(e){o(e.entry)}return function(){a&&n.on(a,s,this)}(),{add:o,contains:function(e){return!!(t.length&&e&&e.length)&&-1!==t.indexOf(e)},reset:function(){t=[]}}}o.__dashjs_factory_name="BlackListController",t.default=r.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).blacklistController;return{select:function(e){return e&&function(e){var t=0,n=[],r=0,i=void 0,a=void 0;if((a=e.sort((function(e,t){var n=e.dvb_priority-t.dvb_priority;return isNaN(n)?0:n})).filter((function(e,t,n){return!t||n[0].dvb_priority&&e.dvb_priority&&n[0].dvb_priority===e.dvb_priority}))).length)return a.length>1&&(a.forEach((function(e){t+=e.dvb_weight,n.push(t)})),i=Math.floor(Math.random()*(t-1)),n.every((function(e,t){return r=t,!(i<e)}))),a[r]}((n=[],e.filter((function(e){return!t.contains(e.serviceLocation)||(e.dvb_priority&&n.push(e.dvb_priority),!1)})).filter((function(e){return!n.length||!e.dvb_priority||-1===n.indexOf(e.dvb_priority)}))));var n}}}o.__dashjs_factory_name="DVBSelector",t.default=a.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).blacklistController;return{select:function(e){var n=0,r=void 0;return e&&e.some((function(e,r){return n=r,!t.contains(e.serviceLocation)}))&&(r=e[n]),r}}}o.__dashjs_factory_name="BasicSelector",t.default=a.default.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1)),i=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=void 0,t=void 0,n=this.context;return e={createMediaSource:function(){var e="WebKitMediaSource"in window;return"MediaSource"in window?new MediaSource:e?new WebKitMediaSource:null},attachMediaSource:function(e,t){var n=window.URL.createObjectURL(e);return t.setSource(n),n},detachMediaSource:function(e){e.setSource(null)},setDuration:function(e,t){return e.duration!=t&&(e.duration=t),e.duration},setSeekable:function(e,t,n){e&&"function"==typeof e.setLiveSeekableRange&&"function"==typeof e.clearLiveSeekableRange&&"open"===e.readyState&&t>=0&&t<n&&(e.clearLiveSeekableRange(),e.setLiveSeekableRange(t,n))},signalEndOfStream:function(e){if(e&&"open"===e.readyState){for(var n=e.sourceBuffers,r=0;r<n.length;r++){if(n[r].updating)return;if(0===n[r].buffered.length)return}t.info("call to mediaSource endOfStream"),e.endOfStream()}}},t=(0,i.default)(n).getInstance().getLogger(e),e}o.__dashjs_factory_name="MediaSourceController",t.default=r.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=m(n(4)),i=m(n(198)),a=m(n(29)),o=m(n(18)),s=m(n(97)),u=m(n(8)),l=n(11),c=m(n(5)),d=m(n(7)),h=m(n(9)),f=m(n(1)),p=m(n(200)),g=m(n(6));function m(e){return e&&e.__esModule?e:{default:e}}function v(e){e=e||{};var t=this.context,n=(0,c.default)(t).getInstance(),f=(0,o.default)(t).getInstance(),m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=e.mssHandler,M=e.errHandler;function b(e){n.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:e.manifest})}return m={load:function(e){var i=new s.default(e,l.HTTPRequest.MPD_TYPE);y.load({request:i,success:function(i,a,o){if(_){var s=void 0,l=void 0,c=void 0;if(o&&o!==e?(l=f.parseBaseUrl(o),s=o):(f.isRelative(e)&&(e=f.resolve(e,window.location.href)),l=f.parseBaseUrl(e)),null===T&&(T=function(e){var n=null;return e.indexOf("SmoothStreamingMedia")>-1?(E&&(n=E.createMssParser(),E.registerEvents()),n):e.indexOf("MPD")>-1?(0,p.default)(t).create():n}(i)),null!==T){_.setMatchers(T.getMatchers()),_.setIron(T.getIron());try{c=T.parse(i)}catch(t){return void n.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}c?(c.url=s||e,c.originalUrl||(c.originalUrl=c.url),c.hasOwnProperty(r.default.LOCATION)&&(l=f.parseBaseUrl(c.Location_asArray[0]),v.debug("BaseURI set by Location to: "+l)),c.baseUri=l,c.loadedTime=new Date,_.resolveManifestOnLoad(c)):n.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}else n.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+""+e)})}},error:function(t,r,i){n.trigger(d.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new u.default(h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,h.default.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+(e+", ")+i)})}})},reset:function(){n.off(d.default.XLINK_READY,b,m),_&&(_.reset(),_=null),y&&(y.abort(),y=null),E&&E.reset()}},v=(0,g.default)(t).getInstance().getLogger(m),n.on(d.default.XLINK_READY,b,m),y=(0,a.default)(t).create({errHandler:M,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),_=(0,i.default)(t).create({errHandler:M,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),T=null,m}v.__dashjs_factory_name="ManifestLoader";var y=f.default.getClassFactory(v);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(199)),i=c(n(5)),a=c(n(7)),o=c(n(1)),s=c(n(98)),u=c(n(18)),l=c(n(15));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t=this.context,n=(0,i.default)(t).getInstance(),o=(0,u.default)(t).getInstance(),c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0;function m(e,t,n){var r={},i=void 0,a=void 0;r.elements=e,r.type=t,r.resolveType=n,0===r.elements.length&&y(r);for(var s=0;s<r.elements.length;s++)i=r.elements[s],a=o.isHTTPURL(i.url)?i.url:i.originalContent.BaseURL+i.url,g.load(a,i,r)}function v(e){var t,n=void 0,r="";if(n=e.element,t=e.resolveObject,n.resolvedContent){var i=0;0===n.resolvedContent.indexOf("<?xml")&&(i=n.resolvedContent.indexOf("?>")+2),r=n.resolvedContent.substr(0,i)+"<response>"+n.resolvedContent.substr(i)+"</response>",n.resolvedContent=p.xml_str2json(r)}(function(e){var t=void 0;for(t=0;t<e.elements.length;t++)if(!1===e.elements[t].resolved)return!1;return!0})(t)&&y(t)}function y(e){var t=[],r=void 0,i=void 0;if(function(e){var t=[],n=void 0,r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;for(a=e.elements.length-1;a>=0;a--){if(n=e.elements[a],r=n.type+"_asArray",n.resolvedContent){if(n.resolvedContent)for(o=0;o<n.resolvedContent[r].length;o++)i=n.resolvedContent[r][o],t.push(i)}else delete n.originalContent["xlink:actuate"],delete n.originalContent["xlink:href"],t.push(n.originalContent);for(n.parentElement[r].splice(n.index,1),s=0;s<t.length;s++)n.parentElement[r].splice(n.index+s,0,t[s]);t=[]}e.elements.length>0&&h.run(f)}(e),"onActuate"===e.resolveType&&n.trigger(a.default.XLINK_READY,{manifest:f}),"onLoad"===e.resolveType)switch(e.type){case l.default.PERIOD:for(r=0;r<f[l.default.PERIOD+"_asArray"].length;r++)(i=f[l.default.PERIOD+"_asArray"][r]).hasOwnProperty(l.default.ADAPTATION_SET+"_asArray")&&(t=t.concat(_(i[l.default.ADAPTATION_SET+"_asArray"],i,l.default.ADAPTATION_SET,"onLoad"))),i.hasOwnProperty(l.default.EVENT_STREAM+"_asArray")&&(t=t.concat(_(i[l.default.EVENT_STREAM+"_asArray"],i,l.default.EVENT_STREAM,"onLoad")));m(t,l.default.ADAPTATION_SET,"onLoad");break;case l.default.ADAPTATION_SET:n.trigger(a.default.XLINK_READY,{manifest:f})}}function _(e,t,n,r){var i=[],a=void 0,o=void 0,s=void 0;for(o=e.length-1;o>=0;o--)(a=e[o]).hasOwnProperty("xlink:href")&&"urn:mpeg:dash:resolve-to-zero:2013"===a["xlink:href"]&&e.splice(o,1);for(o=0;o<e.length;o++)(a=e[o]).hasOwnProperty("xlink:href")&&a.hasOwnProperty("xlink:actuate")&&a["xlink:actuate"]===r&&(s=T(a["xlink:href"],t,n,o,r,a),i.push(s));return i}function T(e,t,n,r,i,a){return{url:e,parentElement:t,type:n,index:r,resolveType:i,originalContent:a,resolvedContent:null,resolved:!1}}return c={resolveManifestOnLoad:function(e){p=new s.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!1,ignoreRoot:!0,matchers:d}),m(_((f=e).Period_asArray,f,l.default.PERIOD,"onLoad"),l.default.PERIOD,"onLoad")},setMatchers:function(e){e&&(d=e)},setIron:function(e){e&&(h=e)},reset:function(){n.off(a.default.XLINK_ELEMENT_LOADED,v,c),g&&(g.reset(),g=null)}},n.on(a.default.XLINK_ELEMENT_LOADED,v,c),g=(0,r.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier}),c}d.__dashjs_factory_name="XlinkController",t.default=o.default.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(8)),i=d(n(29)),a=n(11),o=d(n(97)),s=d(n(5)),u=d(n(7)),l=d(n(1)),c=d(n(9));function d(e){return e&&e.__esModule?e:{default:e}}function h(e){e=e||{};var t=this.context,n=(0,s.default)(t).getInstance(),l=(0,i.default)(t).create({errHandler:e.errHandler,dashMetrics:e.dashMetrics,mediaPlayerModel:e.mediaPlayerModel,requestModifier:e.requestModifier});return{load:function(e,t,i){var s=function(a,o){t.resolved=!0,t.resolvedContent=a||null,n.trigger(u.default.XLINK_ELEMENT_LOADED,{element:t,resolveObject:i,error:a||o?null:new r.default(c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,c.default.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+e)})};if("urn:mpeg:dash:resolve-to-zero:2013"===e)s(null,!0);else{var d=new o.default(e,a.HTTPRequest.XLINK_EXPANSION_TYPE);l.load({request:d,success:function(e){s(e)},error:function(){s(null)}})}},reset:function(){l&&(l.abort(),l=null)}}}h.__dashjs_factory_name="XlinkLoader",t.default=l.default.getClassFactory(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(1)),i=f(n(6)),a=f(n(201)),o=f(n(98)),s=f(n(202)),u=f(n(203)),l=f(n(204)),c=f(n(205)),d=f(n(206)),h=f(n(208));function f(e){return e&&e.__esModule?e:{default:e}}function p(){var e=this.context,t=void 0,n=void 0,r=void 0,f=void 0,p=void 0;return t={parse:function(e){var t,r=window.performance.now();if(!(t=f.xml_str2json(e)))throw new Error("parsing the manifest failed");var i=window.performance.now();p.run(t);var a=window.performance.now();return n.info("Parsing complete: ( xml2json: "+(i-r).toPrecision(3)+"ms, objectiron: "+(a-i).toPrecision(3)+"ms, total: "+((a-r)/1e3).toPrecision(3)+"s)"),t},getMatchers:function(){return r},getIron:function(){return p}},n=(0,i.default)(e).getInstance().getLogger(t),r=[new u.default,new l.default,new c.default,new s.default],f=new o.default({escapeMode:!1,attributePrefix:"",arrayAccessForm:"property",emptyNodeForm:"object",stripWhitespaces:!1,enableToStringFunc:!0,ignoreRoot:!0,matchers:r}),p=(0,a.default)(e).create({adaptationset:new d.default,period:new h.default}),t}p.__dashjs_factory_name="DashParser",t.default=r.default.getClassFactory(p)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=n(1),o=(r=a)&&r.__esModule?r:{default:r};function s(e){function t(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function n(e,n,r){for(var a=0,o=e.length;a<o;++a){var s=e[a];if(n[s.name])if(r[s.name]){if(s.merge){var u=n[s.name],l=r[s.name];"object"===(void 0===u?"undefined":i(u))&&"object"===(void 0===l?"undefined":i(l))?t(u,l):r[s.name]=u+l}}else r[s.name]=n[s.name]}}function r(e,t){for(var i=0,a=e.children.length;i<a;++i){var o=e.children[i],s=t[o.name+"_asArray"];if(s)for(var u=0,l=s.length;u<l;++u){var c=s[u];n(e.properties,t,c),r(o,c)}}}return{run:function(t){if(null===t||"object"!==(void 0===t?"undefined":i(t)))return t;if("period"in e)for(var n=e.period,a=t.Period_asArray,o=0,s=a.length;o<s;++o){var u=a[o];if(r(n,u),"adaptationset"in e){var l=u.AdaptationSet_asArray;if(l)for(var c=e.adaptationset,d=0,h=l.length;d<h;++d)r(c,l[d])}}return t}}}s.__dashjs_factory_name="ObjectIron";var u=o.default.getClassFactory(s);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(40)),i=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(function(e,t){var n,r=(o(n={},i.default.MPD,[i.default.ID,i.default.PROFILES]),o(n,i.default.PERIOD,[i.default.ID]),o(n,i.default.BASE_URL,[i.default.SERVICE_LOCATION,i.default.BYTE_RANGE]),o(n,i.default.SEGMENT_BASE,[i.default.INDEX_RANGE]),o(n,i.default.INITIALIZATION,[i.default.RANGE]),o(n,i.default.REPRESENTATION_INDEX,[i.default.RANGE]),o(n,i.default.SEGMENT_LIST,[i.default.INDEX_RANGE]),o(n,i.default.BITSTREAM_SWITCHING,[i.default.RANGE]),o(n,i.default.SEGMENT_URL,[i.default.MEDIA_RANGE,i.default.INDEX_RANGE]),o(n,i.default.SEGMENT_TEMPLATE,[i.default.INDEX_RANGE,i.default.MEDIA,i.default.INDEX,i.default.INITIALIZATION_MINUS,i.default.BITSTREAM_SWITCHING_MINUS]),o(n,i.default.ASSET_IDENTIFIER,[i.default.VALUE,i.default.ID]),o(n,i.default.EVENT_STREAM,[i.default.VALUE]),o(n,i.default.ADAPTATION_SET,[i.default.PROFILES,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.CONTENT_TYPE]),o(n,i.default.FRAME_PACKING,[i.default.VALUE,i.default.ID]),o(n,i.default.AUDIO_CHANNEL_CONFIGURATION,[i.default.VALUE,i.default.ID]),o(n,i.default.CONTENT_PROTECTION,[i.default.VALUE,i.default.ID]),o(n,i.default.ESSENTIAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(n,i.default.SUPPLEMENTAL_PROPERTY,[i.default.VALUE,i.default.ID]),o(n,i.default.INBAND_EVENT_STREAM,[i.default.VALUE,i.default.ID]),o(n,i.default.ACCESSIBILITY,[i.default.VALUE,i.default.ID]),o(n,i.default.ROLE,[i.default.VALUE,i.default.ID]),o(n,i.default.RATING,[i.default.VALUE,i.default.ID]),o(n,i.default.VIEWPOINT,[i.default.VALUE,i.default.ID]),o(n,i.default.CONTENT_COMPONENT,[i.default.CONTENT_TYPE]),o(n,i.default.REPRESENTATION,[i.default.ID,i.default.DEPENDENCY_ID,i.default.MEDIA_STREAM_STRUCTURE_ID]),o(n,i.default.SUBSET,[i.default.ID]),o(n,i.default.METRICS,[i.default.METRICS_MINUS]),o(n,i.default.REPORTING,[i.default.VALUE,i.default.ID]),n);if(r.hasOwnProperty(t)){var a=r[t];return void 0!==a&&a.indexOf(e.name)>=0}return!1}),(function(e){return String(e)})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(40)),i=o(n(4)),a=o(n(15));function o(e){return e&&e.__esModule?e:{default:e}}var s=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/,u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(function(e){for(var t=[a.default.MIN_BUFFER_TIME,a.default.MEDIA_PRESENTATION_DURATION,a.default.MINIMUM_UPDATE_PERIOD,a.default.TIMESHIFT_BUFFER_DEPTH,a.default.MAX_SEGMENT_DURATION,a.default.MAX_SUBSEGMENT_DURATION,i.default.SUGGESTED_PRESENTATION_DELAY,a.default.START,i.default.START_TIME,a.default.DURATION],n=t.length,r=0;r<n;r++)if(e.nodeName===t[r])return s.test(e.value);return!1}),(function(e){var t=s.exec(e),n=31536e3*parseFloat(t[2]||0)+2592e3*parseFloat(t[4]||0)+86400*parseFloat(t[6]||0)+3600*parseFloat(t[8]||0)+60*parseFloat(t[10]||0)+parseFloat(t[12]||0);return void 0!==t[1]&&(n=-n),n})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(40),a=(r=i)&&r.__esModule?r:{default:r};var o=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(function(e){return o.test(e.value)}),(function(e){var t=o.exec(e),n=void 0;if(n=Date.UTC(parseInt(t[1],10),parseInt(t[2],10)-1,parseInt(t[3],10),parseInt(t[4],10),parseInt(t[5],10),t[6]&&parseInt(t[6],10)||0,t[7]&&1e3*parseFloat(t[7])||0),t[9]&&t[10]){var r=60*parseInt(t[9],10)+parseInt(t[10],10);n+=("+"===t[8]?-1:1)*r*60*1e3}return new Date(n)})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(40),a=(r=i)&&r.__esModule?r:{default:r};var o=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(function(e){return o.test(e.value)}),(function(e){return parseFloat(e)})))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(a.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(99)),i=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[i.default.PROFILES,i.default.WIDTH,i.default.HEIGHT,i.default.SAR,i.default.FRAMERATE,i.default.AUDIO_SAMPLING_RATE,i.default.MIME_TYPE,i.default.SEGMENT_PROFILES,i.default.CODECS,i.default.MAXIMUM_SAP_PERIOD,i.default.START_WITH_SAP,i.default.MAX_PLAYOUT_RATE,i.default.CODING_DEPENDENCY,i.default.SCAN_TYPE,i.default.FRAME_PACKING,i.default.AUDIO_CHANNEL_CONFIGURATION,i.default.CONTENT_PROTECTION,i.default.ESSENTIAL_PROPERTY,i.default.SUPPLEMENTAL_PROPERTY,i.default.INBAND_EVENT_STREAM];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.ADAPTATION_SET,e,[new r.default(i.default.REPRESENTATION,e,[new r.default(i.default.SUB_REPRESENTATION,e)])]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n;this._name=t,this._merge=(n=t)&&n.length&&n.charAt(0)===n.charAt(0).toUpperCase()}return r(e,[{key:"name",get:function(){return this._name}},{key:"merge",get:function(){return this._merge}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(99)),i=a(n(15));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=[i.default.SEGMENT_BASE,i.default.SEGMENT_TEMPLATE,i.default.SEGMENT_LIST];return function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i.default.PERIOD,e,[new r.default(i.default.ADAPTATION_SET,e,[new r.default(i.default.REPRESENTATION,e)])]))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(5)),i=o(n(7)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=this.context,t=(0,r.default)(e).getInstance();return{error:function(e){t.trigger(i.default.ERROR,{error:e})}}}s.__dashjs_factory_name="ErrorHandler",t.default=a.default.getSingletonFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e,t=void 0;return e={supportsMediaSource:function(){var e="WebKitMediaSource"in window,t="MediaSource"in window;return e||t},supportsEncryptedMedia:function(){return t},supportsCodec:function(e){return!!("MediaSource"in window&&MediaSource.isTypeSupported(e))||!!("WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(e))},setEncryptedMediaSupported:function(e){t=e}},t=!1,e}o.__dashjs_factory_name="Capabilities",t.default=a.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(212)),i=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}function o(){var e=void 0;return{initialize:function(t){if(e=new r.default,!t)return null;var n=t.indexOf("#");if(-1!==n)for(var i=t.substr(n+1).split("&"),a=0,o=i.length;a<o;++a){var s=i[a],u=s.indexOf("=");if(-1!==u){var l=s.substring(0,u);e.hasOwnProperty(l)&&(e[l]=s.substr(u+1))}}},getURIFragmentData:function(){return e}}}o.__dashjs_factory_name="URIFragmentModel",t.default=i.default.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(5)),i=o(n(7)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=this.context,t=(0,r.default)(e).getInstance(),n=void 0;return{getValue:function(){return n},setValue:function(e){n=e,e&&t.trigger(i.default.MANIFEST_LOADED,{data:e})}}}s.__dashjs_factory_name="ManifestModel",t.default=a.default.getSingletonFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(100)),i=l(n(1)),a=l(n(4)),o=l(n(88)),s=l(n(101)),u=n(17);function l(e){return e&&e.__esModule?e:{default:e}}function c(){var e,t=void 0,n=void 0,i=void 0,l={scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"http://time.akamai.com/?iso&ms"},c=this.context,d=(0,s.default)(c).getInstance();function h(e){var t=void 0;for(t=0;t<i.length;t++)if(i[t].rulename===e)return t;return-1}function f(){return d.get().streaming.lowLatencyEnabled?d.get().streaming.liveDelay||3:d.get().streaming.liveDelay}function p(e,n){g(e,n);var i=new r.default;i.schemeIdUri=e,i.value=n,t.push(i)}function g(e,n){(0,u.checkParameterType)(e,"string"),(0,u.checkParameterType)(n,"string"),t.forEach((function(r,i){r.schemeIdUri===e&&r.value===n&&t.splice(i,1)}))}return e={getABRCustomRules:function(){return i},addABRCustomRule:function(e,t,n){if("string"!=typeof e||e!==o.default.ABANDON_FRAGMENT_RULES&&e!==o.default.QUALITY_SWITCH_RULES||"string"!=typeof t)throw a.default.BAD_ARGUMENT_ERROR;var r=h(t);-1===r?i.push({type:e,rulename:t,rule:n}):(i[r].type=e,i[r].rule=n)},removeABRCustomRule:function(e){if(e){var t=h(e);-1!==t&&i.splice(t,1)}else i=[]},getStableBufferTime:function(){if(d.get().streaming.lowLatencyEnabled)return.6*f();var e=d.get().streaming.stableBufferTime;return e>-1?e:d.get().streaming.fastSwitchEnabled?20:12},getRetryAttemptsForType:function(e){return d.get().streaming.lowLatencyEnabled?5*d.get().streaming.retryAttempts[e]:d.get().streaming.retryAttempts[e]},getRetryIntervalsForType:function(e){return d.get().streaming.lowLatencyEnabled?d.get().streaming.retryIntervals[e]/10:d.get().streaming.retryIntervals[e]},getLiveDelay:f,addUTCTimingSource:p,removeUTCTimingSource:g,getUTCTimingSources:function(){return t},clearDefaultUTCTimingSources:function(){t=[]},restoreDefaultUTCTimingSources:function(){p(l.scheme,l.value)},setXHRWithCredentialsForType:function e(t,r){t?n[t]=!!r:Object.keys(n).forEach((function(t){e(t,r)}))},getXHRWithCredentialsForType:function(e){var t=n[e];return void 0===t?n.default:t},getDefaultUtcTimingSource:function(){return l},reset:function(){}},t=[],n={default:!1},i=[],e}c.__dashjs_factory_name="MediaPlayerModel",t.default=i.default.getSingletonFactory(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"mixin",value:function(t,n,i){var a=void 0,o={};if(t)for(var s in n)n.hasOwnProperty(s)&&(a=n[s],s in t&&(t[s]===a||s in o&&o[s]===a)||("object"===r(t[s])&&null!==t[s]?t[s]=e.mixin(t[s],a,i):t[s]=i(a)));return t}},{key:"clone",value:function(t){if(!t||"object"!==(void 0===t?"undefined":r(t)))return t;var n=void 0;if(t instanceof Array){n=[];for(var i=0,a=t.length;i<a;++i)i in t&&n.push(e.clone(t[i]))}else n={};return e.mixin(n,t,e.clone)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(1)),i=s(n(5)),a=s(n(7)),o=s(n(6));function s(e){return e&&e.__esModule?e:{default:e}}function u(){var e=void 0,t=void 0,n=void 0,r=void 0,s=void 0,u=this.context,l=(0,i.default)(u).getInstance(),c=[];function d(){n&&(n.playbackRate=s||1,n.removeEventListener("canplay",d))}function h(e){n&&(n.readyState<=2&&e>0?n.addEventListener("canplay",d):n.playbackRate=e)}function f(){return c.length>0}function p(e){var t=c.indexOf(e),r=void 0;null!==e&&(-1!==t&&c.splice(t,1),n&&!1===f()&&0===n.playbackRate&&(h(s||1),n.paused||((r=document.createEvent("Event")).initEvent("playing",!0,!1),n.dispatchEvent(r))))}function g(){if(n&&f()&&0===n.playbackRate){var e=document.createEvent("Event");e.initEvent("waiting",!0,!1),n.dispatchEvent(e)}}function m(){return n?n.buffered:null}return e={initialize:function(){l.on(a.default.PLAYBACK_PLAYING,g,this)},setCurrentTime:function(e,t){if(n){if(n.currentTime==e)return;try{e=t?function(e){var t=m(),n=e,r=9999999999;if(t)for(var i=0;i<t.length;i++){var a=t.start(i),o=t.end(i),s=Math.abs(a-e),u=Math.abs(o-e);if(e>=a&&e<=o)return e;s<r&&(r=s,n=a),u<r&&(r=u,n=o)}return n}(e):e,n.currentTime=e}catch(t){0===n.readyState&&t.code===t.INVALID_STATE_ERR&&setTimeout((function(){n.currentTime=e}),400)}}},play:function(){if(n){n.autoplay=!0;var e=n.play();e&&e.catch&&"undefined"!=typeof Promise&&e.catch((function(e){"NotAllowedError"===e.name&&l.trigger(a.default.PLAYBACK_NOT_ALLOWED),t.warn("Caught pending play exception - continuing ("+e+")")}))}},isPaused:function(){return n?n.paused:null},pause:function(){n&&(n.pause(),n.autoplay=!1)},isSeeking:function(){return n?n.seeking:null},getTime:function(){return n?n.currentTime:null},getPlaybackRate:function(){return n?n.playbackRate:null},setPlaybackRate:h,getPlayedRanges:function(){return n?n.played:null},getEnded:function(){return n?n.ended:null},setStallState:function(e,t){!function(e,t){t?function(e){var t=void 0;if(null===e||n.seeking||-1!==c.indexOf(e))return;c.push(e),n&&1===c.length&&((t=document.createEvent("Event")).initEvent("waiting",!0,!1),s=n.playbackRate,h(0),n.dispatchEvent(t))}(e):p(e)}(e,t)},getElement:function(){return n},setElement:function(e){if(!(null==e||e&&/^(VIDEO|AUDIO)$/i.test(e.nodeName)))throw"element is not video or audio DOM type!";(n=e)&&(n.preload="auto")},setSource:function(e){n&&(e?n.src=e:(n.removeAttribute("src"),n.load()))},getSource:function(){return n?n.src:null},getTTMLRenderingDiv:function(){return r},setTTMLRenderingDiv:function(e){(r=e).style.position="absolute",r.style.display="flex",r.style.overflow="hidden",r.style.pointerEvents="none",r.style.top=0,r.style.left=0},getPlaybackQuality:function(){if(!n)return null;var e="webkitDroppedFrameCount"in n&&"webkitDecodedFrameCount"in n,t=null;return"getVideoPlaybackQuality"in n?t=n.getVideoPlaybackQuality():e&&(t={droppedVideoFrames:n.webkitDroppedFrameCount,totalVideoFrames:n.webkitDroppedFrameCount+n.webkitDecodedFrameCount,creationTime:new Date}),t},addEventListener:function(e,t){n&&n.addEventListener(e,t)},removeEventListener:function(e,t){n&&n.removeEventListener(e,t)},getReadyState:function(){return n?n.readyState:NaN},getBufferRange:m,getClientWidth:function(){return n?n.clientWidth:NaN},getClientHeight:function(){return n?n.clientHeight:NaN},getTextTracks:function(){return n?n.textTracks:[]},getTextTrack:function(e,t,r,i,a){if(n)for(var o=0;o<n.textTracks.length;o++)if(n.textTracks[o].kind===e&&(!t||n.textTracks[o].label==t)&&n.textTracks[o].language===r&&n.textTracks[o].isTTML===i&&n.textTracks[o].isEmbedded===a)return n.textTracks[o];return null},addTextTrack:function(e,t,r){return n?n.addTextTrack(e,t,r):null},appendChild:function(e){n&&(n.appendChild(e),void 0!==e.isTTML&&(n.textTracks[n.textTracks.length-1].isTTML=e.isTTML,n.textTracks[n.textTracks.length-1].isEmbedded=e.isEmbedded))},removeChild:function(e){n&&n.removeChild(e)},getVideoWidth:function(){return n?n.videoWidth:NaN},getVideoHeight:function(){return n?n.videoHeight:NaN},getVideoRelativeOffsetTop:function(){return n&&n.parentNode?n.getBoundingClientRect().top-n.parentNode.getBoundingClientRect().top:NaN},getVideoRelativeOffsetLeft:function(){return n&&n.parentNode?n.getBoundingClientRect().left-n.parentNode.getBoundingClientRect().left:NaN},reset:function(){l.off(a.default.PLAYBACK_PLAYING,g,this)}},t=(0,o.default)(u).getInstance().getLogger(e),e}u.__dashjs_factory_name="VideoModel",t.default=r.default.getSingletonFactory(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(6)),a=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var s=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}];function u(e){e=e||{};var t=this.context,n=e.settings,r=void 0,o=void 0,u=void 0;function l(e){if(void 0!==u)return u;u=!1;var t=void 0;try{"undefined"!=typeof window&&(t=window[e])}catch(e){return o.warn("DOMStorage access denied: "+e.message),u}if(!t||"localStorage"!==e&&"sessionStorage"!==e)return u;try{t.setItem("1","1"),t.removeItem("1"),u=!0}catch(e){o.warn("DOMStorage is supported, but cannot be used: "+e.message)}return u}function c(){return 6e5*Math.round((new Date).getTime()/6e5)}function d(e,t){return l(e)&&n.get().streaming[t+"CachingInfo"].enabled}function h(){if(!n)throw new Error(a.default.MISSING_CONFIG_ERROR)}return r={getSavedBitrateSettings:function(e){var t=NaN;if(h(),d("localStorage","lastBitrate")){var r="dashjs_?_bitrate".replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=n.get().streaming.lastBitrateCachingInfo.ttl||!1,s=parseFloat(i.bitrate);isNaN(s)||a?a&&localStorage.removeItem(r):(t=s,o.debug("Last saved bitrate for "+e+" was "+s))}catch(e){return null}}return t},setSavedBitrateSettings:function(e,t){if(d("localStorage","lastBitrate")&&t){var n="dashjs_?_bitrate".replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({bitrate:t.toFixed(3),timestamp:c()}))}catch(e){o.error(e.message)}}},getSavedMediaSettings:function(e){var t=null;if(h(),d("localStorage","lastMediaSettings")){var r="dashjs_?_settings".replace(/\?/,e);try{var i=JSON.parse(localStorage.getItem(r))||{},a=(new Date).getTime()-parseInt(i.timestamp,10)>=n.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;t=i.settings,a&&(localStorage.removeItem(r),t=null)}catch(e){return null}}return t},setSavedMediaSettings:function(e,t){if(d("localStorage","lastMediaSettings")){var n="dashjs_?_settings".replace(/\?/,e);try{localStorage.setItem(n,JSON.stringify({settings:t,timestamp:c()}))}catch(e){o.error(e.message)}}}},o=(0,i.default)(t).getInstance().getLogger(r),l("localStorage")&&s.forEach((function(e){var t=localStorage.getItem(e.oldKey);if(t){localStorage.removeItem(e.oldKey);try{localStorage.setItem(e.newKey,t)}catch(e){o.error(e.message)}}})),r}u.__dashjs_factory_name="DOMStorage";var l=r.default.getSingletonFactory(u);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(15)),i=d(n(219)),a=d(n(220)),o=d(n(221)),s=d(n(222)),u=d(n(103)),l=d(n(1)),c=d(n(223));function d(e){return e&&e.__esModule?e:{default:e}}function h(){var e,t=void 0,n=void 0,l=void 0,d=void 0,h=void 0,f=void 0,p=this.context;function g(e,i,a){var o,s=t.getAdaptationsForType(n[0].mpd.manifest,e,i);if(!s||0===s.length)return null;if(s.length>1&&a){var u=m(a,i);if(d[a.id]&&d[a.id][i])for(var l=0,c=s.length;l<c;l++)if(d[a.id][i].isMediaInfoEqual(u[l]))return s[l];for(var h=0,f=s.length;h<f;h++)if(o=s[h],t.getRolesForAdaptation(o).filter((function(e){return e.value===r.default.MAIN}))[0])return s[h]}return s[0]}function m(e,r,i){var a,o=n,s=i,u=[],c=void 0,d=void 0,f=void 0,p=void 0,g=void 0,m=void 0;if(s)S(),o=v(s);else{if(!(n.length>0))return u;s=n[0].mpd.manifest}var y=M(e,o);y&&(m=y.id);var _=t.getAdaptationsForType(s,e?e.index:null,r!==h.EMBEDDED_TEXT?r:h.VIDEO);if(!_||0===_.length)return u;for(l[m]=l[m]||t.getAdaptationsForPeriod(y),p=0,a=_.length;p<a;p++)if(c=_[p],f=t.getIndexForAdaptation(c,s,e.index),d=b(l[m][f]),r===h.EMBEDDED_TEXT){var T=d.accessibility.length;for(g=0;g<T;g++)if(d){var E=d.accessibility[g];if(0===E.indexOf("cea-608:")){var w=E.substring(8).split(";");if("CC"===w[0].substring(0,2))for(g=0;g<w.length;g++)d||(d=b.call(this,l[m][f])),A(d,w[g].substring(0,3),w[g].substring(4)),u.push(d),d=null;else for(g=0;g<w.length;g++)d||(d=b.call(this,l[m][f])),A(d,"CC"+(g+1),w[g]),u.push(d),d=null}else 0===E.indexOf("cea-608")&&(A(d,h.CC1,"eng"),u.push(d),d=null)}}else r===h.IMAGE?(d.type=h.IMAGE,u.push(d),d=null):d&&u.push(d);return u}function v(e){var n=y(e);return t.getRegularPeriods(n)}function y(e){var n=T(e);return t.getMpd(n)}function _(){n=[],l={},d={}}function T(e){return e||(n.length>0?n[0].mpd.manifest:null)}function E(e){return e&&e.streamInfo&&void 0!==e.streamInfo.id&&l[e.streamInfo.id]?l[e.streamInfo.id][e.index]:null}function M(e,t){for(var n=t.length,r=0;r<n;r++){var i=t[r];if(e&&e.id===i.id)return i}return null}function b(e){if(!e)return null;var n,r=new a.default,i=e.period.mpd.manifest.Period_asArray[e.period.index].AdaptationSet_asArray[e.index];return r.id=e.id,r.index=e.index,r.type=e.type,r.streamInfo=w(e.period),r.representationCount=t.getRepresentationCount(i),r.labels=t.getLabelsForAdaptation(i),r.lang=t.getLanguageForAdaptation(i),n=t.getViewpointForAdaptation(i),r.viewpoint=n?n.value:void 0,r.accessibility=t.getAccessibilityForAdaptation(i).map((function(e){var t=e.value,n=t;return e.schemeIdUri&&e.schemeIdUri.search("cea-608")>=0&&void 0!==f&&(n=t?"cea-608:"+t:"cea-608",r.embeddedCaptions=!0),n})),r.audioChannelConfiguration=t.getAudioChannelConfigurationForAdaptation(i).map((function(e){return e.value})),0===r.audioChannelConfiguration.length&&Array.isArray(i.Representation_asArray)&&i.Representation_asArray.length>0&&(r.audioChannelConfiguration=t.getAudioChannelConfigurationForRepresentation(i.Representation_asArray[0]).map((function(e){return e.value}))),r.roles=t.getRolesForAdaptation(i).map((function(e){return e.value})),r.codec=t.getCodec(i),r.mimeType=t.getMimeType(i),r.contentProtection=t.getContentProtectionData(i),r.bitrateList=t.getBitrateListForAdaptation(i),r.contentProtection&&r.contentProtection.forEach((function(e){e.KID=t.getKID(e)})),r.isText=t.getIsTextTrack(r.mimeType),r.supplementalProperties=t.getSupplementalPropperties(i),r}function A(e,t,n){e.id=t,e.index=100+parseInt(t.substring(2,3)),e.type=h.EMBEDDED_TEXT,e.codec="cea-608-in-SEI",e.isText=!0,e.isEmbedded=!0,e.lang=n,e.roles=["caption"]}function w(e){var n,r,i=new o.default;return i.id=e.id,i.index=e.index,i.start=e.start,i.duration=e.duration,i.manifestInfo=(n=e.mpd,(r=new s.default).DVRWindowSize=n.timeShiftBufferDepth,r.loadedTime=n.manifest.loadedTime,r.availableFrom=n.availabilityStartTime,r.minBufferTime=n.manifest.minBufferTime,r.maxFragmentDuration=n.maxSegmentDuration,r.duration=t.getDuration(n.manifest),r.isDynamic=t.getIsDynamic(n.manifest),r.serviceDescriptions=t.getServiceDescriptions(n.manifest),r),i.isLast=1===e.mpd.manifest.Period_asArray.length||Math.abs(i.start+i.duration-i.manifestInfo.duration)<1,i}function S(){if(!h)throw new Error("setConfig function has to be called previously")}function x(e){return n.length>0?n[0].mpd.manifest.Period_asArray[e]:null}function D(e,t,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=void 0;if(e)for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)for(a=r[o].Representation_asArray,s=0;s<a.length;s+=1)if(t===(i=a[s]).id)return n?s:i;return null}return e={getBandwidthForRepresentation:function(e,t){var n;return(n=D(x(t),e))?n.bandwidth:null},getIndexForRepresentation:function(e,t){return function(e,t){var n=D(e,t,!0);return null!==n?n:-1}(x(t),e)},getMaxIndexForBufferType:function(e,n){return function(e,n){var r,i=void 0,a=void 0,o=void 0;if(!e||!n)return-1;for(r=e.AdaptationSet_asArray,o=0;o<r.length;o+=1)if(i=r[o],a=i.Representation_asArray,t.getIsTypeOf(i,n))return a.length;return-1}(x(n),e)},convertDataToRepresentationInfo:function(e){if(e){var n=new i.default,r=e.adaptation.period.mpd.manifest.Period_asArray[e.adaptation.period.index].AdaptationSet_asArray[e.adaptation.index],a=t.getRepresentationFor(e.index,r);return n.id=e.id,n.quality=e.index,n.bandwidth=t.getBandwidth(a),n.DVRWindow=e.segmentAvailabilityRange,n.fragmentDuration=e.segmentDuration||(e.segments&&e.segments.length>0?e.segments[0].duration:NaN),n.MSETimeOffset=e.MSETimeOffset,n.useCalculatedLiveEdgeTime=e.useCalculatedLiveEdgeTime,n.mediaInfo=b(e.adaptation),n}return null},getDataForMedia:E,getStreamsInfo:function(e,t){var r=[],i=n;if(e&&(S(),i=v(e)),i.length>0){(!t||t>i.length)&&(t=i.length);for(var a=0;a<t;a++)r.push(w(i[a]))}return r},getMediaInfoForType:function(e,r){if(0===n.length||!e)return null;var i=M(e,n);if(!i)return null;var a=i.id;l[a]=l[a]||t.getAdaptationsForPeriod(i);var o=g(e.index,r,e);if(!o)return null;var s=t.getIndexForAdaptation(o,n[0].mpd.manifest,e.index);return b(l[a][s])},getAllMediaInfoForType:m,getAdaptationForType:g,getRealAdaptation:function(e,r){var i,a=void 0,o=M(e,n);return i=r?r.id:null,n.length>0&&o&&(a=i?t.getAdaptationForId(i,n[0].mpd.manifest,o.index):t.getAdaptationForIndex(r.index,n[0].mpd.manifest,o.index)),a},getVoRepresentations:function(e){var n=E(e);return t.getRepresentationsForAdaptation(n)},getEventsFor:function(e,r){var s=[];if(n.length>0){var u=n[0].mpd.manifest;e instanceof o.default?s=t.getEventsForPeriod(M(e,n)):e instanceof a.default?s=t.getEventStreamForAdaptationSet(u,E(e)):e instanceof i.default&&(s=t.getEventStreamForRepresentation(u,r))}return s},getEvent:function(e,t,n){if(!e||!t)return null;var r=new u.default,i=e.scheme_id_uri,a=e.value,o=e.timescale,s=e.presentation_time_delta,l=e.event_duration,c=e.id,d=e.message_data,h=n*o+s;return t[i+"/"+a]?(r.eventStream=t[i+"/"+a],r.eventStream.value=a,r.eventStream.timescale=o,r.duration=l,r.id=c,r.presentationTime=h,r.messageData=d,r.presentationTimeDelta=s,r):null},setConfig:function(e){e&&(e.constants&&(h=e.constants),e.cea608parser&&(f=e.cea608parser),e.errHandler&&t.setConfig({errHandler:e.errHandler}),e.BASE64&&t.setConfig({BASE64:e.BASE64}))},updatePeriods:function(e){if(!e)return null;S(),n=v(e),l={}},setCurrentMediaInfo:function(e,t,n){d[e]=d[e]||{},d[e][t]=d[e][t]||{},d[e][t]=n},getUseCalculatedLiveEdgeTimeForMediaInfo:function(e){var n=E(e);return t.getUseCalculatedLiveEdgeTimeForAdaptation(n)},getIsTextTrack:function(e){return t.getIsTextTrack(e)},getUTCTimingSources:function(){var e=T();return t.getUTCTimingSources(e)},getSuggestedPresentationDelay:function(){var e=n.length>0?n[0].mpd:null;return t.getSuggestedPresentationDelay(e)},getAvailabilityStartTime:function(e){var n=y(e);return t.getAvailabilityStartTime(n)},getIsDynamic:function(e){var n=T(e);return t.getIsDynamic(n)},getDuration:function(e){var n=T(e);return t.getDuration(n)},getRegularPeriods:v,getLocation:function(e){return t.getLocation(e)},getManifestUpdatePeriod:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.getManifestUpdatePeriod(e,n)},getIsDVB:function(e){return t.hasProfile(e,"urn:dvb:dash:profile:dvb-dash:2014")},getBaseURLsFromElement:function(e){return t.getBaseURLsFromElement(e)},getRepresentationSortFunction:function(){return t.getRepresentationSortFunction()},getCodec:function(e,n,r){return t.getCodec(e,n,r)},reset:_},t=(0,c.default)(p).getInstance(),_(),e}h.__dashjs_factory_name="DashAdapter",t.default=l.default.getSingletonFactory(h)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.quality=null,this.DVRWindow=null,this.fragmentDuration=null,this.mediaInfo=null,this.MSETimeOffset=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.type=null,this.streamInfo=null,this.representationCount=0,this.lang=null,this.viewpoint=null,this.accessibility=null,this.audioChannelConfiguration=null,this.roles=null,this.codec=null,this.mimeType=null,this.contentProtection=null,this.isText=!1,this.KID=null,this.bitrateList=null}return r(e,[{key:"isMediaInfoEqual",value:function(e){if(!e)return!1;var t=this.id===e.id,n=this.viewpoint===e.viewpoint,r=this.lang===e.lang,i=this.roles.toString()===e.roles.toString(),a=this.accessibility.toString()===e.accessibility.toString(),o=this.audioChannelConfiguration.toString()===e.audioChannelConfiguration.toString();return t&&n&&r&&i&&a&&o}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.DVRWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=T(n(4)),i=T(n(15)),a=T(n(224)),o=T(n(225)),s=T(n(226)),u=T(n(227)),l=T(n(100)),c=T(n(103)),d=T(n(96)),h=T(n(228)),f=T(n(95)),p=T(n(18)),g=T(n(1)),m=T(n(6)),v=T(n(8)),y=T(n(9)),_=n(92);function T(e){return e&&e.__esModule?e:{default:e}}function E(){var e=void 0,t=void 0,n=void 0,g=void 0,T=this.context,E=(0,p.default)(T).getInstance(),M=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function b(e,t){var n=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=!1,d=!1;if(!e)throw new Error("adaptation is not defined");if(!t)throw new Error("type is not defined");if(e.hasOwnProperty("ContentComponent_asArray")&&(s=e.ContentComponent_asArray),u=t!==r.default.TEXT?new RegExp(t):new RegExp("(vtt|ttml)"),e.Representation_asArray&&e.Representation_asArray.length&&e.Representation_asArray.length>0){var h=O(e.Representation_asArray[0]);if(h&&h.length>0&&_.THUMBNAILS_SCHEME_ID_URIS.indexOf(h[0].schemeIdUri)>=0)return t===r.default.IMAGE;if(e.Representation_asArray[0].hasOwnProperty(i.default.CODECS)&&(0===(l=e.Representation_asArray[0].codecs).search(r.default.STPP)||0===l.search(r.default.WVTT)))return t===r.default.FRAGMENTED_TEXT}if(s){if(s.length>1)return t===r.default.MUXED;s[0]&&s[0].contentType===t&&(c=!0,d=!0)}if(e.hasOwnProperty(i.default.MIME_TYPE)&&(c=u.test(e.mimeType),d=!0),!d)for(n=0,a=e.Representation_asArray&&e.Representation_asArray.length?e.Representation_asArray.length:0;!d&&n<a;)(o=e.Representation_asArray[n]).hasOwnProperty(i.default.MIME_TYPE)&&(c=u.test(o.mimeType),d=!0),n++;return c}function A(e){return b(e,r.default.AUDIO)}function w(e){return b(e,r.default.VIDEO)}function S(e){return b(e,r.default.FRAGMENTED_TEXT)}function x(e){return b(e,r.default.IMAGE)}function D(e){return"text/vtt"===e||"application/ttml+xml"===e}function I(){return function(e,t){return e.bandwidth-t.bandwidth}}function C(e){return e&&Array.isArray(e.Representation_asArray)&&e.Representation_asArray.sort((function(e,t){return e.bandwidth-t.bandwidth})),e}function N(e,t){return e&&e.Period_asArray&&M(t)&&e.Period_asArray[t]?e.Period_asArray[t].AdaptationSet_asArray:[]}function L(e){var t=!1;return e&&e.hasOwnProperty("type")&&(t=e.type===i.default.DYNAMIC),t}function O(e){return e&&e.EssentialProperty_asArray&&e.EssentialProperty_asArray.length?e.EssentialProperty_asArray.map((function(e){return{schemeIdUri:e.schemeIdUri,value:e.value}})):null}function R(e){if(e&&e.period&&M(e.period.index)){var t=e.period.mpd.manifest.Period_asArray[e.period.index];if(t&&t.AdaptationSet_asArray&&M(e.index))return C(t.AdaptationSet_asArray[e.index])}}function j(e){var t=e.S_asArray[e.S_asArray.length-1];return!t.hasOwnProperty("r")||t.r>=0}function P(e,t){if(!e)throw new Error("Period cannot be null or undefined");var n=s.default.DEFAULT_ID+"_"+t;return e.hasOwnProperty(i.default.ID)&&e.id.length>0&&"__proto__"!==e.id&&(n=e.id),n}function k(e,t){var n=[],a=void 0;if(!e)return n;for(a=0;a<e.length;a++){var o=new h.default;if(o.timescale=1,o.representation=t,!e[a].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");o.schemeIdUri=e[a].schemeIdUri,e[a].hasOwnProperty(i.default.TIMESCALE)&&(o.timescale=e[a].timescale),e[a].hasOwnProperty(i.default.VALUE)&&(o.value=e[a].value),n.push(o)}return n}function U(e){var t=[],n=e.BaseURL_asArray||[e.baseUri],r=!1;return n.some((function(n){if(n){var a=new d.default,o=n.__text||n;return E.isRelative(o)&&(r=!0,e.baseUri&&(o=E.resolve(o,e.baseUri))),a.url=o,n.hasOwnProperty(i.default.SERVICE_LOCATION)&&n.serviceLocation.length?a.serviceLocation=n.serviceLocation:a.serviceLocation=o,n.hasOwnProperty(i.default.DVB_PRIORITY)&&(a.dvb_priority=n[i.default.DVB_PRIORITY]),n.hasOwnProperty(i.default.DVB_WEIGHT)&&(a.dvb_weight=n[i.default.DVB_WEIGHT]),n.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)&&(a.availabilityTimeOffset=n[i.default.AVAILABILITY_TIME_OFFSET]),n.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)&&(a.availabilityTimeComplete="false"!==n[i.default.AVAILABILITY_TIME_COMPLETE]),t.push(a),r}})),t}return e={getIsTypeOf:b,getIsTextTrack:D,getLanguageForAdaptation:function(e){var t="";return e&&e.hasOwnProperty(i.default.LANG)&&(t=e.lang.replace(/[^A-Za-z0-9-]/g,"")),t},getViewpointForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.VIEWPOINT)?e.Viewpoint:null},getRolesForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ROLE_ASARRAY)?e.Role_asArray:[]},getAccessibilityForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.ACCESSIBILITY_ASARRAY)?e.Accessibility_asArray:[]},getAudioChannelConfigurationForAdaptation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAudioChannelConfigurationForRepresentation:function(e){return e&&e.hasOwnProperty(i.default.AUDIOCHANNELCONFIGURATION_ASARRAY)?e.AudioChannelConfiguration_asArray:[]},getAdaptationForIndex:function(e,t,n){var r=N(t,n);return r.length>0&&M(e)?r[e]:null},getIndexForAdaptation:function(e,t,n){if(!e)return-1;for(var r=N(t,n),i=0;i<r.length;i++){if((0,f.default)(T).getInstance().areEqual(r[i],e))return i}return-1},getAdaptationForId:function(e,t,n){var r,a=N(t,n),o=void 0;for(o=0,r=a.length;o<r;o++)if(a[o].hasOwnProperty(i.default.ID)&&a[o].id===e)return a[o];return null},getAdaptationsForType:function(e,t,n){var r,i=N(e,t),a=void 0,o=[];for(a=0,r=i.length;a<r;a++)b(i[a],n)&&o.push(C(i[a]));return o},getCodec:function(e,t,n){var r=null;if(e&&e.Representation_asArray&&e.Representation_asArray.length>0){var i=M(t)&&t>=0&&t<e.Representation_asArray.length?e.Representation_asArray[t]:e.Representation_asArray[0];i&&(r=i.mimeType+';codecs="'+i.codecs+'"',n&&void 0!==i.width&&(r+=';width="'+i.width+'";height="'+i.height+'"'))}return r},getMimeType:function(e){return e&&e.Representation_asArray&&e.Representation_asArray.length>0?e.Representation_asArray[0].mimeType:null},getKID:function(e){return e&&e.hasOwnProperty(i.default.CENC_DEFAULT_KID)?e[i.default.CENC_DEFAULT_KID]:null},getLabelsForAdaptation:function(e){if(!e||!Array.isArray(e.Label_asArray))return[];for(var t=[],n=0;n<e.Label_asArray.length;n++)t.push({lang:e.Label_asArray[n].lang,text:e.Label_asArray[n].__text||e.Label_asArray[n]});return t},getContentProtectionData:function(e){return e&&e.hasOwnProperty(i.default.CONTENTPROTECTION_ASARRAY)&&0!==e.ContentProtection_asArray.length?e.ContentProtection_asArray:null},getIsDynamic:L,hasProfile:function(e,t){var n=!1;return e&&e.profiles&&e.profiles.length>0&&(n=-1!==e.profiles.indexOf(t)),n},getDuration:function(e){return e&&e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)?e.mediaPresentationDuration:e&&"dynamic"==e.type?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE},getBandwidth:function(e){return e&&e.bandwidth?e.bandwidth:NaN},getManifestUpdatePeriod:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=NaN;return e&&e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(n=e.minimumUpdatePeriod),isNaN(n)?n:Math.max(n-t,1)},getRepresentationCount:function(e){return e&&Array.isArray(e.Representation_asArray)?e.Representation_asArray.length:0},getBitrateListForAdaptation:function(e){var t=C(e);return(t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray:[]).map((function(e){return{bandwidth:e.bandwidth,width:e.width||0,height:e.height||0,scanType:e.scanType||null}}))},getRepresentationFor:function(e,t){return t&&t.Representation_asArray&&t.Representation_asArray.length>0&&M(e)?t.Representation_asArray[e]:null},getRepresentationsForAdaptation:function(e){var t,n,r=[],o=R(e),s=void 0,u=void 0;if(o&&o.Representation_asArray){if(e&&e.period&&M(e.period.index)){var l=U(e.period.mpd.manifest);l&&(u=l[0])}for(var c=0,d=o.Representation_asArray.length;c<d;++c){var h=o.Representation_asArray[c],f=new a.default;if(f.index=c,f.adaptation=e,h.hasOwnProperty(i.default.ID)&&(f.id=h.id),h.hasOwnProperty(i.default.CODECS)&&(f.codecs=h.codecs),h.hasOwnProperty(i.default.CODEC_PRIVATE_DATA)&&(f.codecPrivateData=h.codecPrivateData),h.hasOwnProperty(i.default.BANDWITH)&&(f.bandwidth=h.bandwidth),h.hasOwnProperty(i.default.WIDTH)&&(f.width=h.width),h.hasOwnProperty(i.default.HEIGHT)&&(f.height=h.height),h.hasOwnProperty(i.default.SCAN_TYPE)&&(f.scanType=h.scanType),h.hasOwnProperty(i.default.MAX_PLAYOUT_RATE)&&(f.maxPlayoutRate=h.maxPlayoutRate),h.hasOwnProperty(i.default.SEGMENT_BASE)?(s=h.SegmentBase,f.segmentInfoType=i.default.SEGMENT_BASE):h.hasOwnProperty(i.default.SEGMENT_LIST)?(s=h.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)?(f.segmentInfoType=i.default.SEGMENT_TIMELINE,f.useCalculatedLiveEdgeTime=j(s.SegmentTimeline)):(f.segmentInfoType=i.default.SEGMENT_LIST,f.useCalculatedLiveEdgeTime=!0):h.hasOwnProperty(i.default.SEGMENT_TEMPLATE)?((s=h.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE)?(f.segmentInfoType=i.default.SEGMENT_TIMELINE,f.useCalculatedLiveEdgeTime=j(s.SegmentTimeline)):f.segmentInfoType=i.default.SEGMENT_TEMPLATE,s.hasOwnProperty(i.default.INITIALIZATION_MINUS)&&(f.initialization=s.initialization.split("$Bandwidth$").join(h.bandwidth).split("$RepresentationID$").join(h.id))):f.segmentInfoType=i.default.BASE_URL,f.essentialProperties=O(h),s){if(s.hasOwnProperty(i.default.INITIALIZATION)){var p=s.Initialization;p.hasOwnProperty(i.default.SOURCE_URL)&&(f.initialization=p.sourceURL),p.hasOwnProperty(i.default.RANGE)&&(f.range=p.range)}else h.hasOwnProperty(i.default.MIME_TYPE)&&D(h.mimeType)&&(f.range=0);s.hasOwnProperty(i.default.TIMESCALE)&&(f.timescale=s.timescale),s.hasOwnProperty(i.default.DURATION)&&(f.segmentDuration=s.duration/f.timescale),s.hasOwnProperty(i.default.MEDIA)&&(f.media=s.media),s.hasOwnProperty(i.default.START_NUMBER)&&(f.startNumber=s.startNumber),s.hasOwnProperty(i.default.INDEX_RANGE)&&(f.indexRange=s.indexRange),s.hasOwnProperty(i.default.PRESENTATION_TIME_OFFSET)&&(f.presentationTimeOffset=s.presentationTimeOffset/f.timescale),s.hasOwnProperty(i.default.AVAILABILITY_TIME_OFFSET)?f.availabilityTimeOffset=s.availabilityTimeOffset:u&&void 0!==u.availabilityTimeOffset&&(f.availabilityTimeOffset=u.availabilityTimeOffset),s.hasOwnProperty(i.default.AVAILABILITY_TIME_COMPLETE)?f.availabilityTimeComplete="false"!==s.availabilityTimeComplete:u&&void 0!==u.availabilityTimeComplete&&(f.availabilityTimeComplete=u.availabilityTimeComplete)}f.MSETimeOffset=(n=void 0,void 0,n=(t=f).presentationTimeOffset,t.adaptation.period.start-n),f.path=[e.period.index,e.index,c],r.push(f)}}return r},getAdaptationsForPeriod:function(e){var t=e&&M(e.index)?e.mpd.manifest.Period_asArray[e.index]:null,n=[],a=void 0,s=void 0,u=void 0;if(t&&t.AdaptationSet_asArray)for(u=0;u<t.AdaptationSet_asArray.length;u++)s=t.AdaptationSet_asArray[u],a=new o.default,s.hasOwnProperty(i.default.ID)&&(a.id=s.id),a.index=u,a.period=e,b(s,r.default.MUXED)?a.type=r.default.MUXED:A(s)?a.type=r.default.AUDIO:w(s)?a.type=r.default.VIDEO:S(s)?a.type=r.default.FRAGMENTED_TEXT:x(s)?a.type=r.default.IMAGE:a.type=r.default.TEXT,n.push(a);return n},getRegularPeriods:function(e){var a,o=!!e&&L(e.manifest),u=[],l=null,c=null,d=null,h=null,f=void 0;for(f=0,a=e&&e.manifest&&e.manifest.Period_asArray?e.manifest.Period_asArray.length:0;f<a;f++)(c=e.manifest.Period_asArray[f]).hasOwnProperty(i.default.START)?(h=new s.default).start=c.start:null!==l&&l.hasOwnProperty(i.default.DURATION)&&null!==d?(h=new s.default).start=parseFloat((d.start+d.duration).toFixed(5)):0!==f||o||((h=new s.default).start=0),null!==d&&isNaN(d.duration)&&(null!==h?d.duration=parseFloat((h.start-d.start).toFixed(5)):t.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),null!==h&&(h.id=P(c,f),h.index=f,h.mpd=e,c.hasOwnProperty(i.default.DURATION)&&(h.duration=c.duration),u.push(h),l=c,d=h),c=null,h=null;return 0===u.length?u:(null!==d&&isNaN(d.duration)&&(d.duration=parseFloat((function(e){!function(){if(!n||!n.hasOwnProperty("error"))throw new Error(r.default.MISSING_CONFIG_ERROR)}();var t=L(e.mpd.manifest),i=void 0;e.mpd.manifest.mediaPresentationDuration?i=e.mpd.manifest.mediaPresentationDuration:e.duration?i=e.duration:t?i=Number.POSITIVE_INFINITY:n.error(new v.default(y.default.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",e));return i}(d)-d.start).toFixed(5))),u)},getMpd:function(e){var t=new u.default;return e&&(t.manifest=e,e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)?t.availabilityStartTime=new Date(e.availabilityStartTime.getTime()):e.loadedTime&&(t.availabilityStartTime=new Date(e.loadedTime.getTime())),e.hasOwnProperty(i.default.AVAILABILITY_END_TIME)&&(t.availabilityEndTime=new Date(e.availabilityEndTime.getTime())),e.hasOwnProperty(i.default.MINIMUM_UPDATE_PERIOD)&&(t.minimumUpdatePeriod=e.minimumUpdatePeriod),e.hasOwnProperty(i.default.MEDIA_PRESENTATION_DURATION)&&(t.mediaPresentationDuration=e.mediaPresentationDuration),e.hasOwnProperty(r.default.SUGGESTED_PRESENTATION_DELAY)&&(t.suggestedPresentationDelay=e.suggestedPresentationDelay),e.hasOwnProperty(i.default.TIMESHIFT_BUFFER_DEPTH)&&(t.timeShiftBufferDepth=e.timeShiftBufferDepth),e.hasOwnProperty(i.default.MAX_SEGMENT_DURATION)&&(t.maxSegmentDuration=e.maxSegmentDuration)),t},getEventsForPeriod:function(e){var t=e&&e.mpd&&e.mpd.manifest?e.mpd.manifest:null,n=t?t.Period_asArray:null,a=n&&e&&M(e.index)?n[e.index].EventStream_asArray:null,o=[],s=void 0,u=void 0;if(a)for(s=0;s<a.length;s++){var l=new h.default;if(l.period=e,l.timescale=1,!a[s].hasOwnProperty(r.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(l.schemeIdUri=a[s].schemeIdUri,a[s].hasOwnProperty(i.default.TIMESCALE)&&(l.timescale=a[s].timescale),a[s].hasOwnProperty(i.default.VALUE)&&(l.value=a[s].value),u=0;a[s].Event_asArray&&u<a[s].Event_asArray.length;u++){var d=new c.default;d.presentationTime=0,d.eventStream=l,a[s].Event_asArray[u].hasOwnProperty(i.default.PRESENTATION_TIME)&&(d.presentationTime=a[s].Event_asArray[u].presentationTime),a[s].Event_asArray[u].hasOwnProperty(i.default.DURATION)&&(d.duration=a[s].Event_asArray[u].duration),a[s].Event_asArray[u].hasOwnProperty(i.default.ID)&&(d.id=a[s].Event_asArray[u].id),a[s].Event_asArray[u].Signal&&a[s].Event_asArray[u].Signal.Binary?d.messageData=g.decodeArray(a[s].Event_asArray[u].Signal.Binary.toString()):d.messageData=a[s].Event_asArray[u].messageData||a[s].Event_asArray[u].__text,o.push(d)}}return o},getEventStreamForAdaptationSet:function(e,t){var n=void 0,r=void 0,i=void 0;return e&&e.Period_asArray&&t&&t.period&&M(t.period.index)&&(r=e.Period_asArray[t.period.index])&&r.AdaptationSet_asArray&&M(t.index)&&(i=r.AdaptationSet_asArray[t.index])&&(n=i.InbandEventStream_asArray),k(n,null)},getEventStreamForRepresentation:function(e,t){var n=void 0,r=void 0,i=void 0,a=void 0;return e&&e.Period_asArray&&t&&t.adaptation&&t.adaptation.period&&M(t.adaptation.period.index)&&(r=e.Period_asArray[t.adaptation.period.index])&&r.AdaptationSet_asArray&&M(t.adaptation.index)&&(i=r.AdaptationSet_asArray[t.adaptation.index])&&i.Representation_asArray&&M(t.index)&&(a=i.Representation_asArray[t.index])&&(n=a.InbandEventStream_asArray),k(n,t)},getUTCTimingSources:function(e){var t=L(e),n=!!e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME),a=e?e.UTCTiming_asArray:null,o=[];return(t||n)&&a&&a.forEach((function(e){var t=new l.default;e.hasOwnProperty(r.default.SCHEME_ID_URI)&&(t.schemeIdUri=e.schemeIdUri,e.hasOwnProperty(i.default.VALUE)&&(t.value=e.value.toString(),o.push(t)))})),o},getBaseURLsFromElement:U,getRepresentationSortFunction:I,getLocation:function(e){if(e&&e.hasOwnProperty(r.default.LOCATION))return e.Location=e.Location_asArray[0],e.Location},getUseCalculatedLiveEdgeTimeForAdaptation:function(e){var t=R(e),n=t&&Array.isArray(t.Representation_asArray)?t.Representation_asArray[0]:null,r=void 0;if(n){if(n.hasOwnProperty(i.default.SEGMENT_LIST))return!(r=n.SegmentList).hasOwnProperty(i.default.SEGMENT_TIMELINE)||j(r.SegmentTimeline);if(n.hasOwnProperty(i.default.SEGMENT_TEMPLATE)&&(r=n.SegmentTemplate).hasOwnProperty(i.default.SEGMENT_TIMELINE))return j(r.SegmentTimeline)}return!1},getSuggestedPresentationDelay:function(e){return e&&e.hasOwnProperty(i.default.SUGGESTED_PRESENTATION_DELAY)?e.suggestedPresentationDelay:null},getAvailabilityStartTime:function(e){return e&&e.hasOwnProperty(i.default.AVAILABILITY_START_TIME)&&null!==e.availabilityStartTime?e.availabilityStartTime.getTime():null},getServiceDescriptions:function(e){var t=[];if(e&&e.hasOwnProperty(i.default.SERVICE_DESCRIPTION)){var n=!0,a=!1,o=void 0;try{for(var s,u=e.ServiceDescription_asArray[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value,c=void 0,d=void 0,h=void 0,f=void 0;for(var p in l)l.hasOwnProperty(p)&&(p===i.default.ID?c=l[p]:p===i.default.SERVICE_DESCRIPTION_SCOPE?d=l[p].schemeIdUri:p===i.default.SERVICE_DESCRIPTION_LATENCY?h={target:l[p].target,max:l[p].max,min:l[p].min}:p===i.default.SERVICE_DESCRIPTION_PLAYBACK_RATE&&(f={max:l[p].max,min:l[p].min}));d===r.default.SERVICE_DESCRIPTION_LL_SCHEME&&(h||f)&&t.push({id:c,schemeIdUri:d,latency:h,playbackRate:f})}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}}return t},getSupplementalPropperties:function(e){var t={};if(e&&e.hasOwnProperty(i.default.SUPPLEMENTAL_PROPERTY)){var n=!0,a=!1,o=void 0;try{for(var s,u=e.SupplementalProperty_asArray[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var l=s.value;l.hasOwnProperty(r.default.SCHEME_ID_URI)&&l.hasOwnProperty(i.default.VALUE)&&(t[l[r.default.SCHEME_ID_URI]]=l[i.default.VALUE])}}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}}return t},setConfig:function(e){e&&(e.errHandler&&(n=e.errHandler),e.BASE64&&(g=e.BASE64))}},t=(0,m.default)(T).getInstance().getLogger(e),e}E.__dashjs_factory_name="DashManifestModel",t.default=g.default.getSingletonFactory(E)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(15),o=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.adaptation=null,this.segmentInfoType=null,this.initialization=null,this.codecs=null,this.codecPrivateData=null,this.segmentDuration=NaN,this.timescale=1,this.startNumber=1,this.indexRange=null,this.range=null,this.presentationTimeOffset=0,this.MSETimeOffset=NaN,this.segmentAvailabilityRange=null,this.availableSegmentsNumber=0,this.bandwidth=NaN,this.width=NaN,this.height=NaN,this.scanType=null,this.maxPlayoutRate=NaN,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0}return i(e,[{key:"hasInitialization",value:function(){return null!==this.initialization||null!==this.range}},{key:"hasSegments",value:function(){return this.segmentInfoType!==o.default.BASE_URL&&this.segmentInfoType!==o.default.SEGMENT_BASE&&!this.indexRange}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.period=null,this.index=-1,this.type=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null};r.DEFAULT_ID="defaultId",t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.manifest=null,this.suggestedPresentationDelay=0,this.availabilityStartTime=null,this.availabilityEndTime=Number.POSITIVE_INFINITY,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.minimumUpdatePeriod=NaN,this.mediaPresentationDuration=NaN}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri=""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(4)),i=n(11),a=c(n(1)),o=c(n(14)),s=c(n(230)),u=c(n(231)),l=n(58);function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t,n=this.context,a=void 0,c=void 0,d=void 0,h=e.metricsModel;function f(e,t,n){return m(h.getMetricsFor(e,t),n)}function p(e,t){var n=h.getMetricsFor(e,t);if(!n)return null;var r=n.HttpList,i=null,a=void 0;if(!r||r.length<=0)return null;for(a=r.length-1;a>=0;){if(r[a].responsecode){i=r[a];break}a--}return i}function g(e){var t=h.getMetricsFor(e,!0);return t&&t.HttpList?t.HttpList:[]}function m(e,t){if(!e)return null;var n=e[t];return!n||n.length<=0?null:n[n.length-1]}function v(e){var t={};if(!e)return t;for(var n=e.trim().split("\r\n"),r=0,i=n.length;r<i;r++){var a=n[r],o=a.indexOf(": ");o>0&&(t[a.substring(0,o)]=a.substring(o+2))}return t}return t={getCurrentRepresentationSwitch:function(e,t){return m(h.getMetricsFor(e,t),o.default.TRACK_SWITCH)},getLatestBufferInfoVO:f,getCurrentBufferLevel:function(e,t){var n=f(e,t,o.default.BUFFER_LEVEL);return n?s.default.round10(n.level/1e3,-3):0},getCurrentHttpRequest:p,getHttpRequests:g,getCurrentDroppedFrames:function(){return m(h.getMetricsFor(r.default.VIDEO,!0),o.default.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(e){return m(h.getMetricsFor(e,!0),o.default.SCHEDULING_INFO)},getCurrentDVRInfo:function(e){return m(e?h.getMetricsFor(e,!0):h.getMetricsFor(r.default.VIDEO,!0)||h.getMetricsFor(r.default.AUDIO,!0),o.default.DVR_INFO)},getCurrentManifestUpdate:function(){return m(h.getMetricsFor(r.default.STREAM),o.default.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(e,t){var n={},r=p(e,!0);return r&&(n=v(r._responseHeaders)),void 0===n[t]?null:n[t]},getLatestMPDRequestHeaderValueByID:function(e){var t,n={},a=void 0,o=void 0;for(o=(t=g(r.default.STREAM)).length-1;o>=0;o--)if((a=t[o]).type===i.HTTPRequest.MPD_TYPE){n=v(a._responseHeaders);break}return void 0===n[e]?null:n[e]},addRepresentationSwitch:function(e,t,n,r,i){h.addRepresentationSwitch(e,t,n,r,i)},addDVRInfo:function(e,t,n,r){h.addDVRInfo(e,t,n,r)},updateManifestUpdateInfo:function(e){var t=this.getCurrentManifestUpdate();h.updateManifestUpdateInfo(t,e)},addManifestUpdateStreamInfo:function(e){if(e){var t=this.getCurrentManifestUpdate();h.addManifestUpdateStreamInfo(t,e.id,e.index,e.start,e.duration)}},addManifestUpdateRepresentationInfo:function(e,t){if(e){var n=this.getCurrentManifestUpdate();h.addManifestUpdateRepresentationInfo(n,e.id,e.index,e.streamIndex,t,e.presentationTimeOffset,e.startNumber,e.fragmentInfoType)}},addManifestUpdate:function(e){h.addManifestUpdate(r.default.STREAM,e.type,e.requestStartDate,e.requestEndDate)},addHttpRequest:function(e,t,n,r,i){h.addHttpRequest(e.mediaType,null,e.type,e.url,e.quality,t,e.serviceLocation||null,e.range||null,e.requestStartDate,e.firstByteDate,e.requestEndDate,n,e.duration,r,i)},addSchedulingInfo:function(e,t){h.addSchedulingInfo(e.mediaType,new Date,e.type,e.startTime,e.availabilityStartTime,e.duration,e.quality,e.range,t)},addRequestsQueue:function(e,t,n){h.addRequestsQueue(e,t,n)},addBufferLevel:function(e,t,n){h.addBufferLevel(e,t,n)},addBufferState:function(e,t,n){h.addBufferState(e,t,n)},addDroppedFrames:function(e){h.addDroppedFrames(r.default.VIDEO,e)},addPlayList:function(){d&&(h.addPlayList(d),d=null)},addDVBErrors:function(e){h.addDVBErrors(e)},createPlaylistMetrics:function(e,t){(d=new l.PlayList).start=new Date,d.mstart=e,d.starttype=t},createPlaylistTraceMetrics:function(e,t,n){!0===a&&(a=!1,(c=new l.PlayListTrace).representationid=e,c.start=new Date,c.mstart=t,c.playbackspeed=n)},updatePlayListTraceMetrics:function(e){if(c)for(var t in c)c[t]=e[t]},pushPlayListTraceMetrics:function(e,t){if(!1===a&&d&&c&&c.start){var n=c.start,r=e.getTime()-n.getTime();c.duration=r,c.stopreason=t,d.trace.push(c),a=!0}},clearAllCurrentMetrics:function(){h.clearAllCurrentMetrics()}},h=h||(0,u.default)(n).getInstance({settings:e.settings}),a=!0,c=null,d=null,t}d.__dashjs_factory_name="DashMetrics",t.default=a.default.getSingletonFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"round10",value:function(e,t){return function(e,t,n){if(void 0===n||0==+n)return Math[e](t);if(n=+n,null===(t=+t)||isNaN(t)||!("number"==typeof n&&n%1==0))return NaN;return t=t.toString().split("e"),+((t=(t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-n:-n)))).toString().split("e"))[0]+"e"+(t[1]?+t[1]+n:n))}("round",e,t)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(4)),i=y(n(14)),a=y(n(232)),o=n(11),s=y(n(233)),u=y(n(234)),l=y(n(235)),c=y(n(236)),d=y(n(237)),h=n(238),f=y(n(239)),p=y(n(5)),g=y(n(240)),m=y(n(7)),v=y(n(1));function y(e){return e&&e.__esModule?e:{default:e}}function _(e){var t,n=(e=e||{}).settings,v=this.context,y=(0,p.default)(v).getInstance(),_=void 0;function T(){y.trigger(m.default.METRICS_CHANGED)}function E(e){y.trigger(m.default.METRIC_CHANGED,{mediaType:e}),T()}function M(e,t,n){y.trigger(m.default.METRIC_UPDATED,{mediaType:e,metric:t,value:n}),E(e)}function b(e,t,n){y.trigger(m.default.METRIC_ADDED,{mediaType:e,metric:t,value:n}),E(e)}function A(e,t){var n=null;return e?(_.hasOwnProperty(e)?n=_[e]:t||(n=new a.default,_[e]=n),n):n}function w(e,t,r){var i=A(e);null!==i&&(i[t].push(r),i[t].length>n.get().streaming.metricsMaxListDepth&&i[t].shift())}function S(e,t,n){w(e,t,n),b(e,t,n)}return t={clearCurrentMetricsForType:function(e){delete _[e],E(e)},clearAllCurrentMetrics:function(){_={},T()},getMetricsFor:A,addHttpRequest:function e(t,n,r,a,s,u,l,c,d,h,f,p,g,m,v){var y=new o.HTTPRequest;u&&u!==a&&(e(t,null,r,a,s,null,null,c,d,null,null,null,g,null,null),y.actualurl=u),y.tcpid=n,y.type=r,y.url=a,y.range=c,y.trequest=d,y.tresponse=h,y.responsecode=p,y._tfinish=f,y._stream=t,y._mediaduration=g,y._quality=s,y._responseHeaders=m,y._serviceLocation=l,v?v.forEach((function(e){!function(e,t,n,r){var i=new o.HTTPRequestTrace;i.s=t,i.d=n,i.b=r,e.trace.push(i),e.interval||(e.interval=0),e.interval+=n}(y,e.s,e.d,e.b)})):(delete y.interval,delete y.trace),S(t,i.default.HTTP_REQUEST,y)},addRepresentationSwitch:function(e,t,n,r,a){var o=new s.default;o.t=t,o.mt=n,o.to=r,a?o.lto=a:delete o.lto,S(e,i.default.TRACK_SWITCH,o)},addBufferLevel:function(e,t,n){var r=new u.default;r.t=t,r.level=n,S(e,i.default.BUFFER_LEVEL,r)},addBufferState:function(e,t,n){var r=new l.default;r.target=n,r.state=t,S(e,i.default.BUFFER_STATE,r)},addDVRInfo:function(e,t,n,r){var a=new c.default;a.time=t,a.range=r,a.manifestInfo=n,S(e,i.default.DVR_INFO,a)},addDroppedFrames:function(e,t){var n=new d.default,r=A(e).DroppedFrames;t&&(n.time=t.creationTime,n.droppedFrames=t.droppedVideoFrames,r.length>0&&r[r.length-1]==n||S(e,i.default.DROPPED_FRAMES,n))},addSchedulingInfo:function(e,t,n,r,a,o,s,u,l){var c=new f.default;c.mediaType=e,c.t=t,c.type=n,c.startTime=r,c.availabilityStartTime=a,c.duration=o,c.quality=s,c.range=u,c.state=l,S(e,i.default.SCHEDULING_INFO,c)},addRequestsQueue:function(e,t,n){var r=new g.default;r.loadingRequests=t,r.executedRequests=n,A(e).RequestsQueue=r,b(e,i.default.REQUESTS_QUEUE,r)},addManifestUpdate:function(e,t,n,a,o,s,u,l,c,d){var f=new h.ManifestUpdate;f.mediaType=e,f.type=t,f.requestTime=n,f.fetchTime=a,f.availabilityStartTime=o,f.presentationStartTime=s,f.clientTimeOffset=u,f.currentTime=l,f.buffered=c,f.latency=d,w(r.default.STREAM,i.default.MANIFEST_UPDATE,f),b(e,i.default.MANIFEST_UPDATE,f)},updateManifestUpdateInfo:function(e,t){if(e){for(var n in t)e[n]=t[n];M(e.mediaType,i.default.MANIFEST_UPDATE,e)}},addManifestUpdateStreamInfo:function(e,t,n,r,a){if(e){var o=new h.ManifestUpdateStreamInfo;o.id=t,o.index=n,o.start=r,o.duration=a,e.streamInfo.push(o),M(e.mediaType,i.default.MANIFEST_UPDATE_STREAM_INFO,e)}},addManifestUpdateRepresentationInfo:function(e,t,n,r,a,o,s,u){if(e&&e.representationInfo){var l=new h.ManifestUpdateRepresentationInfo;l.id=t,l.index=n,l.streamIndex=r,l.mediaType=a,l.startNumber=s,l.fragmentInfoType=u,l.presentationTimeOffset=o,e.representationInfo.push(l),M(e.mediaType,i.default.MANIFEST_UPDATE_TRACK_INFO,e)}},addPlayList:function(e){e.trace&&Array.isArray(e.trace)?e.trace.forEach((function(e){e.hasOwnProperty("subreplevel")&&!e.subreplevel&&delete e.subreplevel})):delete e.trace,S(r.default.STREAM,i.default.PLAY_LIST,e)},addDVBErrors:function(e){S(r.default.STREAM,i.default.DVB_ERRORS,e)}},_={},t}_.__dashjs_factory_name="MetricsModel",t.default=v.default.getSingletonFactory(_)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.mt=null,this.to=null,this.lto=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.t=null,this.level=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(14),a=(r=i)&&r.__esModule?r:{default:r};t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=null,this.state=a.default.BUFFER_EMPTY}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.range=null,this.manifestInfo=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.time=null,this.droppedFrames=null}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.ManifestUpdate=function e(){r(this,e),this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]},t.ManifestUpdateStreamInfo=function e(){r(this,e),this.id=null,this.index=null,this.start=null,this.duration=null},t.ManifestUpdateRepresentationInfo=function e(){r(this,e),this.id=null,this.index=null,this.mediaType=null,this.streamIndex=null,this.presentationTimeOffset=null,this.startNumber=null,this.fragmentInfoType=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.quality=null,this.range=null,this.state=null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.loadingRequests=[],this.executedRequests=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(5)),i=o(n(7)),a=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}function s(){var e=this.context,t=(0,r.default)(e).getInstance(),n=void 0,a=void 0,o=void 0;function s(e){n=e}function u(e,t,r,i){return i?r&&t.timeShiftBufferDepth!=Number.POSITIVE_INFINITY?new Date(t.availabilityStartTime.getTime()+1e3*(e+t.timeShiftBufferDepth)):t.availabilityEndTime:r?new Date(t.availabilityStartTime.getTime()+1e3*(e-n)):t.availabilityStartTime}function l(e,t){return(e.getTime()-t.mpd.availabilityStartTime.getTime()+1e3*n)/1e3}function c(e){a||void 0!==e.offset&&(s(e.offset/1e3),a=!0)}function d(){n=0,a=!1,o=NaN}return{initialize:function(){d(),t.on(i.default.TIME_SYNCHRONIZATION_COMPLETED,c,this)},isTimeSyncCompleted:function(){return a},setTimeSyncCompleted:function(e){a=e},getClientTimeOffset:function(){return n},setClientTimeOffset:s,getExpectedLiveEdge:function(){return o},setExpectedLiveEdge:function(e){o=e},calcAvailabilityStartTimeFromPresentationTime:function(e,t,n){return u.call(this,e,t,n)},calcAvailabilityEndTimeFromPresentationTime:function(e,t,n){return u.call(this,e,t,n,!0)},calcPresentationTimeFromWallTime:l,calcPresentationTimeFromMediaTime:function(e,t){return e+(t.adaptation.period.start-t.presentationTimeOffset)},calcPeriodRelativeTimeFromMpdRelativeTime:function(e,t){return t-e.adaptation.period.start},calcMediaTimeFromPresentationTime:function(e,t){return e-t.adaptation.period.start+t.presentationTimeOffset},calcSegmentAvailabilityRange:function(e,t){var n=e.adaptation.period,r={start:n.start,end:n.start+n.duration};if(!t)return r;if(!a&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var i=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),o=l(new Date,n),s=n.start+n.duration;r.start=Math.max(o-n.mpd.timeShiftBufferDepth,n.start);var u=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<i?i-e.availabilityTimeOffset:i;return r.end=o>=s&&o-u<s?s:o-u,r},getPeriodEnd:function(e,t){var n=e.adaptation.period;if(!t)return n.start+n.duration;if(!a&&e.segmentAvailabilityRange)return e.segmentAvailabilityRange;var r=e.segmentDuration||(e.segments&&e.segments.length?e.segments[e.segments.length-1].duration:0),i=l(new Date,n),o=n.start+n.duration,s=void 0!==e.availabilityTimeOffset&&e.availabilityTimeOffset<r?r-e.availabilityTimeOffset:r;return Math.min(i-s,o)},calcWallTimeForSegment:function(e,t){var n=void 0,r=void 0,i=void 0;return t&&(n=e.representation.adaptation.period.mpd.suggestedPresentationDelay,r=e.presentationStartTime+n,i=new Date(e.availabilityStartTime.getTime()+1e3*r)),i},reset:function(){t.off(i.default.TIME_SYNCHRONIZATION_COMPLETED,c,this),d()}}}s.__dashjs_factory_name="TimelineConverter",t.default=a.default.getSingletonFactory(s)},function(e,t,n){"use strict";var r={encode:function(e){for(var t=[],n=0;n<e.length;++n){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?(t.push(192|r>>6),t.push(128|63&r)):r<65536?(t.push(224|r>>12),t.push(128|63&r>>6),t.push(128|63&r)):(t.push(240|r>>18),t.push(128|63&r>>12),t.push(128|63&r>>6),t.push(128|63&r))}return t},decode:function(e){for(var t=[],n=0;n<e.length;){var r=e[n++];r<128||(r<224?(r=(31&r)<<6,r|=63&e[n++]):r<240?(r=(15&r)<<12,r|=(63&e[n++])<<6,r|=63&e[n++]):(r=(7&r)<<18,r|=(63&e[n++])<<12,r|=(63&e[n++])<<6,r|=63&e[n++])),t.push(String.fromCharCode(r))}return t.join("")}},i={};!function(e){var t=function(t){for(var n=0,r=[],i=0|t.length/3;0<i--;){var a=(t[n]<<16)+(t[n+1]<<8)+t[n+2];n+=3,r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push(e.charAt(63&a))}if(2==t.length-n){a=(t[n]<<16)+(t[n+1]<<8);r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push(e.charAt(63&a>>6)),r.push("=")}else if(1==t.length-n){a=t[n]<<16;r.push(e.charAt(63&a>>18)),r.push(e.charAt(63&a>>12)),r.push("==")}return r.join("")},n=function(){for(var t=[],n=0;n<e.length;++n)t[e.charCodeAt(n)]=n;return t["=".charCodeAt(0)]=0,t}(),o=function(e){for(var t=0,r=[],i=0|e.length/4;0<i--;){var a=(n[e.charCodeAt(t)]<<18)+(n[e.charCodeAt(t+1)]<<12)+(n[e.charCodeAt(t+2)]<<6)+n[e.charCodeAt(t+3)];r.push(255&a>>16),r.push(255&a>>8),r.push(255&a),t+=4}return r&&("="==e.charAt(t-2)?(r.pop(),r.pop()):"="==e.charAt(t-1)&&r.pop()),r},u={encode:function(e){for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t},decode:function(e){for(var t=0;t<s.length;++t)a[t]=String.fromCharCode(a[t]);return a.join("")}};i.decodeArray=function(e){var t=o(e);return new Uint8Array(t)},i.encodeASCII=function(e){var n=u.encode(e);return t(n)},i.decodeASCII=function(e){var t=o(e);return u.decode(t)},i.encode=function(e){var n=r.encode(e);return t(n)},i.decode=function(e){var t=o(e);return r.decode(t)}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),t.decode=i.decode,t.decodeArray=i.decodeArray,t.encode=i.encode,t.encodeASCII=i.encodeASCII},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(244)),i=u(n(41)),a=u(n(246)),o=u(n(105)),s=u(n(104));function u(e){return e&&e.__esModule?e:{default:e}}function l(){var e=this.context;return{createMetricsReporting:function(t){return(0,r.default)(e).getInstance({eventBus:t.eventBus,dashMetrics:t.dashMetrics,metricsConstants:t.metricsConstants,events:t.events}),(0,a.default)(e).create(t)},getReportingFactory:function(){return(0,s.default)(e).getInstance()},getMetricsHandlerFactory:function(){return(0,o.default)(e).getInstance()}}}l.__dashjs_factory_name="MetricsReporting";var c=dashjs.FactoryMaker.getClassFactory(l);c.events=i.default,dashjs.FactoryMaker.updateClassFactory(l.__dashjs_factory_name,c),t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(245)),i=a(n(41));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=void 0,n=void 0,a=(e=e||{}).eventBus,o=e.dashMetrics,s=e.metricsConstants,u=e.events;function l(e){var t=new r.default;if(n){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.mpdurl||(t.mpdurl=n.originalUrl||n.url),t.terror||(t.terror=new Date),o.addDVBErrors(t)}}function c(e){e.error||(n=e.manifest)}function d(e){l({errorcode:r.default.BASE_URL_CHANGED,servicelocation:e.entry})}function h(){l({errorcode:r.default.BECAME_REPORTER})}function f(e){switch(e.metric){case s.HTTP_REQUEST:(0===(t=e.value).responsecode||t.responsecode>=400||t.responsecode<100||t.responsecode>=600)&&l({errorcode:t.responsecode||r.default.CONNECTION_ERROR,url:t.url,terror:t.tresponse,servicelocation:t._serviceLocation})}var t}function p(e){var t=void 0;switch(e.error?e.error.code:0){case MediaError.MEDIA_ERR_NETWORK:t=r.default.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:t=r.default.CORRUPT_MEDIA_OTHER;break;default:return}l({errorcode:t})}function g(){a.on(u.MANIFEST_UPDATED,c,t),a.on(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,t),a.on(u.METRIC_ADDED,f,t),a.on(u.METRIC_UPDATED,f,t),a.on(u.PLAYBACK_ERROR,p,t),a.on(i.default.BECAME_REPORTING_PLAYER,h,t)}return t={initialise:g,reset:function(){a.off(u.MANIFEST_UPDATED,c,t),a.off(u.SERVICE_LOCATION_BLACKLIST_CHANGED,d,t),a.off(u.METRIC_ADDED,f,t),a.off(u.METRIC_UPDATED,f,t),a.off(u.PLAYBACK_ERROR,p,t),a.off(i.default.BECAME_REPORTING_PLAYER,h,t)}},g(),t}o.__dashjs_factory_name="DVBErrorsTranslator",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null};r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00",t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(247)),i=o(n(258)),a=o(n(41));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e=e||{};var t={},n=this.context,o=e.eventBus,s=e.events;function u(s){if(!s.error){var u=Object.keys(t);(0,i.default)(n).getInstance({adapter:e.adapter,constants:e.constants}).getMetrics(s.manifest).forEach((function(i){var a=JSON.stringify(i);if(t.hasOwnProperty(a))u.splice(a,1);else try{var o=(0,r.default)(n).create(e);o.initialize(i),t[a]=o}catch(e){}})),u.forEach((function(e){t[e].reset(),delete t[e]})),o.trigger(a.default.METRICS_INITIALISATION_COMPLETE)}}function l(){Object.keys(t).forEach((function(e){t[e].reset()})),t={}}return o.on(s.MANIFEST_UPDATED,u),o.on(s.STREAM_TEARDOWN_COMPLETE,l),{reset:function(){o.off(s.MANIFEST_UPDATED,u),o.off(s.STREAM_TEARDOWN_COMPLETE,l)}}}s.__dashjs_factory_name="MetricsCollectionController",t.default=dashjs.FactoryMaker.getClassFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(248)),i=o(n(249)),a=o(n(253));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){e=e||{};var t=void 0,n=void 0,o=void 0,s=this.context;function u(){t&&t.reset(),n&&n.reset(),o&&o.reset()}return{initialize:function(l){try{(o=(0,r.default)(s).create({mediaElement:e.mediaElement})).initialize(l.Range),(n=(0,i.default)(s).create({debug:e.debug,metricsConstants:e.metricsConstants})).initialize(l.Reporting,o),(t=(0,a.default)(s).create({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants,events:e.events})).initialize(l.metrics,n)}catch(e){throw u(),e}},reset:u}}s.__dashjs_factory_name="MetricsController",t.default=dashjs.FactoryMaker.getClassFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(79),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var t,n=!1,r=this.context,i=void 0,o=e.mediaElement;return t={initialize:function(e){e&&e.length&&(e.forEach((function(e){var t=e.starttime,n=t+e.duration;i.add(t,n)})),n=!!e[0]._useWallClockTime)},reset:function(){i.clear()},isEnabled:function(){var e,t=i.length;if(!t)return!0;e=n?(new Date).getTime()/1e3:o.currentTime;for(var r=0;r<t;r+=1){var a=i.start(r),s=i.end(r);if(a<=e&&e<s)return!0}return!1}},i=(0,a.default)(r).create(),t}o.__dashjs_factory_name="RangeController",t.default=dashjs.FactoryMaker.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(104),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=[],n=(0,a.default)(this.context).getInstance(e);return{initialize:function(e,r){e.some((function(e){var i=n.create(e,r);if(i)return t.push(i),!0}))},reset:function(){t.forEach((function(e){return e.reset()})),t=[]},report:function(e,n){t.forEach((function(t){return t.report(e,n)}))}}}o.__dashjs_factory_name="ReportingController",t.default=dashjs.FactoryMaker.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(251)),i=a(n(252));function a(e){return e&&e.__esModule?e:{default:e}}function o(e){e=e||{};var t,n=this.context,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=[],h=e.metricsConstants;function f(){s=!1,u=!1,l=null,c=null}return t={report:function(e,t){Array.isArray(t)||(t=[t]),u&&c.isEnabled()&&t.forEach((function(t){var n=a.serialise(t);e!==h.DVB_ERRORS&&(n="metricname="+e+"&"+n),function(e,t,n){var r=new XMLHttpRequest,i=function(){var e=d.indexOf(r);-1!==e&&(d.splice(e,1),r.status>=200&&r.status<300?t&&t():n&&n())};d.push(r);try{r.open("GET",e),r.onloadend=i,r.onerror=i,r.send()}catch(e){r.onerror()}}(n=l+"?"+n,null,(function(){u=!1}))}))},initialize:function(e,t){var n=void 0;if(c=t,!(l=e["dvb:reportingUrl"]))throw new Error("required parameter missing (dvb:reportingUrl)");s||((n=e["dvb:probability"]||e["dvb:priority"]||0)&&(1e3===n||n/1e3>=o.random())&&(u=!0),s=!0)},reset:function(){f()}},a=(0,r.default)(n).getInstance(),o=(0,i.default)(n).getInstance(),f(),t}o.__dashjs_factory_name="DVBReporting",t.default=dashjs.FactoryMaker.getClassFactory(o)},function(e,t,n){"use strict";function r(){return{serialise:function e(t){var n=[],r=[],i=void 0,a=void 0;for(i in t)if(t.hasOwnProperty(i)&&0!==i.indexOf("_")){if(null==(a=t[i])&&(a=""),Array.isArray(a)){if(!a.length)continue;r=[],a.forEach((function(t){var n="Object"!==Object.prototype.toString.call(t).slice(8,-1);r.push(n?t:e(t))})),a=r.map(encodeURIComponent).join(",")}else"string"==typeof a?a=encodeURIComponent(a):a instanceof Date?a=a.toISOString():"number"==typeof a&&(a=Math.round(a));n.push(i+"="+a)}return n.join("&")}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="MetricSerialiser",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},function(e,t,n){"use strict";function r(){var e,t=window.crypto||window.msCrypto,n=Uint32Array,r=Math.pow(2,8*n.BYTES_PER_ELEMENT)-1,i=void 0,a=void 0;function o(){t&&(i||(i=new n(10)),t.getRandomValues(i),a=0)}return e={random:function(e,n){var s=void 0;return e||(e=0),n||(n=1),t?(a===i.length&&o(),s=i[a]/r,a+=1):s=Math.random(),s*(n-e)+e}},o(),e}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="RNG",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(105),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=[],n=void 0,r=this.context,i=e.eventBus,o=e.events,s=(0,a.default)(r).getInstance({debug:e.debug,eventBus:e.eventBus,metricsConstants:e.metricsConstants});function u(e){t.forEach((function(t){t.handleNewMetric(e.metric,e.value,e.mediaType)}))}return n={initialize:function(e,r){e.split(",").forEach((function(e,n,i){var a;if(-1!==e.indexOf("(")&&-1===e.indexOf(")")){var o=i[n+1];o&&-1===o.indexOf("(")&&-1!==o.indexOf(")")&&(e+=","+o,delete i[n+1])}(a=s.create(e,r))&&t.push(a)})),i.on(o.METRIC_ADDED,u,n),i.on(o.METRIC_UPDATED,u,n)},reset:function(){i.off(o.METRIC_ADDED,u,n),i.off(o.METRIC_UPDATED,u,n),t.forEach((function(e){return e.reset()})),t=[]}}}o.__dashjs_factory_name="MetricsHandlersController",t.default=dashjs.FactoryMaker.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(106),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,s=this.context,u=(0,a.default)(s).getInstance(),l=[],c=e.metricsConstants;function d(){var e=function(){try{return Object.keys(l).map((function(e){return l[e]})).reduce((function(e,t){return e.level<t.level?e:t}))}catch(e){return}}();e&&o!==e.t&&(o=e.t,t.report(r,e))}return{initialize:function(e,a,o){a&&(n=u.validateN(o),t=a,r=u.reconstructFullMetricName(e,o),i=setInterval(d,n))},reset:function(){clearInterval(i),i=null,n=0,t=null,o=null},handleNewMetric:function(e,t,n){e===c.BUFFER_LEVEL&&(l[n]=t)}}}o.__dashjs_factory_name="BufferLevelHandler",t.default=dashjs.FactoryMaker.getClassFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(41),a=(r=i)&&r.__esModule?r:{default:r};t.default=dashjs.FactoryMaker.getClassFactory((function(e){var t=void 0,n=(e=e||{}).eventBus,r=e.metricsConstants;function i(){n.off(a.default.METRICS_INITIALISATION_COMPLETE,i,this),n.trigger(a.default.BECAME_REPORTING_PLAYER)}return{initialize:function(e,r){r&&(t=r,n.on(a.default.METRICS_INITIALISATION_COMPLETE,i,this))},reset:function(){t=null},handleNewMetric:function(e,n){e===r.DVB_ERRORS&&t&&t.report(e,n)}}}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(106),a=(r=i)&&r.__esModule?r:{default:r};function o(e){e=e||{};var t=void 0,n=void 0,r=void 0,i=void 0,o=void 0,s=[],u=(0,a.default)(this.context).getInstance(),l=e.metricsConstants;function c(){var e=s;e.length&&t&&t.report(i,e),s=[]}return{initialize:function(e,a,s,l){a&&(n=u.validateN(s),t=a,l&&l.length&&(r=l),i=u.reconstructFullMetricName(e,s,l),o=setInterval(c,n))},reset:function(){clearInterval(o),o=null,n=null,r=null,s=[],t=null},handleNewMetric:function(e,t){e===l.HTTP_REQUEST&&(r&&r!==t.type||s.push(t))}}}o.__dashjs_factory_name="HttpListHandler",t.default=dashjs.FactoryMaker.getClassFactory(o)},function(e,t,n){"use strict";function r(){var e=void 0,t=void 0;return{initialize:function(n,r){e=n,t=r},reset:function(){t=null,e=void 0},handleNewMetric:function(n,r){n===e&&t&&t.report(e,r)}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="GenericMetricHandler",t.default=dashjs.FactoryMaker.getClassFactory(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(259)),i=o(n(260)),a=o(n(261));function o(e){return e&&e.__esModule?e:{default:e}}function s(e){var t=(e=e||{}).adapter,n=e.constants;return{getMetrics:function(e){var o=[];return e&&e.Metrics_asArray&&e.Metrics_asArray.forEach((function(s){var u=new r.default,l=t.getIsDynamic(e);s.hasOwnProperty("metrics")&&(u.metrics=s.metrics,s.Range_asArray&&s.Range_asArray.forEach((function(r){var a=new i.default;a.starttime=function(e,r,i){var a=void 0,o=void 0,s=0;return r?s=t.getAvailabilityStartTime(e)/1e3:(a=t.getRegularPeriods(e)).length&&(s=a[0].start),o=s,i&&i.hasOwnProperty(n.START_TIME)&&(o+=i.starttime),o}(e,l,r),r.hasOwnProperty("duration")?a.duration=r.duration:a.duration=t.getDuration(e),a._useWallClockTime=l,u.Range.push(a)})),s.Reporting_asArray&&(s.Reporting_asArray.forEach((function(e){var t=new a.default;if(e.hasOwnProperty(n.SCHEME_ID_URI)){for(var r in t.schemeIdUri=e.schemeIdUri,e)e.hasOwnProperty(r)&&(t[r]=e[r]);u.Reporting.push(t)}})),o.push(u)))})),o}}}s.__dashjs_factory_name="ManifestParsing",t.default=dashjs.FactoryMaker.getSingletonFactory(s)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.metrics="",this.Range=[],this.Reporting=[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schemeIdUri="",this.value=""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(263)),i=c(n(42)),a=c(n(273)),o=c(n(30)),s=c(n(274)),u=c(n(275)),l=c(n(276));function c(e){return e&&e.__esModule?e:{default:e}}var d=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],h=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function f(){var e=void 0,t=this.context;function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];if("function"==typeof e[r[Object.keys(r)[0]]])return r}return null}return e={createProtectionSystem:function(a){var o=null,c=(0,i.default)(t).getInstance();c.setConfig({debug:a.debug,BASE64:a.BASE64}),c.initialize();var f=function(r){var i=r.debug,a=i.getLogger(e),o=r.eventBus,c=r.errHandler,f=r.videoModel?r.videoModel.getElement():null;return f&&void 0===f.onencrypted||f&&void 0===f.mediaKeys?n(f,h)?(a.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,u.default)(t).create({debug:i,eventBus:o,events:r.events,api:n(f,h)})):n(f,d)?(a.info("EME detected on this user agent! (ProtectionModel_01b)"),(0,l.default)(t).create({debug:i,eventBus:o,errHandler:c,events:r.events,api:n(f,d)})):(a.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(a.info("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,s.default)(t).create({debug:i,eventBus:o,events:r.events}))}(a);return!o&&f&&(o=(0,r.default)(t).create({protectionModel:f,protectionKeyController:c,eventBus:a.eventBus,debug:a.debug,events:a.events,BASE64:a.BASE64,constants:a.constants}),a.capabilities.setEncryptedMediaSupported(!0)),o}}}f.__dashjs_factory_name="Protection";var p=dashjs.FactoryMaker.getClassFactory(f);p.events=a.default,p.errors=o.default,dashjs.FactoryMaker.updateClassFactory(f.__dashjs_factory_name,p),t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=l(n(25)),a=l(n(264)),o=l(n(61)),s=l(n(30)),u=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=(e=e||{}).protectionKeyController,n=e.protectionModel,l=e.eventBus,c=e.events,d=e.debug,h=e.BASE64,f=e.constants,p=[],g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0;function b(){if(!(l&&l.hasOwnProperty("on")&&t&&t.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function A(e,r){var a=i.default.getPSSHForKeySystem(M,e),o=x(M);if(a){for(var d=n.getAllInitData(),h=0;h<d.length;h++)if(t.initDataEquals(a,d[h]))return void m.warn("DRM: Ignoring initData because we have already seen it!");try{n.createKeySession(a,o,I(M),r)}catch(e){l.trigger(c.KEY_SESSION_CREATED,{data:null,error:new u.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+e.message)})}}else e?n.createKeySession(e,o,I(M),r):l.trigger(c.KEY_SESSION_CREATED,{data:null,error:new u.default(s.default.KEY_SESSION_CREATED_ERROR_CODE,s.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(M?M.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function w(e,t){b(),n.loadKeySession(e,t,I(M))}function S(e){b(),e?(n.setMediaElement(e),l.on(c.NEED_KEY,R,this)):null===e&&(n.setMediaElement(e),l.off(c.NEED_KEY,R,this))}function x(e){var t=null;if(e){var n=e.systemString;_&&(t=n in _?_[n]:null)}return t}function D(e){var t=x(e),n=[],r=[],i=t&&t.audioRobustness&&t.audioRobustness.length>0?t.audioRobustness:E,s=t&&t.videoRobustness&&t.videoRobustness.length>0?t.videoRobustness:E,u=I(e),l=t&&t.distinctiveIdentifier?t.distinctiveIdentifier:"optional",c=t&&t.persistentState?t.persistentState:"temporary"===u?"optional":"required";return y.forEach((function(e){e.type===f.AUDIO?n.push(new a.default(e.codec,i)):e.type===f.VIDEO&&r.push(new a.default(e.codec,s))})),new o.default(n,r,l,c,[u])}function I(e){var t=x(e);return t&&t.sessionType?t.sessionType:T}function C(e,r){var i=this,a=[];e=e.sort((function(t,n){return(_&&_[t.ks.systemString]&&_[t.ks.systemString].priority>=0?_[t.ks.systemString].priority:e.length)-(_&&_[n.ks.systemString]&&_[n.ks.systemString].priority>=0?_[n.ks.systemString].priority:e.length)}));var o=void 0;if(M)for(o=0;o<e.length;o++){if(M===e[o].ks)if("break"===function(){a.push({ks:e[o].ks,configs:[D(M)]});return l.on(c.KEY_SYSTEM_ACCESS_COMPLETE,(function t(n){l.off(c.KEY_SYSTEM_ACCESS_COMPLETE,t,i),n.error?r||l.trigger(c.KEY_SYSTEM_SELECTED,{error:new u.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+n.error)}):(m.info("DRM: KeySystem Access Granted"),l.trigger(c.KEY_SYSTEM_SELECTED,{data:n.data}),e[o].sessionId?w(e[o].sessionId,e[o].initData):e[o].initData&&A(e[o].initData,e[o].cdmData))}),i),n.requestKeySystemAccess(a),"break"}())break}else if(void 0===M){M=null,v.push(e);for(var d=0;d<e.length;d++)a.push({ks:e[d].ks,configs:[D(e[d].ks)]});var f=void 0,p=function e(t){l.off(c.KEY_SYSTEM_ACCESS_COMPLETE,e,i),t.error?(M=void 0,l.off(c.INTERNAL_KEY_SYSTEM_SELECTED,g,i),r||l.trigger(c.KEY_SYSTEM_SELECTED,{data:null,error:new u.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+t.error)})):(f=t.data,m.info("DRM: KeySystem Access Granted ("+f.keySystem.systemString+")!  Selecting key system..."),n.selectKeySystem(f))},g=function e(a){if(l.off(c.INTERNAL_KEY_SYSTEM_SELECTED,e,i),l.off(c.KEY_SYSTEM_ACCESS_COMPLETE,p,i),a.error)M=void 0,r||l.trigger(c.KEY_SYSTEM_SELECTED,{data:null,error:new u.default(s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,s.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+a.error)});else{if(!n)return;M=n.getKeySystem(),l.trigger(c.KEY_SYSTEM_SELECTED,{data:f});var d=x(M);d&&d.serverCertificate&&d.serverCertificate.length>0&&n.setServerCertificate(h.decodeArray(d.serverCertificate).buffer);for(var g=0;g<v.length;g++)for(o=0;o<v[g].length;o++)if(M===v[g][o].ks){if(t.isClearKey(M)&&d&&d.hasOwnProperty("clearkeys")){var m={kids:Object.keys(d.clearkeys)};v[g][o].initData=(new TextEncoder).encode(JSON.stringify(m))}v[g][o].sessionId?w(v[g][o].sessionId,v[g][o].initData):null!==v[g][o].initData&&A(v[g][o].initData,v[g][o].cdmData);break}}};l.on(c.INTERNAL_KEY_SYSTEM_SELECTED,g,i),l.on(c.KEY_SYSTEM_ACCESS_COMPLETE,p,i),n.requestKeySystemAccess(a)}else v.push(e)}function N(e,t){l.trigger(c.LICENSE_REQUEST_COMPLETE,{data:e,error:t})}function L(e){e.error?l.trigger(c.KEY_STATUSES_CHANGED,{data:null,error:e.error}):m.debug("DRM: key status = "+e.status)}function O(e){m.debug("DRM: onKeyMessage");var a=e.data;l.trigger(c.KEY_MESSAGE,{data:a});var o=a.messageType?a.messageType:"license-request",d=a.message,h=a.sessionToken,f=x(M),p=M?M.systemString:null,g=t.getLicenseServer(M,f,o),v={sessionToken:h,messageType:o};if(d&&0!==d.byteLength){if(!g)return m.debug("DRM: License server request not required for this message (type = "+e.data.messageType+").  Session ID = "+h.getSessionID()),void N(v);if(t.isClearKey(M)){var y=t.processClearKeyLicenseRequest(M,f,d);if(y)return m.debug("DRM: ClearKey license request handled by application!"),N(v),void n.updateKeySession(h,y)}var _=null;if(f&&f.serverURL){var T=f.serverURL;"string"==typeof T&&""!==T?_=T:"object"===(void 0===T?"undefined":r(T))&&T.hasOwnProperty(o)&&(_=T[o])}else f&&f.laURL&&""!==f.laURL?_=f.laURL:(_=M.getLicenseServerURLFromInitData(i.default.getPSSHData(h.initData)))||(_=e.data.laURL);if(_=g.getServerURLFromMessage(_,d,o)){var E={},b=!1,A=function(e){if(e)for(var t in e)"authorization"===t.toLowerCase()&&(b=!0),E[t]=e[t]};f&&A(f.httpRequestHeaders),A(M.getRequestHeadersFromMessage(d)),f&&"boolean"==typeof f.withCredentials&&(b=f.withCredentials);var w=function(e,t,n,r){var i=e.response?g.getErrorResponse(e.response,n,r):"NONE";N(t,new u.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+n+' update, XHR complete. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState+".  Response is "+i))},S=M.getLicenseRequestFromMessage(d),D=g.getHTTPMethod(o),I=g.getResponseType(p,o),C=f&&!isNaN(f.httpTimeout)?f.httpTimeout:8e3;!function e(t,n,r,i,a,o,s,u,l,c,d){var h=new XMLHttpRequest;h.open(r,t,!0),h.responseType=i,h.withCredentials=a,u>0&&(h.timeout=u);for(var f in n)h.setRequestHeader(f,n[f]);var p=function(){s--,setTimeout((function(){e(t,n,r,i,a,o,s,u,l,c,d)}),1e3)};h.onload=function(){200===this.status||s<=0?l(this):(m.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+s),p())},h.ontimeout=h.onerror=function(){s<=0?d(this):(m.warn("License request network request failed . Retrying it... Pending retries: "+s),p())},h.onabort=function(){c(this)},h.send(o)}(_,E,D,I,b,S,3,C,(function(e){if(n)if(200===e.status){var t=g.getLicenseMessage(e.response,p,o);null!==t?(N(v),n.updateKeySession(h,t)):w(e,v,p,o)}else w(e,v,p,o)}),(function(e){N(v,new u.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+p+' update, XHR aborted. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))}),(function(e){N(v,new u.default(s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+p+' update, XHR error. status is "'+e.statusText+'" ('+e.status+"), readyState is "+e.readyState))}))}else N(v,new u.default(s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE))}else N(v,new u.default(s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,s.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function R(e,r){if(m.debug("DRM: onNeedKey"),"cenc"===e.key.initDataType)if(0===y.length&&(m.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(r=void 0===r?1:r+1)<5))p.push(setTimeout((function(){R(e,r)}),500));else{var a=e.key.initData;if(ArrayBuffer.isView(a)&&(a=a.buffer),M){var o=i.default.getPSSHForKeySystem(M,a);if(o)for(var s=n.getAllInitData(),u=0;u<s.length;u++)if(t.initDataEquals(o,s[u]))return void m.warn("DRM: Ignoring initData because we have already seen it!")}m.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(a)));var l=t.getSupportedKeySystems(a,_);0!==l.length?C(l,!1):m.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}else m.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+e.key.initDataType)}return g={initializeForMedia:function(e){if(!e)throw new Error("mediaInfo can not be null or undefined");b(),l.on(c.INTERNAL_KEY_MESSAGE,O,this),l.on(c.INTERNAL_KEY_STATUS_CHANGED,L,this),y.push(e);var n=t.getSupportedKeySystemsFromContentProtection(e.contentProtection);n&&n.length>0&&C(n,!0)},createKeySession:A,loadKeySession:w,removeKeySession:function(e){b(),n.removeKeySession(e)},closeKeySession:function(e){b(),n.closeKeySession(e)},setServerCertificate:function(e){b(),n.setServerCertificate(e)},setMediaElement:S,setSessionType:function(e){T=e},setRobustnessLevel:function(e){E=e},setProtectionData:function(e){_=e,t.setProtectionData(e)},getSupportedKeySystemsFromContentProtection:function(e){return b(),t.getSupportedKeySystemsFromContentProtection(e)},getKeySystems:function(){return t?t.getKeySystems():[]},setKeySystems:function(e){t&&t.setKeySystems(e)},stop:function(){n&&n.stop()},reset:function(){b(),l.off(c.INTERNAL_KEY_MESSAGE,O,this),l.off(c.INTERNAL_KEY_STATUS_CHANGED,L,this),S(null),M=void 0,n&&(n.reset(),n=null),p.forEach((function(e){return clearTimeout(e)})),p=[],y=[]}},m=d.getLogger(g),v=[],y=[],T="temporary",E="",g}c.__dashjs_factory_name="ProtectionController",t.default=dashjs.FactoryMaker.getClassFactory(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.contentType=t,this.robustness=n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(62)),i=s(n(63)),a=s(n(25)),o=s(n(21));function s(e){return e&&e.__esModule?e:{default:e}}var u="e2719d58-a985-b3c9-781a-b030af78d30e",l=o.default.CLEARKEY_KEYSTEM_STRING;function c(e){var t=(e=e||{}).BASE64;return{uuid:u,schemeIdURI:"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",systemString:l,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,t)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),o=[],s=0;s<a.kids.length;s++){var u=a.kids[s],l=e.clearkeys&&e.clearkeys.hasOwnProperty(u)?e.clearkeys[u]:null;if(!l)throw new Error("DRM: ClearKey keyID ("+u+") is not known!");o.push(new r.default(u,l))}n=new i.default(o)}return n}}}c.__dashjs_factory_name="KeySystemClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(62)),i=s(n(63)),a=s(n(25)),o=s(n(21));function s(e){return e&&e.__esModule?e:{default:e}}var u="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",l=o.default.CLEARKEY_KEYSTEM_STRING;function c(e){var t=void 0,n=e.BASE64,o=e.debug.getLogger(t);return t={uuid:u,schemeIdURI:"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",systemString:l,getInitData:function(e){return a.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(){return null},getClearKeysFromProtectionData:function(e,t){var n=null;if(e){for(var a=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t))),s=[],u=0;u<a.kids.length;u++){var l=a.kids[u],c=e.clearkeys&&e.clearkeys.hasOwnProperty(l)?e.clearkeys[l]:null;if(!c)throw new Error("DRM: ClearKey keyID ("+l+") is not known!");s.push(new r.default(l,c))}n=new i.default(s),o.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return n}}}c.__dashjs_factory_name="KeySystemW3CClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(c)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(25)),i=a(n(21));function a(e){return e&&e.__esModule?e:{default:e}}var o="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",s=i.default.WIDEVINE_KEYSTEM_STRING;function u(e){var t=null,n=(e=e||{}).BASE64;return{uuid:o,schemeIdURI:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",systemString:s,init:function(e){e&&(t=e)},getInitData:function(e){return r.default.parseInitDataFromContentProtection(e,n)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(e){return new Uint8Array(e)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getSessionId:function(e){return t&&t.sessionId?t.sessionId:e&&e.sessionId?e.sessionId:null}}}u.__dashjs_factory_name="KeySystemWidevine",t.default=dashjs.FactoryMaker.getSingletonFactory(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(25)),i=a(n(21));function a(e){return e&&e.__esModule?e:{default:e}}var o="9a04f079-9840-4286-ab92-e65be0885f95",s=i.default.PLAYREADY_KEYSTEM_STRING,u=void 0;function l(e){var t="utf-16",n=(e=e||{}).BASE64;function i(){if(!n||!n.hasOwnProperty("decodeArray")||!n.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return{uuid:o,schemeIdURI:"urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95",systemString:s,getInitData:function(e){var t,a,o,s=new Uint8Array([112,115,115,104,0,0,0,0]),u=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),l=0,c=null,d=void 0,h=void 0;if(i(),!e)return null;if("pssh"in e)return r.default.parseInitDataFromContentProtection(e,n);if("pro"in e)c=n.decodeArray(e.pro.__text);else{if(!("prheader"in e))return null;c=n.decodeArray(e.prheader.__text)}return t=c.length,a=4+s.length+u.length+4+t,o=new ArrayBuffer(a),d=new Uint8Array(o),(h=new DataView(o)).setUint32(l,a),l+=4,d.set(s,l),l+=s.length,d.set(u,l),l+=u.length,h.setUint32(l,t),l+=4,d.set(c,l),l+=t,d.buffer},getRequestHeadersFromMessage:function(e){var n,r=void 0,i={},a=new DOMParser,o="utf-16"===t?new Uint16Array(e):new Uint8Array(e);n=String.fromCharCode.apply(null,o);for(var s=(r=a.parseFromString(n,"application/xml")).getElementsByTagName("name"),u=r.getElementsByTagName("value"),l=0;l<s.length;l++)i[s[l].childNodes[0].nodeValue]=u[l].childNodes[0].nodeValue;return i.hasOwnProperty("Content")&&(i["Content-Type"]=i.Content,delete i.Content),i.hasOwnProperty("Content-Type")||(i["Content-Type"]="text/xml; charset=utf-8"),i},getLicenseRequestFromMessage:function(e){var r=null,a=new DOMParser,o="utf-16"===t?new Uint16Array(e):new Uint8Array(e);i();var s=String.fromCharCode.apply(null,o),u=a.parseFromString(s,"application/xml");if(!u.getElementsByTagName("PlayReadyKeyMessage")[0])return e;var l=u.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;return l&&(r=n.decode(l)),r},getLicenseServerURLFromInitData:function(e){if(e)for(var t=new DataView(e),n=t.getUint16(4,!0),r=6,i=new DOMParser,a=0;a<n;a++){var o=t.getUint16(r,!0);r+=2;var s=t.getUint16(r,!0);if(r+=2,1===o){var u=e.slice(r,r+s),l=String.fromCharCode.apply(null,new Uint16Array(u)),c=i.parseFromString(l,"application/xml");if(c.getElementsByTagName("LA_URL")[0]){var d=c.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(d)return d}if(c.getElementsByTagName("LUI_URL")[0]){var h=c.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(h)return h}}else r+=s}return null},getCDMData:function(){var e=void 0,t=void 0,r=void 0,a=void 0;if(i(),u&&u.cdmData){for(e=[],a=0;a<u.cdmData.length;++a)e.push(u.cdmData.charCodeAt(a)),e.push(0);for(e=String.fromCharCode.apply(null,e),e=n.encode(e),t='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",e),r=[],a=0;a<t.length;++a)r.push(t.charCodeAt(a)),r.push(0);return new Uint8Array(r).buffer}return null},getSessionId:function(e){return u&&u.sessionId?u.sessionId:e&&e.sessionId?e.sessionId:null},setPlayReadyMessageFormat:function(e){if("utf-8"!==e&&"utf-16"!==e)throw new Error('Specified message format is not one of "utf-8" or "utf-16"');t=e},init:function(e){e&&(u=e)}}}l.__dashjs_factory_name="KeySystemPlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(l)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(21),a=(r=i)&&r.__esModule?r:{default:r};function o(e){var t=(e=e||{}).BASE64,n={};n[a.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(e){return t.decodeArray(e.license)},getErrorResponse:function(e){return e}},n[a.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}};return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(e){return n[e].responseType},getLicenseMessage:function(e,r){return function(){if(!t||!t.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),n[r].getLicenseMessage(e)},getErrorResponse:function(e,t){return n[t].getErrorResponse(e)}}}o.__dashjs_factory_name="DRMToday",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},function(e,t,n){"use strict";function r(){var e="http://schemas.xmlsoap.org/soap/envelope/";function t(e){var t=String.fromCharCode.apply(null,new Uint8Array(e));return decodeURIComponent(escape(t))}function n(n){if(window.DOMParser){var r=t(n),i=(new window.DOMParser).parseFromString(r,"text/xml"),a=i?i.getElementsByTagNameNS(e,"Envelope")[0]:null,o=a?a.getElementsByTagNameNS(e,"Body")[0]:null;if(o?o.getElementsByTagNameNS(e,"Fault")[0]:null)return null}return n}function r(n){var r="",i="",a="",o=-1,s=-1;if(window.DOMParser){var u=t(n),l=(new window.DOMParser).parseFromString(u,"text/xml"),c=l?l.getElementsByTagNameNS(e,"Envelope")[0]:null,d=c?c.getElementsByTagNameNS(e,"Body")[0]:null,h=d?d.getElementsByTagNameNS(e,"Fault")[0]:null,f=h?h.getElementsByTagName("detail")[0]:null,p=f?f.getElementsByTagName("Exception")[0]:null,g=null;if(null===h)return u;r=(g=h.getElementsByTagName("faultstring")[0].firstChild)?g.nodeValue:null,null!==p&&(i=(g=p.getElementsByTagName("StatusCode")[0])?g.firstChild.nodeValue:null,o=(a=(g=p.getElementsByTagName("Message")[0])?g.firstChild.nodeValue:null)?a.lastIndexOf("[")+1:-1,s=a?a.indexOf("]"):-1,a=a?a.substring(o,s):"")}var m="code: "+i+", name: "+r;return a&&(m+=", message: "+a),m}return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return n.call(this,e)},getErrorResponse:function(e){return r.call(this,e)}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="PlayReady",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},function(e,t,n){"use strict";function r(){return{getServerURLFromMessage:function(e){return e},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(e){return e},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}Object.defineProperty(t,"__esModule",{value:!0}),r.__dashjs_factory_name="Widevine",t.default=dashjs.FactoryMaker.getSingletonFactory(r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(62)),i=a(n(63));function a(e){return e&&e.__esModule?e:{default:e}}function o(){return{getServerURLFromMessage:function(e,t){var n=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(t)));e+="/?";for(var r=0;r<n.kids.length;r++)e+=n.kids[r]+"&";return e=e.substring(0,e.length-1)},getHTTPMethod:function(){return"GET"},getResponseType:function(){return"json"},getLicenseMessage:function(e){if(!e.hasOwnProperty("keys"))return null;for(var t=[],n=0;n<e.keys.length;n++){var a=e.keys[n],o=a.kid.replace(/=/g,""),s=a.k.replace(/=/g,"");t.push(new r.default(o,s))}return new i.default(t)},getErrorResponse:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}}}o.__dashjs_factory_name="ClearKey",t.default=dashjs.FactoryMaker.getSingletonFactory(o)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(32);var a=new(function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.INTERNAL_KEY_MESSAGE="internalKeyMessage",e.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",e.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",e.KEY_ADDED="public_keyAdded",e.KEY_ERROR="public_keyError",e.KEY_MESSAGE="public_keyMessage",e.KEY_SESSION_CLOSED="public_keySessionClosed",e.KEY_SESSION_CREATED="public_keySessionCreated",e.KEY_SESSION_REMOVED="public_keySessionRemoved",e.KEY_STATUSES_CHANGED="public_keyStatusesChanged",e.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",e.KEY_SYSTEM_SELECTED="public_keySystemSelected",e.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",e.NEED_KEY="needkey",e.PROTECTION_CREATED="public_protectioncreated",e.PROTECTION_DESTROYED="public_protectiondestroyed",e.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",e.TEARDOWN_COMPLETE="protectionTeardownComplete",e.VIDEO_ELEMENT_SELECTED="videoElementSelected",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(((r=i)&&r.__esModule?r:{default:r}).default));t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(42)),i=c(n(64)),a=c(n(30)),o=c(n(8)),s=c(n(65)),u=c(n(66)),l=c(n(21));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t=this.context,n=e.eventBus,c=e.events,d=e.debug,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0;function T(e){var t=e.session;return t.removeEventListener("keystatuseschange",e),t.removeEventListener("message",e),t.close()}function E(e){for(var t=0;t<v.length;t++)if(v[t]===e){v.splice(t,1);break}}function M(e){var t=void 0,n=void 0;return e&&e.length>0&&(e[0]&&("string"==typeof e[0]?t=e[0]:n=e[0]),e[1]&&("string"==typeof e[1]?t=e[1]:n=e[1])),{status:t,keyId:n}}function b(e,t,r,i){var u={session:e,initData:t,sessionId:i,handleEvent:function(e){switch(e.type){case"keystatuseschange":n.trigger(c.KEY_STATUSES_CHANGED,{data:this}),e.target.keyStatuses.forEach((function(){var e=M(arguments);switch(e.status){case"expired":n.trigger(c.INTERNAL_KEY_STATUS_CHANGED,{error:new o.default(a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,a.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)});break;default:n.trigger(c.INTERNAL_KEY_STATUS_CHANGED,e)}}));break;case"message":var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(c.INTERNAL_KEY_MESSAGE,{data:new s.default(this,t,void 0,e.messageType)})}},getSessionID:function(){return e.sessionId},getExpirationTime:function(){return e.expiration},getKeyStatuses:function(){return e.keyStatuses},getUsable:function(){var t=!1;return e.keyStatuses.forEach((function(){var e=M(arguments);"usable"===e.status&&(t=!0)})),t},getSessionType:function(){return r}};return e.addEventListener("keystatuseschange",u),e.addEventListener("message",u),e.closed.then((function(){E(u),f.debug("DRM: Session closed.  SessionID = "+u.getSessionID()),n.trigger(c.KEY_SESSION_CLOSED,{data:u.getSessionID()})})),v.push(u),u}return h={getAllInitData:function(){for(var e=[],t=0;t<v.length;t++)v[t].initData&&e.push(v[t].initData);return e},requestKeySystemAccess:function(e){!function e(t,r){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(r){var i=t[r].ks,a=t[r].configs,o=i.systemString;o===l.default.PLAYREADY_KEYSTEM_STRING&&"required"===a[0].persistentState&&(o+=".recommendation"),navigator.requestMediaKeySystemAccess(o,a).then((function(e){var t="function"==typeof e.getConfiguration?e.getConfiguration():null,r=new u.default(i,t);r.mksa=e,n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:r})})).catch((function(i){++r<t.length?e(t,r):n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+i.message})}))}(r)}(e,0)},getKeySystem:function(){return p},selectKeySystem:function(e){e.mksa.createMediaKeys().then((function(t){p=e.keySystem,m=t,g?g.setMediaKeys(m).then((function(){n.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)})):n.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)})).catch((function(){n.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+e.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))},setMediaElement:function(e){g!==e&&(g&&(g.removeEventListener("encrypted",y),g.setMediaKeys&&g.setMediaKeys(null)),(g=e)&&(g.addEventListener("encrypted",y),g.setMediaKeys&&m&&g.setMediaKeys(m)))},setServerCertificate:function(e){if(!p||!m)throw new Error("Can not set server certificate until you have selected a key system");m.setServerCertificate(e).then((function(){f.info("DRM: License server certificate successfully updated."),n.trigger(c.SERVER_CERTIFICATE_UPDATED)})).catch((function(e){n.trigger(c.SERVER_CERTIFICATE_UPDATED,{error:new o.default(a.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,a.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+e.name)})}))},createKeySession:function(e,t,r){if(!p||!m)throw new Error("Can not create sessions until you have selected a key system");var i=m.createSession(r),s=b(i,e,r),u=this.getKeySystem().systemString===l.default.CLEARKEY_KEYSTEM_STRING&&t&&t.clearkeys?"keyids":"cenc";i.generateRequest(u,e).then((function(){f.debug("DRM: Session created.  SessionID = "+s.getSessionID()),n.trigger(c.KEY_SESSION_CREATED,{data:s})})).catch((function(e){E(s),n.trigger(c.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+e.name)})}))},updateKeySession:function(e,t){var r=e.session;_.isClearKey(p)&&(t=t.toJWK()),r.update(t).catch((function(t){n.trigger(c.KEY_ERROR,{data:new o.default(a.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+t.name,e)})}))},loadKeySession:function(e,t,r){if(!p||!m)throw new Error("Can not load sessions until you have selected a key system");for(var i=0;i<v.length;i++)if(e===v[i].sessionId)return void f.warn("DRM: Ignoring session ID because we have already seen it!");var s=m.createSession(r),u=b(s,t,r,e);s.load(e).then((function(t){t?(f.debug("DRM: Session loaded.  SessionID = "+u.getSessionID()),n.trigger(c.KEY_SESSION_CREATED,{data:u})):(E(u),n.trigger(c.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+e+")")}))})).catch((function(t){E(u),n.trigger(c.KEY_SESSION_CREATED,{data:null,error:new o.default(a.default.KEY_SESSION_CREATED_ERROR_CODE,a.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+e+")! "+t.name)})}))},removeKeySession:function(e){e.session.remove().then((function(){f.debug("DRM: Session removed.  SessionID = "+e.getSessionID()),n.trigger(c.KEY_SESSION_REMOVED,{data:e.getSessionID()})}),(function(t){n.trigger(c.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+e.getSessionID()+"). "+t.name})}))},closeKeySession:function(e){T(e).catch((function(t){E(e),n.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.getSessionID()+") "+t.name})}))},stop:function(){for(var e=void 0,t=0;t<v.length;t++)(e=v[t]).getUsable()||T(e).catch((function(){E(e)}))},reset:function(){var e=v.length,t=void 0;0!==e?function(){for(var r=function(e){E(e),0===v.length&&(g?(g.removeEventListener("encrypted",y),g.setMediaKeys(null).then((function(){n.trigger(c.TEARDOWN_COMPLETE)}))):n.trigger(c.TEARDOWN_COMPLETE))},i=0;i<e;i++)!function(e){t.session.closed.then((function(){r(e)})),T(t).catch((function(){r(e)}))}(t=v[i])}():n.trigger(c.TEARDOWN_COMPLETE)}},f=d.getLogger(h),p=null,g=null,m=null,v=[],_=(0,r.default)(t).getInstance(),y={handleEvent:function(e){switch(e.type){case"encrypted":if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(c.NEED_KEY,{key:new i.default(t,e.initDataType)})}}}},h}d.__dashjs_factory_name="ProtectionModel_21Jan2015",t.default=dashjs.FactoryMaker.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(42)),i=c(n(64)),a=c(n(8)),o=c(n(30)),s=c(n(65)),u=c(n(61)),l=c(n(66));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t=this.context,n=e.eventBus,c=e.events,d=e.debug,h=e.api,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0;function M(){try{for(var e=0;e<_.length;e++)b(_[e]);g&&g.removeEventListener(h.needkey,T),n.trigger(c.TEARDOWN_COMPLETE)}catch(e){n.trigger(c.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+e.message})}}function b(e){var t=e.session;t.removeEventListener(h.error,e),t.removeEventListener(h.message,e),t.removeEventListener(h.ready,e),t.removeEventListener(h.close,e);for(var n=0;n<_.length;n++)if(_[n]===e){_.splice(n,1);break}t[h.release]()}function A(){var e=null,t=function(){g.removeEventListener("loadedmetadata",e),g[h.setMediaKeys](v),n.trigger(c.VIDEO_ELEMENT_SELECTED)};g.readyState>=1?t():(e=t.bind(this),g.addEventListener("loadedmetadata",e))}return f={getAllInitData:function(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);return e},requestKeySystemAccess:function(e){for(var t=!1,r=0;r<e.length;r++)for(var i=e[r].ks.systemString,a=e[r].configs,o=null,s=null,d=0;d<a.length;d++){var f=a[d].audioCapabilities,p=a[d].videoCapabilities;if(f&&0!==f.length){o=[];for(var g=0;g<f.length;g++)window[h.MediaKeys].isTypeSupported(i,f[g].contentType)&&o.push(f[g])}if(p&&0!==p.length){s=[];for(var m=0;m<p.length;m++)window[h.MediaKeys].isTypeSupported(i,p[m].contentType)&&s.push(p[m])}if(!(!o&&!s||o&&0===o.length||s&&0===s.length)){t=!0;var v=new u.default(o,s),y=E.getKeySystemBySystemString(i);n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:new l.default(y,v)});break}}t||n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return m},selectKeySystem:function(e){try{v=e.mediaKeys=new window[h.MediaKeys](e.keySystem.systemString),m=e.keySystem,y=e,g&&A(),n.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)}catch(e){n.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+m.systemString+")! Could not create MediaKeys -- TODO"})}},setMediaElement:function(e){g!==e&&(g&&g.removeEventListener(h.needkey,T),(g=e)&&(g.addEventListener(h.needkey,T),v&&A()))},createKeySession:function(e,t,r,i){if(!m||!v||!y)throw new Error("Can not create sessions until you have selected a key system");var u=null;if(y.ksConfiguration.videoCapabilities&&y.ksConfiguration.videoCapabilities.length>0&&(u=y.ksConfiguration.videoCapabilities[0]),null===u&&y.ksConfiguration.audioCapabilities&&y.ksConfiguration.audioCapabilities.length>0&&(u=y.ksConfiguration.audioCapabilities[0]),null===u)throw new Error("Can not create sessions for unknown content types.");var l=u.contentType,d=v.createSession(l,new Uint8Array(e),i?new Uint8Array(i):null),f=function(e,t){return{session:e,initData:t,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(e){switch(e.type){case h.error:n.trigger(c.KEY_ERROR,{data:new a.default(o.default.MEDIA_KEYERR_CODE,"KeyError",this)});break;case h.message:var t=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;n.trigger(c.INTERNAL_KEY_MESSAGE,{data:new s.default(this,t,e.destinationURL)});break;case h.ready:p.debug("DRM: Key added."),n.trigger(c.KEY_ADDED);break;case h.close:p.debug("DRM: Session closed.  SessionID = "+this.getSessionID()),n.trigger(c.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}(d,e);d.addEventListener(h.error,f),d.addEventListener(h.message,f),d.addEventListener(h.ready,f),d.addEventListener(h.close,f),_.push(f),p.debug("DRM: Session created.  SessionID = "+f.getSessionID()),n.trigger(c.KEY_SESSION_CREATED,{data:f})},updateKeySession:function(e,t){var n=e.session;E.isClearKey(m)?n.update(new Uint8Array(t.toJWK())):n.update(new Uint8Array(t))},closeKeySession:b,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:M,reset:M},p=d.getLogger(f),g=null,m=null,v=null,y=null,_=[],E=(0,r.default)(t).getInstance(),T={handleEvent:function(e){switch(e.type){case h.needkey:if(e.initData){var t=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(c.NEED_KEY,{key:new i.default(t,"cenc")})}}}},f}d.__dashjs_factory_name="ProtectionModel_3Feb2014",t.default=dashjs.FactoryMaker.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(42)),i=c(n(64)),a=c(n(8)),o=c(n(65)),s=c(n(61)),u=c(n(66)),l=c(n(30));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){e=e||{};var t=this.context,n=e.eventBus,c=e.events,d=e.debug,h=e.api,f=e.errHandler,p=void 0,g=void 0,m=void 0,v=void 0,y=void 0,_=void 0,T=void 0,E=void 0,M=void 0;function b(){m&&S();for(var e=0;e<T.length;e++)A(T[e]);n.trigger(c.TEARDOWN_COMPLETE)}function A(e){try{m[h.cancelKeyRequest](v.systemString,e.sessionID)}catch(t){n.trigger(c.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+e.sessionID+") "+t.message})}}function w(e,t){if(t&&e){for(var n=e.length,r=0;r<n;r++)if(e[r].sessionID==t)return e[r];return null}return null}function S(){m.removeEventListener(h.keyerror,M),m.removeEventListener(h.needkey,M),m.removeEventListener(h.keymessage,M),m.removeEventListener(h.keyadded,M)}return p={getAllInitData:function(){for(var e=[],t=0;t<_.length;t++)e.push(_[t].initData);for(var n=0;n<T.length;n++)e.push(T[n].initData);return e},requestKeySystemAccess:function(e){var t=m;t||(t=document.createElement("video"));for(var r=!1,i=0;i<e.length;i++)for(var a=e[i].ks.systemString,o=e[i].configs,l=null,d=0;d<o.length;d++){var h=o[d].videoCapabilities;if(h&&0!==h.length){l=[];for(var f=0;f<h.length;f++)""!==t.canPlayType(h[f].contentType,a)&&l.push(h[f])}if(l&&(!l||0!==l.length)){r=!0;var p=new s.default(null,l),g=y.getKeySystemBySystemString(a);n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{data:new u.default(g,p)});break}}r||n.trigger(c.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})},getKeySystem:function(){return v},selectKeySystem:function(e){v=e.keySystem,n.trigger(c.INTERNAL_KEY_SYSTEM_SELECTED)},setMediaElement:function(e){if(m!==e){if(m){S();for(var t=0;t<T.length;t++)A(T[t]);T=[]}(m=e)&&(m.addEventListener(h.keyerror,M),m.addEventListener(h.needkey,M),m.addEventListener(h.keymessage,M),m.addEventListener(h.keyadded,M),n.trigger(c.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(e){if(!v)throw new Error("Can not create sessions until you have selected a key system");if(E||0===T.length){var t={sessionID:null,initData:e,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return _.push(t),m[h.generateKeyRequest](v.systemString,new Uint8Array(e)),t}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(e,t){var n=e.sessionID;if(y.isClearKey(v))for(var r=0;r<t.keyPairs.length;r++)m[h.addKey](v.systemString,t.keyPairs[r].key,t.keyPairs[r].keyID,n);else m[h.addKey](v.systemString,new Uint8Array(t),new Uint8Array(e.initData),n)},closeKeySession:A,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:b,reset:b},g=d.getLogger(p),m=null,v=null,_=[],T=[],y=(0,r.default)(t).getInstance(),M={handleEvent:function(e){var t=null;switch(e.type){case h.needkey:var r=ArrayBuffer.isView(e.initData)?e.initData.buffer:e.initData;n.trigger(c.NEED_KEY,{key:new i.default(r,"cenc")});break;case h.keyerror:if((t=w(T,e.sessionId))||(t=w(_,e.sessionId)),t){var s=l.default.MEDIA_KEYERR_CODE,u="";switch(e.errorCode.code){case 1:s=l.default.MEDIA_KEYERR_UNKNOWN_CODE,u+="MEDIA_KEYERR_UNKNOWN - "+l.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:s=l.default.MEDIA_KEYERR_CLIENT_CODE,u+="MEDIA_KEYERR_CLIENT - "+l.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:s=l.default.MEDIA_KEYERR_SERVICE_CODE,u+="MEDIA_KEYERR_SERVICE - "+l.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:s=l.default.MEDIA_KEYERR_OUTPUT_CODE,u+="MEDIA_KEYERR_OUTPUT - "+l.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:s=l.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,u+="MEDIA_KEYERR_HARDWARECHANGE - "+l.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:s=l.default.MEDIA_KEYERR_DOMAIN_CODE,u+="MEDIA_KEYERR_DOMAIN - "+l.default.MEDIA_KEYERR_DOMAIN_MESSAGE}u+="  System Code = "+e.systemCode,n.trigger(c.KEY_ERROR,{data:new a.default(s,u,t)})}else g.error("No session token found for key error");break;case h.keyadded:(t=w(T,e.sessionId))||(t=w(_,e.sessionId)),t?(g.debug("DRM: Key added."),n.trigger(c.KEY_ADDED,{data:t})):g.debug("No session token found for key added");break;case h.keymessage:if((E=null!==e.sessionId&&void 0!==e.sessionId)?!(t=w(T,e.sessionId))&&_.length>0&&(t=_.shift(),T.push(t),t.sessionID=e.sessionId,n.trigger(c.KEY_SESSION_CREATED,{data:t})):_.length>0&&(t=_.shift(),T.push(t),0!==_.length&&f.error(new a.default(l.default.MEDIA_KEY_MESSAGE_ERROR_CODE,l.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),t){var d=ArrayBuffer.isView(e.message)?e.message.buffer:e.message;t.keyMessage=d,n.trigger(c.INTERNAL_KEY_MESSAGE,{data:new o.default(t,d,e.defaultURL)})}else g.warn("No session token found for key message")}}},p}d.__dashjs_factory_name="ProtectionModel_01b",t.default=dashjs.FactoryMaker.getClassFactory(d)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(75),a=(r=i)&&r.__esModule?r:{default:r};var o=function(){var e=void 0;function t(t,n,r){if(!t||!/^VIDEO$/i.test(t.nodeName))return null;if(t._dashjs_player)return t._dashjs_player;var i=void 0,o=t.id||t.name||"video element";if(!(n=n||[].slice.call(t.querySelectorAll("source")).filter((function(e){return"application/dash+xml"==e.type}))[0])&&t.src)(n=document.createElement("source")).src=t.src;else if(!n&&!t.src)return null;return r=r||{},(i=(0,a.default)(r).create()).initialize(t,n.src,t.autoplay),e||(e=i.getDebug().getLogger()),e.debug("Converted "+o+" to dash.js player and added content: "+n.src),t._dashjs_player=i,i}function n(e){return/^VIDEO$/i.test(e.nodeName)?e:n(e.parentNode)}return{create:t,createAll:function(e,r){var i=[];e=e||"[data-dashjs-player]";for(var a=(r=r||document).querySelectorAll(e),o=0;o<a.length;o++){var s=t(a[o],null);i.push(s)}for(var u=r.querySelectorAll('source[type="application/dash+xml"]'),l=0;l<u.length;l++){var c=t(n(u[l]),null);i.push(c)}return i}}}(),s=void 0;!("undefined"!=typeof window&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&"undefined"!=typeof window&&window&&window.addEventListener&&("complete"===window.document.readyState?window.dashjs?o.createAll():s=window.setInterval((function(){window.dashjs&&(window.clearInterval(s),o.createAll())}),500):window.addEventListener("load",(function e(){window.removeEventListener("load",e),o.createAll()}))),t.default=o},function(e,t){},function(e,t){e.exports=function(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var n=Object.prototype.toString},function(e,t){var n=function(e){return e.replace(/^\s+|\s+$/g,"")};e.exports=function(e){if(!e)return{};for(var t,r={},i=n(e).split("\n"),a=0;a<i.length;a++){var o=i[a],s=o.indexOf(":"),u=n(o.slice(0,s)).toLowerCase(),l=n(o.slice(s+1));void 0===r[u]?r[u]=l:(t=r[u],"[object Array]"===Object.prototype.toString.call(t)?r[u].push(l):r[u]=[r[u],l])}return r}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e};var n=Object.prototype.hasOwnProperty},function(e,t){var n=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function r(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function i(e){function t(e,t,n,r){return 3600*(0|e)+60*(0|t)+(0|n)+(0|r)/1e3}var n=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function a(){this.values=n(null)}function o(e,t,n,r){var i=r?e.split(r):[e];for(var a in i)if("string"==typeof i[a]){var o=i[a].split(n);if(2===o.length)t(o[0],o[1])}}function s(e,t,n){var s=e;function u(){var t=i(e);if(null===t)throw new r(r.Errors.BadTimeStamp,"Malformed timestamp: "+s);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=u(),l(),"--\x3e"!==e.substr(0,3))throw new r(r.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+s);e=e.substr(3),l(),t.endTime=u(),l(),function(e,t){var r=new a;o(e,(function(e,t){switch(e){case"region":for(var i=n.length-1;i>=0;i--)if(n[i].id===t){r.set(e,n[i].region);break}break;case"vertical":r.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];r.integer(e,o),r.percent(e,o)&&r.set("snapToLines",!1),r.alt(e,o,["auto"]),2===a.length&&r.alt("lineAlign",a[1],["start","middle","end"]);break;case"position":a=t.split(","),r.percent(e,a[0]),2===a.length&&r.alt("positionAlign",a[1],["start","middle","end"]);break;case"size":r.percent(e,t);break;case"align":r.alt(e,t,["start","middle","end","left","right"])}}),/:/,/\s/),t.region=r.get("region",null),t.vertical=r.get("vertical",""),t.line=r.get("line","auto"),t.lineAlign=r.get("lineAlign","start"),t.snapToLines=r.get("snapToLines",!0),t.size=r.get("size",100),t.align=r.get("align","middle"),t.position=r.get("position",{start:0,left:0,middle:50,end:100,right:100},t.align),t.positionAlign=r.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},t.align)}(e,t)}r.prototype=n(Error.prototype),r.prototype.constructor=r,r.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},a.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var r=0;r<n.length;++r)if(t===n[r]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},l={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},c={v:"title",lang:"lang"},d={rt:"ruby"};function h(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function r(e){return u[e]}function a(e){for(;y=e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e=e.replace(y[0],r);return e}function o(e,t){return!d[t.localName]||d[t.localName]===e.localName}function s(t,n){var r=l[t];if(!r)return null;var i=e.document.createElement(r);i.localName=r;var a=c[t];return a&&n&&(i[a]=n.trim()),i}for(var h,f=e.document.createElement("div"),p=f,g=[];null!==(h=n());)if("<"!==h[0])p.appendChild(e.document.createTextNode(a(h)));else{if("/"===h[1]){g.length&&g[g.length-1]===h.substr(2).replace(">","")&&(g.pop(),p=p.parentNode);continue}var m,v=i(h.substr(1,h.length-2));if(v){m=e.document.createProcessingInstruction("timestamp",v),p.appendChild(m);continue}var y=h.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=s(y[1],y[3])))continue;if(!o(p,m))continue;y[2]&&(m.className=y[2].substr(1).replace("."," ")),g.push(y[1]),p.appendChild(m),p=m}return f}var f=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function p(e){for(var t=0;t<f.length;t++){var n=f[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function g(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function r(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function i(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?i(e):t.childNodes?(r(e,t),i(e)):void 0}for(r(t,e);n=i(t);)for(var a=0;a<n.length;a++)if(p(n.charCodeAt(a)))return"rtl";return"ltr"}function m(){}function v(e,t,n){m.call(this),this.cue=t,this.cueDiv=h(e,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=e.document.createElement("div"),r={direction:g(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var i=0;switch(t.positionAlign){case"start":i=t.position;break;case"middle":i=t.position-t.size/2;break;case"end":i=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(i,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(i,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function y(e){var t,n,r,i;if(e.div){n=e.div.offsetHeight,r=e.div.offsetWidth,i=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||i,this.height=e.height||n,this.bottom=e.bottom||i+(e.height||n),this.width=e.width||r,this.lineHeight=void 0!==t?t:e.lineHeight}function _(e,t,n,r){var i=new y(t),a=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,r=0,i=0;i<n.length&&n[i]!==t;i++)"showing"===n[i].mode&&r++;return-1*++r}(a),s=[];if(a.snapToLines){var u;switch(a.vertical){case"":s=["+y","-y"],u="height";break;case"rl":s=["+x","-x"],u="width";break;case"lr":s=["-x","+x"],u="width"}var l=i.lineHeight,c=l*Math.round(o),d=n[u]+l,h=s[0];Math.abs(c)>d&&(c=c<0?-1:1,c*=Math.ceil(d/l)*l),o<0&&(c+=""===a.vertical?n.height:n.width,s=s.reverse()),i.move(h,c)}else{var f=i.lineHeight/n.height*100;switch(a.lineAlign){case"middle":o-=f/2;break;case"end":o-=f}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],i=new y(t)}var p=function(e,t){for(var i,a=new y(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(r);)e.move(t[s]);if(e.within(n))return e;var u=e.intersectPercentage(n);o>u&&(i=new y(e),o=u),e=new y(a)}return i||a}(i,s);t.move(p.toCSSCompatValues(n))}function T(){}m.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},m.prototype.formatStyle=function(e,t){return 0===e?0:e+t},v.prototype=n(m.prototype),v.prototype.constructor=v,y.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},y.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},y.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},y.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},y.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},y.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},y.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},y.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,r=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||r,height:e.height||t,bottom:e.bottom||r+(e.height||t),width:e.width||n}},T.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},T.convertCueToDOMTree=function(e,t){return e&&t?h(e,t):null};T.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var r=e.document.createElement("div");if(r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin="1.5%",n.appendChild(r),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var i=[],a=y.getSimpleBoxPosition(r),o={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,s,u=0;u<t.length;u++)s=t[u],n=new v(e,s,o),r.appendChild(n.div),_(0,n,a,i),s.displayState=n.div,i.push(y.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)r.appendChild(t[s].displayState)},T.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},T.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof r))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t=this;function n(){for(var e=t.buffer,n=0;n<e.length&&"\r"!==e[n]&&"\n"!==e[n];)++n;var r=e.substr(0,n);return"\r"===e[n]&&++n,"\n"===e[n]&&++n,t.buffer=e.substr(n),r}function u(e){e.match(/X-TIMESTAMP-MAP/)?o(e,(function(e,n){switch(e){case"X-TIMESTAMP-MAP":!function(e){var n=new a;o(e,(function(e,t){switch(e){case"MPEGT":n.integer(e+"S",t);break;case"LOCA":n.set(e+"L",i(t))}}),/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}}),/=/):o(e,(function(e,n){switch(e){case"Region":!function(e){var n=new a;if(o(e,(function(e,t){switch(e){case"id":n.set(e,t);break;case"width":n.percent(e,t);break;case"lines":n.integer(e,t);break;case"regionanchor":case"viewportanchor":var r=t.split(",");if(2!==r.length)break;var i=new a;if(i.percent("x",r[0]),i.percent("y",r[1]),!i.has("x")||!i.has("y"))break;n.set(e+"X",i.get("x")),n.set(e+"Y",i.get("y"));break;case"scroll":n.alt(e,t,["up"])}}),/=/,/\s/),n.has("id")){var r=new(t.vttjs.VTTRegion||t.window.VTTRegion);r.width=n.get("width",100),r.lines=n.get("lines",3),r.regionAnchorX=n.get("regionanchorX",0),r.regionAnchorY=n.get("regionanchorY",100),r.viewportAnchorX=n.get("viewportanchorX",0),r.viewportAnchorY=n.get("viewportanchorY",100),r.scroll=n.get("scroll",""),t.onregion&&t.onregion(r),t.regionList.push({id:n.get("id"),region:r})}}(n)}}),/:/)}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var l;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var c=(l=n()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new r(r.Errors.BadSignature);t.state="HEADER"}for(var d=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(d?d=!1:l=n(),t.state){case"HEADER":/:/.test(l)?u(l):l||(t.state="ID");continue;case"NOTE":l||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(l)){t.state="NOTE";break}if(!l)continue;if(t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,""),t.state="CUE",-1===l.indexOf("--\x3e")){t.cue.id=l;continue}case"CUE":try{s(l,t.cue,t.regionList)}catch(e){t.reportOrThrowError(e),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var h=-1!==l.indexOf("--\x3e");if(!l||h&&(d=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=l;continue;case"BADCUE":l||(t.state="ID");continue}}}catch(e){t.reportOrThrowError(e),"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new r(r.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}},e.exports=T},function(e,t){var n={"":1,lr:1,rl:1},r={start:1,middle:1,end:1,left:1,right:1};function i(e){return"string"==typeof e&&(!!r[e.toLowerCase()]&&e.toLowerCase())}function a(e,t,r){this.hasBeenReset=!1;var a="",o=!1,s=e,u=t,l=r,c=null,d="",h=!0,f="auto",p="start",g=50,m="middle",v=50,y="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(e){a=""+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");u=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(e){c=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return d},set:function(e){var t=function(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");d=t,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return h},set:function(e){h=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return f},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");f=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return p},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");p=t,this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");y=t,this.hasBeenReset=!0}}}),this.displayState=void 0}a.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=a},function(e,t){var n={"":!0,up:!0};function r(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,t=3,i=0,a=100,o=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!r(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return t},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");t=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!r(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(e){if(!r(e))throw new Error("RegionAnchorY must be between 0 and 100.");i=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!r(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!r(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return u},set:function(e){var t=function(e){return"string"==typeof e&&(!!n[e.toLowerCase()]&&e.toLowerCase())}(e);if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");u=t}}})}},function(e,t,n){"use strict";var r=n(109),i=n(108),a=function(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new c(0,0),new c(0,1),new c(1,0),new c(1,1)],this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this)};a.prototype=new r,a.prototype.push=function(e){var t,n,r;if("sei_rbsp"===e.nalUnitType&&(t=i.parseSei(e.escapedRBSP)).payloadType===i.USER_DATA_REGISTERED_ITU_T_T35&&(n=i.parseUserData(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));r=i.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(r),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},a.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},a.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2&&this.dispatchCea608Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},a.prototype.flush=function(){return this.flushStream("flush")},a.prototype.partialFlush=function(){return this.flushStream("partialFlush")},a.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},a.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},a.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},a.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},a.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)};var o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},s=function(e){return null===e?"":(e=o[e]||e,String.fromCharCode(e))},u=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],l=function(){for(var e=[],t=15;t--;)e.push("");return e},c=function(e,t){c.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,r,i,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),r=t>>>8,i=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=l();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=l();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=l()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(r,i))a=s((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(r,i))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=s((r=(3&r)<<8)|i),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(r,i))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&i)&&this.addFormatting(e.pts,["i"]),1==(1&i)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(r,i))this.column_+=3&i;else if(this.isPAC(r,i)){var o=u.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&i&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(i)&&14==(14&i)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(r)&&(0===i&&(i=null),a=s(r),a+=s(i),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};c.prototype=new r,c.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e){try{return e.trim()}catch(e){return console.error("Skipping malformed caption."),""}})).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},c.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=l(),this.nonDisplayed_=l(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},c.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},c.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},c.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},c.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},c.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},c.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},c.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},c.prototype.isNormalChar=function(e){return e>=32&&e<=127},c.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=l(),this.displayed_=l()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},c.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},c.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},c.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},c.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},c.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},c.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},e.exports={CaptionStream:a,Cea608Stream:c}},function(e,t,n){"use strict";var r=n(109),i=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},a=function(e){var t,n;a.prototype.init.call(this),this.type_=e||"shared",this.push=function(e){"shared"!==this.type_&&e.type!==this.type_||(void 0===n&&(n=e.dts),e.dts=i(e.dts,n),e.pts=i(e.pts,n),t=e.dts,this.trigger("data",e))},this.flush=function(){n=t,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,t=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};a.prototype=new r,e.exports={TimestampRolloverStream:a,handleRollover:i}},function(e,t,n){"use strict";var r=n(110),i=function(e){var t=31&e[1];return t<<=8,t|=e[2]},a=function(e){return!!(64&e[1])},o=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},s=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}};e.exports={parseType:function(e,t){var n=i(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=a(e),n=4+o(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=a(e),r=4+o(e);if(n&&(r+=e[r]+1),1&e[r+5]){var i;i=3+((15&e[r+1])<<8|e[r+2])-4;for(var s=12+((15&e[r+10])<<8|e[r+11]);s<i;){var u=r+s;t[(31&e[u+1])<<8|e[u+2]]=e[u],s+=5+((15&e[u+3])<<8|e[u+4])}return t}},parsePayloadUnitStartIndicator:a,parsePesType:function(e,t){switch(t[i(e)]){case r.H264_STREAM_TYPE:return"video";case r.ADTS_STREAM_TYPE:return"audio";case r.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!a(e))return null;var t=4+o(e);if(t>=e.byteLength)return null;var n,r=null;return 192&(n=e[t+7])&&((r={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,r.pts*=4,r.pts+=(6&e[t+13])>>>1,r.dts=r.pts,64&n&&(r.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,r.dts*=4,r.dts+=(6&e[t+18])>>>1)),r},videoPacketContainsKeyFrame:function(e){for(var t=4+o(e),n=e.subarray(t),r=0,i=0,a=!1;i<n.byteLength-3;i++)if(1===n[i+2]){r=i+5;break}for(;r<n.byteLength;)switch(n[r]){case 0:if(0!==n[r-1]){r+=2;break}if(0!==n[r-2]){r++;break}i+3!==r-2&&"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(a=!0);do{r++}while(1!==n[r]&&r<n.length);i=r-2,r+=3;break;case 1:if(0!==n[r-1]||0!==n[r-2]){r+=3;break}"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(a=!0),i=r-2,r+=3;break;default:r+=3}return n=n.subarray(i),r-=i,i=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===s(31&n[i+3])&&(a=!0),a}}},function(e,t,n){"use strict";var r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]};e.exports={isLikelyAacData:function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},parseId3TagSize:function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?n+20:n+10},parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,r=e[t+4]<<3;return 6144&e[t+3]|r|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return r[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,r;t=10,64&e[5]&&(t+=4,t+=i(e.subarray(10,14)));do{if((n=i(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){r=e.subarray(t+10,t+n+10);for(var a=0;a<r.byteLength;a++)if(0===r[a]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i}(r,0,a))){var o=r.subarray(a+1),s=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return s*=4,s+=3&o[7]}break}}t+=10,t+=n}while(t<e.byteLength);return null}}},function(e,t){var n,r,i,a,o,s,u;n=function(e){return 9e4*e},r=function(e,t){return e*t},i=function(e){return e/9e4},a=function(e,t){return e/t},o=function(e,t){return n(a(e,t))},s=function(e,t){return r(i(e),t)},u=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:9e4,secondsToVideoTs:n,secondsToAudioTs:r,videoTsToSeconds:i,audioTsToSeconds:a,audioTsToVideoTs:o,videoTsToAudioTs:s,metadataTsToSeconds:u}},function(e,t,n){(function(r){var i,a,o;function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}/*! @name videojs-vr @version 1.6.0 @license Apache-2.0 */!function(r,u){"object"==s(t)&&void 0!==e?e.exports=u(n(0),n(2),n(44)):(a=[n(0),n(2),n(44)],void 0===(o="function"==typeof(i=u)?i.apply(t,a):i)||(e.exports=o))}(0,(function(e,t,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i,a=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},o=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t},u="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:{},l=function(e,t){return function(e,t){
/**
   * @license
   * webvr-polyfill
   * Copyright (c) 2015-2017 Google
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * cardboard-vr-display
   * Copyright (c) 2015-2017 Google
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * webvr-polyfill-dpdb 
   * Copyright (c) 2017 Google
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * wglu-preserve-state
   * Copyright (c) 2016, Brandon Jones.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
/**
   * @license
   * nosleep.js
   * Copyright (c) 2017, Rich Tibbett
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
e.exports=function(){var e,t="undefined"!=typeof window?window:void 0!==u?u:"undefined"!=typeof self?self:{},n=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},r=function(e,t){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]},i=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},a=(e=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,n){
/**
   * @license
   * cardboard-vr-display
   * Copyright (c) 2015-2017 Google
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * gl-preserve-state
   * Copyright (c) 2016, Brandon Jones.
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
/**
   * @license
   * webvr-polyfill-dpdb
   * Copyright (c) 2015-2017 Google
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   * http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   */
/**
   * @license
   * nosleep.js
   * Copyright (c) 2017, Rich Tibbett
   *
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   *
   * The above copyright notice and this permission notice shall be included in
   * all copies or substantial portions of the Software.
   *
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
   * THE SOFTWARE.
   */
e.exports=function(){var e,n,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e,t,n){return e+(t-e)*n},o=function(){var e=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return e}}(),s=function(){var e=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return e}}(),u=(/^((?!chrome|android).)*safari/i.test(navigator.userAgent),function(){var e=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return e}}()),l=(n=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),r=n?parseInt(n[1],10):null,function(){return r}),c=function(){var e=!1;if(65===l()){var t=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(t){var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(t[1].split("."),4),r=(n[0],n[1],n[2]),i=n[3];e=3325===parseInt(r,10)&&parseInt(i,10)<148}}return function(){return e}}(),d=function(){var e=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return e}}(),h=function(){var e=90==window.orientation||-90==window.orientation;return d()?!e:e},f=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},p=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},g=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},m=function(e,t,n,r){var i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t),e.compileShader(i);var a=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(a,n),e.compileShader(a);var o=e.createProgram();for(var s in e.attachShader(o,i),e.attachShader(o,a),r)e.bindAttribLocation(o,r[s],s);return e.linkProgram(o),e.deleteShader(i),e.deleteShader(a),o},v=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i="",a=0;a<r;a++)n[i=e.getActiveUniform(t,a).name.replace("[0]","")]=e.getUniformLocation(t,i);return n},y=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t},_=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},T=function(e){if(o()){var t=e.style.width,n=e.style.height;e.style.width=parseInt(t)+1+"px",e.style.height=parseInt(n)+"px",setTimeout((function(){e.style.width=t,e.style.height=n}),100)}window.canvas=e},E=function(){var e=Math.PI/180,t=.25*Math.PI,n=new Float32Array([0,0,0,1]),r=new Float32Array([0,0,0]);function i(i,a,o,s,u,l){!function(n,r,i,a){var o=Math.tan(r?r.upDegrees*e:t),s=Math.tan(r?r.downDegrees*e:t),u=Math.tan(r?r.leftDegrees*e:t),l=Math.tan(r?r.rightDegrees*e:t),c=2/(u+l),d=2/(o+s);n[0]=c,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=d,n[6]=0,n[7]=0,n[8]=-(u-l)*c*.5,n[9]=(o-s)*d*.5,n[10]=a/(i-a),n[11]=-1,n[12]=0,n[13]=0,n[14]=a*i/(i-a),n[15]=0}(i,s||null,l.depthNear,l.depthFar);var c,d,h,f,p,g,m,v,y,_,T,E,M,b,A,w,S,x,D,I=o.orientation||n;c=a,h=o.position||r,T=(f=(d=I)[0])*(v=f+f),E=f*(y=(p=d[1])+p),M=f*(_=(g=d[2])+g),b=p*y,A=p*_,w=g*_,S=(m=d[3])*v,x=m*y,D=m*_,c[0]=1-(b+w),c[1]=E+D,c[2]=M-x,c[3]=0,c[4]=E-D,c[5]=1-(T+w),c[6]=A+S,c[7]=0,c[8]=M+x,c[9]=A-S,c[10]=1-(T+b),c[11]=0,c[12]=h[0],c[13]=h[1],c[14]=h[2],c[15]=1,u&&function(e,t,n){var r,i,a,o,s,u,l,c,d,h,f,p,g=n[0],m=n[1],v=n[2];t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=l,e[7]=c,e[8]=d,e[9]=h,e[10]=f,e[11]=p,e[12]=r*g+s*m+d*v+t[12],e[13]=i*g+u*m+h*v+t[13],e[14]=a*g+l*m+f*v+t[14],e[15]=o*g+c*m+p*v+t[15])}(a,a,u),function(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,_=n*u-i*o,T=n*l-a*o,E=r*u-i*s,M=r*l-a*s,b=i*l-a*u,A=c*g-d*p,w=c*m-h*p,S=c*v-f*p,x=d*m-h*g,D=d*v-f*g,I=h*v-f*m,C=y*I-_*D+T*x+E*S-M*w+b*A;C&&(C=1/C,e[0]=(s*I-u*D+l*x)*C,e[1]=(i*D-r*I-a*x)*C,e[2]=(g*b-m*M+v*E)*C,e[3]=(h*M-d*b-f*E)*C,e[4]=(u*S-o*I-l*w)*C,e[5]=(n*I-i*S+a*w)*C,e[6]=(m*T-p*b-v*_)*C,e[7]=(c*b-h*T+f*_)*C,e[8]=(o*D-s*S+l*A)*C,e[9]=(r*S-n*D-a*A)*C,e[10]=(p*M-g*T+v*y)*C,e[11]=(d*T-c*M-f*y)*C,e[12]=(s*w-o*x-u*A)*C,e[13]=(n*x-r*w+i*A)*C,e[14]=(g*_-p*E-m*y)*C,e[15]=(c*E-d*_+h*y)*C)}(a,a)}return function(e,t,n){return!(!e||!t||(e.pose=t,e.timestamp=t.timestamp,i(e.leftProjectionMatrix,e.leftViewMatrix,t,n._getFieldOfView("left"),n._getEyeOffset("left"),n),i(e.rightProjectionMatrix,e.rightViewMatrix,t,n._getFieldOfView("right"),n._getEyeOffset("right"),n),0))}}(),M=function(e){var t,n=e.indexOf("://");t=-1!==n?n+3:0;var r=e.indexOf("/",t);return-1===r&&(r=e.length),e.substring(0,r)},b=(e={},function(t,n){void 0===e[t]&&(console.warn("webvr-polyfill: "+n),e[t]=!0)}),A=function(e,t){b(e,e+" has been deprecated. This may not work on native WebVR displays. "+(t?"Please use "+t+" instead.":""))},w=function(e,t,n){if(t){for(var r=[],i=null,a=0;a<t.length;++a)switch(o=t[a]){case e.TEXTURE_BINDING_2D:case e.TEXTURE_BINDING_CUBE_MAP:if((u=t[++a])<e.TEXTURE0||u>e.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}i||(i=e.getParameter(e.ACTIVE_TEXTURE)),e.activeTexture(u),r.push(e.getParameter(o),null);break;case e.ACTIVE_TEXTURE:i=e.getParameter(e.ACTIVE_TEXTURE),r.push(null);break;default:r.push(e.getParameter(o))}for(n(e),a=0;a<t.length;++a){var o=t[a],s=r[a];switch(o){case e.ACTIVE_TEXTURE:break;case e.ARRAY_BUFFER_BINDING:e.bindBuffer(e.ARRAY_BUFFER,s);break;case e.COLOR_CLEAR_VALUE:e.clearColor(s[0],s[1],s[2],s[3]);break;case e.COLOR_WRITEMASK:e.colorMask(s[0],s[1],s[2],s[3]);break;case e.CURRENT_PROGRAM:e.useProgram(s);break;case e.ELEMENT_ARRAY_BUFFER_BINDING:e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,s);break;case e.FRAMEBUFFER_BINDING:e.bindFramebuffer(e.FRAMEBUFFER,s);break;case e.RENDERBUFFER_BINDING:e.bindRenderbuffer(e.RENDERBUFFER,s);break;case e.TEXTURE_BINDING_2D:if((u=t[++a])<e.TEXTURE0||u>e.TEXTURE31)break;e.activeTexture(u),e.bindTexture(e.TEXTURE_2D,s);break;case e.TEXTURE_BINDING_CUBE_MAP:var u;if((u=t[++a])<e.TEXTURE0||u>e.TEXTURE31)break;e.activeTexture(u),e.bindTexture(e.TEXTURE_CUBE_MAP,s);break;case e.VIEWPORT:e.viewport(s[0],s[1],s[2],s[3]);break;case e.BLEND:case e.CULL_FACE:case e.DEPTH_TEST:case e.SCISSOR_TEST:case e.STENCIL_TEST:s?e.enable(o):e.disable(o);break;default:console.log("No GL restore behavior for 0x"+o.toString(16))}i&&e.activeTexture(i)}}else n(e)},S=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join("\n"),x=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join("\n");function D(e,t,n,r){this.gl=e,this.cardboardUI=t,this.bufferScale=n,this.dirtySubmitFrameBindings=r,this.ctxAttribs=e.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=e.drawingBufferWidth,this.bufferHeight=e.drawingBufferHeight,this.realBindFramebuffer=e.bindFramebuffer,this.realEnable=e.enable,this.realDisable=e.disable,this.realColorMask=e.colorMask,this.realClearColor=e.clearColor,this.realViewport=e.viewport,o()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(e.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=m(e,S,x,this.attribs),this.uniforms=v(e,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.indexCount=0,this.renderTarget=e.createTexture(),this.framebuffer=e.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=e.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=e.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=e.createRenderbuffer()),this.patch(),this.onResize()}D.prototype.destroy=function(){var e=this.gl;this.unpatch(),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer),e.deleteTexture(this.renderTarget),e.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&e.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&e.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&e.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},D.prototype.onResize=function(){var e=this.gl,t=this,n=[e.RENDERBUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0];w(e,n,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.framebuffer),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.texImage2D(e.TEXTURE_2D,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,t.bufferWidth,t.bufferHeight,0,t.ctxAttribs.alpha?e.RGBA:e.RGB,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.renderTarget,0),t.ctxAttribs.depth&&t.ctxAttribs.stencil?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t.depthStencilBuffer)):t.ctxAttribs.depth?(e.bindRenderbuffer(e.RENDERBUFFER,t.depthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t.depthBuffer)):t.ctxAttribs.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,t.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.STENCIL_INDEX8,t.bufferWidth,t.bufferHeight),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.STENCIL_ATTACHMENT,e.RENDERBUFFER,t.stencilBuffer)),!e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),t.realClearColor.apply(e,t.clearColor)})),this.cardboardUI&&this.cardboardUI.onResize()},D.prototype.patch=function(){if(!this.isPatched){var e=this,t=this.gl.canvas,n=this.gl;o()||(t.width=f()*this.bufferScale,t.height=p()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return e.bufferWidth},set:function(n){e.bufferWidth=n,e.realCanvasWidth.set.call(t,n),e.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return e.bufferHeight},set:function(n){e.bufferHeight=n,e.realCanvasHeight.set.call(t,n),e.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){e.lastBoundFramebuffer=r||e.framebuffer,e.realBindFramebuffer.call(n,t,e.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!0;break;case n.DEPTH_TEST:e.depthTest=!0;break;case n.BLEND:e.blend=!0;break;case n.SCISSOR_TEST:e.scissorTest=!0;break;case n.STENCIL_TEST:e.stencilTest=!0}e.realEnable.call(n,t)},n.disable=function(t){switch(t){case n.CULL_FACE:e.cullFace=!1;break;case n.DEPTH_TEST:e.depthTest=!1;break;case n.BLEND:e.blend=!1;break;case n.SCISSOR_TEST:e.scissorTest=!1;break;case n.STENCIL_TEST:e.stencilTest=!1}e.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,i,a){e.colorMask[0]=t,e.colorMask[1]=r,e.colorMask[2]=i,e.colorMask[3]=a,e.realColorMask.call(n,t,r,i,a)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,i,a){e.clearColor[0]=t,e.clearColor[1]=r,e.clearColor[2]=i,e.clearColor[3]=a,e.realClearColor.call(n,t,r,i,a)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,i,a){e.viewport[0]=t,e.viewport[1]=r,e.viewport[2]=i,e.viewport[3]=a,e.realViewport.call(n,t,r,i,a)},this.isPatched=!0,T(t)}},D.prototype.unpatch=function(){if(this.isPatched){var e=this.gl,t=this.gl.canvas;o()||(Object.defineProperty(t,"width",this.realCanvasWidth),Object.defineProperty(t,"height",this.realCanvasHeight)),t.width=this.bufferWidth,t.height=this.bufferHeight,e.bindFramebuffer=this.realBindFramebuffer,e.enable=this.realEnable,e.disable=this.realDisable,e.colorMask=this.realColorMask,e.clearColor=this.realClearColor,e.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&e.bindFramebuffer(e.FRAMEBUFFER,null),this.isPatched=!1,setTimeout((function(){T(t)}),1)}},D.prototype.setTextureBounds=function(e,t){e||(e=[0,0,.5,1]),t||(t=[.5,0,.5,1]),this.viewportOffsetScale[0]=e[0],this.viewportOffsetScale[1]=e[1],this.viewportOffsetScale[2]=e[2],this.viewportOffsetScale[3]=e[3],this.viewportOffsetScale[4]=t[0],this.viewportOffsetScale[5]=t[1],this.viewportOffsetScale[6]=t[2],this.viewportOffsetScale[7]=t[3]},D.prototype.submitFrame=function(){var e=this.gl,t=this,n=[];if(this.dirtySubmitFrameBindings||n.push(e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING,e.ELEMENT_ARRAY_BUFFER_BINDING,e.TEXTURE_BINDING_2D,e.TEXTURE0),w(e,n,(function(e){t.realBindFramebuffer.call(e,e.FRAMEBUFFER,null),t.cullFace&&t.realDisable.call(e,e.CULL_FACE),t.depthTest&&t.realDisable.call(e,e.DEPTH_TEST),t.blend&&t.realDisable.call(e,e.BLEND),t.scissorTest&&t.realDisable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realDisable.call(e,e.STENCIL_TEST),t.realColorMask.call(e,!0,!0,!0,!0),t.realViewport.call(e,0,0,e.drawingBufferWidth,e.drawingBufferHeight),(t.ctxAttribs.alpha||o())&&(t.realClearColor.call(e,0,0,0,1),e.clear(e.COLOR_BUFFER_BIT)),e.useProgram(t.program),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.indexBuffer),e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.enableVertexAttribArray(t.attribs.position),e.enableVertexAttribArray(t.attribs.texCoord),e.vertexAttribPointer(t.attribs.position,2,e.FLOAT,!1,20,0),e.vertexAttribPointer(t.attribs.texCoord,3,e.FLOAT,!1,20,8),e.activeTexture(e.TEXTURE0),e.uniform1i(t.uniforms.diffuse,0),e.bindTexture(e.TEXTURE_2D,t.renderTarget),e.uniform4fv(t.uniforms.viewportOffsetScale,t.viewportOffsetScale),e.drawElements(e.TRIANGLES,t.indexCount,e.UNSIGNED_SHORT,0),t.cardboardUI&&t.cardboardUI.renderNoState(),t.realBindFramebuffer.call(t.gl,e.FRAMEBUFFER,t.framebuffer),t.ctxAttribs.preserveDrawingBuffer||(t.realClearColor.call(e,0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)),t.dirtySubmitFrameBindings||t.realBindFramebuffer.call(e,e.FRAMEBUFFER,t.lastBoundFramebuffer),t.cullFace&&t.realEnable.call(e,e.CULL_FACE),t.depthTest&&t.realEnable.call(e,e.DEPTH_TEST),t.blend&&t.realEnable.call(e,e.BLEND),t.scissorTest&&t.realEnable.call(e,e.SCISSOR_TEST),t.stencilTest&&t.realEnable.call(e,e.STENCIL_TEST),t.realColorMask.apply(e,t.colorMask),t.realViewport.apply(e,t.viewport),!t.ctxAttribs.alpha&&t.ctxAttribs.preserveDrawingBuffer||t.realClearColor.apply(e,t.clearColor)})),o()){var r=e.canvas;r.width==t.bufferWidth&&r.height==t.bufferHeight||(t.bufferWidth=r.width,t.bufferHeight=r.height,t.onResize())}},D.prototype.updateDeviceInfo=function(e){var t=this.gl,n=this,r=[t.ARRAY_BUFFER_BINDING,t.ELEMENT_ARRAY_BUFFER_BINDING];w(t,r,(function(t){var r=n.computeMeshVertices_(n.meshWidth,n.meshHeight,e);if(t.bindBuffer(t.ARRAY_BUFFER,n.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!n.indexCount){var i=n.computeMeshIndices_(n.meshWidth,n.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),n.indexCount=i.length}}))},D.prototype.computeMeshVertices_=function(e,t,n){for(var r=new Float32Array(2*e*t*5),i=n.getLeftEyeVisibleTanAngles(),o=n.getLeftEyeNoLensTanAngles(),s=n.getLeftEyeVisibleScreenRect(o),u=0,l=0;l<2;l++){for(var c=0;c<t;c++)for(var d=0;d<e;d++,u++){var h=d/(e-1),f=c/(t-1),p=h,g=f,m=a(i[0],i[2],h),v=a(i[3],i[1],f),y=Math.sqrt(m*m+v*v),_=n.distortion.distortInverse(y),T=v*_/y;h=(m*_/y-o[0])/(o[2]-o[0]),f=(T-o[3])/(o[1]-o[3]),h=2*(s.x+h*s.width-.5),f=2*(s.y+f*s.height-.5),r[5*u+0]=h,r[5*u+1]=f,r[5*u+2]=p,r[5*u+3]=g,r[5*u+4]=l}var E=i[2]-i[0];i[0]=-(E+i[0]),i[2]=E-i[2],E=o[2]-o[0],o[0]=-(E+o[0]),o[2]=E-o[2],s.x=1-(s.x+s.width)}return r},D.prototype.computeMeshIndices_=function(e,t){for(var n=new Uint16Array(2*(e-1)*(t-1)*6),r=e/2,i=t/2,a=0,o=0,s=0;s<2;s++)for(var u=0;u<t;u++)for(var l=0;l<e;l++,a++)0!=l&&0!=u&&(l<=r==u<=i?(n[o++]=a,n[o++]=a-e-1,n[o++]=a-e,n[o++]=a-e-1,n[o++]=a,n[o++]=a-1):(n[o++]=a-1,n[o++]=a-e,n[o++]=a,n[o++]=a-e,n[o++]=a-1,n[o++]=a-e-1));return n},D.prototype.getOwnPropertyDescriptor_=function(e,t){var n=Object.getOwnPropertyDescriptor(e,t);return void 0!==n.get&&void 0!==n.set||(n.configurable=!0,n.enumerable=!0,n.get=function(){return this.getAttribute(t)},n.set=function(e){this.setAttribute(t,e)}),n};var I=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join("\n"),C=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join("\n"),N=Math.PI/180;function L(e){this.gl=e,this.attribs={position:0},this.program=m(e,I,C,this.attribs),this.uniforms=v(e,this.program),this.vertexBuffer=e.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function O(e){this.coefficients=e}L.prototype.destroy=function(){var e=this.gl;this.listener&&e.canvas.removeEventListener("click",this.listener,!1),e.deleteProgram(this.program),e.deleteBuffer(this.vertexBuffer)},L.prototype.listen=function(e,t){var n=this.gl.canvas;this.listener=function(r){var i=n.clientWidth/2;r.clientX>i-42&&r.clientX<i+42&&r.clientY>n.clientHeight-42?e(r):r.clientX<42&&r.clientY<42&&t(r)},n.addEventListener("click",this.listener,!1)},L.prototype.onResize=function(){var e=this.gl,t=this,n=[e.ARRAY_BUFFER_BINDING];w(e,n,(function(e){var n=[],r=e.drawingBufferWidth/2,i=Math.max(screen.width,screen.height)*window.devicePixelRatio,a=e.drawingBufferWidth/i*window.devicePixelRatio,o=4*a/2,s=42*a,u=28*a/2,l=14*a;function c(e,t){var i=(90-e)*N,a=Math.cos(i),o=Math.sin(i);n.push(.3125*a*u+r,.3125*o*u+u),n.push(t*a*u+r,t*o*u+u)}n.push(r-o,s),n.push(r-o,e.drawingBufferHeight),n.push(r+o,s),n.push(r+o,e.drawingBufferHeight),t.gearOffset=n.length/2;for(var d=0;d<=6;d++){var h=60*d;c(h,1),c(h+12,1),c(h+20,.75),c(h+40,.75),c(h+48,1)}function f(t,r){n.push(l+t,e.drawingBufferHeight-l-r)}t.gearVertexCount=n.length/2-t.gearOffset,t.arrowOffset=n.length/2;var p=o/Math.sin(45*N);f(0,u),f(u,0),f(u+p,p),f(p,u+p),f(p,u-p),f(0,u),f(u,2*u),f(u+p,2*u-p),f(p,u-p),f(0,u),f(p,u-o),f(28*a,u-o),f(p,u+o),f(28*a,u+o),t.arrowVertexCount=n.length/2-t.arrowOffset,e.bindBuffer(e.ARRAY_BUFFER,t.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW)}))},L.prototype.render=function(){var e=this.gl,t=this,n=[e.CULL_FACE,e.DEPTH_TEST,e.BLEND,e.SCISSOR_TEST,e.STENCIL_TEST,e.COLOR_WRITEMASK,e.VIEWPORT,e.CURRENT_PROGRAM,e.ARRAY_BUFFER_BINDING];w(e,n,(function(e){e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.BLEND),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.colorMask(!0,!0,!0,!0),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),t.renderNoState()}))},L.prototype.renderNoState=function(){var e,t,n,r,i,a,o=this.gl;o.useProgram(this.program),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.enableVertexAttribArray(this.attribs.position),o.vertexAttribPointer(this.attribs.position,2,o.FLOAT,!1,8,0),o.uniform4f(this.uniforms.color,1,1,1,1),e=this.projMat,r=1/(0-(t=o.drawingBufferWidth)),i=1/(0-(n=o.drawingBufferHeight)),a=1/(.1-1024),e[0]=-2*r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*a,e[11]=0,e[12]=(0+t)*r,e[13]=(n+0)*i,e[14]=1024.1*a,e[15]=1,o.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),o.drawArrays(o.TRIANGLE_STRIP,0,4),o.drawArrays(o.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),o.drawArrays(o.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},O.prototype.distortInverse=function(e){for(var t=0,n=1,r=e-this.distort(t);Math.abs(n-t)>1e-4;){var i=e-this.distort(n),a=n-i*((n-t)/(i-r));t=n,n=a,r=i}return n},O.prototype.distort=function(e){for(var t=e*e,n=0,r=0;r<this.coefficients.length;r++)n=t*(n+this.coefficients[r]);return(n+1)*e};var R=Math.PI/180,j=180/Math.PI,P=function(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0};P.prototype={constructor:P,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var e=this.length();if(0!==e){var t=1/e;this.multiplyScalar(t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(e){this.x*=e,this.y*=e,this.z*=e},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=u*s+d*-i+l*-o-c*-a,this.y=l*s+d*-a+c*-i-u*-o,this.z=c*s+d*-o+u*-a-l*-i,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this}};var k,U,B=function(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1};function F(e){this.width=e.width||f(),this.height=e.height||p(),this.widthMeters=e.widthMeters,this.heightMeters=e.heightMeters,this.bevelMeters=e.bevelMeters}B.prototype={constructor:B,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},setFromEulerXYZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),a=Math.cos(n/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=o*i*a+r*s*u,this.y=r*s*a-o*i*u,this.z=r*i*u+o*s*a,this.w=r*i*a-o*s*u,this},setFromEulerYXZ:function(e,t,n){var r=Math.cos(e/2),i=Math.cos(t/2),a=Math.cos(n/2),o=Math.sin(e/2),s=Math.sin(t/2),u=Math.sin(n/2);return this.x=o*i*a+r*s*u,this.y=r*s*a-o*i*u,this.z=r*i*u-o*s*a,this.w=r*i*a+o*s*u,this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this.x=e.x*r,this.y=e.y*r,this.z=e.z*r,this.w=Math.cos(n),this},multiply:function(e){return this.multiplyQuaternions(this,e)},multiplyQuaternions:function(e,t){var n=e.x,r=e.y,i=e.z,a=e.w,o=t.x,s=t.y,u=t.z,l=t.w;return this.x=n*l+a*o+r*u-i*s,this.y=r*l+a*s+i*o-n*u,this.z=i*l+a*u+n*s-r*o,this.w=a*l-n*o-r*s-i*u,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=1):(e=1/e,this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this.w=this.w*e),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this.x,r=this.y,i=this.z,a=this.w,o=a*e.w+n*e.x+r*e.y+i*e.z;if(o<0?(this.w=-e.w,this.x=-e.x,this.y=-e.y,this.z=-e.z,o=-o):this.copy(e),o>=1)return this.w=a,this.x=n,this.y=r,this.z=i,this;var s=Math.acos(o),u=Math.sqrt(1-o*o);if(Math.abs(u)<.001)return this.w=.5*(a+this.w),this.x=.5*(n+this.x),this.y=.5*(r+this.y),this.z=.5*(i+this.z),this;var l=Math.sin((1-t)*s)/u,c=Math.sin(t*s)/u;return this.w=a*l+this.w*c,this.x=n*l+this.x*c,this.y=r*l+this.y*c,this.z=i*l+this.z*c,this},setFromUnitVectors:function(e,t){return void 0===k&&(k=new P),(U=e.dot(t)+1)<1e-6?(U=0,Math.abs(e.x)>Math.abs(e.z)?k.set(-e.y,e.x,0):k.set(0,-e.z,e.y)):k.crossVectors(e,t),this.x=k.x,this.y=k.y,this.z=k.z,this.w=U,this.normalize(),this}};var z=new F({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),G=new F({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),H={CardboardV1:new V({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new V({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function Y(e,t){this.viewer=H.CardboardV2,this.updateDeviceParams(e),this.distortion=new O(this.viewer.distortionCoefficients);for(var n=0;n<t.length;n++){var r=t[n];H[r.id]=new V(r)}}function V(e){this.id=e.id,this.label=e.label,this.fov=e.fov,this.interLensDistance=e.interLensDistance,this.baselineLensDistance=e.baselineLensDistance,this.screenLensDistance=e.screenLensDistance,this.distortionCoefficients=e.distortionCoefficients,this.inverseCoefficients=e.inverseCoefficients}Y.prototype.updateDeviceParams=function(e){this.device=this.determineDevice_(e)||this.device},Y.prototype.getDevice=function(){return this.device},Y.prototype.setViewer=function(e){this.viewer=e,this.distortion=new O(this.viewer.distortionCoefficients)},Y.prototype.determineDevice_=function(e){if(!e)return o()?(console.warn("Using fallback iOS device measurements."),G):(console.warn("Using fallback Android device measurements."),z);var t=.0254/e.xdpi,n=.0254/e.ydpi;return new F({widthMeters:t*f(),heightMeters:n*p(),bevelMeters:.001*e.bevelMm})},Y.prototype.getDistortedFieldOfViewLeftEye=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=(t.widthMeters-e.interLensDistance)/2,a=e.interLensDistance/2,o=e.baselineLensDistance-t.bevelMeters,s=t.heightMeters-o,u=j*Math.atan(n.distort(i/r)),l=j*Math.atan(n.distort(a/r)),c=j*Math.atan(n.distort(o/r)),d=j*Math.atan(n.distort(s/r));return{leftDegrees:Math.min(u,e.fov),rightDegrees:Math.min(l,e.fov),downDegrees:Math.min(c,e.fov),upDegrees:Math.min(d,e.fov)}},Y.prototype.getLeftEyeVisibleTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=Math.tan(-R*e.fov),i=Math.tan(R*e.fov),a=Math.tan(R*e.fov),o=Math.tan(-R*e.fov),s=t.widthMeters/4,u=t.heightMeters/2,l=e.baselineLensDistance-t.bevelMeters-u,c=e.interLensDistance/2-s,d=-l,h=e.screenLensDistance,f=n.distort((c-s)/h),p=n.distort((d+u)/h),g=n.distort((c+s)/h),m=n.distort((d-u)/h),v=new Float32Array(4);return v[0]=Math.max(r,f),v[1]=Math.min(i,p),v[2]=Math.min(a,g),v[3]=Math.max(o,m),v},Y.prototype.getLeftEyeNoLensTanAngles=function(){var e=this.viewer,t=this.device,n=this.distortion,r=new Float32Array(4),i=n.distortInverse(Math.tan(-R*e.fov)),a=n.distortInverse(Math.tan(R*e.fov)),o=n.distortInverse(Math.tan(R*e.fov)),s=n.distortInverse(Math.tan(-R*e.fov)),u=t.widthMeters/4,l=t.heightMeters/2,c=e.baselineLensDistance-t.bevelMeters-l,d=e.interLensDistance/2-u,h=-c,f=e.screenLensDistance,p=(d-u)/f,g=(h+l)/f,m=(d+u)/f,v=(h-l)/f;return r[0]=Math.max(i,p),r[1]=Math.min(a,g),r[2]=Math.min(o,m),r[3]=Math.max(s,v),r},Y.prototype.getLeftEyeVisibleScreenRect=function(e){var t=this.viewer,n=this.device,r=t.screenLensDistance,i=(n.widthMeters-t.interLensDistance)/2,a=t.baselineLensDistance-n.bevelMeters,o=(e[0]*r+i)/n.widthMeters,s=(e[1]*r+a)/n.heightMeters,u=(e[2]*r+i)/n.widthMeters,l=(e[3]*r+a)/n.heightMeters;return{x:o,y:l,width:u-o,height:s-l}},Y.prototype.getFieldOfViewLeftEye=function(e){return e?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},Y.prototype.getFieldOfViewRightEye=function(e){var t=this.getFieldOfViewLeftEye(e);return{leftDegrees:t.rightDegrees,rightDegrees:t.leftDegrees,upDegrees:t.upDegrees,downDegrees:t.downDegrees}},Y.prototype.getUndistortedFieldOfViewLeftEye=function(){var e=this.getUndistortedParams_();return{leftDegrees:j*Math.atan(e.outerDist),rightDegrees:j*Math.atan(e.innerDist),downDegrees:j*Math.atan(e.bottomDist),upDegrees:j*Math.atan(e.topDist)}},Y.prototype.getUndistortedViewportLeftEye=function(){var e=this.getUndistortedParams_(),t=this.viewer,n=this.device,r=t.screenLensDistance,i=n.widthMeters/r,a=n.heightMeters/r,o=n.width/i,s=n.height/a,u=Math.round((e.eyePosX-e.outerDist)*o),l=Math.round((e.eyePosY-e.bottomDist)*s);return{x:u,y:l,width:Math.round((e.eyePosX+e.innerDist)*o)-u,height:Math.round((e.eyePosY+e.topDist)*s)-l}},Y.prototype.getUndistortedParams_=function(){var e=this.viewer,t=this.device,n=this.distortion,r=e.screenLensDistance,i=e.interLensDistance/2/r,a=t.widthMeters/r,o=t.heightMeters/r,s=a/2-i,u=(e.baselineLensDistance-t.bevelMeters)/r,l=e.fov,c=n.distortInverse(Math.tan(R*l)),d=Math.min(s,c),h=Math.min(i,c),f=Math.min(u,c);return{outerDist:d,innerDist:h,topDist:Math.min(o-u,c),bottomDist:f,eyePosX:s,eyePosY:u}},Y.Viewers=H;var Q={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};function q(e,t){if(this.dpdb=Q,this.recalculateDeviceParams_(),e){this.onDeviceParamsUpdated=t;var n=new XMLHttpRequest,r=this;n.open("GET",e,!0),n.addEventListener("load",(function(){r.loading=!1,n.status>=200&&n.status<=299?(r.dpdb=JSON.parse(n.response),r.recalculateDeviceParams_()):console.error("Error loading online DPDB!")})),n.send()}}function W(e){this.xdpi=e.xdpi,this.ydpi=e.ydpi,this.bevelMm=e.bevelMm}function X(e,t){this.set(e,t)}function K(e,t){this.kFilter=e,this.isDebug=t,this.currentAccelMeasurement=new X,this.currentGyroMeasurement=new X,this.previousGyroMeasurement=new X,o()?this.filterQ=new B(-1,0,0,1):this.filterQ=new B(1,0,0,1),this.previousFilterQ=new B,this.previousFilterQ.copy(this.filterQ),this.accelQ=new B,this.isOrientationInitialized=!1,this.estimatedGravity=new P,this.measuredGravity=new P,this.gyroIntegralQ=new B}function Z(e,t){this.predictionTimeS=e,this.isDebug=t,this.previousQ=new B,this.previousTimestampS=null,this.deltaQ=new B,this.outQ=new B}function J(e,t,n,r){this.yawOnly=n,this.accelerometer=new P,this.gyroscope=new P,this.filter=new K(e,r),this.posePredictor=new Z(t,r),this.isFirefoxAndroid=u(),this.isIOS=o();var i=l();this.isDeviceMotionInRadians=!this.isIOS&&i&&i<66,this.isWithoutDeviceMotion=c(),this.filterToWorldQ=new B,o()?this.filterToWorldQ.setFromAxisAngle(new P(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new P(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new B,this.worldToScreenQ=new B,this.originalPoseAdjustQ=new B,this.originalPoseAdjustQ.setFromAxisAngle(new P(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),h()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new B,this.orientationOut_=new Float32Array(4),this.start()}q.prototype.getDeviceParams=function(){return this.deviceParams},q.prototype.recalculateDeviceParams_=function(){var e=this.calcDeviceParams_();e?(this.deviceParams=e,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},q.prototype.calcDeviceParams_=function(){var e=this.dpdb;if(!e)return console.error("DPDB not available."),null;if(1!=e.format)return console.error("DPDB has unexpected format version."),null;if(!e.devices||!e.devices.length)return console.error("DPDB does not have a devices section."),null;var t=navigator.userAgent||navigator.vendor||window.opera,n=f(),r=p();if(!e.devices)return console.error("DPDB has no devices section."),null;for(var i=0;i<e.devices.length;i++){var a=e.devices[i];if(a.rules)if("ios"==a.type||"android"==a.type){if(o()==("ios"==a.type)){for(var s=!1,u=0;u<a.rules.length;u++){var l=a.rules[u];if(this.matchRule_(l,t,n,r)){s=!0;break}}if(s)return new W({xdpi:a.dpi[0]||a.dpi,ydpi:a.dpi[1]||a.dpi,bevelMm:a.bw})}}else console.warn("Device["+i+"] has invalid type.");else console.warn("Device["+i+"] has no rules section.")}return console.warn("No DPDB device match."),null},q.prototype.matchRule_=function(e,t,n,r){if(!e.ua&&!e.res)return!1;if(e.ua&&t.indexOf(e.ua)<0)return!1;if(e.res){if(!e.res[0]||!e.res[1])return!1;var i=e.res[0],a=e.res[1];if(Math.min(n,r)!=Math.min(i,a)||Math.max(n,r)!=Math.max(i,a))return!1}return!0},X.prototype.set=function(e,t){this.sample=e,this.timestampS=t},X.prototype.copy=function(e){this.set(e.sample,e.timestampS)},K.prototype.addAccelMeasurement=function(e,t){this.currentAccelMeasurement.set(e,t)},K.prototype.addGyroMeasurement=function(e,t){var n;this.currentGyroMeasurement.set(e,t),n=t-this.previousGyroMeasurement.timestampS,isNaN(n)||n<=.001||n>1||this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},K.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var e=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,e);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var n=new B;n.copy(this.filterQ),n.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(n),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var r,i=new B;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",j*((r=i).w>1?(console.warn("getQuaternionAngle: w > 1"),0):2*Math.acos(r.w)),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var a=new B;a.copy(this.filterQ),a.multiply(i),this.filterQ.slerp(a,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},K.prototype.getOrientation=function(){return this.filterQ},K.prototype.accelToQuaternion_=function(e){var t=new P;t.copy(e),t.normalize();var n=new B;return n.setFromUnitVectors(new P(0,0,-1),t),n.inverse(),n},K.prototype.gyroToQuaternionDelta_=function(e,t){var n=new B,r=new P;return r.copy(e),r.normalize(),n.setFromAxisAngle(r,e.length()*t),n},Z.prototype.getPrediction=function(e,t,n){if(!this.previousTimestampS)return this.previousQ.copy(e),this.previousTimestampS=n,e;var r=new P;r.copy(t),r.normalize();var i=t.length();if(i<20*R)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(j*i).toFixed(1)),this.outQ.copy(e),this.previousQ.copy(e),this.outQ;var a=i*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(r,a),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(e),this.previousTimestampS=n,this.outQ},J.prototype.getPosition=function(){return null},J.prototype.getOrientation=function(){var e=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ)return this.deviceOrientationFixQ=this.deviceOrientationFixQ||(n=(new B).setFromAxisAngle(new P(0,0,-1),0),r=new B,-90===window.orientation?r.setFromAxisAngle(new P(0,1,0),Math.PI/-2):r.setFromAxisAngle(new P(0,1,0),Math.PI/2),n.multiply(r)),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||((t=new B).setFromAxisAngle(new P(1,0,0),-Math.PI/2),t),e=this._deviceOrientationQ,(i=new B).copy(e),i.multiply(this.deviceOrientationFilterToWorldQ),i.multiply(this.resetQ),i.multiply(this.worldToScreenQ),i.multiplyQuaternions(this.deviceOrientationFixQ,i),this.yawOnly&&(i.x=0,i.z=0,i.normalize()),this.orientationOut_[0]=i.x,this.orientationOut_[1]=i.y,this.orientationOut_[2]=i.z,this.orientationOut_[3]=i.w,this.orientationOut_;var t,n,r,i,a=this.filter.getOrientation();return e=this.posePredictor.getPrediction(a,this.gyroscope,this.previousTimestampS),(i=new B).copy(this.filterToWorldQ),i.multiply(this.resetQ),i.multiply(e),i.multiply(this.worldToScreenQ),this.yawOnly&&(i.x=0,i.z=0,i.normalize()),this.orientationOut_[0]=i.x,this.orientationOut_[1]=i.y,this.orientationOut_[2]=i.z,this.orientationOut_[3]=i.w,this.orientationOut_},J.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),h()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},J.prototype.onDeviceOrientation_=function(e){this._deviceOrientationQ=this._deviceOrientationQ||new B;var t=e.alpha,n=e.beta,r=e.gamma;t=(t||0)*Math.PI/180,n=(n||0)*Math.PI/180,r=(r||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(n,t,-r)},J.prototype.onDeviceMotion_=function(e){this.updateDeviceMotion_(e)},J.prototype.updateDeviceMotion_=function(e){var t=e.accelerationIncludingGravity,n=e.rotationRate,r=e.timeStamp/1e3,i=r-this.previousTimestampS;return i<0?(b("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=r)):i<=.001||i>1?(b("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=r)):(this.accelerometer.set(-t.x,-t.y,-t.z),d()?this.gyroscope.set(-n.beta,n.alpha,n.gamma):this.gyroscope.set(n.alpha,n.beta,n.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addAccelMeasurement(this.accelerometer,r),this.filter.addGyroMeasurement(this.gyroscope,r),void(this.previousTimestampS=r))},J.prototype.onOrientationChange_=function(e){this.setScreenTransform_()},J.prototype.onMessage_=function(e){var t=e.data;t&&t.type&&"devicemotion"===t.type.toLowerCase()&&this.updateDeviceMotion_(t.deviceMotionEvent)},J.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new P(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new P(0,0,1),Math.PI/2)}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},J.prototype.start=function(){var e,t,n;this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),o()&&(e=window.self!==window.top,t=M(document.referrer),n=M(window.location.href),e&&t!==n)&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},J.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var $=new P(1,0,0),ee=new P(0,0,1),te={};screen.orientation?te=screen.orientation:screen.msOrientation?te=screen.msOrientation:Object.defineProperty(te,"angle",{get:function(){return window.orientation||0}});var ne=new B;ne.setFromAxisAngle($,-Math.PI/2),ne.multiply((new B).setFromAxisAngle(ee,Math.PI/2));var re=function(){function e(t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.config=t,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new B,this._worldToScreenQ=new B,this._outQ=new B,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onOrientationChange(),this.init()}return i(e,[{key:"init",value:function(){var e=null;try{(e=new RelativeOrientationSensor({frequency:60})).addEventListener("error",this._onSensorError)}catch(e){this.errors.push(e),"SecurityError"===e.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):"ReferenceError"===e.name?this.useDeviceMotion():console.error(e)}e&&(this.api="sensor",this.sensor=e,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start()),window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new J(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var e=this.sensor.quaternion;this._sensorQ.set(e[0],e[1],e[2],e[3]);var t=this._outQ;return t.copy(ne),t.multiply(this._sensorQ),t.multiply(this._worldToScreenQ),this.config.YAW_ONLY&&(t.x=t.z=0,t.normalize()),this._out[0]=t.x,this._out[1]=t.y,this._out[2]=t.z,this._out[3]=t.w,this._out}},{key:"_onSensorError",value:function(e){this.errors.push(e.error),"NotAllowedError"===e.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===e.error.name?console.error("Sensor could not be read"):console.error(e.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}},{key:"_onOrientationChange",value:function(){var e=-te.angle*Math.PI/180;this._worldToScreenQ.setFromAxisAngle(ee,e)}}]),e}();function ie(){this.loadIcon_();var e=document.createElement("div");(a=e.style).position="fixed",a.top=0,a.right=0,a.bottom=0,a.left=0,a.backgroundColor="gray",a.fontFamily="sans-serif",a.zIndex=1e6;var t=document.createElement("img");t.src=this.icon,(a=t.style).marginLeft="25%",a.marginTop="25%",a.width="50%",e.appendChild(t);var n=document.createElement("div");(a=n.style).textAlign="center",a.fontSize="16px",a.lineHeight="24px",a.margin="24px 25%",a.width="50%",n.innerHTML="Place your phone into your Cardboard viewer.",e.appendChild(n);var r=document.createElement("div");(a=r.style).backgroundColor="#CFD8DC",a.position="fixed",a.bottom=0,a.width="100%",a.height="48px",a.padding="14px 24px",a.boxSizing="border-box",a.color="#656A6B",e.appendChild(r);var i=document.createElement("div");i.style.float="left",i.innerHTML="No Cardboard viewer?";var a,o=document.createElement("a");o.href="https://www.google.com/get/cardboard/get-cardboard/",o.innerHTML="get one",o.target="_blank",(a=o.style).float="right",a.fontWeight=600,a.textTransform="uppercase",a.borderLeft="1px solid gray",a.paddingLeft="24px",a.textDecoration="none",a.color="#656A6B",r.appendChild(i),r.appendChild(o),this.overlay=e,this.text=n,this.hide()}ie.prototype.show=function(e){e||this.overlay.parentElement?e&&(this.overlay.parentElement&&this.overlay.parentElement!=e&&this.overlay.parentElement.removeChild(this.overlay),e.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var t=this.overlay.querySelector("img").style;h()?(t.width="20%",t.marginLeft="40%",t.marginTop="3%"):(t.width="50%",t.marginLeft="25%",t.marginTop="25%")},ie.prototype.hide=function(){this.overlay.style.display="none"},ie.prototype.showTemporarily=function(e,t){this.show(t),this.timer=setTimeout(this.hide.bind(this),e)},ie.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},ie.prototype.update=function(){this.disableShowTemporarily(),!h()&&y()?this.show():this.hide()},ie.prototype.loadIcon_=function(){this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"};var ae="WEBVR_CARDBOARD_VIEWER";function oe(e){try{this.selectedKey=localStorage.getItem(ae)}catch(e){console.error("Failed to load viewer profile: %s",e)}this.selectedKey||(this.selectedKey=e||"CardboardV1"),this.dialog=this.createDialog_(Y.Viewers),this.root=null,this.onChangeCallbacks_=[]}oe.prototype.show=function(e){this.root=e,e.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},oe.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},oe.prototype.getCurrentViewer=function(){return Y.Viewers[this.selectedKey]},oe.prototype.getSelectedKey_=function(){var e=this.dialog.querySelector("input[name=field]:checked");return e?e.id:null},oe.prototype.onChange=function(e){this.onChangeCallbacks_.push(e)},oe.prototype.fireOnChange_=function(e){for(var t=0;t<this.onChangeCallbacks_.length;t++)this.onChangeCallbacks_[t](e)},oe.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),this.selectedKey&&Y.Viewers[this.selectedKey]){this.fireOnChange_(Y.Viewers[this.selectedKey]);try{localStorage.setItem(ae,this.selectedKey)}catch(e){console.error("Failed to save viewer profile: %s",e)}this.hide()}else console.error("ViewerSelector.onSave_: this should never happen!")},oe.prototype.createDialog_=function(e){var t=document.createElement("div");t.classList.add("webvr-polyfill-viewer-selector"),t.style.display="none";var n=document.createElement("div");(i=n.style).position="fixed",i.left=0,i.top=0,i.width="100%",i.height="100%",i.background="rgba(0, 0, 0, 0.3)",n.addEventListener("click",this.hide.bind(this));var r=document.createElement("div"),i=r.style;for(var a in i.boxSizing="border-box",i.position="fixed",i.top="24px",i.left="50%",i.marginLeft="-140px",i.width="280px",i.padding="24px",i.overflow="hidden",i.background="#fafafa",i.fontFamily="'Roboto', sans-serif",i.boxShadow="0px 5px 20px #666",r.appendChild(this.createH1_("Select your viewer")),e)r.appendChild(this.createChoice_(a,e[a].label));return r.appendChild(this.createButton_("Save",this.onSave_.bind(this))),t.appendChild(n),t.appendChild(r),t},oe.prototype.createH1_=function(e){var t=document.createElement("h1"),n=t.style;return n.color="black",n.fontSize="20px",n.fontWeight="bold",n.marginTop=0,n.marginBottom="24px",t.innerHTML=e,t},oe.prototype.createChoice_=function(e,t){var n=document.createElement("div");n.style.marginTop="8px",n.style.color="black";var r=document.createElement("input");r.style.fontSize="30px",r.setAttribute("id",e),r.setAttribute("type","radio"),r.setAttribute("value",e),r.setAttribute("name","field");var i=document.createElement("label");return i.style.marginLeft="4px",i.setAttribute("for",e),i.innerHTML=t,n.appendChild(r),n.appendChild(i),n},oe.prototype.createButton_=function(e,t){var n=document.createElement("button");n.innerHTML=e;var r=n.style;return r.float="right",r.textTransform="uppercase",r.color="#1094f7",r.fontSize="14px",r.letterSpacing=0,r.border=0,r.background="none",r.marginTop="16px",n.addEventListener("click",t),n},"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var se,ue=(se=function(e,t){return function(e,t){var n;n=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a="undefined"!=typeof navigator&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",i),this.noSleepVideo.addEventListener("timeupdate",function(e){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return r(e,[{key:"enable",value:function(){a?(this.disable(),this.noSleepTimer=window.setInterval((function(){window.location.href="/",window.setTimeout(window.stop,0)}),15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){a?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),e}();e.exports=o},function(e,t,n){e.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])},e.exports=n()}(t={exports:{}}),t.exports}())&&se.__esModule?se.default:se,le=1e3,ce=[0,0,.5,1],de=[.5,0,.5,1],he=window.requestAnimationFrame,fe=window.cancelAnimationFrame;function pe(e){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:e.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:e.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:e.canPresent},maxLayers:{writable:!1,enumerable:!0,value:e.maxLayers},hasOrientation:{enumerable:!0,get:function(){return A("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),e.hasOrientation}}})}function ge(e){var t=!("wakelock"in(e=e||{}))||e.wakelock;this.isPolyfilled=!0,this.displayId=le++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return A("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new pe({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,t&&y()&&(this.wakelock_=new ue)}ge.prototype.getFrameData=function(e){return E(e,this._getPose(),this)},ge.prototype.getPose=function(){return A("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},ge.prototype.resetPose=function(){return A("VRDisplay.prototype.resetPose"),this._resetPose()},ge.prototype.getImmediatePose=function(){return A("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},ge.prototype.requestAnimationFrame=function(e){return he(e)},ge.prototype.cancelAnimationFrame=function(e){return fe(e)},ge.prototype.wrapForFullscreen=function(e){if(o())return e;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var t=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",t.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==e)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=e,this.originalParent_=e.parentElement,this.originalParent_||document.body.appendChild(e),!this.fullscreenWrapper_.parentElement){var n=this.fullscreenElement_.parentElement;n.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),n.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var r=this;return function(){if(r.fullscreenElement_){var e=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];r.fullscreenElement_.setAttribute("style",e.join("; ")+";")}}(),this.fullscreenWrapper_},ge.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var e=this.fullscreenElement_;this.fullscreenElementCachedStyle_?e.setAttribute("style",this.fullscreenElementCachedStyle_):e.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var t=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(e),this.originalParent_===t?t.insertBefore(e,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(e),t.removeChild(this.fullscreenWrapper_),e}},ge.prototype.requestPresent=function(e){var t=this.isPresenting,n=this;return e instanceof Array||(A("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),e=[e]),new Promise((function(r,i){if(n.capabilities.canPresent)if(0==e.length||e.length>n.capabilities.maxLayers)i(new Error("Invalid number of layers."));else{var a=e[0];if(a.source){var u=a.leftBounds||ce,l=a.rightBounds||de;if(t){var c=n.layer_;c.source!==a.source&&(c.source=a.source);for(var d=0;d<4;d++)c.leftBounds[d]=u[d],c.rightBounds[d]=l[d];return n.wrapForFullscreen(n.layer_.source),n.updatePresent_(),void r()}if(n.layer_={predistorted:a.predistorted,source:a.source,leftBounds:u.slice(0),rightBounds:l.slice(0)},n.waitingForPresent_=!1,n.layer_&&n.layer_.source){var h=n.wrapForFullscreen(n.layer_.source);n.addFullscreenListeners_(h,(function(){var e=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n.isPresenting=h===e,n.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch((function(e){console.error("screen.orientation.lock() failed due to",e.message)})),n.waitingForPresent_=!1,n.beginPresent_(),r()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),n.removeFullscreenWrapper(),n.disableWakeLock(),n.endPresent_(),n.removeFullscreenListeners_()),n.fireVRDisplayPresentChange_()}),(function(){n.waitingForPresent_&&(n.removeFullscreenWrapper(),n.removeFullscreenListeners_(),n.disableWakeLock(),n.waitingForPresent_=!1,n.isPresenting=!1,i(new Error("Unable to present.")))})),function(e){if(s())return!1;if(e.requestFullscreen)e.requestFullscreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0}(h)?(n.enableWakeLock(),n.waitingForPresent_=!0):(o()||s())&&(n.enableWakeLock(),n.isPresenting=!0,n.beginPresent_(),n.fireVRDisplayPresentChange_(),r())}n.waitingForPresent_||o()||(g(),i(new Error("Unable to present.")))}else r()}else i(new Error("VRDisplay is not capable of presenting."))}))},ge.prototype.exitPresent=function(){var e=this.isPresenting,t=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise((function(n,r){e?(!g()&&o()&&(t.endPresent_(),t.fireVRDisplayPresentChange_()),s()&&(t.removeFullscreenWrapper(),t.removeFullscreenListeners_(),t.endPresent_(),t.fireVRDisplayPresentChange_()),n()):r(new Error("Was not presenting to VRDisplay."))}))},ge.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},ge.prototype.fireVRDisplayPresentChange_=function(){var e=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(e)},ge.prototype.fireVRDisplayConnect_=function(){var e=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(e)},ge.prototype.addFullscreenListeners_=function(e,t,n){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=e,this.fullscreenChangeHandler_=t,this.fullscreenErrorHandler_=n,t&&(document.fullscreenEnabled?e.addEventListener("fullscreenchange",t,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenchange",t,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",t,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenchange",t,!1)),n&&(document.fullscreenEnabled?e.addEventListener("fullscreenerror",n,!1):document.webkitFullscreenEnabled?e.addEventListener("webkitfullscreenerror",n,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",n,!1):document.msFullscreenEnabled&&e.addEventListener("msfullscreenerror",n,!1))},ge.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var e=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var t=this.fullscreenChangeHandler_;e.removeEventListener("fullscreenchange",t,!1),e.removeEventListener("webkitfullscreenchange",t,!1),document.removeEventListener("mozfullscreenchange",t,!1),e.removeEventListener("msfullscreenchange",t,!1)}if(this.fullscreenErrorHandler_){var n=this.fullscreenErrorHandler_;e.removeEventListener("fullscreenerror",n,!1),e.removeEventListener("webkitfullscreenerror",n,!1),document.removeEventListener("mozfullscreenerror",n,!1),e.removeEventListener("msfullscreenerror",n,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},ge.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},ge.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},ge.prototype.beginPresent_=function(){},ge.prototype.endPresent_=function(){},ge.prototype.submitFrame=function(e){},ge.prototype.getEyeParameters=function(e){return null};var me={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function ve(e){var t=_({},me);e=_(t,e||{}),ge.call(this,{wakelock:e.MOBILE_WAKE_LOCK}),this.config=e,this.displayName="Cardboard VRDisplay",this.capabilities=new pe({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new re(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new q(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new Y(this.dpdb_.getDeviceParams(),e.ADDITIONAL_VIEWERS),this.viewerSelector_=new oe(e.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new ie),o()&&window.addEventListener("resize",this.onResize_.bind(this))}return ve.prototype=Object.create(ge.prototype),ve.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},ve.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},ve.prototype._getFieldOfView=function(e){var t;if("left"==e)t=this.deviceInfo_.getFieldOfViewLeftEye();else{if("right"!=e)return console.error("Invalid eye provided: %s",e),null;t=this.deviceInfo_.getFieldOfViewRightEye()}return t},ve.prototype._getEyeOffset=function(e){var t;if("left"==e)t=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if("right"!=e)return console.error("Invalid eye provided: %s",e),null;t=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return t},ve.prototype.getEyeParameters=function(e){var t=this._getEyeOffset(e),n=this._getFieldOfView(e),r={offset:t,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(r,"fieldOfView",{enumerable:!0,get:function(){return A("VRFieldOfView","VRFrameData's projection matrices"),n}}),r},ve.prototype.onDeviceParamsUpdated_=function(e){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},ve.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},ve.prototype.beginPresent_=function(){var e=this.layer_.source.getContext("webgl");e||(e=this.layer_.source.getContext("experimental-webgl")),e||(e=this.layer_.source.getContext("webgl2")),e&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(e.canvas.width=f()*this.bufferScale_,e.canvas.height=p()*this.bufferScale_,this.cardboardUI_=new L(e)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new L(e)),this.distorter_=new D(e,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(e){this.viewerSelector_.show(this.layer_.source.parentElement),e.stopPropagation(),e.preventDefault()}.bind(this),function(e){this.exitPresent(),e.stopPropagation(),e.preventDefault()}.bind(this)),this.rotateInstructions_&&(h()&&y()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},ve.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},ve.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},ve.prototype.submitFrame=function(e){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},ve.prototype.onOrientationChange_=function(e){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},ve.prototype.onResize_=function(e){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),T(t.canvas)}},ve.prototype.onViewerChanged_=function(e){this.deviceInfo_.setViewer(e),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},ve.prototype.fireVRDisplayDeviceParamsChange_=function(){var e=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(e)},ve.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},ve.VRDisplay=ge,ve}()})))&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,o={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function s(e){this.config=i(i({},o),e),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&n())&&(this.enable(),this.getVRDisplays().then((function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()})))}s.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(n()){var e=new a({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(e)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},s.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var e=this.native.VRFrameData,t=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(i){i instanceof e?n.call(this,i):(n.call(this,t),i.pose=t.pose,r(t.leftProjectionMatrix,i.leftProjectionMatrix),r(t.rightProjectionMatrix,i.rightProjectionMatrix),r(t.leftViewMatrix,i.leftViewMatrix),r(t.rightViewMatrix,i.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=a.VRDisplay,window.VRFrameData=a.VRFrameData},s.prototype.getVRDisplays=function(){var e,t=this,n=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var r,i=this.native.getVRDisplays.call(navigator),a=new Promise((function(t){e=setTimeout((function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])}),n.GET_VR_DISPLAYS_TIMEOUT)}));return(r=[i,a],Promise.race?Promise.race(r):new Promise((function(e,t){for(var n=0;n<r.length;n++)r[n].then(e,t)}))).then((function(n){return clearTimeout(e),n.length>0?n:t.getPolyfillDisplays()}))},s.version="0.10.6",s.VRFrameData=a.VRFrameData,s.VRDisplay=a.VRDisplay;var l=Object.freeze({default:s}),c=l&&s||l;return void 0!==t&&t.window&&(t.document||(t.document=t.window.document),t.navigator||(t.navigator=t.window.navigator)),c}()}(t={exports:{}}),t.exports}(),c=(i=l)&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;function d(){}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(d.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var h,f,p,g,m,v,y,_,T=1e3,E=1001,M=1002,b=1003,A=1006,w=1015,S=1022,x=1023,D=1026,I=1027,C=2400,N={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*N.DEG2RAD},radToDeg:function(e){return e*N.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function L(e,t){this.x=e||0,this.y=t||0}function O(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function R(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function j(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function P(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(L.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(L.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(h=new L,f=new L,function(e,t){return h.set(e,e),f.set(t,t),this.clamp(h,f)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}}),Object.assign(O.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p,g){var m=this.elements;return m[0]=e,m[4]=t,m[8]=n,m[12]=r,m[1]=i,m[5]=a,m[9]=o,m[13]=s,m[2]=u,m[6]=l,m[10]=c,m[14]=d,m[3]=h,m[7]=f,m[11]=p,m[15]=g,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new O).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(y=new j,function(e){var t=this.elements,n=e.elements,r=1/y.setFromMatrixColumn(e,0).length(),i=1/y.setFromMatrixColumn(e,1).length(),a=1/y.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===e.order){var d=a*l,h=a*c,f=o*l,p=o*c;t[0]=s*l,t[4]=-s*c,t[8]=u,t[1]=h+f*u,t[5]=d-p*u,t[9]=-o*s,t[2]=p-d*u,t[6]=f+h*u,t[10]=a*s}else if("YXZ"===e.order){var g=s*l,m=s*c,v=u*l,y=u*c;t[0]=g+y*o,t[4]=v*o-m,t[8]=a*u,t[1]=a*c,t[5]=a*l,t[9]=-o,t[2]=m*o-v,t[6]=y+g*o,t[10]=a*s}else if("ZXY"===e.order)g=s*l,m=s*c,v=u*l,y=u*c,t[0]=g-y*o,t[4]=-a*c,t[8]=v+m*o,t[1]=m+v*o,t[5]=a*l,t[9]=y-g*o,t[2]=-a*u,t[6]=o,t[10]=a*s;else if("ZYX"===e.order)d=a*l,h=a*c,f=o*l,p=o*c,t[0]=s*l,t[4]=f*u-h,t[8]=d*u+p,t[1]=s*c,t[5]=p*u+d,t[9]=h*u-f,t[2]=-u,t[6]=o*s,t[10]=a*s;else if("YZX"===e.order){var _=a*s,T=a*u,E=o*s,M=o*u;t[0]=s*l,t[4]=M-_*c,t[8]=E*c+T,t[1]=c,t[5]=a*l,t[9]=-o*l,t[2]=-u*l,t[6]=T*c+E,t[10]=_-M*c}else"XZY"===e.order&&(_=a*s,T=a*u,E=o*s,M=o*u,t[0]=s*l,t[4]=-c,t[8]=u*l,t[1]=_*c+M,t[5]=a*l,t[9]=T*c-E,t[2]=E*c-T,t[6]=o*l,t[10]=M*c+_);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(m=new j(0,0,0),v=new j(1,1,1),function(e){return this.compose(m,e,v)}),lookAt:function(){var e=new j,t=new j,n=new j;return function(r,i,a){var o=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(a,n),0===e.lengthSq()&&(1===Math.abs(a.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(a,n)),e.normalize(),t.crossVectors(n,e),o[0]=e.x,o[4]=t.x,o[8]=n.x,o[1]=e.y,o[5]=t.y,o[9]=n.y,o[2]=e.z,o[6]=t.z,o[10]=n.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],l=n[1],c=n[5],d=n[9],h=n[13],f=n[2],p=n[6],g=n[10],m=n[14],v=n[3],y=n[7],_=n[11],T=n[15],E=r[0],M=r[4],b=r[8],A=r[12],w=r[1],S=r[5],x=r[9],D=r[13],I=r[2],C=r[6],N=r[10],L=r[14],O=r[3],R=r[7],j=r[11],P=r[15];return i[0]=a*E+o*w+s*I+u*O,i[4]=a*M+o*S+s*C+u*R,i[8]=a*b+o*x+s*N+u*j,i[12]=a*A+o*D+s*L+u*P,i[1]=l*E+c*w+d*I+h*O,i[5]=l*M+c*S+d*C+h*R,i[9]=l*b+c*x+d*N+h*j,i[13]=l*A+c*D+d*L+h*P,i[2]=f*E+p*w+g*I+m*O,i[6]=f*M+p*S+g*C+m*R,i[10]=f*b+p*x+g*N+m*j,i[14]=f*A+p*D+g*L+m*P,i[3]=v*E+y*w+_*I+T*O,i[7]=v*M+y*S+_*C+T*R,i[11]=v*b+y*x+_*N+T*j,i[15]=v*A+y*D+_*L+T*P,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new j;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],u=e[13],l=e[2],c=e[6],d=e[10],h=e[14];return e[3]*(+i*s*c-r*u*c-i*o*d+n*u*d+r*o*h-n*s*h)+e[7]*(+t*s*h-t*u*d+i*a*d-r*a*h+r*u*l-i*s*l)+e[11]*(+t*u*c-t*o*h-i*a*c+n*a*h+i*o*l-n*u*l)+e[15]*(-r*o*l-t*s*c+t*o*d+r*a*c-n*a*d+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],u=r[4],l=r[5],c=r[6],d=r[7],h=r[8],f=r[9],p=r[10],g=r[11],m=r[12],v=r[13],y=r[14],_=r[15],T=f*y*d-v*p*d+v*c*g-l*y*g-f*c*_+l*p*_,E=m*p*d-h*y*d-m*c*g+u*y*g+h*c*_-u*p*_,M=h*v*d-m*f*d+m*l*g-u*v*g-h*l*_+u*f*_,b=m*f*c-h*v*c-m*l*p+u*v*p+h*l*y-u*f*y,A=i*T+a*E+o*M+s*b;if(0===A){var w="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(w);return console.warn(w),this.identity()}var S=1/A;return n[0]=T*S,n[1]=(v*p*s-f*y*s-v*o*g+a*y*g+f*o*_-a*p*_)*S,n[2]=(l*y*s-v*c*s+v*o*d-a*y*d-l*o*_+a*c*_)*S,n[3]=(f*c*s-l*p*s-f*o*d+a*p*d+l*o*g-a*c*g)*S,n[4]=E*S,n[5]=(h*y*s-m*p*s+m*o*g-i*y*g-h*o*_+i*p*_)*S,n[6]=(m*c*s-u*y*s-m*o*d+i*y*d+u*o*_-i*c*_)*S,n[7]=(u*p*s-h*c*s+h*o*d-i*p*d-u*o*g+i*c*g)*S,n[8]=M*S,n[9]=(m*f*s-h*v*s-m*a*g+i*v*g+h*a*_-i*f*_)*S,n[10]=(u*v*s-m*l*s+m*a*d-i*v*d-u*a*_+i*l*_)*S,n[11]=(h*l*s-u*f*s-h*a*d+i*f*d+u*a*g-i*l*g)*S,n[12]=b*S,n[13]=(h*v*o-m*f*o+m*a*p-i*v*p-h*a*y+i*f*y)*S,n[14]=(m*l*o-u*v*o-m*a*c+i*v*c+u*a*y-i*l*y)*S,n[15]=(u*f*o-h*l*o+h*a*c-i*f*c-u*a*p+i*l*p)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,u=i*a,l=i*o;return this.set(u*a+n,u*o-r*s,u*s+r*o,0,u*o+r*s,l*o+n,l*s-r*a,0,u*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,u=i+i,l=a+a,c=o+o,d=i*u,h=i*l,f=i*c,p=a*l,g=a*c,m=o*c,v=s*u,y=s*l,_=s*c,T=n.x,E=n.y,M=n.z;return r[0]=(1-(p+m))*T,r[1]=(h+_)*T,r[2]=(f-y)*T,r[3]=0,r[4]=(h-_)*E,r[5]=(1-(d+m))*E,r[6]=(g+v)*E,r[7]=0,r[8]=(f+y)*M,r[9]=(g-v)*M,r[10]=(1-(d+p))*M,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(p=new j,g=new O,function(e,t,n){var r=this.elements,i=p.set(r[0],r[1],r[2]).length(),a=p.set(r[4],r[5],r[6]).length(),o=p.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],g.copy(this);var s=1/i,u=1/a,l=1/o;return g.elements[0]*=s,g.elements[1]*=s,g.elements[2]*=s,g.elements[4]*=u,g.elements[5]*=u,g.elements[6]*=u,g.elements[8]*=l,g.elements[9]*=l,g.elements[10]*=l,t.setFromRotationMatrix(g),n.x=i,n.y=a,n.z=o,this}),makePerspective:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),u=2*i/(n-r),l=(t+e)/(t-e),c=(n+r)/(n-r),d=-(a+i)/(a-i),h=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=u,o[9]=c,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=h,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),u=1/(n-r),l=1/(a-i),c=(t+e)*s,d=(n+r)*u,h=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-c,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-h,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(R,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],d=i[a+0],h=i[a+1],f=i[a+2],p=i[a+3];if(c!==p||s!==d||u!==h||l!==f){var g=1-o,m=s*d+u*h+l*f+c*p,v=m>=0?1:-1,y=1-m*m;if(y>Number.EPSILON){var _=Math.sqrt(y),T=Math.atan2(_,m*v);g=Math.sin(g*T)/_,o=Math.sin(o*T)/_}var E=o*v;if(s=s*g+d*E,u=u*g+h*E,l=l*g+f*E,c=c*g+p*E,g===1-o){var M=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=M,u*=M,l*=M,c*=M}}e[t]=s,e[t+1]=u,e[t+2]=l,e[t+3]=c}}),Object.defineProperties(R.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(R.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,u=o(n/2),l=o(r/2),c=o(i/2),d=s(n/2),h=s(r/2),f=s(i/2);return"XYZ"===a?(this._x=d*l*c+u*h*f,this._y=u*h*c-d*l*f,this._z=u*l*f+d*h*c,this._w=u*l*c-d*h*f):"YXZ"===a?(this._x=d*l*c+u*h*f,this._y=u*h*c-d*l*f,this._z=u*l*f-d*h*c,this._w=u*l*c+d*h*f):"ZXY"===a?(this._x=d*l*c-u*h*f,this._y=u*h*c+d*l*f,this._z=u*l*f+d*h*c,this._w=u*l*c-d*h*f):"ZYX"===a?(this._x=d*l*c-u*h*f,this._y=u*h*c+d*l*f,this._z=u*l*f-d*h*c,this._w=u*l*c+d*h*f):"YZX"===a?(this._x=d*l*c+u*h*f,this._y=u*h*c+d*l*f,this._z=u*l*f-d*h*c,this._w=u*l*c-d*h*f):"XZY"===a&&(this._x=d*l*c-u*h*f,this._y=u*h*c-d*l*f,this._z=u*l*f+d*h*c,this._w=u*l*c+d*h*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],u=n[9],l=n[2],c=n[6],d=n[10],h=r+s+d;return h>0?(t=.5/Math.sqrt(h+1),this._w=.25/t,this._x=(c-u)*t,this._y=(a-l)*t,this._z=(o-i)*t):r>s&&r>d?(t=2*Math.sqrt(1+r-s-d),this._w=(c-u)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+l)/t):s>d?(t=2*Math.sqrt(1+s-r-d),this._w=(a-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(u+c)/t):(t=2*Math.sqrt(1+d-r-s),this._w=(o-i)/t,this._x=(a+l)/t,this._y=(u+c)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new j;return function(n,r){return void 0===t&&(t=new j),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,u=t._z,l=t._w;return this._x=n*l+a*o+r*u-i*s,this._y=r*l+a*s+i*o-n*u,this._z=i*l+a*u+n*s-r*o,this._w=a*l-n*o-r*s-i*u,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.atan2(s,o),l=Math.sin((1-t)*u)/s,c=Math.sin(t*u)/s;return this._w=a*l+this._w*c,this._x=n*l+this._x*c,this._y=r*l+this._y*c,this._z=i*l+this._z*c,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(j.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(_=new R,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(_.setFromEuler(e))}),applyAxisAngle:function(){var e=new R;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,u=s*t+a*r-o*n,l=s*n+o*t-i*r,c=s*r+i*n-a*t,d=-i*t-a*n-o*r;return this.x=u*s+d*-i+l*-o-c*-a,this.y=l*s+d*-a+c*-i-u*-o,this.z=c*s+d*-o+u*-a-l*-i,this},project:function(){var e=new O;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new O;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new j,t=new j;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new j;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new j;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(N.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(P.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,u){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new j;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],l=n[4],c=n[7],d=n[2],h=n[5],f=n[8],p=r[0],g=r[3],m=r[6],v=r[1],y=r[4],_=r[7],T=r[2],E=r[5],M=r[8];return i[0]=a*p+o*v+s*T,i[3]=a*g+o*y+s*E,i[6]=a*m+o*_+s*M,i[1]=u*p+l*v+c*T,i[4]=u*g+l*y+c*E,i[7]=u*m+l*_+c*M,i[2]=d*p+h*v+f*T,i[5]=d*g+h*y+f*E,i[8]=d*m+h*_+f*M,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*a*l-t*o*u-n*i*l+n*o*s+r*i*u-r*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],u=n[4],l=n[5],c=n[6],d=n[7],h=n[8],f=h*u-l*d,p=l*c-h*s,g=d*s-u*c,m=i*f+a*p+o*g;if(0===m){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/m;return r[0]=f*y,r[1]=(o*d-h*a)*y,r[2]=(l*a-o*u)*y,r[3]=p*y,r[4]=(h*i-o*c)*y,r[5]=(o*s-l*i)*y,r[6]=g*y,r[7]=(a*c-d*i)*y,r[8]=(u*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,o){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*a+u*o)+a+e,-r*u,r*s,-r*(-u*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],u=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*u,r[6]=t*o+n*l,r[1]=-n*i+t*s,r[4]=-n*a+t*u,r[7]=-n*o+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var k,U,B,F,z,G=0;function H(e,t,n,r,i,a,o,s,u,l){Object.defineProperty(this,"id",{value:G++}),this.uuid=N.generateUUID(),this.name="",this.image=void 0!==e?e:H.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:H.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:E,this.wrapT=void 0!==r?r:E,this.magFilter=void 0!==i?i:A,this.minFilter=void 0!==a?a:1008,this.anisotropy=void 0!==u?u:1,this.format=void 0!==o?o:x,this.type=void 0!==s?s:1009,this.offset=new L(0,0),this.repeat=new L(1,1),this.center=new L(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new P,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:3e3,this.version=0,this.onUpdate=null}function Y(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function V(e,t,n){this.width=e,this.height=t,this.scissor=new Y(0,0,e,t),this.scissorTest=!1,this.viewport=new Y(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=A),this.texture=new H(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0===n.generateMipmaps||n.generateMipmaps,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Q(e,t,n){V.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function q(e,t,n,r,i,a,o,s,u,l,c,d){H.call(this,null,a,o,s,u,l,r,i,c,d),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:b,this.minFilter=void 0!==l?l:b,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function W(e,t){this.min=void 0!==e?e:new j(1/0,1/0,1/0),this.max=void 0!==t?t:new j(-1/0,-1/0,-1/0)}function X(e,t){this.center=void 0!==e?e:new j,this.radius=void 0!==t?t:0}function K(e,t){this.normal=void 0!==e?e:new j(1,0,0),this.constant=void 0!==t?t:0}function Z(e,t,n,r,i,a){this.planes=[void 0!==e?e:new K,void 0!==t?t:new K,void 0!==n?n:new K,void 0!==r?r:new K,void 0!==i?i:new K,void 0!==a?a:new K]}H.DEFAULT_IMAGE=void 0,H.DEFAULT_MAPPING=300,H.prototype=Object.assign(Object.create(d.prototype),{constructor:H,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;void 0===r.uuid&&(r.uuid=N.generateUUID()),t||void 0!==e.images[r.uuid]||(e.images[r.uuid]={uuid:r.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(r)}),n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case T:e.x=e.x-Math.floor(e.x);break;case E:e.x=e.x<0?0:1;break;case M:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case T:e.y=e.y-Math.floor(e.y);break;case E:e.y=e.y<0?0:1;break;case M:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(H.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Y.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=e.elements,o=a[0],s=a[4],u=a[8],l=a[1],c=a[5],d=a[9],h=a[2],f=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(u-h)<.01&&Math.abs(d-f)<.01){if(Math.abs(s+l)<.1&&Math.abs(u+h)<.1&&Math.abs(d+f)<.1&&Math.abs(o+c+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var g=(o+1)/2,m=(c+1)/2,v=(p+1)/2,y=(s+l)/4,_=(u+h)/4,T=(d+f)/4;return g>m&&g>v?g<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(g)),i=_/n):m>v?m<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(m)),i=T/r):v<.01?(n=.707106781,r=.707106781,i=0):(n=_/(i=Math.sqrt(v)),r=T/i),this.set(n,r,i,t),this}var E=Math.sqrt((f-d)*(f-d)+(u-h)*(u-h)+(l-s)*(l-s));return Math.abs(E)<.001&&(E=1),this.x=(f-d)/E,this.y=(u-h)/E,this.z=(l-s)/E,this.w=Math.acos((o+c+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new Y,t=new Y),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),V.prototype=Object.assign(Object.create(d.prototype),{constructor:V,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Q.prototype=Object.create(V.prototype),Q.prototype.constructor=Q,Q.prototype.isWebGLRenderTargetCube=!0,q.prototype=Object.create(H.prototype),q.prototype.constructor=q,q.prototype.isDataTexture=!0,Object.assign(W.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.length;s<u;s+=3){var l=e[s],c=e[s+1],d=e[s+2];l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>i&&(i=l),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,u=e.count;s<u;s++){var l=e.getX(s),c=e.getY(s),d=e.getZ(s);l<t&&(t=l),c<n&&(n=c),d<r&&(r=d),l>i&&(i=l),c>a&&(a=c),d>o&&(o=d)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new j;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new j),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new j),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new j;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,n=o.length;t<n;t++)r.copy(o[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new j),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(k=new j,function(e){return this.clampPoint(e.center,k),k.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new j,t=new j,n=new j,r=new j,i=new j,a=new j,o=new j,s=new j,u=new j,l=new j;function c(r){var i,a;for(i=0,a=r.length-3;i<=a;i+=3){o.fromArray(r,i);var s=u.x*Math.abs(o.x)+u.y*Math.abs(o.y)+u.z*Math.abs(o.z),l=e.dot(o),c=t.dot(o),d=n.dot(o);if(Math.max(-Math.max(l,c,d),Math.min(l,c,d))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),u.subVectors(this.max,s),e.subVectors(o.a,s),t.subVectors(o.b,s),n.subVectors(o.c,s),r.subVectors(t,e),i.subVectors(n,t),a.subVectors(e,n);var d=[0,-r.z,r.y,0,-i.z,i.y,0,-a.z,a.y,r.z,0,-r.x,i.z,0,-i.x,a.z,0,-a.x,-r.y,r.x,0,-i.y,i.x,0,-a.y,a.x,0];return!!c(d)&&!!c(d=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),c(d=[l.x,l.y,l.z]))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new j),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new j;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new j;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new X),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){if(this.isEmpty())return this;var t=e.elements,n=t[0]*this.min.x,r=t[1]*this.min.x,i=t[2]*this.min.x,a=t[0]*this.max.x,o=t[1]*this.max.x,s=t[2]*this.max.x,u=t[4]*this.min.y,l=t[5]*this.min.y,c=t[6]*this.min.y,d=t[4]*this.max.y,h=t[5]*this.max.y,f=t[6]*this.max.y,p=t[8]*this.min.z,g=t[9]*this.min.z,m=t[10]*this.min.z,v=t[8]*this.max.z,y=t[9]*this.max.z,_=t[10]*this.max.z;return this.min.x=Math.min(n,a)+Math.min(u,d)+Math.min(p,v)+t[12],this.min.y=Math.min(r,o)+Math.min(l,h)+Math.min(g,y)+t[13],this.min.z=Math.min(i,s)+Math.min(c,f)+Math.min(m,_)+t[14],this.max.x=Math.max(n,a)+Math.max(u,d)+Math.max(p,v)+t[12],this.max.y=Math.max(r,o)+Math.max(l,h)+Math.max(g,y)+t[13],this.max.z=Math.max(i,s)+Math.max(c,f)+Math.max(m,_)+t[14],this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(X.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(U=new W,function(e,t){var n=this.center;void 0!==t?n.copy(t):U.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new j),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new W),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(K.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new j,t=new j;return function(n,r,i){var a=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new j),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new j;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new j);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||a>1?void 0:n.copy(r).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new j),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new j,t=new P;return function(n,r){var i=r||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Z.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],u=n[5],l=n[6],c=n[7],d=n[8],h=n[9],f=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];return t[0].setComponents(o-r,c-s,p-d,y-g).normalize(),t[1].setComponents(o+r,c+s,p+d,y+g).normalize(),t[2].setComponents(o+i,c+u,p+h,y+m).normalize(),t[3].setComponents(o-i,c-u,p-h,y-m).normalize(),t[4].setComponents(o-a,c-l,p-f,y-v).normalize(),t[5].setComponents(o+a,c+l,p+f,y+v).normalize(),this},intersectsObject:(z=new X,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),z.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(z)}),intersectsSprite:function(){var e=new X;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++)if(t[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:(B=new j,F=new j,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];B.x=r.normal.x>0?e.min.x:e.max.x,F.x=r.normal.x>0?e.max.x:e.min.x,B.y=r.normal.y>0?e.min.y:e.max.y,F.y=r.normal.y>0?e.max.y:e.min.y,B.z=r.normal.z>0?e.min.z:e.max.z,F.z=r.normal.z>0?e.max.z:e.min.z;var i=r.distanceToPoint(B),a=r.distanceToPoint(F);if(i<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var J,$={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy *= normalScale;\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},ee={merge:function(e){for(var t={},n=0;n<e.length;n++){var r=this.clone(e[n]);for(var i in r)t[i]=r[i]}return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}},te={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ne(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(ne.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=N.euclideanModulo(t,1),n=N.clamp(n,0,1),r=N.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l,c=(l=n[1]).length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0&&(void 0!==(l=te[e])?this.setHex(l):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),u=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=u<=.5?l/(o+s):l/(2-o-s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=u,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(J={},function(e,t,n){return this.getHSL(J),J.h+=e,J.s+=t,J.l+=n,this.setHSL(J.h,J.s,J.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var re,ie={common:{diffuse:{value:new ne(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new P},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new L(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ne(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ne(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new P}}},ae={basic:{uniforms:ee.merge([ie.common,ie.specularmap,ie.envmap,ie.aomap,ie.lightmap,ie.fog]),vertexShader:$.meshbasic_vert,fragmentShader:$.meshbasic_frag},lambert:{uniforms:ee.merge([ie.common,ie.specularmap,ie.envmap,ie.aomap,ie.lightmap,ie.emissivemap,ie.fog,ie.lights,{emissive:{value:new ne(0)}}]),vertexShader:$.meshlambert_vert,fragmentShader:$.meshlambert_frag},phong:{uniforms:ee.merge([ie.common,ie.specularmap,ie.envmap,ie.aomap,ie.lightmap,ie.emissivemap,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.gradientmap,ie.fog,ie.lights,{emissive:{value:new ne(0)},specular:{value:new ne(1118481)},shininess:{value:30}}]),vertexShader:$.meshphong_vert,fragmentShader:$.meshphong_frag},standard:{uniforms:ee.merge([ie.common,ie.envmap,ie.aomap,ie.lightmap,ie.emissivemap,ie.bumpmap,ie.normalmap,ie.displacementmap,ie.roughnessmap,ie.metalnessmap,ie.fog,ie.lights,{emissive:{value:new ne(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:$.meshphysical_vert,fragmentShader:$.meshphysical_frag},points:{uniforms:ee.merge([ie.points,ie.fog]),vertexShader:$.points_vert,fragmentShader:$.points_frag},dashed:{uniforms:ee.merge([ie.common,ie.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$.linedashed_vert,fragmentShader:$.linedashed_frag},depth:{uniforms:ee.merge([ie.common,ie.displacementmap]),vertexShader:$.depth_vert,fragmentShader:$.depth_frag},normal:{uniforms:ee.merge([ie.common,ie.bumpmap,ie.normalmap,ie.displacementmap,{opacity:{value:1}}]),vertexShader:$.normal_vert,fragmentShader:$.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$.cube_vert,fragmentShader:$.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$.equirect_vert,fragmentShader:$.equirect_frag},distanceRGBA:{uniforms:ee.merge([ie.common,ie.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$.distanceRGBA_vert,fragmentShader:$.distanceRGBA_frag},shadow:{uniforms:ee.merge([ie.lights,ie.fog,{color:{value:new ne(0)},opacity:{value:1}}]),vertexShader:$.shadow_vert,fragmentShader:$.shadow_frag}};function oe(){var e=null,t=!1,n=null;function r(i,a){!1!==t&&(n(i,a),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function se(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback();var o=e.FLOAT;return r instanceof Float32Array?o=e.FLOAT:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?o=e.UNSIGNED_SHORT:r instanceof Int16Array?o=e.SHORT:r instanceof Uint32Array?o=e.UNSIGNED_INT:r instanceof Int32Array?o=e.INT:r instanceof Int8Array?o=e.BYTE:r instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,a=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,e.STATIC_DRAW):-1===a.count?e.bufferSubData(r,0,i):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function ue(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||ue.DefaultOrder}function le(){this.mask=1}ae.physical={uniforms:ee.merge([ae.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:$.meshphysical_vert,fragmentShader:$.meshphysical_frag},ue.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ue.DefaultOrder="XYZ",Object.defineProperties(ue.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(ue.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=N.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],u=i[1],l=i[5],c=i[9],d=i[2],h=i[6],f=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(h,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(-d,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(u,a))):"ZYX"===t?(this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(h,f),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-c,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new O;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(re=new R,function(e){return re.setFromEuler(this),this.setFromQuaternion(re,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new j(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(le.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var ce,de,he,fe,pe=0;function ge(){Object.defineProperty(this,"id",{value:pe++}),this.uuid=N.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ge.DefaultUp.clone();var e=new j,t=new ue,n=new R,r=new j(1,1,1);t.onChange((function(){n.setFromEuler(t,!1)})),n.onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new O},normalMatrix:{value:new P}}),this.matrix=new O,this.matrixWorld=new O,this.matrixAutoUpdate=ge.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new le,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function me(){ge.call(this),this.type="Camera",this.matrixWorldInverse=new O,this.projectionMatrix=new O}function ve(e,t,n,r,i,a){me.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function ye(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new j,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new ne,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}ge.DefaultUp=new j(0,1,0),ge.DefaultMatrixAutoUpdate=!0,ge.prototype=Object.assign(Object.create(d.prototype),{constructor:ge,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(fe=new R,function(e,t){return fe.setFromAxisAngle(e,t),this.quaternion.multiply(fe),this}),rotateOnWorldAxis:function(){var e=new R;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new j(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new j(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new j(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new j;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new j(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new j(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new j(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(he=new O,function(e){return e.applyMatrix4(he.getInverse(this.matrixWorld))}),lookAt:function(){var e=new O,t=new j;return function(n,r,i){n.isVector3?t.copy(n):t.set(n,r,i),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new j),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(ce=new j,de=new j,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new R),this.updateMatrixWorld(!0),this.matrixWorld.decompose(ce,e,de),e}),getWorldScale:function(){var e=new j,t=new R;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new j),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new R;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new j),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),void 0!==this.geometry){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,u=o.length;s<u;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,u=this.material.length;s<u;s++)c.push(i(e.materials,this.material[s]));r.material=c}else r.material=i(e.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object);if(t){var d=g(e.geometries),h=g(e.materials),f=g(e.textures),p=g(e.images);o=g(e.shapes),d.length>0&&(n.geometries=d),h.length>0&&(n.materials=h),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=r,n;function g(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}}),me.prototype=Object.assign(Object.create(ge.prototype),{constructor:me,isCamera:!0,copy:function(e,t){return ge.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new R;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new j),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){ge.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),ve.prototype=Object.assign(Object.create(me.prototype),{constructor:ve,isOrthographicCamera:!0,copy:function(e,t){return me.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var u=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,d=(this.top-this.bottom)/this.view.height;a=(i+=c*(this.view.offsetX/u))+c*(this.view.width/u),s=(o-=d*(this.view.offsetY/l))-d*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far)},toJSON:function(e){var t=ge.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(ye.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var _e,Te,Ee=0;function Me(){Object.defineProperty(this,"id",{value:Ee+=2}),this.uuid=N.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function be(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Ae(e,t,n){be.call(this,new Int8Array(e),t,n)}function we(e,t,n){be.call(this,new Uint8Array(e),t,n)}function Se(e,t,n){be.call(this,new Uint8ClampedArray(e),t,n)}function xe(e,t,n){be.call(this,new Int16Array(e),t,n)}function De(e,t,n){be.call(this,new Uint16Array(e),t,n)}function Ie(e,t,n){be.call(this,new Int32Array(e),t,n)}function Ce(e,t,n){be.call(this,new Uint32Array(e),t,n)}function Ne(e,t,n){be.call(this,new Float32Array(e),t,n)}function Le(e,t,n){be.call(this,new Float64Array(e),t,n)}function Oe(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Re(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}Me.prototype=Object.assign(Object.create(d.prototype),{constructor:Me,isGeometry:!0,applyMatrix:function(e){for(var t=(new P).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(e);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new O;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new O;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new O;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new O;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new O;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:(Te=new ge,function(e){Te.lookAt(e),Te.updateMatrix(),this.applyMatrix(Te.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,o=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=[],c=[],d=[],h=0,f=0;h<i.length;h+=3,f+=2)t.vertices.push(new j(i[h],i[h+1],i[h+2])),void 0!==a&&l.push(new j(a[h],a[h+1],a[h+2])),void 0!==o&&t.colors.push(new ne(o[h],o[h+1],o[h+2])),void 0!==s&&c.push(new L(s[f],s[f+1])),void 0!==u&&d.push(new L(u[f],u[f+1]));function p(e,n,r,i){var h=new ye(e,n,r,void 0!==a?[l[e].clone(),l[n].clone(),l[r].clone()]:[],void 0!==o?[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()]:[],i);t.faces.push(h),void 0!==s&&t.faceVertexUvs[0].push([c[e].clone(),c[n].clone(),c[r].clone()]),void 0!==u&&t.faceVertexUvs[1].push([d[e].clone(),d[n].clone(),d[r].clone()])}var g=e.groups;if(g.length>0)for(h=0;h<g.length;h++)for(var m=g[h],v=m.start,y=(f=v,v+m.count);f<y;f+=3)void 0!==n?p(n[f],n[f+1],n[f+2],m.materialIndex):p(f,f+1,f+2,m.materialIndex);else if(void 0!==n)for(h=0;h<n.length;h+=3)p(n[h],n[h+1],n[h+2]);else for(h=0;h<i.length/3;h+=3)p(h,h+1,h+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(_e=new j,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_e).negate(),this.translate(_e.x,_e.y,_e.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new O;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new j,t=new j,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new j;if(e){var s,u,l,c=new j,d=new j;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],u=this.vertices[a.b],l=this.vertices[a.c],c.subVectors(l,u),d.subVectors(s,u),c.cross(d),o[a.a].add(c),o[a.b].add(c),o[a.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o[(a=this.faces[r]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var h=(a=this.faces[r]).vertexNormals;3===h.length?(h[0].copy(o[a.a]),h[1].copy(o[a.b]),h[2].copy(o[a.c])):(h[0]=o[a.a].clone(),h[1]=o[a.b].clone(),h[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new Me;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new j,l={a:new j,b:new j,c:new j},o.push(u),s.push(l)}var u,l,c=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=c.faceNormals[n],l=c.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new W),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new X),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,u=e.faces,l=this.faceVertexUvs[0],c=e.faceVertexUvs[0],d=this.colors,h=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new P).getNormalMatrix(t));for(var f=0,p=o.length;f<p;f++){var g=o[f].clone();void 0!==t&&g.applyMatrix4(t),a.push(g)}for(f=0,p=h.length;f<p;f++)d.push(h[f].clone());for(f=0,p=u.length;f<p;f++){var m,v,y,_=u[f],T=_.vertexNormals,E=_.vertexColors;(m=new ye(_.a+i,_.b+i,_.c+i)).normal.copy(_.normal),void 0!==r&&m.normal.applyMatrix3(r).normalize();for(var M=0,b=T.length;M<b;M++)v=T[M].clone(),void 0!==r&&v.applyMatrix3(r).normalize(),m.vertexNormals.push(v);for(m.color.copy(_.color),M=0,b=E.length;M<b;M++)y=E[M],m.vertexColors.push(y.clone());m.materialIndex=_.materialIndex+n,s.push(m)}for(f=0,p=c.length;f<p;f++){var A=c[f],w=[];if(void 0!==A){for(M=0,b=A.length;M<b;M++)w.push(A[M].clone());l.push(w)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,a,o,s,u={},l=[],c=[],d=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===u[t=Math.round(e.x*d)+"_"+Math.round(e.y*d)+"_"+Math.round(e.z*d)]?(u[t]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[t]];var h=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],a=[i.a,i.b,i.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){h.push(n);break}}for(n=h.length-1;n>=0;n--){var p=h[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var g=this.vertices.length-l.length;return this.vertices=l,g},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new j(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];for(a&&a.length===t&&(r=[]),o&&o.length===t&&(i=[]),n=0;n<t;n++){var s=e[n]._id;r&&r.push(a[s]),i&&i.push(o[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}var o=[],s=[],u={},l=[],c={},d=[],h={};for(i=0;i<this.faces.length;i++){var f=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],g=f.normal.length()>0,m=f.vertexNormals.length>0,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,_=0;if(_=b(_,0,0),_=b(_,1,!0),_=b(_,2,!1),_=b(_,3,p),_=b(_,4,g),_=b(_,5,m),_=b(_,6,v),_=b(_,7,y),o.push(_),o.push(f.a,f.b,f.c),o.push(f.materialIndex),p){var T=this.faceVertexUvs[0][i];o.push(S(T[0]),S(T[1]),S(T[2]))}if(g&&o.push(A(f.normal)),m){var E=f.vertexNormals;o.push(A(E[0]),A(E[1]),A(E[2]))}if(v&&o.push(w(f.color)),y){var M=f.vertexColors;o.push(w(M[0]),w(M[1]),w(M[2]))}}function b(e,t,n){return n?e|1<<t:e&~(1<<t)}function A(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=s.length/3,s.push(e.x,e.y,e.z),u[t])}function w(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==c[t]?c[t]:(c[t]=l.length,l.push(e.getHex()),c[t])}function S(e){var t=e.x.toString()+e.y.toString();return void 0!==h[t]?h[t]:(h[t]=d.length/2,d.push(e.x,e.y),h[t])}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),d.length>0&&(e.data.uvs=[d]),e.data.faces=o,e},clone:function(){return(new Me).copy(this)},copy:function(e){var t,n,r,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var u=e.colors;for(t=0,n=u.length;t<n;t++)this.colors.push(u[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=c.length;r<i;r++){var d=c[r],h=[];for(a=0,o=d.length;a<o;a++){var f=d[a];h.push(f.clone())}this.faceVertexUvs[t].push(h)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var g={};if(g.name=p[t].name,void 0!==p[t].vertices)for(g.vertices=[],r=0,i=p[t].vertices.length;r<i;r++)g.vertices.push(p[t].vertices[r].clone());if(void 0!==p[t].normals)for(g.normals=[],r=0,i=p[t].normals.length;r<i;r++)g.normals.push(p[t].normals[r].clone());this.morphTargets.push(g)}var m=e.morphNormals;for(t=0,n=m.length;t<n;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],r=0,i=m[t].vertexNormals.length;r<i;r++){var y=m[t].vertexNormals[r],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),v.vertexNormals.push(_)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],r=0,i=m[t].faceNormals.length;r<i;r++)v.faceNormals.push(m[t].faceNormals[r].clone());this.morphNormals.push(v)}var T=e.skinWeights;for(t=0,n=T.length;t<n;t++)this.skinWeights.push(T[t].clone());var E=e.skinIndices;for(t=0,n=E.length;t<n;t++)this.skinIndices.push(E[t].clone());var M=e.lineDistances;for(t=0,n=M.length;t<n;t++)this.lineDistances.push(M[t]);var b=e.boundingBox;null!==b&&(this.boundingBox=b.clone());var A=e.boundingSphere;return null!==A&&(this.boundingSphere=A.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(be.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(be.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new ne),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new L),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new j),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new Y),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Ae.prototype=Object.create(be.prototype),Ae.prototype.constructor=Ae,we.prototype=Object.create(be.prototype),we.prototype.constructor=we,Se.prototype=Object.create(be.prototype),Se.prototype.constructor=Se,xe.prototype=Object.create(be.prototype),xe.prototype.constructor=xe,De.prototype=Object.create(be.prototype),De.prototype.constructor=De,Ie.prototype=Object.create(be.prototype),Ie.prototype.constructor=Ie,Ce.prototype=Object.create(be.prototype),Ce.prototype.constructor=Ce,Ne.prototype=Object.create(be.prototype),Ne.prototype.constructor=Ne,Le.prototype=Object.create(be.prototype),Le.prototype.constructor=Le,Object.assign(Oe.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,u=s.length;if(u>0){t=[];for(var l=0;l<u;l++)t[l]=[];this.morphTargets.position=t}var c,d=e.morphNormals,h=d.length;if(h>0){for(c=[],l=0;l<h;l++)c[l]=[];this.morphTargets.normal=c}var f=e.skinIndices,p=e.skinWeights,g=f.length===r.length,m=p.length===r.length;for(0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var v=n[l];this.vertices.push(r[v.a],r[v.b],r[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var T,E=v.vertexColors;if(3===E.length)this.colors.push(E[0],E[1],E[2]);else{var M=v.color;this.colors.push(M,M,M)}!0===a&&(void 0!==(T=i[0][l])?this.uvs.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new L,new L,new L))),!0===o&&(void 0!==(T=i[1][l])?this.uvs2.push(T[0],T[1],T[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new L,new L,new L)));for(var b=0;b<u;b++){var A=s[b].vertices;t[b].push(A[v.a],A[v.b],A[v.c])}for(b=0;b<h;b++){var w=d[b].vertexNormals[l];c[b].push(w.a,w.b,w.c)}g&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),m&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var je=1;function Pe(){Object.defineProperty(this,"id",{value:je+=2}),this.uuid=N.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function ke(e,t,n,r,i,a){Me.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new Ue(e,t,n,r,i,a)),this.mergeVertices()}function Ue(e,t,n,r,i,a){Pe.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var o=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,a=Math.floor(a)||1;var s=[],u=[],l=[],c=[],d=0,h=0;function f(e,t,n,r,i,a,f,p,g,m,v){var y,_,T=a/g,E=f/m,M=a/2,b=f/2,A=p/2,w=g+1,S=m+1,x=0,D=0,I=new j;for(_=0;_<S;_++){var C=_*E-b;for(y=0;y<w;y++){var N=y*T-M;I[e]=N*r,I[t]=C*i,I[n]=A,u.push(I.x,I.y,I.z),I[e]=0,I[t]=0,I[n]=p>0?1:-1,l.push(I.x,I.y,I.z),c.push(y/g),c.push(1-_/m),x+=1}}for(_=0;_<m;_++)for(y=0;y<g;y++){var L=d+y+w*_,O=d+y+w*(_+1),R=d+(y+1)+w*(_+1),P=d+(y+1)+w*_;s.push(L,O,P),s.push(O,R,P),D+=6}o.addGroup(h,D,v),h+=D,d+=x}f("z","y","x",-1,-1,n,t,e,a,i,0),f("z","y","x",1,-1,n,t,-e,a,i,1),f("x","z","y",1,1,e,n,t,r,a,2),f("x","z","y",1,-1,e,n,-t,r,a,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new Ne(u,3)),this.addAttribute("normal",new Ne(l,3)),this.addAttribute("uv",new Ne(c,2))}function Be(e,t,n,r){Me.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new Fe(e,t,n,r)),this.mergeVertices()}function Fe(e,t,n,r){Pe.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,a,o=(e=e||1)/2,s=(t=t||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,d=l+1,h=e/u,f=t/l,p=[],g=[],m=[],v=[];for(a=0;a<d;a++){var y=a*f-s;for(i=0;i<c;i++){var _=i*h-o;g.push(_,-y,0),m.push(0,0,1),v.push(i/u),v.push(1-a/l)}}for(a=0;a<l;a++)for(i=0;i<u;i++){var T=i+c*a,E=i+c*(a+1),M=i+1+c*(a+1),b=i+1+c*a;p.push(T,E,b),p.push(E,M,b)}this.setIndex(p),this.addAttribute("position",new Ne(g,3)),this.addAttribute("normal",new Ne(m,3)),this.addAttribute("uv",new Ne(v,2))}Pe.prototype=Object.assign(Object.create(d.prototype),{constructor:Pe,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(Re(e)>65535?Ce:De)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new be(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new P).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new O;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new O;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new O;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new O;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new O;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new ge;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new j;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Ne(3*t.vertices.length,3),r=new Ne(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new Ne(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new Ne(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Oe).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new be(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new be(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new be(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new be(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new be(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],u=e.morphTargets[o],l=0,c=u.length;l<c;l++){var d=u[l],h=new Ne(3*d.length,3);s.push(h.copyVector3sArray(d))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var f=new Ne(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new Ne(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new W);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new W,t=new j;return function(){null===this.boundingSphere&&(this.boundingSphere=new X);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,a=0,o=n.count;a<o;a++)t.x=n.getX(a),t.y=n.getY(a),t.z=n.getZ(a),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new be(new Float32Array(r.length),3));else for(var i=t.normal.array,a=0,o=i.length;a<o;a++)i[a]=0;var s,u,l,c=t.normal.array,d=new j,h=new j,f=new j,p=new j,g=new j;if(e){var m=e.array;0===n.length&&this.addGroup(0,m.length);for(var v=0,y=n.length;v<y;++v){var _=n[v],T=_.start;for(a=T,o=T+_.count;a<o;a+=3)s=3*m[a+0],u=3*m[a+1],l=3*m[a+2],d.fromArray(r,s),h.fromArray(r,u),f.fromArray(r,l),p.subVectors(f,h),g.subVectors(d,h),p.cross(g),c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[u]+=p.x,c[u+1]+=p.y,c[u+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}}else for(a=0,o=r.length;a<o;a+=9)d.fromArray(r,a),h.fromArray(r,a+3),f.fromArray(r,a+6),p.subVectors(f,h),g.subVectors(d,h),p.cross(g),c[a]=p.x,c[a+1]=p.y,c[a+2]=p.z,c[a+3]=p.x,c[a+4]=p.y,c[a+5]=p.z,c[a+6]=p.x,c[a+7]=p.y,c[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=0,u=a.itemSize*t;s<o.length;s++,u++)i[u]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new j;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Pe,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,o=i.itemSize,s=new a.constructor(t.length*o),u=0,l=0,c=0,d=t.length;c<d;c++){u=t[c]*o;for(var h=0;h<o;h++)s[l++]=a[u++]}e.addAttribute(r,new be(s,o))}var f=this.groups;for(c=0,d=f.length;c<d;c++){var p=f[c];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var a=this.attributes;for(var n in a){var o=a[n];i=Array.prototype.slice.call(o.array),e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var u=this.boundingSphere;return null!==u&&(e.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),e},clone:function(){return(new Pe).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var u=[],l=s[t];for(n=0,r=l.length;n<r;n++)u.push(l[n].clone());this.morphAttributes[t]=u}var c=e.groups;for(n=0,r=c.length;n<r;n++){var d=c[n];this.addGroup(d.start,d.count,d.materialIndex)}var h=e.boundingBox;null!==h&&(this.boundingBox=h.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ke.prototype=Object.create(Me.prototype),ke.prototype.constructor=ke,Ue.prototype=Object.create(Pe.prototype),Ue.prototype.constructor=Ue,Be.prototype=Object.create(Me.prototype),Be.prototype.constructor=Be,Fe.prototype=Object.create(Pe.prototype),Fe.prototype.constructor=Fe;var ze,Ge,He,Ye,Ve,Qe,qe,We=0;function Xe(){Object.defineProperty(this,"id",{value:We++}),this.uuid=N.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Ke(e){Xe.call(this),this.type="MeshBasicMaterial",this.color=new ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ze(e){Xe.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Je(e,t){this.origin=void 0!==e?e:new j,this.direction=void 0!==t?t:new j}function $e(e,t){this.start=void 0!==e?e:new j,this.end=void 0!==t?t:new j}function et(e,t,n){this.a=void 0!==e?e:new j,this.b=void 0!==t?t:new j,this.c=void 0!==n?n:new j}function tt(e,t){ge.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Pe,this.material=void 0!==t?t:new Ke({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function nt(e,t,n,r){var i,a,o,s=new ne(0),u=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),l(s,u=void 0!==t?t:1)},getClearAlpha:function(){return u},setClearAlpha:function(e){l(s,u=e)},render:function(t,r,c,d){var h=r.background;null===h?l(s,u):h&&h.isColor&&(l(h,1),d=!0),(e.autoClear||d)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),h&&h.isCubeTexture?(void 0===o&&((o=new tt(new Ue(1,1,1),new Ze({uniforms:ae.cube.uniforms,vertexShader:ae.cube.vertexShader,fragmentShader:ae.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(o)),o.material.uniforms.tCube.value=h,t.push(o,o.geometry,o.material,0,null)):h&&h.isTexture&&(void 0===i&&(i=new ve(-1,1,1,-1,0,1),a=new tt(new Fe(2,2),new Ke({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a)),a.material.map=h,e.renderBufferDirect(i,null,a.geometry,a.material,a,null))}}}function rt(e,t,n){var r;this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r)},this.renderInstances=function(e,i,a){var o=t.get("ANGLE_instanced_arrays");null!==o?(o.drawArraysInstancedANGLE(r,i,a,e.maxInstancedCount),n.update(a,r,e.maxInstancedCount)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function it(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==n.precision?n.precision:"highp",o=i(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var s=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),c=e.getParameter(e.MAX_TEXTURE_SIZE),d=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),h=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),m=l>0,v=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:s,maxTextures:u,maxVertexTextures:l,maxTextureSize:c,maxCubemapSize:d,maxAttributes:h,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:g,vertexTextures:m,floatFragmentTextures:v,floatVertexTextures:m&&v}}function at(){var e=this,t=null,n=0,r=!1,i=!1,a=new K,o=new P,s={value:null,needsUpdate:!1};function u(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,r,i){var u=null!==t?t.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,d=n.matrixWorldInverse;o.getNormalMatrix(d),(null===l||l.length<c)&&(l=new Float32Array(c));for(var h=0,f=r;h!==u;++h,f+=4)a.copy(t[h]).applyMatrix4(d,o),a.normal.toArray(l,f),l[f+3]=a.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=u,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==n||r;return r=i,t=l(e,a,0),n=e.length,o},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(e,a,o,c,d,h){if(!r||null===e||0===e.length||i&&!o)i?l(null):u();else{var f=i?0:n,p=4*f,g=d.clippingState||null;s.value=g,g=l(e,c,p,h);for(var m=0;m!==p;++m)g[m]=t[m];d.clippingState=g,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}}function ot(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}function st(e,t,n){var r={},i={};function a(e){var o=e.target,s=r[o.id];for(var u in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[u]);o.removeEventListener("dispose",a),delete r[o.id];var l=i[o.id];l&&(t.remove(l),delete i[o.id]),(l=i[s.id])&&(t.remove(l),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Pe).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(n){var r=n.index,i=n.attributes;for(var a in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),i)t.update(i[a],e.ARRAY_BUFFER);var o=n.morphAttributes;for(var a in o)for(var s=o[a],u=0,l=s.length;u<l;u++)t.update(s[u],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var r=i[n.id];if(r)return r;var a,o=[],s=n.index,u=n.attributes;if(null!==s)for(var l=0,c=(a=s.array).length;l<c;l+=3){var d=a[l+0],h=a[l+1],f=a[l+2];o.push(d,h,h,f,f,d)}else for(l=0,c=(a=u.position.array).length/3-1;l<c;l+=3)d=l+0,h=l+1,f=l+2,o.push(d,h,h,f,f,d);return r=new(Re(o)>65535?Ce:De)(o,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),i[n.id]=r,r}}}function ut(e,t,n){var r,i,a;this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*a),n.update(o,r)},this.renderInstances=function(e,o,s){var u=t.get("ANGLE_instanced_arrays");null!==u?(u.drawElementsInstancedANGLE(r,s,i,o*a,e.maxInstancedCount),n.update(s,r,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}function lt(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(i=i||1,t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=i*(n-2);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function ct(e,t){return Math.abs(t[1])-Math.abs(e[1])}function dt(e){var t={},n=new Float32Array(8);return{update:function(r,i,a,o){var s=r.morphTargetInfluences,u=s.length,l=t[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];t[i.id]=l}var d=a.morphTargets&&i.morphAttributes.position,h=a.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++)0!==(f=l[c])[1]&&(d&&i.removeAttribute("morphTarget"+c),h&&i.removeAttribute("morphNormal"+c));for(c=0;c<u;c++)(f=l[c])[0]=c,f[1]=s[c];for(l.sort(ct),c=0;c<8;c++){var f;if(f=l[c]){var p=f[0],g=f[1];if(g){d&&i.addAttribute("morphTarget"+c,d[p]),h&&i.addAttribute("morphNormal"+c,h[p]),n[c]=g;continue}}n[c]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}function ht(e,t){var n={};return{update:function(r){var i=t.render.frame,a=r.geometry,o=e.get(r,a);return n[o.id]!==i&&(a.isGeometry&&o.updateFromObject(r),e.update(o),n[o.id]=i),o},dispose:function(){n={}}}}function ft(e,t,n,r,i,a,o,s,u,l){e=void 0!==e?e:[],t=void 0!==t?t:301,H.call(this,e,t,n,r,i,a,o,s,u,l),this.flipY=!1}Xe.prototype=Object.assign(Object.create(d.prototype),{constructor:Xe,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ke.prototype=Object.create(Xe.prototype),Ke.prototype.constructor=Ke,Ke.prototype.isMeshBasicMaterial=!0,Ke.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Ze.prototype=Object.create(Xe.prototype),Ze.prototype.constructor=Ze,Ze.prototype.isShaderMaterial=!0,Ze.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ee.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Ze.prototype.toJSON=function(e){var t=Xe.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Je.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new j),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new j;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new j),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new j;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(Ge=new j,He=new j,Ye=new j,function(e,t,n,r){Ge.copy(e).add(t).multiplyScalar(.5),He.copy(t).sub(e).normalize(),Ye.copy(this.origin).sub(Ge);var i,a,o,s,u=.5*e.distanceTo(t),l=-this.direction.dot(He),c=Ye.dot(this.direction),d=-Ye.dot(He),h=Ye.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*c-d,s=u*f,(i=l*d-c)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(i*=p)*(i+l*(a*=p)+2*c)+a*(l*i+a+2*d)+h}else a=u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*d)+h;else a=-u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*d)+h;else a<=-s?o=-(i=Math.max(0,-(-l*u+c)))*i+(a=i>0?-u:Math.min(Math.max(-u,-d),u))*(a+2*d)+h:a<=s?(i=0,o=(a=Math.min(Math.max(-u,-d),u))*(a+2*d)+h):o=-(i=Math.max(0,-(l*u+c)))*i+(a=i>0?u:Math.min(Math.max(-u,-d),u))*(a+2*d)+h;else a=l>0?-u:u,o=-(i=Math.max(0,-(l*a+c)))*i+a*(a+2*d)+h;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(He).multiplyScalar(a).add(Ge),o}),intersectSphere:function(){var e=new j;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=r-o,u=r+o;return s<0&&u<0?null:s<0?this.at(u,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,d=this.origin;return u>=0?(n=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(n=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),l>=0?(i=(e.min.y-d.y)*l,a=(e.max.y-d.y)*l):(i=(e.max.y-d.y)*l,a=(e.min.y-d.y)*l),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),c>=0?(o=(e.min.z-d.z)*c,s=(e.max.z-d.z)*c):(o=(e.max.z-d.z)*c,s=(e.min.z-d.z)*c),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(ze=new j,function(e){return null!==this.intersectBox(e,ze)}),intersectTriangle:function(){var e=new j,t=new j,n=new j,r=new j;return function(i,a,o,s,u){t.subVectors(a,i),n.subVectors(o,i),r.crossVectors(t,n);var l,c=this.direction.dot(r);if(c>0){if(s)return null;l=1}else{if(!(c<0))return null;l=-1,c=-c}e.subVectors(this.origin,i);var d=l*this.direction.dot(n.crossVectors(e,n));if(d<0)return null;var h=l*this.direction.dot(t.cross(e));if(h<0)return null;if(d+h>c)return null;var f=-l*e.dot(r);return f<0?null:this.at(f/c,u)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign($e.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new j),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new j),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new j),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Ve=new j,Qe=new j,function(e,t){Ve.subVectors(e,this.start),Qe.subVectors(this.end,this.start);var n=Qe.dot(Qe),r=Qe.dot(Ve)/n;return t&&(r=N.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new j),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(et,{getNormal:(qe=new j,function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new j),r.subVectors(n,t),qe.subVectors(e,t),r.cross(qe);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var e=new j,t=new j,n=new j;return function(r,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),n.subVectors(r,i);var u=e.dot(e),l=e.dot(t),c=e.dot(n),d=t.dot(t),h=t.dot(n),f=u*d-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new j),0===f)return s.set(-2,-1,-1);var p=1/f,g=(d*c-l*h)*p,m=(u*h-l*c)*p;return s.set(1-g-m,m,g)}}(),containsPoint:function(){var e=new j;return function(t,n,r,i){return et.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(et.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new j,t=new j;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new j),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return et.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new j),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return et.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return et.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new K,t=[new $e,new $e,new $e],n=new j,r=new j;return function(i,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new j);var o=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(i,n),!0===this.containsPoint(n))a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(n,!0,r);var u=n.distanceToSquared(r);u<o&&(o=u,a.copy(r))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),tt.prototype=Object.assign(Object.create(ge.prototype),{constructor:tt,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return ge.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new O,t=new Je,n=new X,r=new j,i=new j,a=new j,o=new j,s=new j,u=new j,l=new L,c=new L,d=new L,h=new j,f=new j,p=new j;function g(e,t,n,r,i,a,o){return et.getBarycoord(e,t,n,r,h),i.multiplyScalar(h.x),a.multiplyScalar(h.y),o.multiplyScalar(h.z),i.add(a).add(o),i.clone()}function m(e,t,n,r,i,a,o,s){if(null===(1===t.side?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,2!==t.side,s)))return null;p.copy(s),p.applyMatrix4(e.matrixWorld);var u=n.ray.origin.distanceTo(p);return u<n.near||u>n.far?null:{distance:u,point:p.clone(),object:e}}function v(e,t,n,o,s,u,h,p){r.fromBufferAttribute(o,u),i.fromBufferAttribute(o,h),a.fromBufferAttribute(o,p);var v=m(e,e.material,t,n,r,i,a,f);if(v){s&&(l.fromBufferAttribute(s,u),c.fromBufferAttribute(s,h),d.fromBufferAttribute(s,p),v.uv=g(f,r,i,a,l,c,d));var y=new ye(u,h,p);et.getNormal(r,i,a,y.normal),v.face=y}return v}return function(h,p){var y,_=this.geometry,T=this.material,E=this.matrixWorld;if(void 0!==T&&(null===_.boundingSphere&&_.computeBoundingSphere(),n.copy(_.boundingSphere),n.applyMatrix4(E),!1!==h.ray.intersectsSphere(n)&&(e.getInverse(E),t.copy(h.ray).applyMatrix4(e),null===_.boundingBox||!1!==t.intersectsBox(_.boundingBox))))if(_.isBufferGeometry){var M,b,A,w,S,x=_.index,D=_.attributes.position,I=_.attributes.uv;if(null!==x)for(w=0,S=x.count;w<S;w+=3)M=x.getX(w),b=x.getX(w+1),A=x.getX(w+2),(y=v(this,h,t,D,I,M,b,A))&&(y.faceIndex=Math.floor(w/3),p.push(y));else if(void 0!==D)for(w=0,S=D.count;w<S;w+=3)(y=v(this,h,t,D,I,M=w,b=w+1,A=w+2))&&(y.faceIndex=Math.floor(w/3),p.push(y))}else if(_.isGeometry){var C,N,L,O,R=Array.isArray(T),j=_.vertices,P=_.faces,k=_.faceVertexUvs[0];k.length>0&&(O=k);for(var U=0,B=P.length;U<B;U++){var F=P[U],z=R?T[F.materialIndex]:T;if(void 0!==z){if(C=j[F.a],N=j[F.b],L=j[F.c],!0===z.morphTargets){var G=_.morphTargets,H=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var Y=0,V=G.length;Y<V;Y++){var Q=H[Y];if(0!==Q){var q=G[Y].vertices;r.addScaledVector(o.subVectors(q[F.a],C),Q),i.addScaledVector(s.subVectors(q[F.b],N),Q),a.addScaledVector(u.subVectors(q[F.c],L),Q)}}r.add(C),i.add(N),a.add(L),C=r,N=i,L=a}if(y=m(this,z,h,t,C,N,L,f)){if(O&&O[U]){var W=O[U];l.copy(W[0]),c.copy(W[1]),d.copy(W[2]),y.uv=g(f,C,N,L,l,c,d)}y.face=F,y.faceIndex=U,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ft.prototype=Object.create(H.prototype),ft.prototype.constructor=ft,ft.prototype.isCubeTexture=!0,Object.defineProperty(ft.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var pt=new H,gt=new ft;function mt(){this.seq=[],this.map={}}var vt=[],yt=[],_t=new Float32Array(16),Tt=new Float32Array(9),Et=new Float32Array(4);function Mt(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=vt[i];if(void 0===a&&(a=new Float32Array(i),vt[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function bt(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function At(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function wt(e,t){var n=yt[t];void 0===n&&(n=new Int32Array(t),yt[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function St(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function xt(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Dt(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(bt(n,t))return;e.uniform2fv(this.addr,t),At(n,t)}}function It(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(bt(n,t))return;e.uniform3fv(this.addr,t),At(n,t)}}function Ct(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(bt(n,t))return;e.uniform4fv(this.addr,t),At(n,t)}}function Nt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(bt(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),At(n,t)}else{if(bt(n,r))return;Et.set(r),e.uniformMatrix2fv(this.addr,!1,Et),At(n,r)}}function Lt(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(bt(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),At(n,t)}else{if(bt(n,r))return;Tt.set(r),e.uniformMatrix3fv(this.addr,!1,Tt),At(n,r)}}function Ot(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(bt(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),At(n,t)}else{if(bt(n,r))return;_t.set(r),e.uniformMatrix4fv(this.addr,!1,_t),At(n,r)}}function Rt(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||pt,i)}function jt(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||gt,i)}function Pt(e,t){var n=this.cache;bt(n,t)||(e.uniform2iv(this.addr,t),At(n,t))}function kt(e,t){var n=this.cache;bt(n,t)||(e.uniform3iv(this.addr,t),At(n,t))}function Ut(e,t){var n=this.cache;bt(n,t)||(e.uniform4iv(this.addr,t),At(n,t))}function Bt(e,t){var n=this.cache;bt(n,t)||(e.uniform1fv(this.addr,t),At(n,t))}function Ft(e,t){var n=this.cache;bt(n,t)||(e.uniform1iv(this.addr,t),At(n,t))}function zt(e,t){var n=this.cache,r=Mt(t,this.size,2);bt(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function Gt(e,t){var n=this.cache,r=Mt(t,this.size,3);bt(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function Ht(e,t){var n=this.cache,r=Mt(t,this.size,4);bt(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function Yt(e,t){var n=this.cache,r=Mt(t,this.size,4);bt(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function Vt(e,t){var n=this.cache,r=Mt(t,this.size,9);bt(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function Qt(e,t){var n=this.cache,r=Mt(t,this.size,16);bt(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function qt(e,t,n){var r=this.cache,i=t.length,a=wt(n,i);!1===bt(r,a)&&(e.uniform1iv(this.addr,a),At(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||pt,a[o])}function Wt(e,t,n){var r=this.cache,i=t.length,a=wt(n,i);!1===bt(r,a)&&(e.uniform1iv(this.addr,a),At(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||gt,a[o])}function Xt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return St;case 35664:return Dt;case 35665:return It;case 35666:return Ct;case 35674:return Nt;case 35675:return Lt;case 35676:return Ot;case 35678:case 36198:return Rt;case 35680:return jt;case 5124:case 35670:return xt;case 35667:case 35671:return Pt;case 35668:case 35672:return kt;case 35669:case 35673:return Ut}}(t.type)}function Kt(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Bt;case 35664:return zt;case 35665:return Gt;case 35666:return Ht;case 35674:return Yt;case 35675:return Vt;case 35676:return Qt;case 35678:return qt;case 35680:return Wt;case 5124:case 35670:return Ft;case 35667:case 35671:return Pt;case 35668:case 35672:return kt;case 35669:case 35673:return Ut}}(t.type)}function Zt(e){this.id=e,mt.call(this)}Kt.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),At(t,e)},Zt.prototype.setValue=function(e,t){for(var n=this.seq,r=0,i=n.length;r!==i;++r){var a=n[r];a.setValue(e,t[a.id])}};var Jt=/([\w\d_]+)(\])?(\[|\.)?/g;function $t(e,t){e.seq.push(t),e.map[t.id]=t}function en(e,t,n){var r=e.name,i=r.length;for(Jt.lastIndex=0;;){var a=Jt.exec(r),o=Jt.lastIndex,s=a[1],u="]"===a[2],l=a[3];if(u&&(s|=0),void 0===l||"["===l&&o+2===i){$t(n,void 0===l?new Xt(s,e,t):new Kt(s,e,t));break}var c=n.map[s];void 0===c&&$t(n,c=new Zt(s)),n=c}}function tn(e,t,n){mt.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<r;++i){var a=e.getActiveUniform(t,i);en(a,e.getUniformLocation(t,a.name),this)}}function nn(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}tn.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},tn.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},tn.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},tn.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var rn=0;function an(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function on(e,t){var n=an(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function sn(e,t){var n;switch(t){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="Uncharted2";break;case 4:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function un(e){return""!==e}function ln(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function cn(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function dn(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,(function(e,t){var n=$[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return dn(n)}))}function hn(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,(function(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]");return i}))}function fn(e,t,n,r,i,a){var o=e.context,s=r.defines,u=i.vertexShader,l=i.fragmentShader,c="SHADOWMAP_TYPE_BASIC";1===a.shadowMapType?c="SHADOWMAP_TYPE_PCF":2===a.shadowMapType&&(c="SHADOWMAP_TYPE_PCF_SOFT");var d="ENVMAP_TYPE_CUBE",h="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case 301:case 302:d="ENVMAP_TYPE_CUBE";break;case 306:case 307:d="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:d="ENVMAP_TYPE_EQUIREC";break;case 305:d="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case 302:case 304:h="ENVMAP_MODE_REFRACTION"}switch(r.combine){case 0:f="ENVMAP_BLENDING_MULTIPLY";break;case 1:f="ENVMAP_BLENDING_MIX";break;case 2:f="ENVMAP_BLENDING_ADD"}}var p,g,m,v,y=e.gammaFactor>0?e.gammaFactor:1,_=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(un).join("\n")}(r.extensions,a,t),T=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),E=o.createProgram();r.isRawShaderMaterial?((p=[T].filter(un).join("\n")).length>0&&(p+="\n"),(g=[_,T].filter(un).join("\n")).length>0&&(g+="\n")):(p=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,T,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(un).join("\n"),g=[_,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,T,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.envMap?"#define "+h:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+c:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==a.toneMapping?"#define TONE_MAPPING":"",0!==a.toneMapping?$.tonemapping_pars_fragment:"",0!==a.toneMapping?sn("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?$.encodings_pars_fragment:"",a.mapEncoding?on("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?on("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?on("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?("linearToOutputTexel",m=a.outputEncoding,v=an(m),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+v[0]+v[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(un).join("\n")),u=cn(u=ln(u=dn(u),a),a),l=cn(l=ln(l=dn(l),a),a);var M=p+(u=hn(u)),b=g+(l=hn(l)),A=nn(o,o.VERTEX_SHADER,M),w=nn(o,o.FRAGMENT_SHADER,b);o.attachShader(E,A),o.attachShader(E,w),void 0!==r.index0AttributeName?o.bindAttribLocation(E,0,r.index0AttributeName):!0===a.morphTargets&&o.bindAttribLocation(E,0,"position"),o.linkProgram(E);var S,x,D=o.getProgramInfoLog(E).trim(),I=o.getShaderInfoLog(A).trim(),C=o.getShaderInfoLog(w).trim(),N=!0,L=!0;return!1===o.getProgramParameter(E,o.LINK_STATUS)?(N=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(E,o.VALIDATE_STATUS),"gl.getProgramInfoLog",D,I,C)):""!==D?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",D):""!==I&&""!==C||(L=!1),L&&(this.diagnostics={runnable:N,material:r,programLog:D,vertexShader:{log:I,prefix:p},fragmentShader:{log:C,prefix:g}}),o.deleteShader(A),o.deleteShader(w),this.getUniforms=function(){return void 0===S&&(S=new tn(o,E,e)),S},this.getAttributes=function(){return void 0===x&&(x=function(e,t){for(var n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}(o,E)),x},this.destroy=function(){o.deleteProgram(E),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=rn++,this.code=n,this.usedTimes=1,this.program=E,this.vertexShader=A,this.fragmentShader=w,this}function pn(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=3e3,3e3===n&&t&&(n=3007),n}this.getParameters=function(t,r,a,s,u,l,c){var d=i[t.type],h=c.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),a=Math.min(i,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(c):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:d,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:o(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&h>0,maxBones:h,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:u,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<a.length;o++)r.push(n[a[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(n,i,a,o){for(var s,u=0,l=r.length;u<l;u++){var c=r[u];if(c.code===o){++(s=c).usedTimes;break}}return void 0===s&&(s=new fn(e,t,o,n,i,a),r.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function gn(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function mn(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function vn(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function yn(){var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(i,a,o,s,u){var l=e[t];void 0===l?(l={id:i.id,object:i,geometry:a,material:o,program:o.program,renderOrder:i.renderOrder,z:s,group:u},e[t]=l):(l.id=i.id,l.object=i,l.geometry=a,l.material=o,l.program=o.program,l.renderOrder=i.renderOrder,l.z=s,l.group=u),(!0===o.transparent?r:n).push(l),t++},sort:function(){n.length>1&&n.sort(mn),r.length>1&&r.sort(vn)}}}function _n(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new yn,e[r]=i),i},dispose:function(){e={}}}}function Tn(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new j,color:new ne,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new L};break;case"SpotLight":n={position:new j,direction:new j,color:new ne,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new L};break;case"PointLight":n={position:new j,color:new ne,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new L,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new j,skyColor:new ne,groundColor:new ne};break;case"RectAreaLight":n={color:new ne,position:new j,halfWidth:new j,halfHeight:new j}}return e[t.id]=n,n}}}var En,Mn,bn,An,wn,Sn,xn,Dn,In=0;function Cn(){var e=new Tn,t={id:In++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new j,r=new O,i=new O;return{setup:function(a,o,s){for(var u=0,l=0,c=0,d=0,h=0,f=0,p=0,g=0,m=s.matrixWorldInverse,v=0,y=a.length;v<y;v++){var _=a[v],T=_.color,E=_.intensity,M=_.distance,b=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)u+=T.r*E,l+=T.g*E,c+=T.b*E;else if(_.isDirectionalLight){if((w=e.get(_)).color.copy(_.color).multiplyScalar(_.intensity),w.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(n),w.direction.transformDirection(m),w.shadow=_.castShadow,_.castShadow){var A=_.shadow;w.shadowBias=A.bias,w.shadowRadius=A.radius,w.shadowMapSize=A.mapSize}t.directionalShadowMap[d]=b,t.directionalShadowMatrix[d]=_.shadow.matrix,t.directional[d]=w,d++}else if(_.isSpotLight)(w=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(m),w.color.copy(T).multiplyScalar(E),w.distance=M,w.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),w.direction.sub(n),w.direction.transformDirection(m),w.coneCos=Math.cos(_.angle),w.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),w.decay=0===_.distance?0:_.decay,w.shadow=_.castShadow,_.castShadow&&(A=_.shadow,w.shadowBias=A.bias,w.shadowRadius=A.radius,w.shadowMapSize=A.mapSize),t.spotShadowMap[f]=b,t.spotShadowMatrix[f]=_.shadow.matrix,t.spot[f]=w,f++;else if(_.isRectAreaLight)(w=e.get(_)).color.copy(T).multiplyScalar(E),w.position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(m),i.identity(),r.copy(_.matrixWorld),r.premultiply(m),i.extractRotation(r),w.halfWidth.set(.5*_.width,0,0),w.halfHeight.set(0,.5*_.height,0),w.halfWidth.applyMatrix4(i),w.halfHeight.applyMatrix4(i),t.rectArea[p]=w,p++;else if(_.isPointLight)(w=e.get(_)).position.setFromMatrixPosition(_.matrixWorld),w.position.applyMatrix4(m),w.color.copy(_.color).multiplyScalar(_.intensity),w.distance=_.distance,w.decay=0===_.distance?0:_.decay,w.shadow=_.castShadow,_.castShadow&&(A=_.shadow,w.shadowBias=A.bias,w.shadowRadius=A.radius,w.shadowMapSize=A.mapSize,w.shadowCameraNear=A.camera.near,w.shadowCameraFar=A.camera.far),t.pointShadowMap[h]=b,t.pointShadowMatrix[h]=_.shadow.matrix,t.point[h]=w,h++;else if(_.isHemisphereLight){var w;(w=e.get(_)).direction.setFromMatrixPosition(_.matrixWorld),w.direction.transformDirection(m),w.direction.normalize(),w.skyColor.copy(_.color).multiplyScalar(E),w.groundColor.copy(_.groundColor).multiplyScalar(E),t.hemi[g]=w,g++}}t.ambient[0]=u,t.ambient[1]=l,t.ambient[2]=c,t.directional.length=d,t.spot.length=f,t.rectArea.length=p,t.point.length=h,t.hemi.length=g,t.hash=t.id+","+d+","+h+","+f+","+p+","+g+","+o.length},state:t}}function Nn(){var e=new Cn,t=[],n=[],r=[];return{init:function(){t.length=0,n.length=0,r.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:r,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){r.push(e)}}}function Ln(){var e={};return{get:function(t,n){var r=t.id+","+n.id,i=e[r];return void 0===i&&(i=new Nn,e[r]=i),i},dispose:function(){e={}}}}function On(e){Xe.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Rn(e){Xe.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new j,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function jn(e,t,n){for(var r=new Z,i=new O,a=new L,o=new L(n,n),s=new j,u=new j,l=new Array(4),c=new Array(4),d={},h={0:1,1:0,2:2},f=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],p=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)],g=[new Y,new Y,new Y,new Y,new Y,new Y],m=0;4!==m;++m){var v=0!=(1&m),y=0!=(2&m),_=new On({depthPacking:3201,morphTargets:v,skinning:y});l[m]=_;var T=new Rn({morphTargets:v,skinning:y});c[m]=T}var E=this;function M(t,n,r,i,a,o){var s=t.geometry,u=null,f=l,p=t.customDepthMaterial;if(r&&(f=c,p=t.customDistanceMaterial),p)u=p;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var m=0;g&&(m|=1),t.isSkinnedMesh&&n.skinning&&(m|=2),u=f[m]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var v=u.uuid,y=n.uuid,_=d[v];void 0===_&&(_={},d[v]=_);var T=_[y];void 0===T&&(T=u.clone(),_[y]=T),u=T}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=null!=n.shadowSide?n.shadowSide:h[n.side],u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,r&&u.isMeshDistanceMaterial&&(u.referencePosition.copy(i),u.nearDistance=a,u.farDistance=o),u}function A(n,i,a,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var s=t.update(n),l=n.material;if(Array.isArray(l))for(var c=s.groups,d=0,h=c.length;d<h;d++){var f=c[d],p=l[f.materialIndex];if(p&&p.visible){var g=M(n,p,o,u,a.near,a.far);e.renderBufferDirect(a,null,s,g,n,f)}}else l.visible&&(g=M(n,l,o,u,a.near,a.far),e.renderBufferDirect(a,null,s,g,n,null))}for(var m=n.children,v=0,y=m.length;v<y;v++)A(m[v],i,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,n,l){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==t.length){var c,d=e.context,h=e.state;h.disable(d.BLEND),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var m=0,v=t.length;m<v;m++){var y=t[m],_=y.shadow,T=y&&y.isPointLight;if(void 0!==_){var M=_.camera;if(a.copy(_.mapSize),a.min(o),T){var w=a.x,S=a.y;g[0].set(2*w,S,w,S),g[1].set(0,S,w,S),g[2].set(3*w,S,w,S),g[3].set(w,S,w,S),g[4].set(3*w,0,w,S),g[5].set(w,0,w,S),a.x*=4,a.y*=2}if(null===_.map){var D={minFilter:b,magFilter:b,format:x};_.map=new V(a.x,a.y,D),_.map.texture.name=y.name+".shadowMap",M.updateProjectionMatrix()}_.isSpotLightShadow&&_.update(y);var I=_.map,C=_.matrix;u.setFromMatrixPosition(y.matrixWorld),M.position.copy(u),T?(c=6,C.makeTranslation(-u.x,-u.y,-u.z)):(c=1,s.setFromMatrixPosition(y.target.matrixWorld),M.lookAt(s),M.updateMatrixWorld(),C.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),C.multiply(M.projectionMatrix),C.multiply(M.matrixWorldInverse)),e.setRenderTarget(I),e.clear();for(var N=0;N<c;N++){if(T){s.copy(M.position),s.add(f[N]),M.up.copy(p[N]),M.lookAt(s),M.updateMatrixWorld();var L=g[N];h.viewport(L)}i.multiplyMatrices(M.projectionMatrix,M.matrixWorldInverse),r.setFromMatrix(i),A(n,l,M,T)}}else console.warn("THREE.WebGLShadowMap:",y,"has no shadow.")}E.needsUpdate=!1}}}function Pn(e,t,n,r,i,a,o,s,u){H.call(this,e,t,n,r,i,a,o,s,u),this.needsUpdate=!0}function kn(e,t,n,r,i){var a,o,s,u,l,c,d=new j,h=new R,f=new j;function p(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),s=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(r,["precision "+i.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(r),t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),e}(),u={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},l={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");r.width=8,r.height=8;var d=r.getContext("2d");d.fillStyle="white",d.fillRect(0,0,8,8),c=new Pn(r)}function g(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(i,m,v){if(0!==i.length){void 0===s&&p(),n.useProgram(s),n.initAttributes(),n.enableAttribute(u.position),n.enableAttribute(u.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(u.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(u.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.uniformMatrix4fv(l.projectionMatrix,!1,v.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(l.map,0);var y=0,_=0,T=m.fog;T?(t.uniform3f(l.fogColor,T.color.r,T.color.g,T.color.b),T.isFog?(t.uniform1f(l.fogNear,T.near),t.uniform1f(l.fogFar,T.far),t.uniform1i(l.fogType,1),y=1,_=1):T.isFogExp2&&(t.uniform1f(l.fogDensity,T.density),t.uniform1i(l.fogType,2),y=2,_=2)):(t.uniform1i(l.fogType,0),y=0,_=0);for(var E=0,M=i.length;E<M;E++)(w=i[E]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14];i.sort(g);var b=[],A=[];for(E=0,M=i.length;E<M;E++){var w,S=(w=i[E]).material;if(!1!==S.visible){w.onBeforeRender(e,m,v,void 0,S,void 0),t.uniform1f(l.alphaTest,S.alphaTest),t.uniformMatrix4fv(l.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(d,h,f),b[0]=f.x,b[1]=f.y,A[0]=w.center.x-.5,A[1]=w.center.y-.5;var x=0;m.fog&&S.fog&&(x=_),y!==x&&(t.uniform1i(l.fogType,x),y=x),null!==S.map?(t.uniform2f(l.uvOffset,S.map.offset.x,S.map.offset.y),t.uniform2f(l.uvScale,S.map.repeat.x,S.map.repeat.y)):(t.uniform2f(l.uvOffset,0,0),t.uniform2f(l.uvScale,1,1)),t.uniform1f(l.opacity,S.opacity),t.uniform3f(l.color,S.color.r,S.color.g,S.color.b),t.uniform1f(l.rotation,S.rotation),t.uniform2fv(l.center,A),t.uniform2fv(l.scale,b),n.setBlending(S.blending,S.blendEquation,S.blendSrc,S.blendDst,S.blendEquationAlpha,S.blendSrcAlpha,S.blendDstAlpha,S.premultipliedAlpha),n.buffers.depth.setTest(S.depthTest),n.buffers.depth.setMask(S.depthWrite),n.buffers.color.setMask(S.colorWrite),r.setTexture2D(S.map||c,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),w.onAfterRender(e,m,v,void 0,S,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Un(e,t,n){var r=new function(){var t=!1,n=new Y,r=null,i=new Y(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},i=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(t){t?k(e.DEPTH_TEST):U(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},a=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null;return{setTest:function(t){t?k(e.STENCIL_TEST):U(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&u===r||(e.stencilOp(t,n,r),o=t,s=n,u=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,u=null,l=null}}},o=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(o),u=new Uint8Array(o),l=new Uint8Array(o),c={},d=null,h=null,f=null,p=null,g=null,m=null,v=null,y=null,_=null,T=!1,E=null,M=null,b=null,A=null,w=null,S=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),x=!1,D=0,I=e.getParameter(e.VERSION);-1!==I.indexOf("WebGL")?(D=parseFloat(/^WebGL\ ([0-9])/.exec(I)[1]),x=D>=1):-1!==I.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(I)[1]),x=D>=2);var C=null,N={},L=new Y,O=new Y;function R(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<r;o++)e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,i);return a}var j={};function P(n,r){s[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),l[n]!==r&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,r),l[n]=r)}function k(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function U(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function B(t,r,i,a,o,s,u,l){if(0!==t?k(e.BLEND):U(e.BLEND),5!==t){if(t!==f||l!==T)switch(t){case 2:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case 3:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case 4:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}p=null,g=null,m=null,v=null,y=null,_=null}else o=o||r,s=s||i,u=u||a,r===p&&o===v||(e.blendEquationSeparate(n.convert(r),n.convert(o)),p=r,v=o),i===g&&a===m&&s===y&&u===_||(e.blendFuncSeparate(n.convert(i),n.convert(a),n.convert(s),n.convert(u)),g=i,m=a,y=s,_=u);f=t,T=l}function F(t){E!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),E=t)}function z(t){0!==t?(k(e.CULL_FACE),t!==M&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):U(e.CULL_FACE),M=t}function G(t,n,r){t?(k(e.POLYGON_OFFSET_FILL),A===n&&w===r||(e.polygonOffset(n,r),A=n,w=r)):U(e.POLYGON_OFFSET_FILL)}function H(t){void 0===t&&(t=e.TEXTURE0+S-1),C!==t&&(e.activeTexture(t),C=t)}return j[e.TEXTURE_2D]=R(e.TEXTURE_2D,e.TEXTURE_2D,1),j[e.TEXTURE_CUBE_MAP]=R(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),i.setClear(1),a.setClear(0),k(e.DEPTH_TEST),i.setFunc(3),F(!1),z(1),k(e.CULL_FACE),k(e.BLEND),B(1),{buffers:{color:r,depth:i,stencil:a},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(e){P(e,0)},enableAttributeAndDivisor:P,disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==s[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:k,disable:U,getCompressedTextureFormats:function(){if(null===d&&(d=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)d.push(n[r]);return d},useProgram:function(t){return h!==t&&(e.useProgram(t),h=t,!0)},setBlending:B,setMaterial:function(t,n){2===t.side?U(e.CULL_FACE):k(e.CULL_FACE);var a=1===t.side;n&&(a=!a),F(a),!0===t.transparent?B(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):B(0),i.setFunc(t.depthFunc),i.setTest(t.depthTest),i.setMask(t.depthWrite),r.setMask(t.colorWrite),G(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:F,setCullFace:z,setLineWidth:function(t){t!==b&&(x&&e.lineWidth(t),b=t)},setPolygonOffset:G,setScissorTest:function(t){t?k(e.SCISSOR_TEST):U(e.SCISSOR_TEST)},activeTexture:H,bindTexture:function(t,n){null===C&&H();var r=N[C];void 0===r&&(r={type:void 0,texture:void 0},N[C]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===L.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),L.copy(t))},viewport:function(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);c={},d=null,C=null,N={},h=null,f=null,E=null,M=null,r.reset(),i.reset(),a.reset()}}}function Bn(e,t,n,r,i,a,o){var s,u="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,l={};function c(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height,e),r}return e}function d(e){return N.isPowerOfTwo(e.width)&&N.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==b&&e.minFilter!==A}function f(t,n,i,a){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function p(t){return t===b||1004===t||1005===t?e.NEAREST:e.LINEAR}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete l[n.id],o.memory.textures--}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=r.get(t),i=r.get(t.texture);if(t){if(void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}(n),o.memory.textures--}function v(t,p){var m=r.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;l[t]!==n&&(l[t]=n,e.update())}(t),t.version>0&&m.__version!==t.version){var v=t.image;if(void 0===v)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==v.complete)return void function(t,r,l){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",g),t.__webglTexture=e.createTexture(),o.memory.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var p=c(r.image,i.maxTextureSize);(function(e){return e.wrapS!==E||e.wrapT!==E||e.minFilter!==b&&e.minFilter!==A})(r)&&!1===d(p)&&(p=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=N.floorPowerOfTwo(e.width),s.height=N.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height,e),s):e}(p));var m=d(p),v=a.convert(r.format),_=a.convert(r.type);y(e.TEXTURE_2D,r,m);var T,M=r.mipmaps;if(r.isDepthTexture){var C=e.DEPTH_COMPONENT;if(r.type===w){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");C=e.DEPTH_COMPONENT32F}else u&&(C=e.DEPTH_COMPONENT16);r.format===D&&C===e.DEPTH_COMPONENT&&1012!==r.type&&1014!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=1012,_=a.convert(r.type)),r.format===I&&(C=e.DEPTH_STENCIL,1020!==r.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=1020,_=a.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,C,p.width,p.height,0,v,_,null)}else if(r.isDataTexture)if(M.length>0&&m){for(var L=0,O=M.length;L<O;L++)T=M[L],n.texImage2D(e.TEXTURE_2D,L,v,T.width,T.height,0,v,_,T.data);r.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,p.width,p.height,0,v,_,p.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(L=0,O=M.length;L<O;L++)T=M[L],r.format!==x&&r.format!==S?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(e.TEXTURE_2D,L,v,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,L,v,T.width,T.height,0,v,_,T.data);t.__maxMipLevel=M.length-1}else if(M.length>0&&m){for(L=0,O=M.length;L<O;L++)T=M[L],n.texImage2D(e.TEXTURE_2D,L,v,v,_,T);r.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,v,_,p),t.__maxMipLevel=0;h(r,m)&&f(e.TEXTURE_2D,r,p.width,p.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}(m,t,p);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,m.__webglTexture)}function y(n,o,s){var u;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,a.convert(o.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,a.convert(o.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===E&&o.wrapT===E||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(o.minFilter)),o.minFilter!==b&&o.minFilter!==A&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),u=t.get("EXT_texture_filter_anisotropic")){if(o.type===w&&null===t.get("OES_texture_float_linear"))return;if(1016===o.type&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,u.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function _(t,i,o,s){var u=a.convert(i.texture.format),l=a.convert(i.texture.type);n.texImage2D(s,0,u,i.width,i.height,0,u,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function T(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.setTexture2D=v,this.setTextureCube=function(t,s){var u=r.get(t);if(6===t.image.length)if(t.version>0&&u.__version!==t.version){u.__image__webglTextureCube||(t.addEventListener("dispose",g),u.__image__webglTextureCube=e.createTexture(),o.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var l=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=l||p?p?t.image[v].image:t.image[v]:c(t.image[v],i.maxCubemapSize);var _=m[0],T=d(_),E=a.convert(t.format),M=a.convert(t.type);for(y(e.TEXTURE_CUBE_MAP,t,T),v=0;v<6;v++)if(l)for(var b,A=m[v].mipmaps,w=0,D=A.length;w<D;w++)b=A[w],t.format!==x&&t.format!==S?n.getCompressedTextureFormats().indexOf(E)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,w,E,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,w,E,b.width,b.height,0,E,M,b.data);else p?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,E,m[v].width,m[v].height,0,E,M,m[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,E,E,M,m[v]);u.__maxMipLevel=l?A.length-1:0,h(t,T)&&f(e.TEXTURE_CUBE_MAP,t,_.width,_.height),u.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,u.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),a=r.get(t.texture);t.addEventListener("dispose",m),a.__webglTexture=e.createTexture(),o.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,u=d(t);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,u),l=0;l<6;l++)_(i.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);h(t.texture,u)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,a.__webglTexture),y(e.TEXTURE_2D,t.texture,u),_(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),h(t.texture,u)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&function(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===D)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,i,0);else{if(n.depthTexture.format!==I)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),T(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),T(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(h(i,d(t))){var a=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(i).__webglTexture;n.bindTexture(a,o),f(a,i,t.width,t.height),n.bindTexture(a,null)}}}function Fn(e,t){return{convert:function(n){var r;if(n===T)return e.REPEAT;if(n===E)return e.CLAMP_TO_EDGE;if(n===M)return e.MIRRORED_REPEAT;if(n===b)return e.NEAREST;if(1004===n)return e.NEAREST_MIPMAP_NEAREST;if(1005===n)return e.NEAREST_MIPMAP_LINEAR;if(n===A)return e.LINEAR;if(1007===n)return e.LINEAR_MIPMAP_NEAREST;if(1008===n)return e.LINEAR_MIPMAP_LINEAR;if(1009===n)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===n)return e.UNSIGNED_SHORT_5_6_5;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(1012===n)return e.UNSIGNED_SHORT;if(1013===n)return e.INT;if(1014===n)return e.UNSIGNED_INT;if(n===w)return e.FLOAT;if(1016===n&&null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES;if(1021===n)return e.ALPHA;if(n===S)return e.RGB;if(n===x)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===D)return e.DEPTH_COMPONENT;if(n===I)return e.DEPTH_STENCIL;if(100===n)return e.FUNC_ADD;if(101===n)return e.FUNC_SUBTRACT;if(102===n)return e.FUNC_REVERSE_SUBTRACT;if(200===n)return e.ZERO;if(201===n)return e.ONE;if(202===n)return e.SRC_COLOR;if(203===n)return e.ONE_MINUS_SRC_COLOR;if(204===n)return e.SRC_ALPHA;if(205===n)return e.ONE_MINUS_SRC_ALPHA;if(206===n)return e.DST_ALPHA;if(207===n)return e.ONE_MINUS_DST_ALPHA;if(208===n)return e.DST_COLOR;if(209===n)return e.ONE_MINUS_DST_COLOR;if(210===n)return e.SRC_ALPHA_SATURATE;if((33776===n||33777===n||33778===n||33779===n)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(33776===n)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===n)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===n)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===n)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===n||35841===n||35842===n||35843===n)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(35840===n)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return n;if((103===n||104===n)&&null!==(r=t.get("EXT_blend_minmax"))){if(103===n)return r.MIN_EXT;if(104===n)return r.MAX_EXT}return 1020===n&&null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:0}}}function zn(e,t,n,r){me.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Gn(e){zn.call(this),this.cameras=e||[]}function Hn(e){var t=this,n=null,r=null,i=null,a=new O,o=new O;"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",m,!1));var s=new O,u=new R,l=new j,c=new zn;c.bounds=new Y(0,0,.5,1),c.layers.enable(1);var d=new zn;d.bounds=new Y(.5,0,.5,1),d.layers.enable(2);var h,f,p=new Gn([c,d]);function g(){return null!==n&&!0===n.isPresenting}function m(){if(g()){var r=n.getEyeParameters("left"),i=r.renderWidth,a=r.renderHeight;f=e.getPixelRatio(),h=e.getSize(),e.setDrawingBufferSize(2*i,a,1),v.start()}else t.enabled&&(e.setDrawingBufferSize(h.width,h.height,f),v.stop())}p.layers.enable(1),p.layers.enable(2),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),v.setContext(e)},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var h=n.stageParameters;h?a.fromArray(h.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0);var f=r.pose,g=null!==i?i:e;if(g.matrix.copy(a),g.matrix.decompose(g.position,g.quaternion,g.scale),null!==f.orientation&&(u.fromArray(f.orientation),g.quaternion.multiply(u)),null!==f.position&&(u.setFromRotationMatrix(a),l.fromArray(f.position),l.applyQuaternion(u),g.position.add(l)),g.updateMatrixWorld(),!1===n.isPresenting)return e;c.near=e.near,d.near=e.near,c.far=e.far,d.far=e.far,p.matrixWorld.copy(e.matrixWorld),p.matrixWorldInverse.copy(e.matrixWorldInverse),c.matrixWorldInverse.fromArray(r.leftViewMatrix),d.matrixWorldInverse.fromArray(r.rightViewMatrix),o.getInverse(a),c.matrixWorldInverse.multiply(o),d.matrixWorldInverse.multiply(o);var m=g.parent;null!==m&&(s.getInverse(m.matrixWorld),c.matrixWorldInverse.multiply(s),d.matrixWorldInverse.multiply(s)),c.matrixWorld.getInverse(c.matrixWorldInverse),d.matrixWorld.getInverse(d.matrixWorldInverse),c.projectionMatrix.fromArray(r.leftProjectionMatrix),d.projectionMatrix.fromArray(r.rightProjectionMatrix),p.projectionMatrix.copy(c.projectionMatrix);var v=n.getLayers();if(v.length){var y=v[0];null!==y.leftBounds&&4===y.leftBounds.length&&c.bounds.fromArray(y.leftBounds),null!==y.rightBounds&&4===y.rightBounds.length&&d.bounds.fromArray(y.rightBounds)}return p},this.getStandingMatrix=function(){return a},this.isPresenting=g;var v=new oe;this.setAnimationLoop=function(e){v.setAnimationLoop(e)},this.submitFrame=function(){g()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",m)}}function Yn(e){var t=e.context,n=null,r=null,i=null,a=null;function o(){return null!==r&&null!==i}var s=new zn;s.layers.enable(1),s.viewport=new Y;var u=new zn;u.layers.enable(2),u.viewport=new Y;var l=new Gn([s,u]);function c(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}l.layers.enable(1),l.layers.enable(2),this.enabled=!1,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),t.setCompatibleXRDevice(e)},this.setSession=function(n,a){null!==(r=n)&&(r.addEventListener("end",(function(){e.setFramebuffer(null),h.stop()})),r.baseLayer=new XRWebGLLayer(r,t),r.requestFrameOfReference(a.frameOfReferenceType).then((function(t){i=t,e.setFramebuffer(r.baseLayer.framebuffer),h.setContext(r),h.start()})))},this.getCamera=function(e){if(o()){var t=e.parent,n=l.cameras;c(l,t);for(var r=0;r<n.length;r++)c(n[r],t);e.matrixWorld.copy(l.matrixWorld);for(var i=e.children,a=(r=0,i.length);r<a;r++)i[r].updateMatrixWorld(!0);return l}return e},this.isPresenting=o;var d=null,h=new oe;h.setAnimationLoop((function(e,t){a=t.getDevicePose(i);for(var n=r.baseLayer,o=t.views,s=0;s<o.length;s++){var u=o[s],c=n.getViewport(u),h=a.getViewMatrix(u),f=l.cameras[s];f.matrix.fromArray(h).getInverse(f.matrix),f.projectionMatrix.fromArray(u.projectionMatrix),f.viewport.set(c.x,c.y,c.width,c.height),0===s&&(l.matrix.copy(f.matrix),l.projectionMatrix.copy(f.projectionMatrix))}d&&d()})),this.setAnimationLoop=function(e){d=e},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}function Vn(e){console.log("THREE.WebGLRenderer","93");var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,u=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=null,d=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var h,f,p,g,m,v,y,_,T,E,M,b,A,S,D,I,C,L,R,P=this,k=!1,U=null,B=null,F=null,z=-1,G="",H=null,V=null,Q=new Y,W=new Y,X=null,K=0,J=t.width,$=t.height,te=1,ne=new Y(0,0,J,$),re=new Y(0,0,J,$),ue=!1,le=new Z,ce=new at,de=!1,he=!1,fe=new O,pe=new j;function ge(){return null===B?te:1}try{var me={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l};if(t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",Ee,!1),null===(h=n||t.getContext("webgl",me)||t.getContext("experimental-webgl",me)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===h.getShaderPrecisionFormat&&(h.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function ve(){(f=new ot(h)).get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_float_linear"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays"),R=new Fn(h,f),p=new it(h,f,e),(g=new Un(h,f,R)).scissor(W.copy(re).multiplyScalar(te)),g.viewport(Q.copy(ne).multiplyScalar(te)),m=new lt(h),v=new gn,y=new Bn(h,f,g,v,p,R,m),_=new se(h),T=new st(h,_,m),E=new ht(T,m),D=new dt(h),M=new pn(P,f,p),b=new _n,A=new Ln,S=new nt(P,g,E,s),I=new rt(h,f,m),C=new ut(h,f,m),L=new kn(P,h,g,y,p),m.programs=M.programs,P.context=h,P.capabilities=p,P.extensions=f,P.properties=v,P.renderLists=b,P.state=g,P.info=m}ve();var ye="xr"in navigator?new Yn(P):new Hn(P);this.vr=ye;var _e=new jn(P,E,p.maxTextureSize);function Te(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function Ee(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1,ve()}function Me(e){var t=e.target;t.removeEventListener("dispose",Me),function(e){be(e),v.remove(e)}(t)}function be(e){var t=v.get(e).program;e.program=void 0,void 0!==t&&M.releaseProgram(t)}this.shadowMap=_e,this.getContext=function(){return h},this.getContextAttributes=function(){return h.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return te},this.setPixelRatio=function(e){void 0!==e&&(te=e,this.setSize(J,$,!1))},this.getSize=function(){return{width:J,height:$}},this.setSize=function(e,n,r){ye.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(J=e,$=n,t.width=e*te,t.height=n*te,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:J*te,height:$*te}},this.setDrawingBufferSize=function(e,n,r){J=e,$=n,te=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return Q},this.setViewport=function(e,t,n,r){ne.set(e,$-t-r,n,r),g.viewport(Q.copy(ne).multiplyScalar(te))},this.setScissor=function(e,t,n,r){re.set(e,$-t-r,n,r),g.scissor(W.copy(re).multiplyScalar(te))},this.setScissorTest=function(e){g.setScissorTest(ue=e)},this.getClearColor=function(){return S.getClearColor()},this.setClearColor=function(){S.setClearColor.apply(S,arguments)},this.getClearAlpha=function(){return S.getClearAlpha()},this.setClearAlpha=function(){S.setClearAlpha.apply(S,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=h.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=h.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=h.STENCIL_BUFFER_BIT),h.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",Ee,!1),b.dispose(),A.dispose(),v.dispose(),E.dispose(),ye.dispose(),Se.stop()},this.renderBufferImmediate=function(e,t,n){g.initAttributes();var r=v.get(e);e.hasPositions&&!r.position&&(r.position=h.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=h.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=h.createBuffer()),e.hasColors&&!r.color&&(r.color=h.createBuffer());var i=t.getAttributes();if(e.hasPositions&&(h.bindBuffer(h.ARRAY_BUFFER,r.position),h.bufferData(h.ARRAY_BUFFER,e.positionArray,h.DYNAMIC_DRAW),g.enableAttribute(i.position),h.vertexAttribPointer(i.position,3,h.FLOAT,!1,0,0)),e.hasNormals){if(h.bindBuffer(h.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,u=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,c=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=u,s[a+1]=l,s[a+2]=c,s[a+3]=u,s[a+4]=l,s[a+5]=c,s[a+6]=u,s[a+7]=l,s[a+8]=c}h.bufferData(h.ARRAY_BUFFER,e.normalArray,h.DYNAMIC_DRAW),g.enableAttribute(i.normal),h.vertexAttribPointer(i.normal,3,h.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(h.bindBuffer(h.ARRAY_BUFFER,r.uv),h.bufferData(h.ARRAY_BUFFER,e.uvArray,h.DYNAMIC_DRAW),g.enableAttribute(i.uv),h.vertexAttribPointer(i.uv,2,h.FLOAT,!1,0,0)),e.hasColors&&0!==n.vertexColors&&(h.bindBuffer(h.ARRAY_BUFFER,r.color),h.bufferData(h.ARRAY_BUFFER,e.colorArray,h.DYNAMIC_DRAW),g.enableAttribute(i.color),h.vertexAttribPointer(i.color,3,h.FLOAT,!1,0,0)),g.disableUnusedAttributes(),h.drawArrays(h.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){var o=i.isMesh&&i.matrixWorld.determinant()<0;g.setMaterial(r,o);var s=Ce(e,t,r,i),u=n.id+"_"+s.id+"_"+(!0===r.wireframe),l=!1;u!==G&&(G=u,l=!0),i.morphTargetInfluences&&(D.update(i,n,r,s),l=!0);var c,d=n.index,p=n.attributes.position,m=1;!0===r.wireframe&&(d=T.getWireframeAttribute(n),m=2);var v=I;null!==d&&(c=_.get(d),(v=C).setIndex(c)),l&&(function(e,t,n){if(n&&n.isInstancedBufferGeometry&&null===f.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{g.initAttributes();var r=n.attributes,i=t.getAttributes(),a=e.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var u=r[o];if(void 0!==u){var l=u.normalized,c=u.itemSize,d=_.get(u);if(void 0===d)continue;var p=d.buffer,m=d.type,v=d.bytesPerElement;if(u.isInterleavedBufferAttribute){var y=u.data,T=y.stride,E=u.offset;y&&y.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(s,y.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=y.meshPerAttribute*y.count)):g.enableAttribute(s),h.bindBuffer(h.ARRAY_BUFFER,p),h.vertexAttribPointer(s,c,m,l,T*v,E*v)}else u.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(s,u.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):g.enableAttribute(s),h.bindBuffer(h.ARRAY_BUFFER,p),h.vertexAttribPointer(s,c,m,l,0,0)}else if(void 0!==a){var M=a[o];if(void 0!==M)switch(M.length){case 2:h.vertexAttrib2fv(s,M);break;case 3:h.vertexAttrib3fv(s,M);break;case 4:h.vertexAttrib4fv(s,M);break;default:h.vertexAttrib1fv(s,M)}}}}g.disableUnusedAttributes()}}(r,s,n),null!==d&&h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,c.buffer));var y=1/0;null!==d?y=d.count:void 0!==p&&(y=p.count);var E=n.drawRange.start*m,M=n.drawRange.count*m,b=null!==a?a.start*m:0,A=null!==a?a.count*m:1/0,w=Math.max(E,b),S=Math.min(y,E+M,b+A)-1,x=Math.max(0,S-w+1);if(0!==x){if(i.isMesh)if(!0===r.wireframe)g.setLineWidth(r.wireframeLinewidth*ge()),v.setMode(h.LINES);else switch(i.drawMode){case 0:v.setMode(h.TRIANGLES);break;case 1:v.setMode(h.TRIANGLE_STRIP);break;case 2:v.setMode(h.TRIANGLE_FAN)}else if(i.isLine){var N=r.linewidth;void 0===N&&(N=1),g.setLineWidth(N*ge()),i.isLineSegments?v.setMode(h.LINES):i.isLineLoop?v.setMode(h.LINE_LOOP):v.setMode(h.LINE_STRIP)}else i.isPoints&&v.setMode(h.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&v.renderInstances(n,w,x):v.render(w,x)}},this.compile=function(e,t){(d=A.get(e,t)).init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t),e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Ie(t.material[n],e.fog,t);else Ie(t.material,e.fog,t)}))};var Ae,we=null,Se=new oe;function xe(e,t,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,u=o.geometry,l=void 0===r?o.material:r,c=o.group;if(n.isArrayCamera){V=n;for(var d=n.cameras,h=0,f=d.length;h<f;h++){var p=d[h];if(s.layers.test(p.layers)){if("viewport"in p)g.viewport(Q.copy(p.viewport));else{var m=p.bounds,v=m.x*J,y=m.y*$,_=m.z*J,T=m.w*$;g.viewport(Q.set(v,y,_,T).multiplyScalar(te))}De(s,t,p,u,l,c)}}}else V=null,De(s,t,n,u,l,c)}}function De(e,t,n,r,i,a){if(e.onBeforeRender(P,t,n,r,i,a),d=A.get(t,V||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=e.isMesh&&e.matrixWorld.determinant()<0;g.setMaterial(i,o);var s=Ce(n,t.fog,i,e);G="",function(e,t,n){e.render((function(e){P.renderBufferImmediate(e,t,n)}))}(e,s,i)}else P.renderBufferDirect(n,t.fog,r,i,e,a);e.onAfterRender(P,t,n,r,i,a),d=A.get(t,V||n)}function Ie(e,t,n){var r=v.get(e),i=d.state.lights,a=d.state.shadowsArray,o=M.getParameters(e,i.state,a,t,ce.numPlanes,ce.numIntersection,n),s=M.getProgramCode(e,o),u=r.program,l=!0;if(void 0===u)e.addEventListener("dispose",Me);else if(u.code!==s)be(e);else if(r.lightsHash!==i.state.hash)v.update(e,"lightsHash",i.state.hash),l=!1;else{if(void 0!==o.shaderID)return;l=!1}if(l){if(o.shaderID){var c=ae[o.shaderID];r.shader={name:e.type,uniforms:ee.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,P),u=M.acquireProgram(e,r.shader,o,s),r.program=u,e.program=u}var h=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<P.maxMorphTargets;f++)h["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,f=0;f<P.maxMorphNormals;f++)h["morphNormal"+f]>=0&&e.numSupportedMorphNormals++;var p=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=ce.numPlanes,r.numIntersection=ce.numIntersection,p.clippingPlanes=ce.uniform),r.fog=t,r.lightsHash=i.state.hash,e.lights&&(p.ambientLightColor.value=i.state.ambient,p.directionalLights.value=i.state.directional,p.spotLights.value=i.state.spot,p.rectAreaLights.value=i.state.rectArea,p.pointLights.value=i.state.point,p.hemisphereLights.value=i.state.hemi,p.directionalShadowMap.value=i.state.directionalShadowMap,p.directionalShadowMatrix.value=i.state.directionalShadowMatrix,p.spotShadowMap.value=i.state.spotShadowMap,p.spotShadowMatrix.value=i.state.spotShadowMatrix,p.pointShadowMap.value=i.state.pointShadowMap,p.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),m=tn.seqWithValue(g.seq,p);r.uniformsList=m}function Ce(e,t,n,r){K=0;var i=v.get(n),a=d.state.lights;if(de&&(he||e!==H)){var o=e===H&&n.id===z;ce.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,o)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:n.lights&&i.lightsHash!==a.state.hash?n.needsUpdate=!0:void 0===i.numClippingPlanes||i.numClippingPlanes===ce.numPlanes&&i.numIntersection===ce.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Ie(n,t,r),n.needsUpdate=!1);var s,u,l=!1,c=!1,f=!1,m=i.program,y=m.getUniforms(),_=i.shader.uniforms;if(g.useProgram(m.program)&&(l=!0,c=!0,f=!0),n.id!==z&&(z=n.id,c=!0),l||e!==H){if(y.setValue(h,"projectionMatrix",e.projectionMatrix),p.logarithmicDepthBuffer&&y.setValue(h,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),H!==(V||e)&&(H=V||e,c=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var T=y.map.cameraPosition;void 0!==T&&T.setValue(h,pe.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&y.setValue(h,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){y.setOptional(h,r,"bindMatrix"),y.setOptional(h,r,"bindMatrixInverse");var E=r.skeleton;if(E){var M=E.bones;if(p.floatVertexTextures){if(void 0===E.boneTexture){var b=Math.sqrt(4*M.length);b=N.ceilPowerOfTwo(b),b=Math.max(b,4);var A=new Float32Array(b*b*4);A.set(E.boneMatrices);var S=new q(A,b,b,x,w);S.needsUpdate=!0,E.boneMatrices=A,E.boneTexture=S,E.boneTextureSize=b}y.setValue(h,"boneTexture",E.boneTexture),y.setValue(h,"boneTextureSize",E.boneTextureSize)}else y.setOptional(h,E,"boneMatrices")}}return c&&(y.setValue(h,"toneMappingExposure",P.toneMappingExposure),y.setValue(h,"toneMappingWhitePoint",P.toneMappingWhitePoint),n.lights&&(u=f,(s=_).ambientLightColor.needsUpdate=u,s.directionalLights.needsUpdate=u,s.pointLights.needsUpdate=u,s.spotLights.needsUpdate=u,s.rectAreaLights.needsUpdate=u,s.hemisphereLights.needsUpdate=u),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(_,t),n.isMeshBasicMaterial?Ne(_,n):n.isMeshLambertMaterial?(Ne(_,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(_,n)):n.isMeshPhongMaterial?(Ne(_,n),n.isMeshToonMaterial?function(e,t){Le(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(_,n):Le(_,n)):n.isMeshStandardMaterial?(Ne(_,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,Oe(e,t)}(_,n):Oe(_,n)):n.isMeshDepthMaterial?(Ne(_,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(_,n)):n.isMeshDistanceMaterial?(Ne(_,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(_,n)):n.isMeshNormalMaterial?(Ne(_,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(_,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(_,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(_,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*te,e.scale.value=.5*$,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(_,n):n.isShadowMaterial&&(_.color.value=n.color,_.opacity.value=n.opacity),void 0!==_.ltc_1&&(_.ltc_1.value=ie.LTC_1),void 0!==_.ltc_2&&(_.ltc_2.value=ie.LTC_2),tn.upload(h,i.uniformsList,_,P)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(tn.upload(h,i.uniformsList,_,P),n.uniformsNeedUpdate=!1),y.setValue(h,"modelViewMatrix",r.modelViewMatrix),y.setValue(h,"normalMatrix",r.normalMatrix),y.setValue(h,"modelMatrix",r.matrixWorld),m}function Ne(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=v.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function Le(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function Oe(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,1===t.side&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),1===t.side&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Se.setAnimationLoop((function(){ye.isPresenting()||we&&we()})),Se.setContext(window),this.setAnimationLoop=function(e){we=e,ye.setAnimationLoop(e),Se.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!k){G="",z=-1,H=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ye.enabled&&(t=ye.getCamera(t)),(d=A.get(e,t)).init(),e.onBeforeRender(P,e,t,n),fe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),le.setFromMatrix(fe),he=this.localClippingEnabled,de=ce.init(this.clippingPlanes,he,t),(c=b.get(e,t)).init(),function e(t,n,r){if(!1!==t.visible){if(t.layers.test(n.layers))if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!le.intersectsSprite(t)||d.pushSprite(t);else if(t.isImmediateRenderObject)r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(fe),c.push(t,null,t.material,pe.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||le.intersectsObject(t))){r&&pe.setFromMatrixPosition(t.matrixWorld).applyMatrix4(fe);var i=E.update(t),a=t.material;if(Array.isArray(a))for(var o=i.groups,s=0,u=o.length;s<u;s++){var l=o[s],h=a[l.materialIndex];h&&h.visible&&c.push(t,i,h,pe.z,l)}else a.visible&&c.push(t,i,a,pe.z,null)}var f=t.children;for(s=0,u=f.length;s<u;s++)e(f[s],n,r)}}(e,t,P.sortObjects),!0===P.sortObjects&&c.sort(),de&&ce.beginShadows();var i=d.state.shadowsArray;_e.render(i,e,t),d.setupLights(t),de&&ce.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),S.render(c,e,t,r);var a=c.opaque,o=c.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&xe(a,e,t,s),o.length&&xe(o,e,t,s)}else a.length&&xe(a,e,t),o.length&&xe(o,e,t);var u=d.state.spritesArray;L.render(u,e,t),n&&y.updateRenderTargetMipmap(n),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),e.onAfterRender(P,e,t),ye.enabled&&ye.submitFrame(),c=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=K;return e>=p.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+p.maxTextures),K+=1,e},this.setTexture2D=(Ae=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Ae||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Ae=!0),e=e.texture),y.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),y.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?y.setTextureCube(t,n):y.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){U=e},this.getRenderTarget=function(){return B},this.setRenderTarget=function(e){B=e,e&&void 0===v.get(e).__webglFramebuffer&&y.setupRenderTarget(e);var t=U,n=!1;if(e){var r=v.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,Q.copy(e.viewport),W.copy(e.scissor),X=e.scissorTest}else Q.copy(ne).multiplyScalar(te),W.copy(re).multiplyScalar(te),X=ue;if(F!==t&&(h.bindFramebuffer(h.FRAMEBUFFER,t),F=t),g.viewport(Q),g.scissor(W),g.setScissorTest(X),n){var i=v.get(e.texture);h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,a){if(e&&e.isWebGLRenderTarget){var o=v.get(e).__webglFramebuffer;if(o){var s=!1;o!==F&&(h.bindFramebuffer(h.FRAMEBUFFER,o),s=!0);try{var u=e.texture,l=u.format,c=u.type;if(l!==x&&R.convert(l)!==h.getParameter(h.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(1009===c||R.convert(c)===h.getParameter(h.IMPLEMENTATION_COLOR_READ_TYPE)||c===w&&(f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||1016===c&&f.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");h.checkFramebufferStatus(h.FRAMEBUFFER)===h.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&h.readPixels(t,n,r,i,R.convert(l),R.convert(c),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&h.bindFramebuffer(h.FRAMEBUFFER,F)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,a=R.convert(t.format);this.setTexture2D(t,0),h.copyTexImage2D(h.TEXTURE_2D,n||0,a,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,a=t.image.height,o=R.convert(n.format),s=R.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?h.texSubImage2D(h.TEXTURE_2D,r||0,e.x,e.y,i,a,o,s,t.image.data):h.texSubImage2D(h.TEXTURE_2D,r||0,e.x,e.y,o,s,t.image)}}function Qn(e,t){this.name="",this.color=new ne(e),this.density=void 0!==t?t:25e-5}function qn(e,t,n){this.name="",this.color=new ne(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Wn(){ge.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Xn(e){Xe.call(this),this.type="SpriteMaterial",this.color=new ne(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Kn(e){ge.call(this),this.type="Sprite",this.material=void 0!==e?e:new Xn,this.center=new L(.5,.5)}function Zn(){ge.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Jn(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new O)}}function $n(){ge.call(this),this.type="Bone"}function er(e,t){tt.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new O,this.bindMatrixInverse=new O;var n=new Jn(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function tr(e){Xe.call(this),this.type="LineBasicMaterial",this.color=new ne(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function nr(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new rr(e,t);ge.call(this),this.type="Line",this.geometry=void 0!==e?e:new Pe,this.material=void 0!==t?t:new tr({color:16777215*Math.random()})}function rr(e,t){nr.call(this,e,t),this.type="LineSegments"}function ir(e,t){nr.call(this,e,t),this.type="LineLoop"}function ar(e){Xe.call(this),this.type="PointsMaterial",this.color=new ne(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function or(e,t){ge.call(this),this.type="Points",this.geometry=void 0!==e?e:new Pe,this.material=void 0!==t?t:new ar({color:16777215*Math.random()})}function sr(){ge.call(this),this.type="Group"}function ur(e,t,n,r,i,a,o,s,u){H.call(this,e,t,n,r,i,a,o,s,u),this.generateMipmaps=!1}function lr(e,t,n,r,i,a,o,s,u,l,c,d){H.call(this,null,a,o,s,u,l,r,i,c,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function cr(e,t,n,r,i,a,o,s,u,l){if((l=void 0!==l?l:D)!==D&&l!==I)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===D&&(n=1012),void 0===n&&l===I&&(n=1020),H.call(this,null,r,i,a,o,s,l,n,u),this.image={width:e,height:t},this.magFilter=void 0!==o?o:b,this.minFilter=void 0!==s?s:b,this.flipY=!1,this.generateMipmaps=!1}function dr(e){Pe.call(this),this.type="WireframeGeometry";var t,n,r,i,a,o,s,u,l,c,d=[],h=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var g=e.faces;for(t=0,r=g.length;t<r;t++){var m=g[t];for(n=0;n<3;n++)s=m[p[n]],u=m[p[(n+1)%3]],h[0]=Math.min(s,u),h[1]=Math.max(s,u),void 0===f[l=h[0]+","+h[1]]&&(f[l]={index1:h[0],index2:h[1]})}for(l in f)o=f[l],c=e.vertices[o.index1],d.push(c.x,c.y,c.z),c=e.vertices[o.index2],d.push(c.x,c.y,c.z)}else if(e&&e.isBufferGeometry){var v,y,_,T,E,M,b;if(c=new j,null!==e.index){for(v=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,a=_.length;i<a;++i)for(t=E=(T=_[i]).start,r=E+T.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),u=y.getX(t+(n+1)%3),h[0]=Math.min(s,u),h[1]=Math.max(s,u),void 0===f[l=h[0]+","+h[1]]&&(f[l]={index1:h[0],index2:h[1]});for(l in f)o=f[l],c.fromBufferAttribute(v,o.index1),d.push(c.x,c.y,c.z),c.fromBufferAttribute(v,o.index2),d.push(c.x,c.y,c.z)}else for(t=0,r=(v=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)M=3*t+n,c.fromBufferAttribute(v,M),d.push(c.x,c.y,c.z),b=3*t+(n+1)%3,c.fromBufferAttribute(v,b),d.push(c.x,c.y,c.z)}this.addAttribute("position",new Ne(d,3))}function hr(e,t,n){Me.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new fr(e,t,n)),this.mergeVertices()}function fr(e,t,n){Pe.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,a=[],o=[],s=[],u=[],l=new j,c=new j,d=new j,h=new j,f=new j;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var p=t+1;for(r=0;r<=n;r++){var g=r/n;for(i=0;i<=t;i++){var m=i/t;e(m,g,c),o.push(c.x,c.y,c.z),m-1e-5>=0?(e(m-1e-5,g,d),h.subVectors(c,d)):(e(m+1e-5,g,d),h.subVectors(d,c)),g-1e-5>=0?(e(m,g-1e-5,d),f.subVectors(c,d)):(e(m,g+1e-5,d),f.subVectors(d,c)),l.crossVectors(h,f).normalize(),s.push(l.x,l.y,l.z),u.push(m,g)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var v=r*p+i,y=r*p+i+1,_=(r+1)*p+i+1,T=(r+1)*p+i;a.push(v,y,T),a.push(y,_,T)}this.setIndex(a),this.addAttribute("position",new Ne(o,3)),this.addAttribute("normal",new Ne(s,3)),this.addAttribute("uv",new Ne(u,2))}function pr(e,t,n,r){Me.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new gr(e,t,n,r)),this.mergeVertices()}function gr(e,t,n,r){Pe.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],a=[];function o(e,t,n,r){var i,a,o=Math.pow(2,r),u=[];for(i=0;i<=o;i++){u[i]=[];var l=e.clone().lerp(n,i/o),c=t.clone().lerp(n,i/o),d=o-i;for(a=0;a<=d;a++)u[i][a]=0===a&&i===o?l:l.clone().lerp(c,a/d)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var h=Math.floor(a/2);a%2==0?(s(u[i][h+1]),s(u[i+1][h]),s(u[i][h])):(s(u[i][h+1]),s(u[i+1][h+1]),s(u[i+1][h]))}}function s(e){i.push(e.x,e.y,e.z)}function u(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function c(e){return Math.atan2(e.z,-e.x)}function d(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){for(var n=new j,r=new j,i=new j,a=0;a<t.length;a+=3)u(t[a+0],n),u(t[a+1],r),u(t[a+2],i),o(n,r,i,e)}(r=r||0),function(e){for(var t=new j,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new j,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=c(e)/2/Math.PI+.5,r=d(e)/Math.PI+.5;a.push(n,1-r)}(function(){for(var e=new j,t=new j,n=new j,r=new j,o=new L,s=new L,u=new L,d=0,h=0;d<i.length;d+=9,h+=6){e.set(i[d+0],i[d+1],i[d+2]),t.set(i[d+3],i[d+4],i[d+5]),n.set(i[d+6],i[d+7],i[d+8]),o.set(a[h+0],a[h+1]),s.set(a[h+2],a[h+3]),u.set(a[h+4],a[h+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=c(r);l(o,h+0,e,f),l(s,h+2,t,f),l(u,h+4,n,f)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new Ne(i,3)),this.addAttribute("normal",new Ne(i.slice(),3)),this.addAttribute("uv",new Ne(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function mr(e,t){Me.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new vr(e,t)),this.mergeVertices()}function vr(e,t){gr.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function yr(e,t){Me.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new _r(e,t)),this.mergeVertices()}function _r(e,t){gr.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Tr(e,t){Me.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Er(e,t)),this.mergeVertices()}function Er(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];gr.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Mr(e,t){Me.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new br(e,t)),this.mergeVertices()}function br(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];gr.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ar(e,t,n,r,i,a){Me.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new wr(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function wr(e,t,n,r,i){Pe.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,u=new j,l=new j,c=new L,d=new j,h=[],f=[],p=[],g=[];function m(i){d=e.getPointAt(i/t,d);var o=a.normals[i],c=a.binormals[i];for(s=0;s<=r;s++){var p=s/r*Math.PI*2,g=Math.sin(p),m=-Math.cos(p);l.x=m*o.x+g*c.x,l.y=m*o.y+g*c.y,l.z=m*o.z+g*c.z,l.normalize(),f.push(l.x,l.y,l.z),u.x=d.x+n*l.x,u.y=d.y+n*l.y,u.z=d.z+n*l.z,h.push(u.x,u.y,u.z)}}!function(){for(o=0;o<t;o++)m(o);m(!1===i?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=r;s++)c.x=o/t,c.y=s/r,p.push(c.x,c.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=r;o++){var e=(r+1)*(s-1)+(o-1),n=(r+1)*s+(o-1),i=(r+1)*s+o,a=(r+1)*(s-1)+o;g.push(e,n,a),g.push(n,i,a)}}()}(),this.setIndex(g),this.addAttribute("position",new Ne(h,3)),this.addAttribute("normal",new Ne(f,3)),this.addAttribute("uv",new Ne(p,2))}function Sr(e,t,n,r,i,a,o){Me.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new xr(e,t,n,r,i,a)),this.mergeVertices()}function xr(e,t,n,r,i,a){Pe.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var o,s,u=[],l=[],c=[],d=[],h=new j,f=new j,p=new j,g=new j,m=new j,v=new j,y=new j;for(o=0;o<=n;++o){var _=o/n*i*Math.PI*2;for(x(_,i,a,e,p),x(_+.01,i,a,e,g),v.subVectors(g,p),y.addVectors(g,p),m.crossVectors(v,y),y.crossVectors(m,v),m.normalize(),y.normalize(),s=0;s<=r;++s){var T=s/r*Math.PI*2,E=-t*Math.cos(T),M=t*Math.sin(T);h.x=p.x+(E*y.x+M*m.x),h.y=p.y+(E*y.y+M*m.y),h.z=p.z+(E*y.z+M*m.z),l.push(h.x,h.y,h.z),f.subVectors(h,p).normalize(),c.push(f.x,f.y,f.z),d.push(o/n),d.push(s/r)}}for(s=1;s<=n;s++)for(o=1;o<=r;o++){var b=(r+1)*(s-1)+(o-1),A=(r+1)*s+(o-1),w=(r+1)*s+o,S=(r+1)*(s-1)+o;u.push(b,A,S),u.push(A,w,S)}function x(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,u=Math.cos(s);i.x=r*(2+u)*.5*a,i.y=r*(2+u)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.addAttribute("position",new Ne(l,3)),this.addAttribute("normal",new Ne(c,3)),this.addAttribute("uv",new Ne(d,2))}function Dr(e,t,n,r,i){Me.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Ir(e,t,n,r,i)),this.mergeVertices()}function Ir(e,t,n,r,i){Pe.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,o,s=[],u=[],l=[],c=[],d=new j,h=new j,f=new j;for(a=0;a<=n;a++)for(o=0;o<=r;o++){var p=o/r*i,g=a/n*Math.PI*2;h.x=(e+t*Math.cos(g))*Math.cos(p),h.y=(e+t*Math.cos(g))*Math.sin(p),h.z=t*Math.sin(g),u.push(h.x,h.y,h.z),d.x=e*Math.cos(p),d.y=e*Math.sin(p),f.subVectors(h,d).normalize(),l.push(f.x,f.y,f.z),c.push(o/r),c.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=r;o++){var m=(r+1)*a+o-1,v=(r+1)*(a-1)+o-1,y=(r+1)*(a-1)+o,_=(r+1)*a+o;s.push(m,v,_),s.push(v,y,_)}this.setIndex(s),this.addAttribute("position",new Ne(u,3)),this.addAttribute("normal",new Ne(l,3)),this.addAttribute("uv",new Ne(c,2))}On.prototype=Object.create(Xe.prototype),On.prototype.constructor=On,On.prototype.isMeshDepthMaterial=!0,On.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Rn.prototype=Object.create(Xe.prototype),Rn.prototype.constructor=Rn,Rn.prototype.isMeshDistanceMaterial=!0,Rn.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Pn.prototype=Object.create(H.prototype),Pn.prototype.constructor=Pn,Pn.prototype.isCanvasTexture=!0,zn.prototype=Object.assign(Object.create(me.prototype),{constructor:zn,isPerspectiveCamera:!0,copy:function(e,t){return me.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*N.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*N.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*N.RAD2DEG*Math.atan(Math.tan(.5*N.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*N.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(i+=e*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far)},toJSON:function(e){var t=ge.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Gn.prototype=Object.assign(Object.create(zn.prototype),{constructor:Gn,isArrayCamera:!0}),Qn.prototype.isFogExp2=!0,Qn.prototype.clone=function(){return new Qn(this.color,this.density)},Qn.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},qn.prototype.isFog=!0,qn.prototype.clone=function(){return new qn(this.color,this.near,this.far)},qn.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Wn.prototype=Object.assign(Object.create(ge.prototype),{constructor:Wn,copy:function(e,t){return ge.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ge.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Xn.prototype=Object.create(Xe.prototype),Xn.prototype.constructor=Xn,Xn.prototype.isSpriteMaterial=!0,Xn.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Kn.prototype=Object.assign(Object.create(ge.prototype),{constructor:Kn,isSprite:!0,raycast:(En=new j,Mn=new j,bn=new j,function(e,t){Mn.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(Mn,En),bn.setFromMatrixScale(this.matrixWorld);var n=bn.x*bn.y/4;if(!(Mn.distanceToSquared(En)>n)){var r=e.ray.origin.distanceTo(En);r<e.near||r>e.far||t.push({distance:r,point:En.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return ge.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Zn.prototype=Object.assign(Object.create(ge.prototype),{constructor:Zn,copy:function(e){ge.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(An=new j,function(e,t){An.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(An);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new j,t=new j;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var a=1,o=r.length;a<o&&i>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(;a<o;a++)r[a].object.visible=!1}}}(),toJSON:function(e){var t=ge.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(Jn.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new O;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(wn=new O,Sn=new O,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Sn;wn.multiplyMatrices(o,t[i]),wn.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new Jn(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),$n.prototype=Object.assign(Object.create(ge.prototype),{constructor:$n,isBone:!0}),er.prototype=Object.assign(Object.create(tt.prototype),{constructor:er,isSkinnedMesh:!0,initBones:function(){var e,t,n,r,i=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,r=this.geometry.bones.length;n<r;n++)t=this.geometry.bones[n],e=new $n,i.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,r=this.geometry.bones.length;n<r;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==i[t.parent]?i[t.parent].add(i[n]):this.add(i[n])}return this.updateMatrixWorld(!0),i},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!=1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Y,i=this.geometry.attributes.skinWeight;for(t=0;t<i.count;t++)r.x=i.getX(t),r.y=i.getY(t),r.z=i.getZ(t),r.w=i.getW(t),(e=1/r.manhattanLength())!=1/0?r.multiplyScalar(e):r.set(1,0,0,0),i.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){tt.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tr.prototype=Object.create(Xe.prototype),tr.prototype.constructor=tr,tr.prototype.isLineBasicMaterial=!0,tr.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},nr.prototype=Object.assign(Object.create(ge.prototype),{constructor:nr,isLine:!0,computeLineDistances:(xn=new j,Dn=new j,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)xn.fromBufferAttribute(t,r-1),Dn.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=xn.distanceTo(Dn);e.addAttribute("lineDistance",new Ne(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=a.length;r<i;r++)n[r]=n[r-1],n[r]+=a[r-1].distanceTo(a[r])}return this}),raycast:function(){var e=new O,t=new Je,n=new X;return function(r,i){var a=r.linePrecision,o=a*a,s=this.geometry,u=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var l=new j,c=new j,d=new j,h=new j,f=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,g=s.attributes.position.array;if(null!==p)for(var m=p.array,v=0,y=m.length-1;v<y;v+=f){var _=m[v],T=m[v+1];l.fromArray(g,3*_),c.fromArray(g,3*T),t.distanceSqToSegment(l,c,h,d)>o||(h.applyMatrix4(this.matrixWorld),(b=r.ray.origin.distanceTo(h))<r.near||b>r.far||i.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else for(v=0,y=g.length/3-1;v<y;v+=f)l.fromArray(g,3*v),c.fromArray(g,3*v+3),t.distanceSqToSegment(l,c,h,d)>o||(h.applyMatrix4(this.matrixWorld),(b=r.ray.origin.distanceTo(h))<r.near||b>r.far||i.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var E=s.vertices,M=E.length;for(v=0;v<M-1;v+=f){var b;t.distanceSqToSegment(E[v],E[v+1],h,d)>o||(h.applyMatrix4(this.matrixWorld),(b=r.ray.origin.distanceTo(h))<r.near||b>r.far||i.push({distance:b,point:d.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this}))}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),rr.prototype=Object.assign(Object.create(nr.prototype),{constructor:rr,isLineSegments:!0,computeLineDistances:function(){var e=new j,t=new j;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],a=0,o=r.count;a<o;a+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(r,a+1),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+e.distanceTo(t);n.addAttribute("lineDistance",new Ne(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+e.distanceTo(t)}return this}}()}),ir.prototype=Object.assign(Object.create(nr.prototype),{constructor:ir,isLineLoop:!0}),ar.prototype=Object.create(Xe.prototype),ar.prototype.constructor=ar,ar.prototype.isPointsMaterial=!0,ar.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},or.prototype=Object.assign(Object.create(ge.prototype),{constructor:or,isPoints:!0,raycast:function(){var e=new O,t=new Je,n=new X;return function(r,i){var a=this,o=this.geometry,s=this.matrixWorld,u=r.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=u/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,d=new j,h=new j;if(o.isBufferGeometry){var f=o.index,p=o.attributes.position.array;if(null!==f)for(var g=f.array,m=0,v=g.length;m<v;m++){var y=g[m];d.fromArray(p,3*y),E(d,y)}else{m=0;for(var _=p.length/3;m<_;m++)d.fromArray(p,3*m),E(d,m)}}else{var T=o.vertices;for(m=0,_=T.length;m<_;m++)E(T[m],m)}}function E(e,n){var o=t.distanceSqToPoint(e);if(o<c){t.closestPointToPoint(e,h),h.applyMatrix4(s);var u=r.ray.origin.distanceTo(h);if(u<r.near||u>r.far)return;i.push({distance:u,distanceToRay:Math.sqrt(o),point:h.clone(),index:n,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),sr.prototype=Object.assign(Object.create(ge.prototype),{constructor:sr,isGroup:!0}),ur.prototype=Object.assign(Object.create(H.prototype),{constructor:ur,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),lr.prototype=Object.create(H.prototype),lr.prototype.constructor=lr,lr.prototype.isCompressedTexture=!0,cr.prototype=Object.create(H.prototype),cr.prototype.constructor=cr,cr.prototype.isDepthTexture=!0,dr.prototype=Object.create(Pe.prototype),dr.prototype.constructor=dr,hr.prototype=Object.create(Me.prototype),hr.prototype.constructor=hr,fr.prototype=Object.create(Pe.prototype),fr.prototype.constructor=fr,pr.prototype=Object.create(Me.prototype),pr.prototype.constructor=pr,gr.prototype=Object.create(Pe.prototype),gr.prototype.constructor=gr,mr.prototype=Object.create(Me.prototype),mr.prototype.constructor=mr,vr.prototype=Object.create(gr.prototype),vr.prototype.constructor=vr,yr.prototype=Object.create(Me.prototype),yr.prototype.constructor=yr,_r.prototype=Object.create(gr.prototype),_r.prototype.constructor=_r,Tr.prototype=Object.create(Me.prototype),Tr.prototype.constructor=Tr,Er.prototype=Object.create(gr.prototype),Er.prototype.constructor=Er,Mr.prototype=Object.create(Me.prototype),Mr.prototype.constructor=Mr,br.prototype=Object.create(gr.prototype),br.prototype.constructor=br,Ar.prototype=Object.create(Me.prototype),Ar.prototype.constructor=Ar,wr.prototype=Object.create(Pe.prototype),wr.prototype.constructor=wr,Sr.prototype=Object.create(Me.prototype),Sr.prototype.constructor=Sr,xr.prototype=Object.create(Pe.prototype),xr.prototype.constructor=xr,Dr.prototype=Object.create(Me.prototype),Dr.prototype.constructor=Dr,Ir.prototype=Object.create(Pe.prototype),Ir.prototype.constructor=Ir;function Cr(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=Wr(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=Wr(a,e[a],e[a+1],o);return o&&Yr(o,o.next)&&(Xr(o),o=o.next),o}function Nr(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!Yr(r,r.next)&&0!==Hr(r.prev,r,r.next))r=r.next;else{if(Xr(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Lr(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=Br(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,u,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,u,l=e;e.prev!==e.next;)if(s=e.prev,u=e.next,a?Rr(e,r,i,a):Or(e))t.push(s.i/n),t.push(e.i/n),t.push(u.i/n),Xr(e),e=u.next,l=u.next;else if((e=u)===l){o?1===o?Lr(e=jr(e,t,n),t,n,r,i,a,2):2===o&&Pr(e,t,n,r,i,a):Lr(Nr(e),t,n,r,i,a,1);break}}}function Or(e){var t=e.prev,n=e,r=e.next;if(Hr(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(zr(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&Hr(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Rr(e,t,n,r){var i=e.prev,a=e,o=e.next;if(Hr(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,u=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=Br(s,u,t,n,r),h=Br(l,c,t,n,r),f=e.nextZ;f&&f.z<=h;){if(f!==e.prev&&f!==e.next&&zr(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Hr(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=d;){if(f!==e.prev&&f!==e.next&&zr(i.x,i.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Hr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function jr(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!Yr(i,a)&&Vr(i,r,r.next,a)&&Qr(i,a)&&Qr(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),Xr(r),Xr(r.next),r=e=a),r=r.next}while(r!==e);return r}function Pr(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Gr(o,s)){var u=qr(o,s);return o=Nr(o,o.next),u=Nr(u,u.next),Lr(o,t,n,r,i,a),void Lr(u,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function kr(e,t){return e.x-t.x}function Ur(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var u,l=n,c=n.x,d=n.y,h=1/0;for(r=n.next;r!==l;)i>=r.x&&r.x>=c&&i!==r.x&&zr(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&((u=Math.abs(a-r.y)/(i-r.x))<h||u===h&&r.x>n.x)&&Qr(r,e)&&(n=r,h=u),r=r.next;return n}(e,t)){var n=qr(t,e);Nr(n,n.next)}}function Br(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Fr(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function zr(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function Gr(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Vr(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Qr(e,t)&&Qr(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function Hr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Yr(e,t){return e.x===t.x&&e.y===t.y}function Vr(e,t,n,r){return!!(Yr(e,t)&&Yr(n,r)||Yr(e,r)&&Yr(n,t))||Hr(e,t,n)>0!=Hr(e,t,r)>0&&Hr(n,r,e)>0!=Hr(n,r,t)>0}function Qr(e,t){return Hr(e.prev,e,e.next)<0?Hr(e,t,e.next)>=0&&Hr(e,e.prev,t)>=0:Hr(e,t,e.prev)<0||Hr(e,e.next,t)<0}function qr(e,t){var n=new Kr(e.i,e.x,e.y),r=new Kr(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function Wr(e,t,n,r){var i=new Kr(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Xr(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Kr(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Zr={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return Zr.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];Jr(e),$r(n,e);var a=e.length;t.forEach(Jr);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,$r(n,t[o]);var s=function(e,t,n){n=n||2;var r,i,a,o,s,u,l,c=t&&t.length,d=c?t[0]*n:e.length,h=Cr(e,0,d,n,!0),f=[];if(!h)return f;if(c&&(h=function(e,t,n,r){var i,a,o,s=[];for(i=0,a=t.length;i<a;i++)(o=Cr(e,t[i]*r,i<a-1?t[i+1]*r:e.length,r,!1))===o.next&&(o.steiner=!0),s.push(Fr(o));for(s.sort(kr),i=0;i<s.length;i++)Ur(s[i],n),n=Nr(n,n.next);return n}(e,t,h,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var p=n;p<d;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>a&&(a=s),u>o&&(o=u);l=0!==(l=Math.max(a-r,o-i))?1/l:0}return Lr(h,f,n,r,i,l),f}(n,r);for(o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function Jr(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function $r(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function ei(e,t){Me.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ti(e,t)),this.mergeVertices()}function ti(e,t){Pe.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var n=this,r=[],i=[],a=0,o=e.length;a<o;a++)s(e[a]);function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,u=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,c=void 0!==t.bevelThickness?t.bevelThickness:6,d=void 0!==t.bevelSize?t.bevelSize:c-2,h=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,p=void 0!==t.UVGenerator?t.UVGenerator:ni;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=t.amount);var g,m,v,y,_,T,E,M,b=!1;f&&(g=f.getSpacedPoints(s),b=!0,l=!1,m=f.computeFrenetFrames(s,!1),v=new j,y=new j,_=new j),l||(h=0,c=0,d=0);var A=e.extractPoints(o),w=A.shape,S=A.holes;if(!Zr.isClockWise(w))for(w=w.reverse(),E=0,M=S.length;E<M;E++)T=S[E],Zr.isClockWise(T)&&(S[E]=T.reverse());var x=Zr.triangulateShape(w,S),D=w;for(E=0,M=S.length;E<M;E++)T=S[E],w=w.concat(T);function I(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var C,N,O,R,P,k,U=w.length,B=x.length;function F(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,u=n.x-e.x,l=n.y-e.y,c=o*o+s*s,d=o*l-s*u;if(Math.abs(d)>Number.EPSILON){var h=Math.sqrt(c),f=Math.sqrt(u*u+l*l),p=t.x-s/h,g=t.y+o/h,m=((n.x-l/f-p)*l-(n.y+u/f-g)*u)/(o*l-s*u),v=(r=p+o*m-e.x)*r+(i=g+s*m-e.y)*i;if(v<=2)return new L(r,i);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?u>Number.EPSILON&&(y=!0):o<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(c)):(r=o,i=s,a=Math.sqrt(c/2))}return new L(r/a,i/a)}for(var z=[],G=0,H=D.length,Y=H-1,V=G+1;G<H;G++,Y++,V++)Y===H&&(Y=0),V===H&&(V=0),z[G]=F(D[G],D[Y],D[V]);var Q,q,W=[],X=z.concat();for(E=0,M=S.length;E<M;E++){for(T=S[E],Q=[],G=0,Y=(H=T.length)-1,V=G+1;G<H;G++,Y++,V++)Y===H&&(Y=0),V===H&&(V=0),Q[G]=F(T[G],T[Y],T[V]);W.push(Q),X=X.concat(Q)}for(C=0;C<h;C++){for(O=C/h,R=c*Math.cos(O*Math.PI/2),N=d*Math.sin(O*Math.PI/2),G=0,H=D.length;G<H;G++)Z((P=I(D[G],z[G],N)).x,P.y,-R);for(E=0,M=S.length;E<M;E++)for(T=S[E],Q=W[E],G=0,H=T.length;G<H;G++)Z((P=I(T[G],Q[G],N)).x,P.y,-R)}for(N=d,G=0;G<U;G++)P=l?I(w[G],X[G],N):w[G],b?(y.copy(m.normals[0]).multiplyScalar(P.x),v.copy(m.binormals[0]).multiplyScalar(P.y),_.copy(g[0]).add(y).add(v),Z(_.x,_.y,_.z)):Z(P.x,P.y,0);for(q=1;q<=s;q++)for(G=0;G<U;G++)P=l?I(w[G],X[G],N):w[G],b?(y.copy(m.normals[q]).multiplyScalar(P.x),v.copy(m.binormals[q]).multiplyScalar(P.y),_.copy(g[q]).add(y).add(v),Z(_.x,_.y,_.z)):Z(P.x,P.y,u/s*q);for(C=h-1;C>=0;C--){for(O=C/h,R=c*Math.cos(O*Math.PI/2),N=d*Math.sin(O*Math.PI/2),G=0,H=D.length;G<H;G++)Z((P=I(D[G],z[G],N)).x,P.y,u+R);for(E=0,M=S.length;E<M;E++)for(T=S[E],Q=W[E],G=0,H=T.length;G<H;G++)P=I(T[G],Q[G],N),b?Z(P.x,P.y+g[s-1].y,g[s-1].x+R):Z(P.x,P.y,u+R)}function K(e,t){var n,r;for(G=e.length;--G>=0;){n=G,(r=G-1)<0&&(r=e.length-1);var i=0,a=s+2*h;for(i=0;i<a;i++){var o=U*i,u=U*(i+1);$(t+n+o,t+r+o,t+r+u,t+n+u)}}}function Z(e,t,n){a.push(e),a.push(t),a.push(n)}function J(e,t,i){ee(e),ee(t),ee(i);var a=r.length/3,o=p.generateTopUV(n,r,a-3,a-2,a-1);te(o[0]),te(o[1]),te(o[2])}function $(e,t,i,a){ee(e),ee(t),ee(a),ee(t),ee(i),ee(a);var o=r.length/3,s=p.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);te(s[0]),te(s[1]),te(s[3]),te(s[1]),te(s[2]),te(s[3])}function ee(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function te(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(l){var t=0,i=U*t;for(G=0;G<B;G++)J((k=x[G])[2]+i,k[1]+i,k[0]+i);for(i=U*(t=s+2*h),G=0;G<B;G++)J((k=x[G])[0]+i,k[1]+i,k[2]+i)}else{for(G=0;G<B;G++)J((k=x[G])[2],k[1],k[0]);for(G=0;G<B;G++)J((k=x[G])[0]+U*s,k[1]+U*s,k[2]+U*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(K(D,t),t+=D.length,E=0,M=S.length;E<M;E++)K(T=S[E],t),t+=T.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new Ne(r,3)),this.addAttribute("uv",new Ne(i,2)),this.computeVertexNormals()}ei.prototype=Object.create(Me.prototype),ei.prototype.constructor=ei,ei.prototype.toJSON=function(){var e=Me.prototype.toJSON.call(this);return ri(this.parameters.shapes,this.parameters.options,e)},ti.prototype=Object.create(Pe.prototype),ti.prototype.constructor=ti,ti.prototype.toJSON=function(){var e=Pe.prototype.toJSON.call(this);return ri(this.parameters.shapes,this.parameters.options,e)};var ni={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],u=t[3*r+1],l=t[3*i],c=t[3*i+1];return[new L(a,o),new L(s,u),new L(l,c)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],u=t[3*n+2],l=t[3*r],c=t[3*r+1],d=t[3*r+2],h=t[3*i],f=t[3*i+1],p=t[3*i+2],g=t[3*a],m=t[3*a+1],v=t[3*a+2];return Math.abs(s-c)<.01?[new L(o,1-u),new L(l,1-d),new L(h,1-p),new L(g,1-v)]:[new L(s,1-u),new L(c,1-d),new L(f,1-p),new L(m,1-v)]}};function ri(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function ii(e,t){Me.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new ai(e,t)),this.mergeVertices()}function ai(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Me;var r=n.generateShapes(e,t.size,t.curveSegments);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ti.call(this,r,t),this.type="TextBufferGeometry"}function oi(e,t,n,r,i,a,o){Me.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new si(e,t,n,r,i,a,o)),this.mergeVertices()}function si(e,t,n,r,i,a,o){Pe.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,u,l=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),c=0,d=[],h=new j,f=new j,p=[],g=[],m=[],v=[];for(u=0;u<=n;u++){var y=[],_=u/n;for(s=0;s<=t;s++){var T=s/t;h.x=-e*Math.cos(r+T*i)*Math.sin(a+_*o),h.y=e*Math.cos(a+_*o),h.z=e*Math.sin(r+T*i)*Math.sin(a+_*o),g.push(h.x,h.y,h.z),f.set(h.x,h.y,h.z).normalize(),m.push(f.x,f.y,f.z),v.push(T,1-_),y.push(c++)}d.push(y)}for(u=0;u<n;u++)for(s=0;s<t;s++){var E=d[u][s+1],M=d[u][s],b=d[u+1][s],A=d[u+1][s+1];(0!==u||a>0)&&p.push(E,M,A),(u!==n-1||l<Math.PI)&&p.push(M,b,A)}this.setIndex(p),this.addAttribute("position",new Ne(g,3)),this.addAttribute("normal",new Ne(m,3)),this.addAttribute("uv",new Ne(v,2))}function ui(e,t,n,r,i,a){Me.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new li(e,t,n,r,i,a)),this.mergeVertices()}function li(e,t,n,r,i,a){Pe.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,u,l=[],c=[],d=[],h=[],f=e,p=(t-e)/(r=void 0!==r?Math.max(1,r):1),g=new j,m=new L;for(s=0;s<=r;s++){for(u=0;u<=n;u++)o=i+u/n*a,g.x=f*Math.cos(o),g.y=f*Math.sin(o),c.push(g.x,g.y,g.z),d.push(0,0,1),m.x=(g.x/t+1)/2,m.y=(g.y/t+1)/2,h.push(m.x,m.y);f+=p}for(s=0;s<r;s++){var v=s*(n+1);for(u=0;u<n;u++){var y=o=u+v,_=o+n+1,T=o+n+2,E=o+1;l.push(y,_,E),l.push(_,T,E)}}this.setIndex(l),this.addAttribute("position",new Ne(c,3)),this.addAttribute("normal",new Ne(d,3)),this.addAttribute("uv",new Ne(h,2))}function ci(e,t,n,r){Me.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new di(e,t,n,r)),this.mergeVertices()}function di(e,t,n,r){Pe.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=N.clamp(r,0,2*Math.PI);var i,a,o,s=[],u=[],l=[],c=1/t,d=new j,h=new L;for(a=0;a<=t;a++){var f=n+a*c*r,p=Math.sin(f),g=Math.cos(f);for(o=0;o<=e.length-1;o++)d.x=e[o].x*p,d.y=e[o].y,d.z=e[o].x*g,u.push(d.x,d.y,d.z),h.x=a/t,h.y=o/(e.length-1),l.push(h.x,h.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var m=i=o+a*e.length,v=i+e.length,y=i+e.length+1,_=i+1;s.push(m,v,_),s.push(v,y,_)}if(this.setIndex(s),this.addAttribute("position",new Ne(u,3)),this.addAttribute("uv",new Ne(l,2)),this.computeVertexNormals(),r===2*Math.PI){var T=this.attributes.normal.array,E=new j,M=new j,b=new j;for(i=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)E.x=T[o+0],E.y=T[o+1],E.z=T[o+2],M.x=T[i+o+0],M.y=T[i+o+1],M.z=T[i+o+2],b.addVectors(E,M).normalize(),T[o+0]=T[i+o+0]=b.x,T[o+1]=T[i+o+1]=b.y,T[o+2]=T[i+o+2]=b.z}}function hi(e,t){Me.call(this),this.type="ShapeGeometry","object"==s(t)&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new fi(e,t)),this.mergeVertices()}function fi(e,t){Pe.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(var u=0;u<e.length;u++)l(e[u]),this.addGroup(o,s,u),o+=s,s=0;function l(e){var o,u,l,c=r.length/3,d=e.extractPoints(t),h=d.shape,f=d.holes;if(!1===Zr.isClockWise(h))for(h=h.reverse(),o=0,u=f.length;o<u;o++)l=f[o],!0===Zr.isClockWise(l)&&(f[o]=l.reverse());var p=Zr.triangulateShape(h,f);for(o=0,u=f.length;o<u;o++)l=f[o],h=h.concat(l);for(o=0,u=h.length;o<u;o++){var g=h[o];r.push(g.x,g.y,0),i.push(0,0,1),a.push(g.x,g.y)}for(o=0,u=p.length;o<u;o++){var m=p[o],v=m[0]+c,y=m[1]+c,_=m[2]+c;n.push(v,y,_),s+=3}}this.setIndex(n),this.addAttribute("position",new Ne(r,3)),this.addAttribute("normal",new Ne(i,3)),this.addAttribute("uv",new Ne(a,2))}function pi(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function gi(e,t){Pe.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,a,o=[],s=Math.cos(N.DEG2RAD*t),u=[0,0],l={},c=["a","b","c"];e.isBufferGeometry?(a=new Me).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var d=a.vertices,h=a.faces,f=0,p=h.length;f<p;f++)for(var g=h[f],m=0;m<3;m++)n=g[c[m]],r=g[c[(m+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:f,face2:void 0}:l[i].face2=f;for(i in l){var v=l[i];if(void 0===v.face2||h[v.face1].normal.dot(h[v.face2].normal)<=s){var y=d[v.index1];o.push(y.x,y.y,y.z),y=d[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Ne(o,3))}function mi(e,t,n,r,i,a,o,s){Me.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new vi(e,t,n,r,i,a,o,s)),this.mergeVertices()}function vi(e,t,n,r,i,a,o,s){Pe.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var u=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],d=[],h=[],f=0,p=[],g=n/2,m=0;function v(n){var i,a,p,v=new L,y=new j,_=0,T=!0===n?e:t,E=!0===n?1:-1;for(a=f,i=1;i<=r;i++)c.push(0,g*E,0),d.push(0,E,0),h.push(.5,.5),f++;for(p=f,i=0;i<=r;i++){var M=i/r*s+o,b=Math.cos(M),A=Math.sin(M);y.x=T*A,y.y=g*E,y.z=T*b,c.push(y.x,y.y,y.z),d.push(0,E,0),v.x=.5*b+.5,v.y=.5*A*E+.5,h.push(v.x,v.y),f++}for(i=0;i<r;i++){var w=a+i,S=p+i;!0===n?l.push(S,S+1,w):l.push(S+1,S,w),_+=3}u.addGroup(m,_,!0===n?1:2),m+=_}!function(){var a,v,y=new j,_=new j,T=0,E=(t-e)/n;for(v=0;v<=i;v++){var M=[],b=v/i,A=b*(t-e)+e;for(a=0;a<=r;a++){var w=a/r,S=w*s+o,x=Math.sin(S),D=Math.cos(S);_.x=A*x,_.y=-b*n+g,_.z=A*D,c.push(_.x,_.y,_.z),y.set(x,E,D).normalize(),d.push(y.x,y.y,y.z),h.push(w,1-b),M.push(f++)}p.push(M)}for(a=0;a<r;a++)for(v=0;v<i;v++){var I=p[v][a],C=p[v+1][a],N=p[v+1][a+1],L=p[v][a+1];l.push(I,C,L),l.push(C,N,L),T+=6}u.addGroup(m,T,0),m+=T}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(l),this.addAttribute("position",new Ne(c,3)),this.addAttribute("normal",new Ne(d,3)),this.addAttribute("uv",new Ne(h,2))}function yi(e,t,n,r,i,a,o){mi.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function _i(e,t,n,r,i,a,o){vi.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function Ti(e,t,n,r){Me.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Ei(e,t,n,r)),this.mergeVertices()}function Ei(e,t,n,r){Pe.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,a,o=[],s=[],u=[],l=[],c=new j,d=new L;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var h=n+a/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),s.push(c.x,c.y,c.z),u.push(0,0,1),d.x=(s[i]/e+1)/2,d.y=(s[i+1]/e+1)/2,l.push(d.x,d.y)}for(i=1;i<=t;i++)o.push(i,i+1,0);this.setIndex(o),this.addAttribute("position",new Ne(s,3)),this.addAttribute("normal",new Ne(u,3)),this.addAttribute("uv",new Ne(l,2))}ii.prototype=Object.create(Me.prototype),ii.prototype.constructor=ii,ai.prototype=Object.create(ti.prototype),ai.prototype.constructor=ai,oi.prototype=Object.create(Me.prototype),oi.prototype.constructor=oi,si.prototype=Object.create(Pe.prototype),si.prototype.constructor=si,ui.prototype=Object.create(Me.prototype),ui.prototype.constructor=ui,li.prototype=Object.create(Pe.prototype),li.prototype.constructor=li,ci.prototype=Object.create(Me.prototype),ci.prototype.constructor=ci,di.prototype=Object.create(Pe.prototype),di.prototype.constructor=di,hi.prototype=Object.create(Me.prototype),hi.prototype.constructor=hi,hi.prototype.toJSON=function(){var e=Me.prototype.toJSON.call(this);return pi(this.parameters.shapes,e)},fi.prototype=Object.create(Pe.prototype),fi.prototype.constructor=fi,fi.prototype.toJSON=function(){var e=Pe.prototype.toJSON.call(this);return pi(this.parameters.shapes,e)},gi.prototype=Object.create(Pe.prototype),gi.prototype.constructor=gi,mi.prototype=Object.create(Me.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(Pe.prototype),vi.prototype.constructor=vi,yi.prototype=Object.create(mi.prototype),yi.prototype.constructor=yi,_i.prototype=Object.create(vi.prototype),_i.prototype.constructor=_i,Ti.prototype=Object.create(Me.prototype),Ti.prototype.constructor=Ti,Ei.prototype=Object.create(Pe.prototype),Ei.prototype.constructor=Ei;var Mi=Object.freeze({WireframeGeometry:dr,ParametricGeometry:hr,ParametricBufferGeometry:fr,TetrahedronGeometry:mr,TetrahedronBufferGeometry:vr,OctahedronGeometry:yr,OctahedronBufferGeometry:_r,IcosahedronGeometry:Tr,IcosahedronBufferGeometry:Er,DodecahedronGeometry:Mr,DodecahedronBufferGeometry:br,PolyhedronGeometry:pr,PolyhedronBufferGeometry:gr,TubeGeometry:Ar,TubeBufferGeometry:wr,TorusKnotGeometry:Sr,TorusKnotBufferGeometry:xr,TorusGeometry:Dr,TorusBufferGeometry:Ir,TextGeometry:ii,TextBufferGeometry:ai,SphereGeometry:oi,SphereBufferGeometry:si,RingGeometry:ui,RingBufferGeometry:li,PlaneGeometry:Be,PlaneBufferGeometry:Fe,LatheGeometry:ci,LatheBufferGeometry:di,ShapeGeometry:hi,ShapeBufferGeometry:fi,ExtrudeGeometry:ei,ExtrudeBufferGeometry:ti,EdgesGeometry:gi,ConeGeometry:yi,ConeBufferGeometry:_i,CylinderGeometry:mi,CylinderBufferGeometry:vi,CircleGeometry:Ti,CircleBufferGeometry:Ei,BoxGeometry:ke,BoxBufferGeometry:Ue});function bi(e){Xe.call(this),this.type="ShadowMaterial",this.color=new ne(0),this.transparent=!0,this.setValues(e)}function Ai(e){Ze.call(this,e),this.type="RawShaderMaterial"}function wi(e){Xe.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ne(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Si(e){wi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function xi(e){Xe.call(this),this.type="MeshPhongMaterial",this.color=new ne(16777215),this.specular=new ne(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Di(e){xi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Ii(e){Xe.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new L(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ci(e){Xe.call(this),this.type="MeshLambertMaterial",this.color=new ne(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ne(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Ni(e){tr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}bi.prototype=Object.create(Xe.prototype),bi.prototype.constructor=bi,bi.prototype.isShadowMaterial=!0,bi.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this},Ai.prototype=Object.create(Ze.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isRawShaderMaterial=!0,wi.prototype=Object.create(Xe.prototype),wi.prototype.constructor=wi,wi.prototype.isMeshStandardMaterial=!0,wi.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Si.prototype=Object.create(wi.prototype),Si.prototype.constructor=Si,Si.prototype.isMeshPhysicalMaterial=!0,Si.prototype.copy=function(e){return wi.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},xi.prototype=Object.create(Xe.prototype),xi.prototype.constructor=xi,xi.prototype.isMeshPhongMaterial=!0,xi.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Di.prototype=Object.create(xi.prototype),Di.prototype.constructor=Di,Di.prototype.isMeshToonMaterial=!0,Di.prototype.copy=function(e){return xi.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Ii.prototype=Object.create(Xe.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isMeshNormalMaterial=!0,Ii.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ci.prototype=Object.create(Xe.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isMeshLambertMaterial=!0,Ci.prototype.copy=function(e){return Xe.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Ni.prototype=Object.create(tr.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isLineDashedMaterial=!0,Ni.prototype.copy=function(e){return tr.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Li=Object.freeze({ShadowMaterial:bi,SpriteMaterial:Xn,RawShaderMaterial:Ai,ShaderMaterial:Ze,PointsMaterial:ar,MeshPhysicalMaterial:Si,MeshStandardMaterial:wi,MeshPhongMaterial:xi,MeshToonMaterial:Di,MeshNormalMaterial:Ii,MeshLambertMaterial:Ci,MeshDepthMaterial:On,MeshDistanceMaterial:Rn,MeshBasicMaterial:Ke,LineDashedMaterial:Ni,LineBasicMaterial:tr,Material:Xe}),Oi={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ri(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var ji=new Ri,Pi={};function ki(e){this.manager=void 0!==e?e:ji}function Ui(e){this.manager=void 0!==e?e:ji}function Bi(e){this.manager=void 0!==e?e:ji}function Fi(){this.type="Curve",this.arcLengthDivisions=200}function zi(e,t,n,r,i,a,o,s){Fi.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Gi(e,t,n,r,i,a){zi.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}function Hi(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var u=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,u*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}Object.assign(ki.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Oi.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;if(void 0===Pi[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],u=!!o[2],l=o[3];l=window.decodeURIComponent(l),u&&(l=window.atob(l));try{var c,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var h=new Uint8Array(l.length),f=0;f<l.length;f++)h[f]=l.charCodeAt(f);c="blob"===d?new Blob([h.buffer],{type:s}):h.buffer;break;case"document":var p=new DOMParser;c=p.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}window.setTimeout((function(){t&&t(c),i.manager.itemEnd(e)}),0)}catch(t){window.setTimeout((function(){r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}),0)}}else{Pi[e]=[],Pi[e].push({onLoad:t,onProgress:n,onError:r});var g=new XMLHttpRequest;for(var m in g.open("GET",e,!0),g.addEventListener("load",(function(t){var n=this.response;Oi.add(e,n);var r=Pi[e];if(delete Pi[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=r.length;a<o;a++)(s=r[a]).onLoad&&s.onLoad(n);i.manager.itemEnd(e)}else{for(a=0,o=r.length;a<o;a++){var s;(s=r[a]).onError&&s.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}}),!1),g.addEventListener("progress",(function(t){for(var n=Pi[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}}),!1),g.addEventListener("error",(function(t){var n=Pi[e];delete Pi[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemEnd(e),i.manager.itemError(e)}),!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)g.setRequestHeader(m,this.requestHeader[m]);g.send(null)}return i.manager.itemStart(e),g}Pi[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:ji,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,a=[],o=new lr;o.image=a;var s=new ki(this.manager);function u(u){s.load(e[u],(function(e){var n=i._parser(e,!0);a[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=A),o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,c=0,d=e.length;c<d;++c)u(c);else s.load(e,(function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=A),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:ji,this._parser=null}.prototype,{load:function(e,t,n,r){var i=this,a=new q,o=new ki(this.manager);return o.setResponseType("arraybuffer"),o.load(e,(function(e){var n=i._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:E,a.wrapT=void 0!==n.wrapT?n.wrapT:E,a.magFilter=void 0!==n.magFilter?n.magFilter:A,a.minFilter=void 0!==n.minFilter?n.minFilter:1008,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=A),a.needsUpdate=!0,t&&t(a,n))}),n,r),a}}),Object.assign(Ui.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=Oi.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout((function(){t&&t(a),i.manager.itemEnd(e)}),0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),Oi.add(e,this),t&&t(this),i.manager.itemEnd(e)}function u(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",u,!1),r&&r(t),i.manager.itemEnd(e),i.manager.itemError(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",u,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(function(e){this.manager=void 0!==e?e:ji}.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new ft,a=new Ui(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],(function(e){i.images[n]=e,6==++o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(var u=0;u<e.length;++u)s(u);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Bi.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,r){var i=new H,a=new Ui(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(n){i.image=n;var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?S:x,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Fi.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),a=0;for(r.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(i),r.push(a),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,a=new j,o=[],s=[],u=[],l=new j,c=new O;for(n=0;n<=e;n++)r=n/e,o[n]=this.getTangentAt(r),o[n].normalize();s[0]=new j,u[0]=new j;var d=Number.MAX_VALUE,h=Math.abs(o[0].x),f=Math.abs(o[0].y),p=Math.abs(o[0].z);for(h<=d&&(d=h,a.set(1,0,0)),f<=d&&(d=f,a.set(0,1,0)),p<=d&&a.set(0,0,1),l.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],l),u[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),l.crossVectors(o[n-1],o[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(N.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(l,i))),u[n].crossVectors(o[n],s[n]);if(!0===t)for(i=Math.acos(N.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(c.makeRotationAxis(o[n],i*n)),u[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),zi.prototype=Object.create(Fi.prototype),zi.prototype.constructor=zi,zi.prototype.isEllipseCurve=!0,zi.prototype.getPoint=function(e,t){for(var n=t||new L,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),d=s-this.aX,h=u-this.aY;s=d*l-h*c+this.aX,u=d*c+h*l+this.aY}return n.set(s,u)},zi.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},zi.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},zi.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Gi.prototype=Object.create(zi.prototype),Gi.prototype.constructor=Gi,Gi.prototype.isArcCurve=!0;var Yi=new j,Vi=new Hi,Qi=new Hi,qi=new Hi;function Wi(e,t,n,r){Fi.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Xi(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function Ki(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Zi(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ji(e,t,n,r){Fi.call(this),this.type="CubicBezierCurve",this.v0=e||new L,this.v1=t||new L,this.v2=n||new L,this.v3=r||new L}function $i(e,t,n,r){Fi.call(this),this.type="CubicBezierCurve3",this.v0=e||new j,this.v1=t||new j,this.v2=n||new j,this.v3=r||new j}function ea(e,t){Fi.call(this),this.type="LineCurve",this.v1=e||new L,this.v2=t||new L}function ta(e,t){Fi.call(this),this.type="LineCurve3",this.v1=e||new j,this.v2=t||new j}function na(e,t,n){Fi.call(this),this.type="QuadraticBezierCurve",this.v0=e||new L,this.v1=t||new L,this.v2=n||new L}function ra(e,t,n){Fi.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new j,this.v1=t||new j,this.v2=n||new j}function ia(e){Fi.call(this),this.type="SplineCurve",this.points=e||[]}Wi.prototype=Object.create(Fi.prototype),Wi.prototype.constructor=Wi,Wi.prototype.isCatmullRomCurve3=!0,Wi.prototype.getPoint=function(e,t){var n,r,i,a,o=t||new j,s=this.points,u=s.length,l=(u-(this.closed?0:1))*e,c=Math.floor(l),d=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===d&&c===u-1&&(c=u-2,d=1),this.closed||c>0?n=s[(c-1)%u]:(Yi.subVectors(s[0],s[1]).add(s[0]),n=Yi),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?a=s[(c+2)%u]:(Yi.subVectors(s[u-1],s[u-2]).add(s[u-1]),a=Yi),"centripetal"===this.curveType||"chordal"===this.curveType){var h="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(r),h),p=Math.pow(r.distanceToSquared(i),h),g=Math.pow(i.distanceToSquared(a),h);p<1e-4&&(p=1),f<1e-4&&(f=p),g<1e-4&&(g=p),Vi.initNonuniformCatmullRom(n.x,r.x,i.x,a.x,f,p,g),Qi.initNonuniformCatmullRom(n.y,r.y,i.y,a.y,f,p,g),qi.initNonuniformCatmullRom(n.z,r.z,i.z,a.z,f,p,g)}else"catmullrom"===this.curveType&&(Vi.initCatmullRom(n.x,r.x,i.x,a.x,this.tension),Qi.initCatmullRom(n.y,r.y,i.y,a.y,this.tension),qi.initCatmullRom(n.z,r.z,i.z,a.z,this.tension));return o.set(Vi.calc(d),Qi.calc(d),qi.calc(d)),o},Wi.prototype.copy=function(e){Fi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Wi.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Wi.prototype.fromJSON=function(e){Fi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new j).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ji.prototype=Object.create(Fi.prototype),Ji.prototype.constructor=Ji,Ji.prototype.isCubicBezierCurve=!0,Ji.prototype.getPoint=function(e,t){var n=t||new L,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Zi(e,r.x,i.x,a.x,o.x),Zi(e,r.y,i.y,a.y,o.y)),n},Ji.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ji.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ji.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},$i.prototype=Object.create(Fi.prototype),$i.prototype.constructor=$i,$i.prototype.isCubicBezierCurve3=!0,$i.prototype.getPoint=function(e,t){var n=t||new j,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Zi(e,r.x,i.x,a.x,o.x),Zi(e,r.y,i.y,a.y,o.y),Zi(e,r.z,i.z,a.z,o.z)),n},$i.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},$i.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},$i.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},ea.prototype=Object.create(Fi.prototype),ea.prototype.constructor=ea,ea.prototype.isLineCurve=!0,ea.prototype.getPoint=function(e,t){var n=t||new L;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ea.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ea.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},ea.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ea.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ea.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ta.prototype=Object.create(Fi.prototype),ta.prototype.constructor=ta,ta.prototype.isLineCurve3=!0,ta.prototype.getPoint=function(e,t){var n=t||new j;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},ta.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},ta.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ta.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ta.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},na.prototype=Object.create(Fi.prototype),na.prototype.constructor=na,na.prototype.isQuadraticBezierCurve=!0,na.prototype.getPoint=function(e,t){var n=t||new L,r=this.v0,i=this.v1,a=this.v2;return n.set(Ki(e,r.x,i.x,a.x),Ki(e,r.y,i.y,a.y)),n},na.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},na.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},na.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ra.prototype=Object.create(Fi.prototype),ra.prototype.constructor=ra,ra.prototype.isQuadraticBezierCurve3=!0,ra.prototype.getPoint=function(e,t){var n=t||new j,r=this.v0,i=this.v1,a=this.v2;return n.set(Ki(e,r.x,i.x,a.x),Ki(e,r.y,i.y,a.y),Ki(e,r.z,i.z,a.z)),n},ra.prototype.copy=function(e){return Fi.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},ra.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},ra.prototype.fromJSON=function(e){return Fi.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},ia.prototype=Object.create(Fi.prototype),ia.prototype.constructor=ia,ia.prototype.isSplineCurve=!0,ia.prototype.getPoint=function(e,t){var n=t||new L,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],u=r[a],l=r[a>r.length-2?r.length-1:a+1],c=r[a>r.length-3?r.length-1:a+2];return n.set(Xi(o,s.x,u.x,l.x,c.x),Xi(o,s.y,u.y,l.y,c.y)),n},ia.prototype.copy=function(e){Fi.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},ia.prototype.toJSON=function(){var e=Fi.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},ia.prototype.fromJSON=function(e){Fi.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new L).fromArray(r))}return this};var aa=Object.freeze({ArcCurve:Gi,CatmullRomCurve3:Wi,CubicBezierCurve:Ji,CubicBezierCurve3:$i,EllipseCurve:zi,LineCurve:ea,LineCurve3:ta,QuadraticBezierCurve:na,QuadraticBezierCurve3:ra,SplineCurve:ia});function oa(){Fi.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function sa(e){oa.call(this),this.type="Path",this.currentPoint=new L,e&&this.setFromPoints(e)}function ua(e){sa.call(this,e),this.uuid=N.generateUUID(),this.type="Shape",this.holes=[]}function la(e,t){ge.call(this),this.type="Light",this.color=new ne(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function ca(e,t,n){la.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ge.DefaultUp),this.updateMatrix(),this.groundColor=new ne(t)}function da(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new L(512,512),this.map=null,this.matrix=new O}function ha(){da.call(this,new zn(50,1,.5,500))}function fa(e,t,n,r,i,a){la.call(this,e,t),this.type="SpotLight",this.position.copy(ge.DefaultUp),this.updateMatrix(),this.target=new ge,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new ha}function pa(e,t,n,r){la.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new da(new zn(90,1,.5,500))}function ga(){da.call(this,new ve(-5,5,5,-5,.5,500))}function ma(e,t){la.call(this,e,t),this.type="DirectionalLight",this.position.copy(ge.DefaultUp),this.updateMatrix(),this.target=new ge,this.shadow=new ga}function va(e,t){la.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ya(e,t,n,r){la.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function _a(e,t,n,r){Ca.call(this,e,t,n,r)}function Ta(e,t,n){Ca.call(this,e,t,n)}function Ea(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function Ma(e,t,n,r){Ea.call(this,e,t,n,r)}function ba(e,t,n,r){Ca.call(this,e,t,n,r)}function Aa(e,t,n,r){Ca.call(this,e,t,n,r)}function wa(e,t,n,r){Ca.call(this,e,t,n,r)}function Sa(e,t,n,r){Ea.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function xa(e,t,n,r){Ea.call(this,e,t,n,r)}function Da(e,t,n,r){Ea.call(this,e,t,n,r)}oa.prototype=Object.assign(Object.create(Fi.prototype),{constructor:oa,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new ea(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),u=0;u<s.length;u++){var l=s[u];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Fi.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Fi.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Fi.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new aa[r.type]).fromJSON(r))}return this}}),sa.prototype=Object.assign(Object.create(oa.prototype),{constructor:sa,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new ea(this.currentPoint.clone(),new L(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new na(this.currentPoint.clone(),new L(e,t),new L(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var o=new Ji(this.currentPoint.clone(),new L(e,t),new L(n,r),new L(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=new ia([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,r,i,a)},absarc:function(e,t,n,r,i,a){this.absellipse(e,t,n,n,r,i,a)},ellipse:function(e,t,n,r,i,a,o,s){var u=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+u,t+l,n,r,i,a,o,s)},absellipse:function(e,t,n,r,i,a,o,s){var u=new zi(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);this.currentPoint.copy(c)},copy:function(e){return oa.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=oa.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return oa.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),ua.prototype=Object.assign(Object.create(sa.prototype),{constructor:ua,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){sa.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=sa.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){sa.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new sa).fromJSON(r))}return this}}),la.prototype=Object.assign(Object.create(ge.prototype),{constructor:la,isLight:!0,copy:function(e){return ge.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ge.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ca.prototype=Object.assign(Object.create(la.prototype),{constructor:ca,isHemisphereLight:!0,copy:function(e){return la.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(da.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),ha.prototype=Object.assign(Object.create(da.prototype),{constructor:ha,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*N.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),fa.prototype=Object.assign(Object.create(la.prototype),{constructor:fa,isSpotLight:!0,copy:function(e){return la.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),pa.prototype=Object.assign(Object.create(la.prototype),{constructor:pa,isPointLight:!0,copy:function(e){return la.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),ga.prototype=Object.assign(Object.create(da.prototype),{constructor:ga}),ma.prototype=Object.assign(Object.create(la.prototype),{constructor:ma,isDirectionalLight:!0,copy:function(e){return la.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),va.prototype=Object.assign(Object.create(la.prototype),{constructor:va,isAmbientLight:!0}),ya.prototype=Object.assign(Object.create(la.prototype),{constructor:ya,isRectAreaLight:!0,copy:function(e){return la.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=la.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),_a.prototype=Object.assign(Object.create(Ca.prototype),{constructor:_a,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ta.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Ta,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Ea.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];for(e<s&&(n=2,i=s),o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var u=n+a>>>1;e<t[u]?a=u:n=u+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ea.prototype,{beforeStart_:Ea.prototype.copySampleValue_,afterEnd_:Ea.prototype.copySampleValue_}),Ma.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Ma,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=(n-t)/(r-t),l=s+o;s!==l;s+=4)R.slerpFlat(i,0,a,s-o,a,s,u);return i}}),ba.prototype=Object.assign(Object.create(Ca.prototype),{constructor:ba,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Ma(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Aa.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Aa,ValueTypeName:"color"}),wa.prototype=Object.assign(Object.create(Ca.prototype),{constructor:wa,ValueTypeName:"number"}),Sa.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Sa,DefaultSettings_:{endingStart:C,endingEnd:C},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:i=e,o=2*t-n;break;case 2402:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:a=e,s=2*n-t;break;case 2402:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var u=.5*(n-t),l=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=this._offsetPrev,c=this._offsetNext,d=this._weightPrev,h=this._weightNext,f=(n-t)/(r-t),p=f*f,g=p*f,m=-d*g+2*d*p-d*f,v=(1+d)*g+(-1.5-2*d)*p+(-.5+d)*f+1,y=(-1-h)*g+(1.5+h)*p+.5*f,_=h*g-h*p,T=0;T!==o;++T)i[T]=m*a[l+T]+v*a[u+T]+y*a[s+T]+_*a[c+T];return i}}),xa.prototype=Object.assign(Object.create(Ea.prototype),{constructor:xa,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,u=s-o,l=(n-t)/(r-t),c=1-l,d=0;d!==o;++d)i[d]=a[u+d]*c+a[s+d]*l;return i}}),Da.prototype=Object.assign(Object.create(Ea.prototype),{constructor:Da,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Ia={arraySlice:function(e,t,n){return Ia.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,u=0;u!==t;++u)i[o++]=e[s+u];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}};function Ca(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ia.convertArray(t,this.TimeBufferType),this.values=Ia.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function Na(e,t,n,r){Ca.call(this,e,t,n,r)}function La(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=N.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Oa(e){this.manager=void 0!==e?e:ji,this.textures={}}function Ra(e){this.manager=void 0!==e?e:ji}Object.assign(Ca,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Ca._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];Ia.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Ia.convertArray(e.times,Array),values:Ia.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return wa;case"vector":case"vector2":case"vector3":case"vector4":return Na;case"color":return Aa;case"quaternion":return ba;case"bool":case"boolean":return Ta;case"string":return _a}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Ca.prototype,{constructor:Ca,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new Da(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new xa(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Sa(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Ia.arraySlice(n,i,a),this.values=Ia.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Ia.isTypedArray(r)){o=0;for(var u=r.length;o!==u;++o){var l=r[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=2302===this.getInterpolation(),i=1,a=e.length-1,o=1;o<a;++o){var s=!1,u=e[o];if(u!==e[o+1]&&(1!==o||u!==u[0]))if(r)s=!0;else for(var l=o*n,c=l-n,d=l+n,h=0;h!==n;++h){var f=t[l+h];if(f!==t[c+h]||f!==t[d+h]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];var p=o*n,g=i*n;for(h=0;h!==n;++h)t[g+h]=t[p+h]}++i}}if(a>0){for(e[i]=e[a],p=a*n,g=i*n,h=0;h!==n;++h)t[g+h]=t[p+h];++i}return i!==e.length&&(this.times=Ia.arraySlice(e,0,i),this.values=Ia.arraySlice(t,0,i*n)),this}}),Na.prototype=Object.assign(Object.create(Ca.prototype),{constructor:Na,ValueTypeName:"vector"}),Object.assign(La,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(Ca.parse(n[i]).scale(r));return new La(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,a=n.length;i!==a;++i)t.push(Ca.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],u=[];s.push((o+i-1)%i,o,(o+1)%i),u.push(0,1,0);var l=Ia.getKeyframeOrder(s);s=Ia.sortedArray(s,1,l),u=Ia.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),a.push(new wa(".morphTargetInfluences["+t[o].name+"]",s,u).scale(1/n))}return new La(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],u=s.name.match(i);if(u&&u.length>1){var l=r[d=u[1]];l||(r[d]=l=[]),l.push(s)}}var c=[];for(var d in r)c.push(La.CreateFromMorphTargetSequence(d,r[d],t,n));return c},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Ia.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],u=0;u<s.length;u++){var l=s[u].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var c={},d=0;d<l.length;d++)if(l[d].morphTargets)for(var h=0;h<l[d].morphTargets.length;h++)c[l[d].morphTargets[h]]=-1;for(var f in c){var p=[],g=[];for(h=0;h!==l[d].morphTargets.length;++h){var m=l[d];p.push(m.time),g.push(m.morphTarget===f?1:0)}r.push(new wa(".morphTargetInfluence["+f+"]",p,g))}a=c.length*(o||1)}else{var v=".bones["+t[u].name+"]";n(Na,v+".position",l,"pos",r),n(ba,v+".quaternion",l,"rot",r),n(Na,v+".scale",l,"scl",r)}}return 0===r.length?null:new La(i,a,r)}}),Object.assign(La.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Oa.prototype,{load:function(e,t,n,r){var i=this;new ki(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new Li[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalScale){var i=e.normalScale;!1===Array.isArray(i)&&(i=[i,i]),r.normalScale=(new L).fromArray(i)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r}}),Object.assign(Ra.prototype,{load:function(e,t,n,r){var i=this;new ki(i.manager).load(e,(function(e){t(i.parse(JSON.parse(e)))}),n,r)},parse:function(e){var t=new Pe,n=e.data.index;if(void 0!==n){var r=new Ba[n.type](n.array);t.setIndex(new be(r,1))}var i=e.data.attributes;for(var a in i){var o=i[a];r=new Ba[o.type](o.array),t.addAttribute(a,new be(r,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var u=0,l=s.length;u!==l;++u){var c=s[u];t.addGroup(c.start,c.count,c.materialIndex)}var d=e.data.boundingSphere;if(void 0!==d){var h=new j;void 0!==d.center&&h.fromArray(d.center),t.boundingSphere=new X(h,d.radius)}return t}});var ja,Pa,ka,Ua,Ba={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Fa(){}Fa.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],a=t[n+1];if(i.test(e))return a}return null}},Object.assign(Fa.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(ja={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},Pa=new ne,ka=new Bi,Ua=new Oa,function(e,t,n){var r={};function i(e,i,a,o,s){var u,l=t+e,c=Fa.Handlers.get(l);null!==c?u=c.load(l):(ka.setCrossOrigin(n),u=ka.load(l)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=T),1!==i[1]&&(u.wrapT=T)),void 0!==a&&u.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(u.wrapS=T),"mirror"===o[0]&&(u.wrapS=M),"repeat"===o[1]&&(u.wrapT=T),"mirror"===o[1]&&(u.wrapT=M)),void 0!==s&&(u.anisotropy=s);var d=N.generateUUID();return r[d]=u,d}var a={uuid:N.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var s=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=ja[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=Pa.fromArray(s).getHex();break;case"colorSpecular":a.specular=Pa.fromArray(s).getHex();break;case"colorEmissive":a.emissive=Pa.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=1;break;case"doubleSided":a.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=2),"face"===s&&(a.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),Ua.setTextures(r),Ua.parse(a)})});var za=function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)};function Ga(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:ji,this.withCredentials=!1}Object.assign(Ga.prototype,{load:function(e,t,n,r){var i=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:za(e),o=new ki(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,(function(n){var r=JSON.parse(n),o=r.metadata;if(void 0!==o){var s=o.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var u=i.parse(r,a);t(u.geometry,u.materials)}),n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new Me;return function(e,t){function n(e,t){return e&1<<t}var r,i,a,o,s,u,l,c,d,h,f,p,g,m,v,y,_,T,E,M,b,A,w,S,x,D=e.faces,I=e.vertices,C=e.normals,N=e.colors,O=e.scale,R=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&R++;for(r=0;r<R;r++)t.faceVertexUvs[r]=[]}for(o=0,s=I.length;o<s;)(T=new j).x=I[o++]*O,T.y=I[o++]*O,T.z=I[o++]*O,t.vertices.push(T);for(o=0,s=D.length;o<s;)if(f=n(h=D[o++],0),p=n(h,1),g=n(h,3),m=n(h,4),v=n(h,5),y=n(h,6),_=n(h,7),f){if((M=new ye).a=D[o],M.b=D[o+1],M.c=D[o+3],(b=new ye).a=D[o+1],b.b=D[o+2],b.c=D[o+3],o+=4,p&&(d=D[o++],M.materialIndex=d,b.materialIndex=d),a=t.faces.length,g)for(r=0;r<R;r++)for(S=e.uvs[r],t.faceVertexUvs[r][a]=[],t.faceVertexUvs[r][a+1]=[],i=0;i<4;i++)x=new L(S[2*(c=D[o++])],S[2*c+1]),2!==i&&t.faceVertexUvs[r][a].push(x),0!==i&&t.faceVertexUvs[r][a+1].push(x);if(m&&(l=3*D[o++],M.normal.set(C[l++],C[l++],C[l]),b.normal.copy(M.normal)),v)for(r=0;r<4;r++)l=3*D[o++],w=new j(C[l++],C[l++],C[l]),2!==r&&M.vertexNormals.push(w),0!==r&&b.vertexNormals.push(w);if(y&&(A=N[u=D[o++]],M.color.setHex(A),b.color.setHex(A)),_)for(r=0;r<4;r++)A=N[u=D[o++]],2!==r&&M.vertexColors.push(new ne(A)),0!==r&&b.vertexColors.push(new ne(A));t.faces.push(M),t.faces.push(b)}else{if((E=new ye).a=D[o++],E.b=D[o++],E.c=D[o++],p&&(d=D[o++],E.materialIndex=d),a=t.faces.length,g)for(r=0;r<R;r++)for(S=e.uvs[r],t.faceVertexUvs[r][a]=[],i=0;i<3;i++)x=new L(S[2*(c=D[o++])],S[2*c+1]),t.faceVertexUvs[r][a].push(x);if(m&&(l=3*D[o++],E.normal.set(C[l++],C[l++],C[l])),v)for(r=0;r<3;r++)l=3*D[o++],w=new j(C[l++],C[l++],C[l]),E.vertexNormals.push(w);if(y&&(u=D[o++],E.color.setHex(N[u])),_)for(r=0;r<3;r++)u=D[o++],E.vertexColors.push(new ne(N[u]));t.faces.push(E)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var r=0,i=e.skinWeights.length;r<i;r+=n){var a=e.skinWeights[r],o=n>1?e.skinWeights[r+1]:0,s=n>2?e.skinWeights[r+2]:0,u=n>3?e.skinWeights[r+3]:0;t.skinWeights.push(new Y(a,o,s,u))}if(e.skinIndices)for(r=0,i=e.skinIndices.length;r<i;r+=n){var l=e.skinIndices[r],c=n>1?e.skinIndices[r+1]:0,d=n>2?e.skinIndices[r+2]:0,h=n>3?e.skinIndices[r+3]:0;t.skinIndices.push(new Y(l,c,d,h))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,i=e.morphTargets.length;r<i;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var a=t.morphTargets[r].vertices,o=e.morphTargets[r].vertices,s=0,u=o.length;s<u;s+=3){var l=new j;l.x=o[s]*n,l.y=o[s+1]*n,l.z=o[s+2]*n,a.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var c=t.faces,d=e.morphColors[0].colors;for(r=0,i=c.length;r<i;r++)c[r].color.fromArray(d,3*r)}}(e,n),function(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var i=0;i<r.length;i++){var a=La.parseAnimation(r[i],t.bones);a&&n.push(a)}if(t.morphTargets){var o=La.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(o)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Fa.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}),Object.assign(function(e){this.manager=void 0!==e?e:ji,this.texturePath=""}.prototype,{load:function(e,t,n,r){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var i=this;new ki(i.manager).load(e,(function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")}),n,r)},setTexturePath:function(e){return this.texturePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new ua).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new Ga,i=new Ra,a=0,o=e.length;a<o;a++){var s,u=e[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Mi[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Mi[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Mi[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Mi[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Mi[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Mi[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Mi[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Mi[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Mi[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Mi[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Mi[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Mi[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,d=u.shapes.length;c<d;c++){var h=t[u.shapes[c]];l.push(h)}s=new Mi[u.type](l,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,d=u.shapes.length;c<d;c++)h=t[u.shapes[c]],l.push(h);var f=u.options.extrudePath;void 0!==f&&(u.options.extrudePath=(new aa[f.type]).fromJSON(f)),s=new Mi[u.type](l,u.options);break;case"BufferGeometry":s=i.parse(u);break;case"Geometry":s=r.parse(u,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+u.type+'"');continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),n[u.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new Oa;r.setTextures(t);for(var i=0,a=e.length;i<a;i++){var o=e[i];if("MultiMaterial"===o.type){for(var s=[],u=0;u<o.materials.length;u++)s.push(r.parse(o.materials[u]));n[o.uuid]=s}else n[o.uuid]=r.parse(o)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=La.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),a.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemEnd(e),n.manager.itemError(e)}))}if(void 0!==e&&e.length>0){var a=new Ui(new Ri(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var u=e[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.texturePath+u.url;r[u.uuid]=i(l)}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new H(t[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Ya)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Va),s.wrapT=n(o.wrap[1],Va)),void 0!==o.format&&(s.format=o.format),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,Qa)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,Qa)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),r[o.uuid]=s}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new Wn,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new ne(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new qn(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new Qn(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new zn(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new ve(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new va(e.color,e.intensity);break;case"DirectionalLight":r=new ma(e.color,e.intensity);break;case"PointLight":r=new pa(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new ya(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new fa(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new ca(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry),s=a(e.material);r=o.bones&&o.bones.length>0?new er(o,s):new tt(o,s);break;case"LOD":r=new Zn;break;case"Line":r=new nr(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":r=new ir(i(e.geometry),a(e.material));break;case"LineSegments":r=new rr(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":r=new or(i(e.geometry),a(e.material));break;case"Sprite":r=new Kn(a(e.material));break;case"Group":r=new sr;break;default:r=new ge}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var u=e.children,l=0;l<u.length;l++)r.add(this.parseObject(u[l],t,n));if("LOD"===e.type)for(var c=e.levels,d=0;d<c.length;d++){var h=c[d],f=r.getObjectByProperty("uuid",h.object);void 0!==f&&r.addLevel(f,h.distance)}return r}});var Ha,Ya={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Va={RepeatWrapping:T,ClampToEdgeWrapping:E,MirroredRepeatWrapping:M},Qa={NearestFilter:b,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:A,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};function qa(){this.type="ShapePath",this.color=new ne,this.subPaths=[],this.currentPath=null}function Wa(e){this.type="Font",this.data=e}function Xa(e,t,n,r,i,a){var o=a.glyphs[e]||a.glyphs["?"];if(o){var s,u,l,c,d,h,f,p,g=new qa;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,y=m.length;v<y;)switch(m[v++]){case"m":s=m[v++]*n+r,u=m[v++]*n+i,g.moveTo(s,u);break;case"l":s=m[v++]*n+r,u=m[v++]*n+i,g.lineTo(s,u);break;case"q":l=m[v++]*n+r,c=m[v++]*n+i,d=m[v++]*n+r,h=m[v++]*n+i,g.quadraticCurveTo(d,h,l,c);break;case"b":l=m[v++]*n+r,c=m[v++]*n+i,d=m[v++]*n+r,h=m[v++]*n+i,f=m[v++]*n+r,p=m[v++]*n+i,g.bezierCurveTo(d,h,f,p,l,c)}return{offsetX:o.ha*n,path:g}}}Object.assign(qa.prototype,{moveTo:function(e,t){this.currentPath=new sa,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,a){this.currentPath.bezierCurveTo(e,t,n,r,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new ua;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],u=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],u=-u,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var c=l*(e.x-o.x)-u*(e.y-o.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i=Zr.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,u,l=[];if(1===a.length)return s=a[0],(u=new ua).curves=s.curves,l.push(u),l;var c=!i(a[0].getPoints());c=e?!c:c;var d,h,f=[],p=[],g=[],m=0;p[m]=void 0,g[m]=[];for(var v=0,y=a.length;v<y;v++)o=i(d=(s=a[v]).getPoints()),(o=e?!o:o)?(!c&&p[m]&&m++,p[m]={s:new ua,p:d},p[m].s.curves=s.curves,c&&m++,g[m]=[]):g[m].push({h:s,p:d[0]});if(!p[0])return n(a);if(p.length>1){for(var _=!1,T=[],E=0,M=p.length;E<M;E++)f[E]=[];for(E=0,M=p.length;E<M;E++)for(var b=g[E],A=0;A<b.length;A++){for(var w=b[A],S=!0,x=0;x<p.length;x++)r(w.p,p[x].p)&&(E!==x&&T.push({froms:E,tos:x,hole:A}),S?(S=!1,f[x].push(w)):_=!0);S&&f[E].push(w)}T.length>0&&(_||(g=f))}v=0;for(var D=p.length;v<D;v++){u=p[v].s,l.push(u);for(var I=0,C=(h=g[v]).length;I<C;I++)u.holes.push(h[I].h)}return l}}),Object.assign(Wa.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var r=[],i=function(e,t,n,r){for(var i=Array.from?Array.from(e):String(e).split(""),a=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*a,s=[],u=0,l=0,c=0;c<i.length;c++){var d=i[c];if("\n"===d)u=0,l-=o;else{var h=Xa(d,0,a,u,l,r);u+=h.offsetX,s.push(h.path)}}return s}(e,t,0,this.data),a=0,o=i.length;a<o;a++)Array.prototype.push.apply(r,i[a].toShapes());return r}}),Object.assign(function(e){this.manager=void 0!==e?e:ji}.prototype,{load:function(e,t,n,r){var i=this,a=new ki(this.manager);a.setPath(this.path),a.load(e,(function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)}),n,r)},parse:function(e){return new Wa(e)},setPath:function(e){return this.path=e,this}});var Ka,Za,Ja,$a,eo,to,no,ro,io,ao,oo,so,uo,lo,co,ho,fo,po,go,mo,vo,yo,_o,To=function(){return void 0===Ha&&(Ha=new(window.AudioContext||window.webkitAudioContext)),Ha};function Eo(e){this.manager=void 0!==e?e:ji}function Mo(e,t,n){ge.call(this),this.type="CubeCamera";var r=new zn(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new j(1,0,0)),this.add(r);var i=new zn(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new j(-1,0,0)),this.add(i);var a=new zn(90,1,e,t);a.up.set(0,0,1),a.lookAt(new j(0,1,0)),this.add(a);var o=new zn(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new j(0,-1,0)),this.add(o);var s=new zn(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new j(0,0,1)),this.add(s);var u=new zn(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new j(0,0,-1)),this.add(u);var l={format:S,magFilter:A,minFilter:A};this.renderTarget=new Q(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,r,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,o,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,e.render(t,u,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,a=0;a<6;a++)i.activeCubeFace=a,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function bo(){ge.call(this),this.type="AudioListener",this.context=To(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Ao(e){ge.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function wo(e){Ao.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function So(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function xo(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Do(e,t,n){var r=n||Io.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function Io(e,t,n){this.path=t,this.parsedPath=n||Io.parseTrackName(t),this.node=Io.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Co(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),o={endingStart:C,endingEnd:C},s=0;s!==i;++s){var u=r[s].createInterpolant(null);a[s]=u,u.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function No(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Lo(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Oo(){Pe.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ro(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function jo(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Po(e,t,n){jo.call(this,e,t),this.meshPerAttribute=n||1}function ko(e,t,n){be.call(this,e,t),this.meshPerAttribute=n||1}function Uo(e,t){return e.distance-t.distance}function Bo(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,a=0,o=i.length;a<o;a++)Bo(i[a],t,n,!0)}function Fo(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function zo(e,t){this.min=void 0!==e?e:new L(1/0,1/0),this.max=void 0!==t?t:new L(-1/0,-1/0)}function Go(e){ge.call(this),this.material=e,this.render=function(){}}function Ho(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var u=new Pe,l=new Ne(2*o*3,3);u.addAttribute("position",l),rr.call(this,u,new tr({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Yo(e,t){ge.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Pe,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Ne(r,3));var u=new tr({fog:!1});this.cone=new rr(n,u),this.add(this.cone),this.update()}function Vo(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new Pe,r=[],i=[],a=new ne(0,0,1),o=new ne(0,1,0),s=0;s<t.length;s++){var u=t[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.addAttribute("position",new Ne(r,3)),n.addAttribute("color",new Ne(i,3));var l=new tr({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0});rr.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Qo(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new si(t,4,2),i=new Ke({wireframe:!0,fog:!1});tt.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function qo(e,t){ge.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new tr({fog:!1}),r=new Pe;r.addAttribute("position",new be(new Float32Array(15),3)),this.line=new nr(r,n),this.add(this.line),this.update()}function Wo(e,t,n){ge.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new _r(t);r.rotateY(.5*Math.PI),this.material=new Ke({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2);var i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.addAttribute("color",new be(a,3)),this.add(new tt(r,this.material)),this.update()}function Xo(e,t,n,r){e=e||10,t=t||10,n=new ne(void 0!==n?n:4473924),r=new ne(void 0!==r?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],u=[],l=0,c=0,d=-o;l<=t;l++,d+=a){s.push(-o,0,d,o,0,d),s.push(d,0,-o,d,0,o);var h=l===i?n:r;h.toArray(u,c),c+=3,h.toArray(u,c),c+=3,h.toArray(u,c),c+=3,h.toArray(u,c),c+=3}var f=new Pe;f.addAttribute("position",new Ne(s,3)),f.addAttribute("color",new Ne(u,3));var p=new tr({vertexColors:2});rr.call(this,f,p)}function Ko(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new ne(void 0!==i?i:4473924),a=new ne(void 0!==a?a:8947848);var o,s,u,l,c,d,h,f=[],p=[];for(l=0;l<=t;l++)u=l/t*(2*Math.PI),o=Math.sin(u)*e,s=Math.cos(u)*e,f.push(0,0,0),f.push(o,0,s),h=1&l?i:a,p.push(h.r,h.g,h.b),p.push(h.r,h.g,h.b);for(l=0;l<=n;l++)for(h=1&l?i:a,d=e-e/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),o=Math.sin(u)*d,s=Math.cos(u)*d,f.push(o,0,s),p.push(h.r,h.g,h.b),u=(c+1)/r*(2*Math.PI),o=Math.sin(u)*d,s=Math.cos(u)*d,f.push(o,0,s),p.push(h.r,h.g,h.b);var g=new Pe;g.addAttribute("position",new Ne(f,3)),g.addAttribute("color",new Ne(p,3));var m=new tr({vertexColors:2});rr.call(this,g,m)}function Zo(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var u=new Pe,l=new Ne(2*o*3,3);u.addAttribute("position",l),rr.call(this,u,new tr({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Jo(e,t,n){ge.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new Pe;r.addAttribute("position",new Ne([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new tr({fog:!1});this.lightPlane=new nr(r,i),this.add(this.lightPlane),(r=new Pe).addAttribute("position",new Ne([0,0,0,0,0,1],3)),this.targetLine=new nr(r,i),this.add(this.targetLine),this.update()}function $o(e){var t=new Pe,n=new tr({color:16777215,vertexColors:1}),r=[],i=[],a={},o=new ne(16755200),s=new ne(16711680),u=new ne(43775),l=new ne(16777215),c=new ne(3355443);function d(e,t,n){h(e,n),h(t,n)}function h(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}d("n1","n2",o),d("n2","n4",o),d("n4","n3",o),d("n3","n1",o),d("f1","f2",o),d("f2","f4",o),d("f4","f3",o),d("f3","f1",o),d("n1","f1",o),d("n2","f2",o),d("n3","f3",o),d("n4","f4",o),d("p","n1",s),d("p","n2",s),d("p","n3",s),d("p","n4",s),d("u1","u2",u),d("u2","u3",u),d("u3","u1",u),d("c","t",l),d("p","c",c),d("cn1","cn2",c),d("cn3","cn4",c),d("cf1","cf2",c),d("cf3","cf4",c),t.addAttribute("position",new Ne(r,3)),t.addAttribute("color",new Ne(i,3)),rr.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function es(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Pe;i.setIndex(new be(n,1)),i.addAttribute("position",new be(r,3)),rr.call(this,i,new tr({color:t})),this.matrixAutoUpdate=!1,this.update()}function ts(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Pe;i.setIndex(new be(r,1)),i.addAttribute("position",new Ne([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),rr.call(this,i,new tr({color:n})),this.geometry.computeBoundingSphere()}function ns(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new Pe;i.addAttribute("position",new Ne([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),nr.call(this,i,new tr({color:r}));var a=new Pe;a.addAttribute("position",new Ne([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new tt(a,new Ke({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function rs(e,t,n,r,i,a){ge.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===mo&&((mo=new Pe).addAttribute("position",new Ne([0,0,0,0,1,0],3)),(vo=new vi(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new nr(mo,new tr({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new tt(vo,new Ke({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}function is(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Pe;n.addAttribute("position",new Ne(t,3)),n.addAttribute("color",new Ne([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new tr({vertexColors:2});rr.call(this,n,r)}function as(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Wi.call(this,e),this.type="catmullrom"}Object.assign(Eo.prototype,{load:function(e,t,n,r){var i=new ki(this.manager);i.setResponseType("arraybuffer"),i.load(e,(function(e){To().decodeAudioData(e,(function(e){t(e)}))}),n,r)}}),Object.assign(function(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}.prototype,{update:(io=new O,ao=new O,function(e){if(Ka!==this||Za!==e.focus||Ja!==e.fov||$a!==e.aspect*this.aspect||eo!==e.near||to!==e.far||no!==e.zoom||ro!==this.eyeSep){Ka=this,Za=e.focus,Ja=e.fov,$a=e.aspect*this.aspect,eo=e.near,to=e.far,no=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=(ro=this.eyeSep/2)*eo/Za,a=eo*Math.tan(N.DEG2RAD*Ja*.5)/no;ao.elements[12]=-ro,io.elements[12]=ro,t=-a*$a+i,n=a*$a+i,r.elements[0]=2*eo/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),t=-a*$a-i,n=a*$a-i,r.elements[0]=2*eo/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(ao),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(io)})}),Mo.prototype=Object.create(ge.prototype),Mo.prototype.constructor=Mo,bo.prototype=Object.assign(Object.create(ge.prototype),{constructor:bo,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new j,t=new R,n=new j,r=new j;return function(i){ge.prototype.updateMatrixWorld.call(this,i);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(r.x,this.context.currentTime),a.forwardY.setValueAtTime(r.y,this.context.currentTime),a.forwardZ.setValueAtTime(r.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z,o.x,o.y,o.z))}}()}),Ao.prototype=Object.assign(Object.create(ge.prototype),{constructor:Ao,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),wo.prototype=Object.assign(Object.create(Ao.prototype),{constructor:wo,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new j;return function(t){ge.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(So.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(xo.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(n,r,o,1-i,t)}for(var s=t,u=t+t;s!==u;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){R.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}}),Object.assign(Do.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Io,{Composite:Do,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Io.Composite(e,t,n):new Io(e,t,n)},sanitizeNodeName:(go=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(go,"")}),parseTrackName:(oo="[^\\[\\]\\.:\\/]",so="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",uo=/((?:WC+[\/:])*)/.source.replace("WC",oo),lo=/(WCOD+)?/.source.replace("WCOD",so),co=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",oo),ho=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",oo),fo=new RegExp("^"+uo+lo+co+ho+"$"),po=["material","materials","bones"],function(e){var t=fo.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==po.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function e(n){for(var r=0;r<n.length;r++){var i=n[r];if(i.name===t||i.uuid===t)return i;var a=e(i.children);if(a)return a}return null}(e.children);if(r)return r}return null}}),Object.assign(Io.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=Io.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[r];if(void 0!==s){var u=this.Versioning.None;void 0!==e.needsUpdate?(u=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{var c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Io.prototype,{_getValue_unbound:Io.prototype.getValue,_setValue_unbound:Io.prototype.setValue}),Object.assign(function(){this.uuid=N.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var d=arguments[l],h=d.uuid,f=r[h];if(void 0===f){f=t++,r[h]=f,e.push(d);for(var p=0,g=s;p!==g;++p)o[p].push(new Io(d,i[p],a[p]))}else if(f<n){u=e[f];var m=--n,v=e[m];for(r[v.uuid]=f,e[f]=v,r[h]=m,e[m]=d,p=0,g=s;p!==g;++p){var y=o[p],_=y[m],T=y[f];y[f]=_,void 0===T&&(T=new Io(d,i[p],a[p])),y[m]=T}}else e[f]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,l=n[u];if(void 0!==l&&l>=t){var c=t++,d=e[c];n[d.uuid]=l,e[l]=d,n[u]=c,e[c]=s;for(var h=0,f=i;h!==f;++h){var p=r[h],g=p[c],m=p[l];p[l]=g,p[c]=m}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o],l=u.uuid,c=r[l];if(void 0!==c)if(delete r[l],c<n){var d=--n,h=e[d],f=e[y=--t];r[h.uuid]=c,e[c]=h,r[f.uuid]=d,e[d]=f,e.pop();for(var p=0,g=a;p!==g;++p){var m=(_=i[p])[d],v=_[y];_[c]=m,_[d]=v,_.pop()}}else{var y;for(r[(f=e[y=--t]).uuid]=c,e[c]=f,e.pop(),p=0,g=a;p!==g;++p){var _;(_=i[p])[c]=_[y],_.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(c);for(var d=l,h=s.length;d!==h;++d){var f=s[d];c[d]=new Io(f,e,t)}return c},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}),Object.assign(Co.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,u=a.sampleValues;return s[0]=i,s[1]=i+n,u[0]=e/o,u[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var u=this._interpolants,l=this._propertyBindings,c=0,d=u.length;c!==d;++c)u[c].evaluate(o),l[c].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,i=this._loopCount;if(2200===r){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=2202===r;if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=2401,r.endingEnd=2401):(r.endingStart=e?this.zeroSlopeAtStart?2401:C:2402,r.endingEnd=t?this.zeroSlopeAtEnd?2401:C:2402)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}),No.prototype=Object.assign(Object.create(d.prototype),{constructor:No,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var d=r[c],h=d.name,f=l[h];if(void 0!==f)a[c]=f;else{if(void 0!==(f=a[c])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,h));continue}var p=t&&t._propertyBindings[c].binding.parsedPath;++(f=new xo(Io.create(n,h,p),d.ValueTypeName,d.getValueSize())).referenceCount,this._addInactiveBinding(f,s,h),a[c]=f}o[c].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,u=s[s.length-1],l=e._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],a=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],u=e._cacheIndex;s._cacheIndex=u,t[u]=s,t.pop(),delete o[i];e:{for(var l in o)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new xa(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?La.findByName(n,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var u=o.actionByRoot[r];if(void 0!==u)return u;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new Co(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,a,r),l},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?La.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o)t[o]._update(r,e,i,a);var s=this._bindings,u=this._nActiveBindings;for(o=0;o!==u;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var l=u._cacheIndex,c=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,t[l]=c,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Lo.prototype.clone=function(){return new Lo(void 0===this.value.clone?this.value:this.value.clone())},Oo.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Oo,isInstancedBufferGeometry:!0,copy:function(e){return Pe.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Ro.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ro.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),Object.defineProperty(jo.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(jo.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Po.prototype=Object.assign(Object.create(jo.prototype),{constructor:Po,isInstancedInterleavedBuffer:!0,copy:function(e){return jo.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),ko.prototype=Object.assign(Object.create(be.prototype),{constructor:ko,isInstancedBufferAttribute:!0,copy:function(e){return be.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(function(e,t,n,r){this.ray=new Je(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return Bo(e,this,r,t),r.sort(Uo),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)Bo(e[i],this,r,t);return r.sort(Uo),r}}),Object.assign(function(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Fo.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(N.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(function(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(zo.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new L;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new L),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new L),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new L),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new L),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new L;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Go.prototype=Object.create(ge.prototype),Go.prototype.constructor=Go,Go.prototype.isImmediateRenderObject=!0,Ho.prototype=Object.create(rr.prototype),Ho.prototype.constructor=Ho,Ho.prototype.update=function(){var e=new j,t=new j,n=new P;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,u=o.faces,l=0,c=0,d=u.length;c<d;c++)for(var h=u[c],f=0,p=h.vertexNormals.length;f<p;f++){var g=s[h[r[f]]],m=h.vertexNormals[f];e.copy(g).applyMatrix4(i),t.copy(m).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}else if(o&&o.isBufferGeometry){var v=o.attributes.position,y=o.attributes.normal;for(l=0,f=0,p=v.count;f<p;f++)e.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(i),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}a.needsUpdate=!0}}(),Yo.prototype=Object.create(ge.prototype),Yo.prototype.constructor=Yo,Yo.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Yo.prototype.update=function(){var e=new j,t=new j;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*Math.tan(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Vo.prototype=Object.create(rr.prototype),Vo.prototype.constructor=Vo,Vo.prototype.updateMatrixWorld=function(){var e=new j,t=new O,n=new O;return function(r){var i=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,u=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(u,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(u+1,e.x,e.y,e.z),u+=2)}a.getAttribute("position").needsUpdate=!0,ge.prototype.updateMatrixWorld.call(this,r)}}(),Qo.prototype=Object.create(tt.prototype),Qo.prototype.constructor=Qo,Qo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Qo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},qo.prototype=Object.create(ge.prototype),qo.prototype.constructor=qo,qo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},qo.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Wo.prototype=Object.create(ge.prototype),Wo.prototype.constructor=Wo,Wo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Wo.prototype.update=function(){var e=new j,t=new ne,n=new ne;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?t:n;i.setXYZ(a,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Xo.prototype=Object.create(rr.prototype),Xo.prototype.constructor=Xo,Ko.prototype=Object.create(rr.prototype),Ko.prototype.constructor=Ko,Zo.prototype=Object.create(rr.prototype),Zo.prototype.constructor=Zo,Zo.prototype.update=function(){var e=new j,t=new j,n=new P;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,u=0,l=0,c=s.length;l<c;l++){var d=s[l],h=d.normal;e.copy(o[d.a]).add(o[d.b]).add(o[d.c]).divideScalar(3).applyMatrix4(r),t.copy(h).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(u,e.x,e.y,e.z),u+=1,i.setXYZ(u,t.x,t.y,t.z),u+=1}i.needsUpdate=!0}}(),Jo.prototype=Object.create(ge.prototype),Jo.prototype.constructor=Jo,Jo.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Jo.prototype.update=function(){var e=new j,t=new j,n=new j;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),$o.prototype=Object.create(rr.prototype),$o.prototype.constructor=$o,$o.prototype.update=function(){var e,t,n=new j,r=new me;function i(i,a,o,s){n.set(a,o,s).unproject(r);var u=t[i];if(void 0!==u)for(var l=e.getAttribute("position"),c=0,d=u.length;c<d;c++)l.setXYZ(u[c],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),es.prototype=Object.create(rr.prototype),es.prototype.constructor=es,es.prototype.update=function(){var e=new W;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),es.prototype.setFromObject=function(e){return this.object=e,this.update(),this},ts.prototype=Object.create(rr.prototype),ts.prototype.constructor=ts,ts.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ge.prototype.updateMatrixWorld.call(this,e))},ns.prototype=Object.create(nr.prototype),ns.prototype.constructor=ns,ns.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?1:0,this.lookAt(this.plane.normal),ge.prototype.updateMatrixWorld.call(this,e)},rs.prototype=Object.create(ge.prototype),rs.prototype.constructor=rs,rs.prototype.setDirection=(_o=new j,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(_o.set(e.z,0,-e.x).normalize(),yo=Math.acos(e.y),this.quaternion.setFromAxisAngle(_o,yo))}),rs.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},rs.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},is.prototype=Object.create(rr.prototype),is.prototype.constructor=is,Fi.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Fi.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(oa.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Me,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new j(i.x,i.y,i.z||0))}return t}}),Object.assign(sa.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),as.prototype=Object.create(Wi.prototype),Object.assign(as.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Xo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Vo.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Fa.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),za(e)}}),Object.assign(zo.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(W.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),$e.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(N,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),N.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),N.ceilPowerOfTwo(e)}}),Object.assign(P.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(O.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new j),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}}),K.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},R.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Je.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(et.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(et,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),et.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),et.getNormal(e,t,n,r)}}),Object.assign(ua.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ei(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hi(this,e)}}),Object.assign(L.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(j.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Y.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Me.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(ge.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(ge.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Zn.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Jn.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Fi.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),zn.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(la.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(be.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Pe.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Pe.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(ti.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Lo.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Xe.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ne}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(xi.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Ze.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Vn.prototype,{animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(Vn.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(jn.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(V.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Hn.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Ao.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new Eo).load(e,(function(e){t.setBuffer(e)})),this},So.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Mo.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var os=function(e,t){var n,r,i=this,a=new O,o=null;"VRFrameData"in window&&(o=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then((function(e){r=e,e.length>0?n=e[0]:t&&t("VR input not available.")})).catch((function(){console.warn("VRControls: Unable to get VR Displays")})),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return n},this.setVRDisplay=function(e){n=e},this.getVRDisplays=function(){return console.warn("VRControls: getVRDisplays() is being deprecated."),r},this.getStandingMatrix=function(){return a},this.update=function(){var t;n&&(n.getFrameData?(n.getFrameData(o),t=o.pose):n.getPose&&(t=n.getPose()),null!==t.orientation&&e.quaternion.fromArray(t.orientation),null!==t.position?e.position.fromArray(t.position):e.position.set(0,0,0),this.standing&&(n.stageParameters?(e.updateMatrix(),a.fromArray(n.stageParameters.sittingToStandingTransform),e.applyMatrix(a)):e.position.setY(e.position.y+this.userHeight)),e.position.multiplyScalar(i.scale))},this.dispose=function(){n=null}},ss=function(e,t){var n,r,i,a,o=new j,s=new j,u=new O,l=new O,c=new O,d=null;"VRFrameData"in window&&(d=new window.VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then((function(e){r=e,e.length>0?n=e[0]:t&&t("HMD not available")})).catch((function(){console.warn("VREffect: Unable to get VR Displays")})),this.isPresenting=!1;var h=this,f=e.getSize(),p=!1,g=e.getPixelRatio();this.getVRDisplay=function(){return n},this.setVRDisplay=function(e){n=e},this.getVRDisplays=function(){return console.warn("VREffect: getVRDisplays() is being deprecated."),r},this.setSize=function(t,r,i){if(f={width:t,height:r},p=i,h.isPresenting){var a=n.getEyeParameters("left");e.setPixelRatio(1),e.setSize(2*a.renderWidth,a.renderHeight,!1)}else e.setPixelRatio(g),e.setSize(t,r,i)};var m=e.domElement,v=[0,0,.5,1],y=[.5,0,.5,1];function _(){var t=h.isPresenting;if(h.isPresenting=void 0!==n&&n.isPresenting,h.isPresenting){var r=n.getEyeParameters("left"),i=r.renderWidth,a=r.renderHeight;t||(g=e.getPixelRatio(),f=e.getSize(),e.setPixelRatio(1),e.setSize(2*i,a,!1))}else t&&(e.setPixelRatio(g),e.setSize(f.width,f.height,p))}window.addEventListener("vrdisplaypresentchange",_,!1),this.setFullScreen=function(e){return new Promise((function(t,r){void 0!==n?h.isPresenting!==e?t(e?n.requestPresent([{source:m}]):n.exitPresent()):t():r(new Error("No VR hardware found."))}))},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(e){return void 0!==n?n.requestAnimationFrame(e):window.requestAnimationFrame(e)},this.cancelAnimationFrame=function(e){void 0!==n?n.cancelAnimationFrame(e):window.cancelAnimationFrame(e)},this.submitFrame=function(){void 0!==n&&h.isPresenting&&n.submitFrame()},this.autoSubmitFrame=!0;var T=new zn;T.layers.enable(1);var E=new zn;E.layers.enable(2),this.render=function(t,r,f,p){if(n&&h.isPresenting){var g=t.autoUpdate;g&&(t.updateMatrixWorld(),t.autoUpdate=!1),Array.isArray(t)&&(console.warn("VREffect.render() no longer supports arrays. Use object.layers instead."),t=t[0]);var m,_,w=e.getSize(),S=n.getLayers();if(S.length){var x=S[0];m=null!==x.leftBounds&&4===x.leftBounds.length?x.leftBounds:v,_=null!==x.rightBounds&&4===x.rightBounds.length?x.rightBounds:y}else m=v,_=y;if(i={x:Math.round(w.width*m[0]),y:Math.round(w.height*m[1]),width:Math.round(w.width*m[2]),height:Math.round(w.height*m[3])},a={x:Math.round(w.width*_[0]),y:Math.round(w.height*_[1]),width:Math.round(w.width*_[2]),height:Math.round(w.height*_[3])},f?(e.setRenderTarget(f),f.scissorTest=!0):(e.setRenderTarget(null),e.setScissorTest(!0)),(e.autoClear||p)&&e.clear(),null===r.parent&&r.updateMatrixWorld(),r.matrixWorld.decompose(T.position,T.quaternion,T.scale),E.position.copy(T.position),E.quaternion.copy(T.quaternion),E.scale.copy(T.scale),n.getFrameData)n.depthNear=r.near,n.depthFar=r.far,n.getFrameData(d),T.projectionMatrix.elements=d.leftProjectionMatrix,E.projectionMatrix.elements=d.rightProjectionMatrix,function(e){e.pose.orientation?(M.fromArray(e.pose.orientation),u.makeRotationFromQuaternion(M)):u.identity(),e.pose.position&&(b.fromArray(e.pose.position),u.setPosition(b)),l.fromArray(e.leftViewMatrix),l.multiply(u),c.fromArray(e.rightViewMatrix),c.multiply(u),l.getInverse(l),c.getInverse(c)}(d),T.updateMatrix(),T.matrix.multiply(l),T.matrix.decompose(T.position,T.quaternion,T.scale),E.updateMatrix(),E.matrix.multiply(c),E.matrix.decompose(E.position,E.quaternion,E.scale);else{var D=n.getEyeParameters("left"),I=n.getEyeParameters("right");T.projectionMatrix=A(D.fieldOfView,!0,r.near,r.far),E.projectionMatrix=A(I.fieldOfView,!0,r.near,r.far),o.fromArray(D.offset),s.fromArray(I.offset),T.translateOnAxis(o,T.scale.x),E.translateOnAxis(s,E.scale.x)}return f?(f.viewport.set(i.x,i.y,i.width,i.height),f.scissor.set(i.x,i.y,i.width,i.height)):(e.setViewport(i.x,i.y,i.width,i.height),e.setScissor(i.x,i.y,i.width,i.height)),e.render(t,T,f,p),f?(f.viewport.set(a.x,a.y,a.width,a.height),f.scissor.set(a.x,a.y,a.width,a.height)):(e.setViewport(a.x,a.y,a.width,a.height),e.setScissor(a.x,a.y,a.width,a.height)),e.render(t,E,f,p),f?(f.viewport.set(0,0,w.width,w.height),f.scissor.set(0,0,w.width,w.height),f.scissorTest=!1,e.setRenderTarget(null)):(e.setViewport(0,0,w.width,w.height),e.setScissorTest(!1)),g&&(t.autoUpdate=!0),void(h.autoSubmitFrame&&h.submitFrame())}e.render(t,r,f,p)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",_,!1)};var M=new R,b=new j;function A(e,t,n,r){var i=Math.PI/180;return function(e,t,n,r){n=void 0===n?.01:n,r=void 0===r?1e4:r;var i=(t=void 0===t||t)?-1:1,a=new O,o=a.elements,s=function(e){var t=2/(e.leftTan+e.rightTan),n=2/(e.upTan+e.downTan);return{scale:[t,n],offset:[(e.leftTan-e.rightTan)*t*.5,(e.upTan-e.downTan)*n*.5]}}(e);return o[0]=s.scale[0],o[1]=0,o[2]=s.offset[0]*i,o[3]=0,o[4]=0,o[5]=s.scale[1],o[6]=-s.offset[1]*i,o[7]=0,o[8]=0,o[9]=0,o[10]=r/(n-r)*-i,o[11]=r*n/(n-r),o[12]=0,o[13]=0,o[14]=i,o[15]=0,a.transpose(),a}({upTan:Math.tan(e.upDegrees*i),downTan:Math.tan(e.downDegrees*i),leftTan:Math.tan(e.leftDegrees*i),rightTan:Math.tan(e.rightDegrees*i)},t,n,r)}},us=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new j,this.currentDistance=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:0,ZOOM:1,PAN:2},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return c.phi},this.getAzimuthalAngle=function(){return c.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),u=s.NONE},this.update=function(){var t=new j,a=(new R).setFromUnitVectors(e.up,new j(0,1,0)),o=a.clone().inverse(),p=new j,g=new R;return function(){var e=n.object.position;if(t.copy(e).sub(n.target),t.applyQuaternion(a),c.setFromVector3(t),n.autoRotate&&u===s.NONE&&n.rotateLeft(2*Math.PI/60/60*n.autoRotateSpeed),c.theta+=d.theta,c.phi+=d.phi,c.theta=Math.max(n.minAzimuthAngle,Math.min(n.maxAzimuthAngle,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),n.currentDistance>=0){var m=n.currentDistance;c.radius!=m&&(c.radius=n.currentDistance,f=!0)}else{var v=75+.06*n.currentDistance;n.object.fov!=v&&(n.object.fov=v,n.object.updateProjectionMatrix(),f=!0)}return n.target.add(h),t.setFromSpherical(c),t.applyQuaternion(o),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(d.theta*=1-n.dampingFactor,d.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(d.set(0,0,0),h.set(0,0,0)),!!(f||p.distanceToSquared(n.object.position)>l||8*(1-g.dot(n.object.quaternion))>l)&&(f?n.dispatchEvent(i):n.dispatchEvent(r),p.copy(n.object.position),g.copy(n.object.quaternion),f=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",z,!1),n.domElement.removeEventListener("mousedown",I,!1),n.domElement.removeEventListener("wheel",P,!1),n.domElement.removeEventListener("touchstart",U,!1),n.domElement.removeEventListener("touchend",F,!1),n.domElement.removeEventListener("touchmove",B,!1),document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",O,!1),window.removeEventListener("keydown",k,!1)};var n=this,r={type:"change"},i={type:"zoom"},a={type:"start"},o={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},u=s.NONE,l=1e-6,c=new Fo,d=new Fo,h=new j,f=!1,p=new L,g=new L,m=new L,v=new L,y=new L,_=new L,T=new L,E=new L,M=new L;function b(){return Math.pow(.95,n.zoomSpeed)}n.rotateLeft=function(e){d.theta-=e},n.rotateUp=function(e){d.phi-=e};var A=function(){var e=new j;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),h.add(e)}}(),w=function(){var e=new j;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),h.add(e)}}(),S=function(){var e=new j;return function(t,r){var i=n.domElement===document?n.domElement.body:n.domElement;if(n.object.isPerspectiveCamera){var a=n.object.position;e.copy(a).sub(n.target);var o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),A(2*t*o/i.clientHeight,n.object.matrix),w(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(A(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),w(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function x(e){n.object.isPerspectiveCamera||(n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1))}function D(e){n.object.isPerspectiveCamera||(n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1))}function I(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;!function(e){p.set(e.clientX,e.clientY)}(e),u=s.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;!function(e){T.set(e.clientX,e.clientY)}(e),u=s.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY)}(e),u=s.PAN}u!==s.NONE&&(document.addEventListener("mousemove",C,!1),document.addEventListener("mouseup",O,!1),n.dispatchEvent(a))}}function C(e){if(!1!==n.enabled)switch(e.preventDefault(),u){case s.ROTATE:if(!1===n.enableRotate)return;!function(e){g.set(e.clientX,e.clientY),m.subVectors(g,p).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;n.rotateLeft(2*Math.PI*m.x/t.clientHeight),n.rotateUp(2*Math.PI*m.y/t.clientHeight),p.copy(g),n.update()}(e);break;case s.DOLLY:if(!1===n.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),M.subVectors(E,T),M.y>0?x(b()):M.y<0&&D(b()),T.copy(E),n.update()}(e);break;case s.PAN:if(!1===n.enablePan)return;!function(e){y.set(e.clientX,e.clientY),_.subVectors(y,v).multiplyScalar(n.panSpeed),S(_.x,_.y),v.copy(y),n.update()}(e)}}function O(e){!1!==n.enabled&&(document.removeEventListener("mousemove",C,!1),document.removeEventListener("mouseup",O,!1),n.dispatchEvent(o),u=s.NONE)}function P(e){!1===n.enabled||!1===n.enableZoom||u!==s.NONE&&u!==s.ROTATE||(e.preventDefault(),e.stopPropagation(),n.dispatchEvent(a),function(e){n.currentDistance+=.05*e.deltaY,n.currentDistance=N.clamp(n.currentDistance,n.minDistance,n.maxDistance),e.deltaY<0?D(b()):e.deltaY>0&&x(b()),n.update()}(e),n.dispatchEvent(o))}function k(e){!1!==n.enabled&&!1!==n.enableKeys&&!1!==n.enablePan&&function(e){switch(e.keyCode){case n.keys.UP:S(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:S(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:S(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:S(-n.keyPanSpeed,0),n.update()}}(e)}function U(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===n.enableRotate)return;!function(e){p.set(e.touches[0].pageX,e.touches[0].pageY)}(e),u=s.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);T.set(0,i)}if(n.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);v.set(a,o)}}(e),u=s.TOUCH_DOLLY_PAN;break;default:u=s.NONE}u!==s.NONE&&n.dispatchEvent(a)}}function B(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(u!==s.TOUCH_ROTATE)return;!function(e){g.set(e.touches[0].pageX,e.touches[0].pageY),m.subVectors(g,p).multiplyScalar(n.rotateSpeed);var t=n.domElement===document?n.domElement.body:n.domElement;n.rotateLeft(2*Math.PI*m.x/t.clientHeight),n.rotateUp(2*Math.PI*m.y/t.clientHeight),p.copy(g),n.update()}(e);break;case 2:if(!1===n.enableZoom&&!1===n.enablePan)return;if(u!==s.TOUCH_DOLLY_PAN)return;!function(e){if(n.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,i=Math.sqrt(t*t+r*r);E.set(0,i),M.set(0,Math.pow(E.y/T.y,n.zoomSpeed)),x(M.y),T.copy(E)}if(n.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);y.set(a,o),_.subVectors(y,v).multiplyScalar(n.panSpeed),S(_.x,_.y),v.copy(y)}n.update()}(e);break;default:u=s.NONE}}function F(e){!1!==n.enabled&&(n.dispatchEvent(o),u=s.NONE)}function z(e){!1!==n.enabled&&e.preventDefault()}n.domElement.addEventListener("mousedown",I,!1),n.domElement.addEventListener("wheel",P,!1),n.domElement.addEventListener("touchstart",U,!1),n.domElement.addEventListener("touchend",F,!1),n.domElement.addEventListener("touchmove",B,!1),window.addEventListener("keydown",k,!1),this.update()};(us.prototype=Object.create(d.prototype)).constructor=us,Object.defineProperties(us.prototype,{center:{get:function(){return console.warn("OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var ls,cs=function(e){var t=this;this.object=e,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n=function(e){t.deviceOrientation=e},r=function(){t.screenOrientation=window.orientation||0},i=function(){var e=new j(0,0,1),t=new ue,n=new R,r=new R(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(i,a,o,s,u){t.set(o,a,-s,"YXZ"),i.setFromEuler(t),i.multiply(r),i.multiply(n.setFromAxisAngle(e,-u))}}();this.connect=function(){r(),window.addEventListener("orientationchange",r,!1),window.addEventListener("deviceorientation",n,!1),t.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",r,!1),window.removeEventListener("deviceorientation",n,!1),t.enabled=!1},this.update=function(){if(!1!==t.enabled){var e=t.deviceOrientation;if(e){var n=e.alpha?N.degToRad(e.alpha)+t.alphaOffset:0,r=e.beta?N.degToRad(e.beta):0,a=e.gamma?N.degToRad(e.gamma):0,o=t.screenOrientation?N.degToRad(t.screenOrientation):0;i(t.object.quaternion,n,r,a,o)}}},this.dispose=function(){t.disconnect()},this.connect()},ds=function(){function e(e){this.object=e.camera,this.domElement=e.canvas,this.orbit=new us(this.object,this.domElement),this.speed=.5,this.orbit.target.set(0,1,-1),this.orbit.enableZoom=!0,this.orbit.enablePan=!1,this.orbit.rotateSpeed=-this.speed,e.orientation&&(this.orientation=new cs(this.object)),e.halfView&&(this.orbit.minAzimuthAngle=-Math.PI/4,this.orbit.maxAzimuthAngle=Math.PI/4)}var t=e.prototype;return t.update=function(){if(this.orientation){this.orientation.update();var e=this.orientation.object.quaternion,t=function(e,t,n,r){var i=e*t+n*r;if(i>.499){var a=2*Math.atan2(e,r);return new j(Math.PI/2,0,a)}if(i<-.499){var o=-2*Math.atan2(e,r);return new j(-Math.PI/2,0,o)}var s=e*e,u=t*t,l=n*n,c=Math.atan2(2*t*r-2*e*n,1-2*u-2*l);return new j(Math.asin(2*i),Math.atan2(2*e*r-2*t*n,1-2*s-2*l),c)}(e.x,e.y,e.z,e.w);void 0===this.lastAngle_&&(this.lastAngle_=t),this.orbit.rotateLeft((this.lastAngle_.z-t.z)*(1+this.speed)),this.orbit.rotateUp((this.lastAngle_.y-t.y)*(1+this.speed)),this.lastAngle_=t}this.orbit.update()},t.dispose=function(){this.orbit.dispose(),this.orientation&&this.orientation.dispose()},e}(),hs=((ls=t.createElement("video")).crossOrigin="anonymous",ls.hasAttribute("crossorigin")),fs=["360","360_LR","360_TB","360_CUBE","EAC","EAC_LR","NONE","AUTO","Sphere","Cube","equirectangular","180"],ps=function(e){if(e){if(e=e.toString().trim(),/sphere/i.test(e))return"360";if(/cube/i.test(e))return"360_CUBE";if(/equirectangular/i.test(e))return"360";for(var t=0;t<fs.length;t++)if(new RegExp("^"+fs[t]+"$","i").test(e))return fs[t]}},gs=function(e){function t(t,r){var i;return(i=e.call(this)||this).player=t,i.canvas=r,i.onMoveEnd=n.bind(a(i),i.onMoveEnd),i.onMoveStart=n.bind(a(i),i.onMoveStart),i.onMove=n.bind(a(i),i.onMove),i.onControlBarMove=n.bind(a(i),i.onControlBarMove),i.player.controlBar.on(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],i.onControlBarMove),i.oldReportUserActivity=i.player.reportUserActivity,i.player.reportUserActivity=function(){},i.canvas.addEventListener("mousedown",i.onMoveStart),i.canvas.addEventListener("touchstart",i.onMoveStart),i.canvas.addEventListener("mousemove",i.onMove),i.canvas.addEventListener("touchmove",i.onMove),i.canvas.addEventListener("mouseup",i.onMoveEnd),i.canvas.addEventListener("touchend",i.onMoveEnd),i.shouldTogglePlay=!1,i}o(t,e);var r=t.prototype;return r.togglePlay=function(){this.player.paused()?this.player.play():this.player.pause()},r.onMoveStart=function(e){this.player.controls()&&("mousedown"!==e.type||n.dom.isSingleLeftClick(e))?(this.shouldTogglePlay=!0,this.touchMoveCount_=0):this.shouldTogglePlay=!1},r.onMoveEnd=function(e){this.shouldTogglePlay&&this.togglePlay()},r.onMove=function(e){"touchmove"===e.type&&this.touchMoveCount_<1?this.touchMoveCount_++:this.shouldTogglePlay=!1},r.onControlBarMove=function(e){this.player.userActive(!0)},r.dispose=function(){this.canvas.removeEventListener("mousedown",this.onMoveStart),this.canvas.removeEventListener("touchstart",this.onMoveStart),this.canvas.removeEventListener("mousemove",this.onMove),this.canvas.removeEventListener("touchmove",this.onMove),this.canvas.removeEventListener("mouseup",this.onMoveEnd),this.canvas.removeEventListener("touchend",this.onMoveEnd),this.player.controlBar.off(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],this.onControlBarMove),this.player.reportUserActivity=this.oldReportUserActivity},t}(n.EventTarget),ms=function(t){function r(r,i){var o;return(o=t.call(this,r,i)||this).handleVrDisplayActivate_=n.bind(a(o),o.handleVrDisplayActivate_),o.handleVrDisplayDeactivate_=n.bind(a(o),o.handleVrDisplayDeactivate_),o.handleVrDisplayPresentChange_=n.bind(a(o),o.handleVrDisplayPresentChange_),o.handleOrientationChange_=n.bind(a(o),o.handleOrientationChange_),e.addEventListener("orientationchange",o.handleOrientationChange_),e.addEventListener("vrdisplayactivate",o.handleVrDisplayActivate_),e.addEventListener("vrdisplaydeactivate",o.handleVrDisplayDeactivate_),e.addEventListener("vrdisplaypresentchange",o.handleVrDisplayPresentChange_),n.browser.IS_ANDROID&&o.on(r,"fullscreenchange",(function(){r.isFullscreen()?o.hide():o.show()})),o}o(r,t);var i=r.prototype;return i.buildCSSClass=function(){return"vjs-button-vr "+t.prototype.buildCSSClass.call(this)},i.handleVrDisplayPresentChange_=function(){!this.player_.vr().vrDisplay.isPresenting&&this.active_&&this.handleVrDisplayDeactivate_(),this.player_.vr().vrDisplay.isPresenting&&!this.active_&&this.handleVrDisplayActivate_()},i.handleOrientationChange_=function(){this.active_&&n.browser.IS_IOS&&this.changeSize_()},i.changeSize_=function(){this.player_.width(e.innerWidth),this.player_.height(e.innerHeight),e.dispatchEvent(new e.Event("resize"))},i.handleVrDisplayActivate_=function(){n.browser.IS_IOS&&(this.oldWidth_=this.player_.currentWidth(),this.oldHeight_=this.player_.currentHeight(),this.player_.enterFullWindow(),this.changeSize_()),this.active_=!0},i.handleVrDisplayDeactivate_=function(){n.browser.IS_IOS&&(this.oldWidth_&&this.player_.width(this.oldWidth_),this.oldHeight_&&this.player_.height(this.oldHeight_),this.player_.exitFullWindow()),this.active_=!1},i.handleClick=function(t){this.active_?e.dispatchEvent(new e.Event("vrdisplaydeactivate")):(!this.player_.hasStarted()&&n.browser.IS_ANDROID&&this.player_.play(),e.dispatchEvent(new e.Event("vrdisplayactivate")))},i.dispose=function(){t.prototype.dispose.call(this),e.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_),e.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_),e.removeEventListener("vrdisplaypresentchange",this.handleVrDisplayPresentChange_)},r}(n.getComponent("Button"));n.registerComponent("CardboardButton",ms);var vs=function(e){function t(){return e.apply(this,arguments)||this}return o(t,e),t.prototype.buildCSSClass=function(){return"vjs-big-vr-play-button "+e.prototype.buildCSSClass.call(this)},t}(n.getComponent("BigPlayButton"));n.registerComponent("BigVrPlayButton",vs);var ys={projection:"AUTO",forceCardboard:!1,debug:!1},_s={"web-vr-out-of-date":{headline:"360 is out of date",type:"360_OUT_OF_DATE",message:"Your browser supports 360 but not the latest version. See <a href='http://webvr.info'>http://webvr.info</a> for more info."},"web-vr-not-supported":{headline:"360 not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser does not support 360. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."},"web-vr-hls-cors-not-supported":{headline:"360 HLS video not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser/device does not support HLS 360 video. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."}},Ts=n.getPlugin("plugin"),Es=n.getComponent("Component"),Ms=function(r){function i(e,t){var i,o=n.mergeOptions(ys,t);return(i=r.call(this,e,o)||this).options_=o,i.player_=e,i.bigPlayButtonIndex_=e.children().indexOf(e.getChild("BigPlayButton"))||0,i.videojsErrorsSupport_=!!n.errors,i.videojsErrorsSupport_&&e.errors({errors:_s}),n.browser.IE_VERSION||!hs?(i.player_.on("loadstart",(function(){i.triggerError_({code:"web-vr-not-supported",dismiss:!1})})),a(i)):(i.polyfill_=new c({ROTATE_INSTRUCTIONS_DISABLED:!0}),i.polyfill_=new c,i.handleVrDisplayActivate_=n.bind(a(i),i.handleVrDisplayActivate_),i.handleVrDisplayDeactivate_=n.bind(a(i),i.handleVrDisplayDeactivate_),i.handleResize_=n.bind(a(i),i.handleResize_),i.animate_=n.bind(a(i),i.animate_),i.setProjection(i.options_.projection),i.on(e,"adstart",(function(){return e.setTimeout((function(){e.ads&&e.ads.videoElementRecycled()?(i.log("video element recycled for this ad, reseting"),i.reset(),i.one(e,"playing",i.init)):i.log("video element not recycled for this ad, no need to reset")}))}),1),i.on(e,"loadedmetadata",i.init),i)}o(i,r);var s=i.prototype;return s.changeProjection_=function(e){var t=this;(e=ps(e))||(e="NONE");if(this.scene&&this.scene.remove(this.movieScreen),"AUTO"===e){if(this.player_.mediainfo&&this.player_.mediainfo.projection&&"AUTO"!==this.player_.mediainfo.projection){var n=ps(this.player_.mediainfo.projection);return this.changeProjection_(n)}return this.changeProjection_("NONE")}if("360"===e)this.movieGeometry=new si(256,32,32),this.movieMaterial=new Ke({map:this.videoTexture,overdraw:!0,side:1}),this.movieScreen=new tt(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(0,0,0),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.scene.add(this.movieScreen);else if("360_LR"===e||"360_TB"===e){for(var r=new oi(256,32,32),i=r.faceVertexUvs[0],a=0;a<i.length;a++)for(var o=0;o<3;o++)"360_LR"===e?i[a][o].x*=.5:(i[a][o].y*=.5,i[a][o].y+=.5);this.movieGeometry=(new Pe).fromGeometry(r),this.movieMaterial=new Ke({map:this.videoTexture,overdraw:!0,side:1}),this.movieScreen=new tt(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),i=(r=new oi(256,32,32)).faceVertexUvs[0];for(var s=0;s<i.length;s++)for(var u=0;u<3;u++)"360_LR"===e?(i[s][u].x*=.5,i[s][u].x+=.5):i[s][u].y*=.5;this.movieGeometry=(new Pe).fromGeometry(r),this.movieMaterial=new Ke({map:this.videoTexture,overdraw:!0,side:1}),this.movieScreen=new tt(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if("360_CUBE"===e){this.movieGeometry=new ke(256,256,256),this.movieMaterial=new Ke({map:this.videoTexture,overdraw:!0,side:1});var l=[new L(0,.5),new L(.333,.5),new L(.333,1),new L(0,1)],c=[new L(.333,.5),new L(.666,.5),new L(.666,1),new L(.333,1)],d=[new L(.666,.5),new L(1,.5),new L(1,1),new L(.666,1)],h=[new L(0,0),new L(.333,0),new L(.333,.5),new L(0,.5)],f=[new L(.333,0),new L(.666,0),new L(.666,.5),new L(.333,.5)],p=[new L(.666,0),new L(1,0),new L(1,.5),new L(.666,.5)];this.movieGeometry.faceVertexUvs[0]=[],this.movieGeometry.faceVertexUvs[0][0]=[c[2],c[1],c[3]],this.movieGeometry.faceVertexUvs[0][1]=[c[1],c[0],c[3]],this.movieGeometry.faceVertexUvs[0][2]=[l[2],l[1],l[3]],this.movieGeometry.faceVertexUvs[0][3]=[l[1],l[0],l[3]],this.movieGeometry.faceVertexUvs[0][4]=[d[2],d[1],d[3]],this.movieGeometry.faceVertexUvs[0][5]=[d[1],d[0],d[3]],this.movieGeometry.faceVertexUvs[0][6]=[h[2],h[1],h[3]],this.movieGeometry.faceVertexUvs[0][7]=[h[1],h[0],h[3]],this.movieGeometry.faceVertexUvs[0][8]=[f[2],f[1],f[3]],this.movieGeometry.faceVertexUvs[0][9]=[f[1],f[0],f[3]],this.movieGeometry.faceVertexUvs[0][10]=[p[2],p[1],p[3]],this.movieGeometry.faceVertexUvs[0][11]=[p[1],p[0],p[3]],this.movieScreen=new tt(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(0,0,0),this.movieScreen.rotation.y=-Math.PI,this.scene.add(this.movieScreen)}else if("180"===e){var g=new oi(256,32,32,Math.PI,Math.PI);g.scale(-1,1,1);for(var m=g.faceVertexUvs[0],v=0;v<m.length;v++)for(var y=0;y<3;y++)m[v][y].x*=.5;this.movieGeometry=(new Pe).fromGeometry(g),this.movieMaterial=new Ke({map:this.videoTexture,overdraw:!0}),this.movieScreen=new tt(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),(g=new oi(256,32,32,Math.PI,Math.PI)).scale(-1,1,1),m=g.faceVertexUvs[0];for(var _=0;_<m.length;_++)for(var T=0;T<3;T++)m[_][T].x*=.5,m[_][T].x+=.5;this.movieGeometry=(new Pe).fromGeometry(g),this.movieMaterial=new Ke({map:this.videoTexture,overdraw:!0}),this.movieScreen=new tt(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if("EAC"===e||"EAC_LR"===e){var E=function(e,n){t.movieGeometry=new ke(256,256,256),t.movieMaterial=new Ze({overdraw:!0,side:1,uniforms:{mapped:{value:t.videoTexture},mapMatrix:{value:e},contCorrect:{value:2},faceWH:{value:new L(1/3,.5).applyMatrix3(n)},vidWH:{value:new L(t.videoTexture.image.videoWidth,t.videoTexture.image.videoHeight).applyMatrix3(n)}},vertexShader:"\nvarying vec2 vUv;\nuniform mat3 mapMatrix;\n\nvoid main() {\n  vUv = (mapMatrix * vec3(uv, 1.)).xy;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);\n}",fragmentShader:"\nvarying vec2 vUv;\nuniform sampler2D mapped;\nuniform vec2 faceWH;\nuniform vec2 vidWH;\nuniform float contCorrect;\n\nconst float PI = 3.1415926535897932384626433832795;\n\nvoid main() {\n  vec2 corner = vUv - mod(vUv, faceWH) + vec2(0, contCorrect / vidWH.y);\n\n  vec2 faceWHadj = faceWH - vec2(0, contCorrect * 2. / vidWH.y);\n\n  vec2 p = (vUv - corner) / faceWHadj - .5;\n  vec2 q = 2. / PI * atan(2. * p) + .5;\n\n  vec2 eUv = corner + q * faceWHadj;\n\n  gl_FragColor = texture2D(mapped, eUv);\n}"});for(var r=[new L(0,.5),new L(1/3,.5),new L(1/3,1),new L(0,1)],i=[new L(1/3,.5),new L(2/3,.5),new L(2/3,1),new L(1/3,1)],a=[new L(2/3,.5),new L(1,.5),new L(1,1),new L(2/3,1)],o=[new L(1/3,0),new L(1/3,.5),new L(0,.5),new L(0,0)],s=[new L(1/3,.5),new L(1/3,0),new L(2/3,0),new L(2/3,.5)],u=[new L(1,0),new L(1,.5),new L(2/3,.5),new L(2/3,0)],l=0,c=[r,i,a,o,s,u];l<c.length;l++){var d=c[l],h=t.videoTexture.image.videoHeight,f=1,p=0,g=d,m=Array.isArray(g),v=0;for(g=m?g:g[Symbol.iterator]();;){var y;if(m){if(v>=g.length)break;y=g[v++]}else{if((v=g.next()).done)break;y=v.value}var _=y;_.y<f&&(f=_.y),_.y>p&&(p=_.y)}var T=d,E=Array.isArray(T),M=0;for(T=E?T:T[Symbol.iterator]();;){var b;if(E){if(M>=T.length)break;b=T[M++]}else{if((M=T.next()).done)break;b=M.value}var A=b;Math.abs(A.y-f)<Number.EPSILON&&(A.y+=2/h),Math.abs(A.y-p)<Number.EPSILON&&(A.y-=2/h),A.x=A.x/h*(h-4)+2/h}}return t.movieGeometry.faceVertexUvs[0]=[],t.movieGeometry.faceVertexUvs[0][0]=[r[2],r[1],r[3]],t.movieGeometry.faceVertexUvs[0][1]=[r[1],r[0],r[3]],t.movieGeometry.faceVertexUvs[0][2]=[a[2],a[1],a[3]],t.movieGeometry.faceVertexUvs[0][3]=[a[1],a[0],a[3]],t.movieGeometry.faceVertexUvs[0][4]=[u[2],u[1],u[3]],t.movieGeometry.faceVertexUvs[0][5]=[u[1],u[0],u[3]],t.movieGeometry.faceVertexUvs[0][6]=[o[2],o[1],o[3]],t.movieGeometry.faceVertexUvs[0][7]=[o[1],o[0],o[3]],t.movieGeometry.faceVertexUvs[0][8]=[i[2],i[1],i[3]],t.movieGeometry.faceVertexUvs[0][9]=[i[1],i[0],i[3]],t.movieGeometry.faceVertexUvs[0][10]=[s[2],s[1],s[3]],t.movieGeometry.faceVertexUvs[0][11]=[s[1],s[0],s[3]],t.movieScreen=new tt(t.movieGeometry,t.movieMaterial),t.movieScreen.position.set(0,0,0),t.movieScreen.rotation.y=-Math.PI,t.movieScreen};if("EAC"===e)this.scene.add(E(new P,new P));else{var M=(new P).set(0,.5,0,1,0,0,0,0,1);E((new P).set(0,-.5,.5,1,0,0,0,0,1),M),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),E((new P).set(0,-.5,1,1,0,0,0,0,1),M),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}}this.currentProjection_=e},s.triggerError_=function(e){if(this.videojsErrorsSupport_)this.player_.error(e);else{var n=t.createElement("div");n.innerHTML=_s[e.code].message;var r=n.textContent||n.innerText||"";this.player_.error({code:e.code,message:r})}},s.log=function(){if(this.options_.debug){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((function(e){n.log("VR: ",e)}))}},s.handleVrDisplayActivate_=function(){var t=this;this.vrDisplay&&this.vrDisplay.requestPresent([{source:this.renderedCanvas}]).then((function(){if(t.vrDisplay.cardboardUI_&&n.browser.IS_IOS){var r=[],i=function(e){for(var t=0;t<e.touches.length;t++)r.push(e.touches[t])},a=function(n){r.length&&(r.forEach((function(n){var r=new e.MouseEvent("click",{screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});t.renderedCanvas.dispatchEvent(r)})),r=[])};t.renderedCanvas.addEventListener("touchstart",i),t.renderedCanvas.addEventListener("touchend",a),t.iosRevertTouchToClick_=function(){t.renderedCanvas.removeEventListener("touchstart",i),t.renderedCanvas.removeEventListener("touchend",a),t.iosRevertTouchToClick_=null}}}))},s.handleVrDisplayDeactivate_=function(){this.vrDisplay&&this.vrDisplay.isPresenting&&(this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.vrDisplay.exitPresent())},s.requestAnimationFrame=function(e){return this.vrDisplay?this.vrDisplay.requestAnimationFrame(e):this.player_.requestAnimationFrame(e)},s.cancelAnimationFrame=function(e){return this.vrDisplay?this.vrDisplay.cancelAnimationFrame(e):this.player_.cancelAnimationFrame(e)},s.togglePlay_=function(){this.player_.paused()?this.player_.play():this.player_.pause()},s.animate_=function(){if(this.initialized_){if(this.getVideoEl_().readyState===this.getVideoEl_().HAVE_ENOUGH_DATA&&this.videoTexture&&(this.videoTexture.needsUpdate=!0),this.controls3d.update(),this.effect.render(this.scene,this.camera),e.navigator.getGamepads)for(var t=e.navigator.getGamepads(),n=0;n<t.length;++n){var r=t[n];if(r&&r.timestamp&&r.timestamp!==this.prevTimestamps_[n])for(var i=0;i<r.buttons.length;++i)if(r.buttons[i].pressed){this.togglePlay_(),this.prevTimestamps_[n]=r.timestamp;break}}this.camera.getWorldDirection(this.cameraVector),this.animationFrameId_=this.requestAnimationFrame(this.animate_)}},s.handleResize_=function(){var e=this.player_.currentWidth(),t=this.player_.currentHeight();this.effect.setSize(e,t,!1),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()},s.setProjection=function(e){ps(e)?(this.currentProjection_=e,this.defaultProjection_=e):n.log.error("videojs-vr: please pass a valid projection "+fs.join(", "))},s.init=function(){var t=this;if(this.reset(),this.camera=new zn(75,this.player_.currentWidth()/this.player_.currentHeight(),1,1e3),this.cameraVector=new j,"360_LR"!==this.currentProjection_&&"360_TB"!==this.currentProjection_&&"180"!==this.currentProjection_&&"EAC_LR"!==this.currentProjection_||this.camera.layers.enable(1),this.scene=new Wn,this.videoTexture=new ur(this.getVideoEl_()),this.videoTexture.generateMipmaps=!1,this.videoTexture.minFilter=A,this.videoTexture.magFilter=A,this.videoTexture.format=S,this.changeProjection_(this.currentProjection_),"NONE"===this.currentProjection_)return this.log("Projection is NONE, dont init"),void this.reset();this.player_.removeChild("BigPlayButton"),this.player_.addChild("BigVrPlayButton",{},this.bigPlayButtonIndex_),this.player_.bigPlayButton=this.player_.getChild("BigVrPlayButton"),(this.options_.forceCardboard||n.browser.IS_ANDROID||n.browser.IS_IOS)&&this.addCardboardButton_(),n.browser.IS_IOS&&this.player_.controlBar.fullscreenToggle.hide(),this.camera.position.set(0,0,0),this.renderer=new Vn({devicePixelRatio:e.devicePixelRatio,alpha:!1,clearColor:16777215,antialias:!0});var r=this.renderer.getContext("webgl"),i=r.texImage2D;r.texImage2D=function(){try{for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return i.apply(r,n)}catch(e){throw t.reset(),t.player_.pause(),t.triggerError_({code:"web-vr-hls-cors-not-supported",dismiss:!1}),new Error(e)}},this.renderer.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.effect=new ss(this.renderer),this.effect.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.vrDisplay=null,this.prevTimestamps_=[],this.renderedCanvas=this.renderer.domElement,this.renderedCanvas.setAttribute("style","width: 100%; height: 100%; position: absolute; top:0;");var a=this.getVideoEl_().style;this.player_.el().insertBefore(this.renderedCanvas,this.player_.el().firstChild),a.zIndex="-1",a.opacity="0",e.navigator.getVRDisplays?(this.log("is supported, getting vr displays"),e.navigator.getVRDisplays().then((function(e){if(e.length>0&&(t.log("Displays found",e),t.vrDisplay=e[0],t.vrDisplay.isPolyfilled||(t.log("Real HMD found using VRControls",t.vrDisplay),t.addCardboardButton_(),t.controls3d=new os(t.camera))),!t.controls3d){t.log("no HMD found Using Orbit & Orientation Controls");var r={camera:t.camera,canvas:t.renderedCanvas,halfView:"180"===t.currentProjection_,orientation:n.browser.IS_IOS||n.browser.IS_ANDROID||!1};!1===t.options_.motionControls&&(r.orientation=!1),t.controls3d=new ds(r),t.canvasPlayerControls=new gs(t.player_,t.renderedCanvas),t.completeInitialization()}t.animationFrameId_=t.requestAnimationFrame(t.animate_)}))):e.navigator.getVRDevices?this.triggerError_({code:"web-vr-out-of-date",dismiss:!1}):this.triggerError_({code:"web-vr-not-supported",dismiss:!1}),this.on(this.player_,"fullscreenchange",this.handleResize_),e.addEventListener("vrdisplaypresentchange",this.handleResize_,!0),e.addEventListener("resize",this.handleResize_,!0),e.addEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),e.addEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0)},s.completeInitialization=function(){this.initialized_=!0,this.trigger("initialized")},s.addCardboardButton_=function(){this.player_.controlBar.getChild("CardboardButton")||this.player_.controlBar.addChild("CardboardButton",{})},s.getVideoEl_=function(){return this.player_.el().getElementsByTagName("video")[0]},s.reset=function(){if(this.initialized_){this.controls3d&&(this.controls3d.dispose(),this.controls3d=null),this.canvasPlayerControls&&(this.canvasPlayerControls.dispose(),this.canvasPlayerControls=null),this.effect&&(this.effect.dispose(),this.effect=null),e.removeEventListener("resize",this.handleResize_,!0),e.removeEventListener("vrdisplaypresentchange",this.handleResize_,!0),e.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),e.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.player_.getChild("BigPlayButton")||this.player_.addChild("BigPlayButton",{},this.bigPlayButtonIndex_),this.player_.getChild("BigVrPlayButton")&&this.player_.removeChild("BigVrPlayButton"),this.player_.getChild("CardboardButton")&&this.player_.controlBar.removeChild("CardboardButton"),n.browser.IS_IOS&&this.player_.controlBar.fullscreenToggle.show();var t=this.getVideoEl_().style;t.zIndex="",t.opacity="",this.currentProjection_=this.defaultProjection_,this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.renderedCanvas&&this.renderedCanvas.parentNode.removeChild(this.renderedCanvas),this.animationFrameId_&&this.cancelAnimationFrame(this.animationFrameId_),this.initialized_=!1}},s.dispose=function(){r.prototype.dispose.call(this),this.reset()},s.polyfillVersion=function(){return c.version},i}(Ts);return Ms.prototype.setTimeout=Es.prototype.setTimeout,Ms.prototype.clearTimeout=Es.prototype.clearTimeout,Ms.VERSION="1.6.0",n.registerPlugin("vr",Ms),Ms}))}).call(this,n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(10)),i=o(n(12)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(26));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){(0,r.default)(this,e),this.initialized=!1,this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.azim=0,this.elev=0,this.gains=new Array(this.nCh),this.gainNodes=new Array(this.nCh),this.in=this.ctx.createGain(),this.in.channelCountMode="explicit",this.in.channelCount=1,this.out=this.ctx.createChannelMerger(this.nCh);for(var i=0;i<this.nCh;i++)this.gainNodes[i]=this.ctx.createGain(),this.gainNodes[i].channelCountMode="explicit",this.gainNodes[i].channelCount=1;this.updateGains();for(i=0;i<this.nCh;i++)this.in.connect(this.gainNodes[i]),this.gainNodes[i].connect(this.out,0,i);this.initialized=!0}return(0,i.default)(e,[{key:"updateGains",value:function(){for(var e=this.order,t=a.computeRealSH(e,[[this.azim*Math.PI/180,this.elev*Math.PI/180]]),n=0;n<this.nCh;n++)this.gains[n]=t[n][0],this.gainNodes[n].gain.value=this.gains[n]}}]),e}();t.default=s},function(e,t,n){e.exports={default:n(293),__esModule:!0}},function(e,t,n){n(294);var r=n(112).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(295);r(r.S+r.F*!n(43),"Object",{defineProperty:n(113).f})},function(e,t,n){var r=n(111),i=n(112),a=n(296),o=n(298),s=n(304),u=function(e,t,n){var l,c,d,h=e&u.F,f=e&u.G,p=e&u.S,g=e&u.P,m=e&u.B,v=e&u.W,y=f?i:i[t]||(i[t]={}),_=y.prototype,T=f?r:p?r[t]:(r[t]||{}).prototype;for(l in f&&(n=t),n)(c=!h&&T&&void 0!==T[l])&&s(y,l)||(d=c?T[l]:n[l],y[l]=f&&"function"!=typeof T[l]?n[l]:m&&c?a(d,r):v&&T[l]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):g&&"function"==typeof d?a(Function.call,d):d,g&&((y.virtual||(y.virtual={}))[l]=d,e&u.R&&_&&!_[l]&&o(_,l,d)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){var r=n(297);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(113),i=n(303);e.exports=n(43)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(67);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(43)&&!n(114)((function(){return 7!=Object.defineProperty(n(301)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(67),i=n(111).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(67);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,n,i){(0,r.default)(this,e),this.ctx=t,this.orderIn=n,this.orderOut=i<n?i:n,this.nChIn=(this.orderIn+1)*(this.orderIn+1),this.nChOut=(this.orderOut+1)*(this.orderOut+1),this.in=this.ctx.createChannelSplitter(this.nChIn),this.out=this.ctx.createChannelMerger(this.nChOut);for(var a=0;a<this.nChOut;a++)this.in.connect(this.out,a,a)}return(0,i.default)(e,[{key:"updateOrder",value:function(e){if(e<=this.orderIn){this.orderOut=e,this.nChOut=(this.orderOut+1)*(this.orderOut+1),this.out.disconnect(),this.out=this.ctx.createChannelMerger(this.nChOut);for(var t=0;t<this.nChOut;t++)this.in.connect(this.out,t,t)}}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(10)),i=o(n(12)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(26));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){(0,r.default)(this,e),this.ctx=t,this.order=n,this.nCh=(this.order+1)*(this.order+1),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.gains=new Array(this.nCh),this.orderGains=new Array(this.order+1),this.orderGains.fill(1);for(var i=0;i<this.nCh;i++)this.gains[i]=this.ctx.createGain(),this.in.connect(this.gains[i],i,0),this.gains[i].connect(this.out,0,i)}return(0,i.default)(e,[{key:"updateOrderGains",value:function(){for(var e,t=0;t<this.nCh;t++)e=Math.floor(Math.sqrt(t)),this.gains[t].gain.value=this.orderGains[e]}},{key:"computeMaxRECoeffs",value:function(){var e=this.order;this.orderGains[0]=1;for(var t=0,n=0,r=0,i=1;i<=e;i++)r=a.recurseLegendrePoly(i,[Math.cos(2.406809/(e+1.51))],t,n),this.orderGains[i]=r[0][0],n=t,t=r}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(10)),i=o(n(12)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(26));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){(0,r.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.yaw=0,this.pitch=0,this.roll=0,this.rotMtx=numeric.identity(this.nCh),this.rotMtxNodes=new Array(this.order),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh);for(var i=1;i<=this.order;i++){for(var a=new Array(2*i+1),o=0;o<2*i+1;o++){a[o]=new Array(2*i+1);for(var s=0;s<2*i+1;s++)a[o][s]=this.ctx.createGain(),a[o][s].gain.value=o==s?1:0}this.rotMtxNodes[i-1]=a}this.in.connect(this.out,0,0);var u=1;for(i=1;i<=this.order;i++){for(o=0;o<2*i+1;o++)for(s=0;s<2*i+1;s++)this.in.connect(this.rotMtxNodes[i-1][o][s],u+s,0),this.rotMtxNodes[i-1][o][s].connect(this.out,0,u+o);u=u+2*i+1}}return(0,i.default)(e,[{key:"updateRotMtx",value:function(){var e=this.yaw*Math.PI/180,t=this.pitch*Math.PI/180,n=this.roll*Math.PI/180;this.rotMtx=a.getSHrotMtx(a.yawPitchRoll2Rzyx(e,t,n),this.order);for(var r=1,i=1;i<this.order+1;i++){for(var o=0;o<2*i+1;o++)for(var s=0;s<2*i+1;s++)this.rotMtxNodes[i-1][o][s].gain.value=this.rotMtx[r+o][r+s];r=r+2*i+1}}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,n){(0,r.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.mirrorPlane=0,this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.gains=new Array(this.nCh);for(var i=0;i<this.nCh;i++)this.gains[i]=this.ctx.createGain(),this.gains[i].gain.value=1,this.in.connect(this.gains[i],i,0),this.gains[i].connect(this.out,0,i)}return(0,i.default)(e,[{key:"reset",value:function(){for(var e=0;e<this.nCh;e++)this.gains[e].gain.value=1}},{key:"mirror",value:function(e){switch(e){case 0:this.mirrorPlane=0,this.reset();break;case 1:this.reset(),this.mirrorPlane=1;for(var t=0;t<=this.order;t++)for(var n=-t;n<=t;n++)r=t*t+t+n,(n<0&&n%2==0||n>0&&n%2==1)&&(this.gains[r].gain.value=-1);break;case 2:this.reset(),this.mirrorPlane=2;for(t=0;t<=this.order;t++)for(n=-t;n<=t;n++)r=t*t+t+n,n<0&&(this.gains[r].gain.value=-1);break;case 3:var r;this.reset(),this.mirrorPlane=3;for(t=0;t<=this.order;t++)for(n=-t;n<=t;n++)r=t*t+t+n,(n+t)%2==1&&(this.gains[r].gain.value=-1);break;default:console.log("The mirroring planes can be either 1 (yz), 2 (xz), 3 (xy), or 0 (no mirroring). Value set to 0."),this.mirrorPlane=0,this.reset()}}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,n){(0,r.default)(this,e),this.initialized=!1,this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.decFilters=new Array(this.nCh),this.decFilterNodes=new Array(this.nCh),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(2),this.out.channelCountMode="explicit",this.out.channelCount=1,this.gainMid=this.ctx.createGain(),this.gainSide=this.ctx.createGain(),this.invertSide=this.ctx.createGain(),this.gainMid.gain.value=1,this.gainSide.gain.value=1,this.invertSide.gain.value=-1;for(var i=0;i<this.nCh;i++)this.decFilterNodes[i]=this.ctx.createConvolver(),this.decFilterNodes[i].normalize=!1;this.resetFilters();for(i=0;i<this.nCh;i++){this.in.connect(this.decFilterNodes[i],i,0);var a=Math.floor(Math.sqrt(i));i-a*a-a>=0?this.decFilterNodes[i].connect(this.gainMid):this.decFilterNodes[i].connect(this.gainSide)}this.gainMid.connect(this.out,0,0),this.gainSide.connect(this.out,0,0),this.gainMid.connect(this.out,0,1),this.gainSide.connect(this.invertSide,0,0),this.invertSide.connect(this.out,0,1),this.initialized=!0}return(0,i.default)(e,[{key:"updateFilters",value:function(e){for(var t=0;t<this.nCh;t++)this.decFilters[t]=this.ctx.createBuffer(1,e.length,e.sampleRate),this.decFilters[t].getChannelData(0).set(e.getChannelData(t)),this.decFilterNodes[t].buffer=this.decFilters[t]}},{key:"resetFilters",value:function(){var e=new Array(this.nCh);e.fill(0),e[0]=.5,e[1]=.5/Math.sqrt(3);for(var t=0;t<this.nCh;t++){this.decFilters[t]=this.ctx.createBuffer(1,64,this.ctx.sampleRate);for(var n=0;n<64;n++)this.decFilters[t].getChannelData(0)[n]=0;this.decFilters[t].getChannelData(0)[0]=e[t],this.decFilterNodes[t].buffer=this.decFilters[t]}}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var o=n(31),s=function(){function e(t,n){(0,r.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.nSpk=0,this._decodingMatrix=[],this._spkSphPosArray=[],this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(1),this._spkSphPosArray=this._getDefaultSpkConfig(this.order),this._updateDecodeMtx(this._spkSphPosArray)}return(0,i.default)(e,[{key:"_updateDecodeMtx",value:function(e){this.nSpk=e.length,this.out=this.ctx.createChannelMerger(this.nSpk),this._decodingMatrix=o.getAmbisonicDecMtx(e,this.order),this.mtxGain=new Array(this.nCh);for(var t=0;t<this.nCh;t++){this.mtxGain[t]=new Array(this.nSpk);for(var n=0;n<this.nSpk;n++){var r=this.ctx.createGain();r.gain.value=this._decodingMatrix[n][t],this.in.connect(r,t,0),r.connect(this.out,0,n),this.mtxGain[t][n]=r}}}},{key:"_getDefaultSpkConfig",value:function(e){var t=[];switch(e){case 1:t=[[0,0,1],[90,0,1],[180,0,1],[270,0,1],[0,90,1],[0,-90,1]];break;case 2:t=[[180,-31.7161,.5878],[180,31.7161,.5878],[-121.7161,0,.5878],[121.7161,0,.5878],[-90,-58.2839,.5878],[-90,58.2839,.5878],[90,-58.2839,.5878],[90,58.2839,.5878],[-58.2839,0,.5878],[58.2839,0,.5878],[0,-31.7161,.5878],[0,31.7161,.5878]];break;case 3:t=[[-159.0931,0,.5352],[159.0931,0,.5352],[-135,-35.2644,.5352],[-135,35.2644,.5352],[135,-35.2644,.5352],[135,35.2644,.5352],[180,-69.0931,.5352],[180,69.0931,.5352],[-90,-20.9069,.5352],[-90,20.9069,.5352],[90,-20.9069,.5352],[90,20.9069,.5352],[0,-69.0931,.5352],[0,69.0931,.5352],[-45,-35.2644,.5352],[-45,35.2644,.5352],[45,-35.2644,.5352],[45,35.2644,.5352],[-20.9069,0,.5352],[20.9069,0,.5352]];break;default:console.error("unsupported default order:",e)}return t}},{key:"speakerPos",set:function(e){void 0===e&&(e=this._getDefaultSpkConfig(this.order)),this._spkSphPosArray=e,this.out.disconnect(),this._updateDecodeMtx(e)},get:function(){return this._spkSphPosArray}}]),e}();t.default=s},function(e,t,n){"use strict";var r=n(312),i=n(313),a=n(319);e.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;if(0===n)return[];if(1===n)return r(e);if(2===n)return i(e);return a(e,n)}},function(e,t,n){"use strict";e.exports=function(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}},function(e,t,n){"use strict";e.exports=function(e){var t=r(e),n=t.length;if(n<=2)return[];for(var i=new Array(n),a=t[n-1],o=0;o<n;++o){var s=t[o];i[o]=[a,s],a=s}return i};var r=n(314)},function(e,t,n){"use strict";e.exports=function(e){var t=e.length;if(t<3){for(var n=new Array(t),i=0;i<t;++i)n[i]=i;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}var a=new Array(t);for(i=0;i<t;++i)a[i]=i;a.sort((function(t,n){var r=e[t][0]-e[n][0];return r||e[t][1]-e[n][1]}));var o=[a[0],a[1]],s=[a[0],a[1]];for(i=2;i<t;++i){for(var u=a[i],l=e[u],c=o.length;c>1&&r(e[o[c-2]],e[o[c-1]],l)<=0;)c-=1,o.pop();for(o.push(u),c=s.length;c>1&&r(e[s[c-2]],e[s[c-1]],l)>=0;)c-=1,s.pop();s.push(u)}n=new Array(s.length+o.length-2);for(var d=0,h=(i=0,o.length);i<h;++i)n[d++]=o[i];for(var f=s.length-2;f>0;--f)n[d++]=s[f];return n};var r=n(69)[3]},function(e,t,n){"use strict";e.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=e-(n-r)+(t-r);if(i)return[i,n];return[n]}(e[0],t[0]);var i,a,o=new Array(n+r),s=0,u=0,l=0,c=Math.abs,d=e[u],h=c(d),f=t[l],p=c(f);h<p?(a=d,(u+=1)<n&&(d=e[u],h=c(d))):(a=f,(l+=1)<r&&(f=t[l],p=c(f)));u<n&&h<p||l>=r?(i=d,(u+=1)<n&&(d=e[u],h=c(d))):(i=f,(l+=1)<r&&(f=t[l],p=c(f)));var g,m,v=i+a,y=v-i,_=a-y,T=_,E=v;for(;u<n&&l<r;)h<p?(i=d,(u+=1)<n&&(d=e[u],h=c(d))):(i=f,(l+=1)<r&&(f=t[l],p=c(f))),(_=(a=T)-(y=(v=i+a)-i))&&(o[s++]=_),T=E-((g=E+v)-(m=g-E))+(v-m),E=g;for(;u<n;)(_=(a=T)-(y=(v=(i=d)+a)-i))&&(o[s++]=_),T=E-((g=E+v)-(m=g-E))+(v-m),E=g,(u+=1)<n&&(d=e[u]);for(;l<r;)(_=(a=T)-(y=(v=(i=f)+a)-i))&&(o[s++]=_),T=E-((g=E+v)-(m=g-E))+(v-m),E=g,(l+=1)<r&&(f=t[l]);T&&(o[s++]=T);E&&(o[s++]=E);s||(o[s++]=0);return o.length=s,o}},function(e,t,n){"use strict";var r=n(115),i=n(317);e.exports=function(e,t){var n=e.length;if(1===n){var a=r(e[0],t);return a[0]?a:[a[1]]}var o=new Array(2*n),s=[.1,.1],u=[.1,.1],l=0;r(e[0],t,s),s[0]&&(o[l++]=s[0]);for(var c=1;c<n;++c){r(e[c],t,u);var d=s[1];i(d,u[0],s),s[0]&&(o[l++]=s[0]);var h=u[1],f=s[1],p=h+f,g=f-(p-h);s[1]=p,g&&(o[l++]=g)}s[1]&&(o[l++]=s[1]);0===l&&(o[l++]=0);return o.length=l,o}},function(e,t,n){"use strict";e.exports=function(e,t,n){var r=e+t,i=r-e,a=t-i,o=e-(r-i);if(n)return n[0]=o+a,n[1]=r,n;return[o+a,r]}},function(e,t,n){"use strict";e.exports=function(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return function(e,t){var n=e+t,r=n-e,i=e-(n-r)+(t-r);if(i)return[i,n];return[n]}(e[0],-t[0]);var i,a,o=new Array(n+r),s=0,u=0,l=0,c=Math.abs,d=e[u],h=c(d),f=-t[l],p=c(f);h<p?(a=d,(u+=1)<n&&(d=e[u],h=c(d))):(a=f,(l+=1)<r&&(f=-t[l],p=c(f)));u<n&&h<p||l>=r?(i=d,(u+=1)<n&&(d=e[u],h=c(d))):(i=f,(l+=1)<r&&(f=-t[l],p=c(f)));var g,m,v=i+a,y=v-i,_=a-y,T=_,E=v;for(;u<n&&l<r;)h<p?(i=d,(u+=1)<n&&(d=e[u],h=c(d))):(i=f,(l+=1)<r&&(f=-t[l],p=c(f))),(_=(a=T)-(y=(v=i+a)-i))&&(o[s++]=_),T=E-((g=E+v)-(m=g-E))+(v-m),E=g;for(;u<n;)(_=(a=T)-(y=(v=(i=d)+a)-i))&&(o[s++]=_),T=E-((g=E+v)-(m=g-E))+(v-m),E=g,(u+=1)<n&&(d=e[u]);for(;l<r;)(_=(a=T)-(y=(v=(i=f)+a)-i))&&(o[s++]=_),T=E-((g=E+v)-(m=g-E))+(v-m),E=g,(l+=1)<r&&(f=-t[l]);T&&(o[s++]=T);E&&(o[s++]=E);s||(o[s++]=0);return o.length=s,o}},function(e,t,n){"use strict";e.exports=function(e,t){try{return r(e,!0)}catch(o){var n=i(e);if(n.length<=t)return[];var a=function(e,t){for(var n=e.length,r=new Array(n),i=0;i<t.length;++i)r[i]=e[t[i]];var a=t.length;for(i=0;i<n;++i)t.indexOf(i)<0&&(r[a++]=e[i]);return r}(e,n);return function(e,t){for(var n=e.length,r=t.length,i=0;i<n;++i)for(var a=e[i],o=0;o<a.length;++o){var s=a[o];if(s<r)a[o]=t[s];else{s-=r;for(var u=0;u<r;++u)s>=t[u]&&(s+=1);a[o]=s}}return e}(r(a,!0),n)}};var r=n(320),i=n(324)},function(e,t,n){"use strict";e.exports=function(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var i=e[0].length;if(n<=i)throw new Error("Must input at least d+1 points");var o=e.slice(0,i+1),s=r.apply(void 0,o);if(0===s)throw new Error("Input not in general position");for(var u=new Array(i+1),c=0;c<=i;++c)u[c]=c;s<0&&(u[0]=1,u[1]=0);var d=new a(u,new Array(i+1),!1),h=d.adjacent,f=new Array(i+2);for(c=0;c<=i;++c){for(var p=u.slice(),g=0;g<=i;++g)g===c&&(p[g]=-1);var m=p[0];p[0]=p[1],p[1]=m;var v=new a(p,new Array(i+1),!0);h[c]=v,f[c]=v}f[i+1]=d;for(c=0;c<=i;++c){p=h[c].vertices;var y=h[c].adjacent;for(g=0;g<=i;++g){var _=p[g];if(_<0)y[g]=d;else for(var T=0;T<=i;++T)h[T].vertices.indexOf(_)<0&&(y[g]=h[T])}}var E=new l(i,o,f),M=!!t;for(c=i+1;c<n;++c)E.insert(e[c],M);return E.boundary()};var r=n(69),i=n(321).compareCells;function a(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function o(e,t,n){this.vertices=e,this.cell=t,this.index=n}function s(e,t){return i(e.vertices,t.vertices)}a.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var u=[];function l(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter((function(e){return!e.boundary})),this.tuple=new Array(e+1);for(var i=0;i<=e;++i)this.tuple[i]=this.vertices[i];var a=u[e];a||(a=u[e]=function(e){for(var t=["function orient(){var tuple=this.tuple;return test("],n=0;n<=e;++n)n>0&&t.push(","),t.push("tuple[",n,"]");t.push(")}return orient");var i=new Function("test",t.join("")),a=r[e+1];return a||(a=r),i(a)}(e)),this.orient=a}var c=l.prototype;c.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[e];for(e.lastVisited=-r;o.length>0;){(e=o.pop()).vertices;for(var s=e.adjacent,u=0;u<=n;++u){var l=s[u];if(l.boundary&&!(l.lastVisited<=-r)){for(var c=l.vertices,d=0;d<=n;++d){var h=c[d];i[d]=h<0?t:a[h]}var f=this.orient();if(f>0)return l;l.lastVisited=-r,0===f&&o.push(l)}}}return null},c.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];e:for(;!s.boundary;){for(var u=s.vertices,l=s.adjacent,c=0;c<=r;++c)a[c]=i[u[c]];s.lastVisited=n;for(c=0;c<=r;++c){var d=l[c];if(!(d.lastVisited>=n)){var h=a[c];a[c]=e;var f=this.orient();if(a[c]=h,f<0){s=d;continue e}d.boundary?d.lastVisited=-n:d.lastVisited=n}}return}return s},c.addPeaks=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,u=this.tuple,l=this.interior,c=this.simplices,d=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,l.push(t);for(var h=[];d.length>0;){var f=(t=d.pop()).vertices,p=t.adjacent,g=f.indexOf(n);if(!(g<0))for(var m=0;m<=r;++m)if(m!==g){var v=p[m];if(v.boundary&&!(v.lastVisited>=n)){var y=v.vertices;if(v.lastVisited!==-n){for(var _=0,T=0;T<=r;++T)y[T]<0?(_=T,u[T]=e):u[T]=i[y[T]];if(this.orient()>0){y[_]=n,v.boundary=!1,l.push(v),d.push(v),v.lastVisited=n;continue}v.lastVisited=-n}var E=v.adjacent,M=f.slice(),b=p.slice(),A=new a(M,b,!0);c.push(A);var w=E.indexOf(t);if(!(w<0)){E[w]=A,b[g]=v,M[m]=-1,b[m]=t,p[m]=A,A.flip();for(T=0;T<=r;++T){var S=M[T];if(!(S<0||S===n)){for(var x=new Array(r-1),D=0,I=0;I<=r;++I){var C=M[I];C<0||I===T||(x[D++]=C)}h.push(new o(x,A,T))}}}}}}h.sort(s);for(m=0;m+1<h.length;m+=2){var N=h[m],L=h[m+1],O=N.index,R=L.index;O<0||R<0||(N.cell.adjacent[N.index]=L.cell,L.cell.adjacent[L.index]=N.cell)}},c.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=r.vertices[o];a[o]=s<0?e:n[s]}var u=this.orient(a);u<0||(0!==u||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},c.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,i=0;i<r;++i){var a=n[i];if(a.boundary){for(var o=new Array(e),s=a.vertices,u=0,l=0,c=0;c<=e;++c)s[c]>=0?o[u++]=s[c]:l=1&c;if(l===(1&e)){var d=o[0];o[0]=o[1],o[1]=d}t.push(o)}}return t}},function(e,t,n){"use strict";var r=n(322),i=n(323);function a(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return(s=e[0]+e[1]-t[0]-t[1])||i(e[0],e[1])-i(t[0],t[1]);case 3:var a=e[0]+e[1],o=t[0]+t[1];if(s=a+e[2]-(o+t[2]))return s;var s,u=i(e[0],e[1]),l=i(t[0],t[1]);return(s=i(u,e[2])-i(l,t[2]))||i(u+e[2],a)-i(l+t[2],o);default:var c=e.slice(0);c.sort();var d=t.slice(0);d.sort();for(var h=0;h<n;++h)if(r=c[h]-d[h])return r;return 0}}function o(e,t){return a(e[0],t[0])}function s(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(o);for(i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(a),e}function u(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];if(a(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function l(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var o=n+r>>1,s=a(e[o],t);s<=0?(0===s&&(i=o),n=o+1):s>0&&(r=o-1)}return i}function c(e,t){for(var n=new Array(e.length),i=0,o=n.length;i<o;++i)n[i]=[];for(var s=[],u=(i=0,t.length);i<u;++i)for(var c=t[i],d=c.length,h=1,f=1<<d;h<f;++h){s.length=r.popCount(h);for(var p=0,g=0;g<d;++g)h&1<<g&&(s[p++]=c[g]);var m=l(e,s);if(!(m<0))for(;n[m++].push(i),!(m>=e.length||0!==a(e[m],s)););}return n}function d(e,t){if(t<0)return[];for(var n=[],i=(1<<t+1)-1,a=0;a<e.length;++a)for(var o=e[a],u=i;u<1<<o.length;u=r.nextCombination(u)){for(var l=new Array(t+1),c=0,d=0;d<o.length;++d)u&1<<d&&(l[c++]=o[d]);n.push(l)}return s(n)}t.dimension=function(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1},t.countVertices=function(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)t=n(t,a[o]);return t+1},t.cloneCells=function(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t},t.compareCells=a,t.normalize=s,t.unique=u,t.findCell=l,t.incidence=c,t.dual=function(e,t){if(!t)return c(u(d(e,0)),e);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];r=0;for(var i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)n[a[o]].push(r);return n},t.explode=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0|i.length,o=1,u=1<<a;o<u;++o){for(var l=[],c=0;c<a;++c)o>>>c&1&&l.push(i[c]);t.push(l)}return s(t)},t.skeleton=d,t.boundary=function(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;++a){for(var u=new Array(i.length-1),l=0,c=0;l<o;++l)l!==a&&(u[c++]=i[l]);t.push(u)}return s(t)},t.connectedComponents=function(e,t){return t?function(e,t){for(var n=new i(t),r=0;r<e.length;++r)for(var a=e[r],o=0;o<a.length;++o)for(var s=o+1;s<a.length;++s)n.link(a[o],a[s]);var u=[],l=n.ranks;for(r=0;r<l.length;++r)l[r]=-1;for(r=0;r<e.length;++r){var c=n.find(e[r][0]);l[c]<0?(l[c]=u.length,u.push([e[r].slice(0)])):u[l[c]].push(e[r].slice(0))}return u}(e,t):function(e){for(var t=u(s(d(e,0))),n=new i(t.length),r=0;r<e.length;++r)for(var a=e[r],o=0;o<a.length;++o)for(var c=l(t,[a[o]]),h=o+1;h<a.length;++h)n.link(c,l(t,[a[h]]));var f=[],p=n.ranks;for(r=0;r<p.length;++r)p[r]=-1;for(r=0;r<e.length;++r){var g=n.find(l(t,[e[r][0]]));p[g]<0?(p[g]=f.length,f.push([e[r].slice(0)])):f[p[g]].push(e[r].slice(0))}return f}(e)}},function(e,t,n){"use strict";function r(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(e>0)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1},t.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=r,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,n){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(n=1227133513&((n=3272356035&((n=251719695&((n=4278190335&((n&=1023)|n<<16))|n<<8))|n<<4))|n<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},function(e,t,n){"use strict";function r(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}e.exports=r;var i=r.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},i.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},i.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}}},function(e,t,n){"use strict";e.exports=function(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,r=[e[0]],a=[0],o=1;o<t;++o)if(r.push(e[o]),i(r,n)){if(a.push(o),a.length===n+1)return a}else r.pop();return a};var r=n(69);function i(e,t){for(var n=new Array(t+1),i=0;i<e.length;++i)n[i]=e[i];for(i=0;i<=e.length;++i){for(var a=e.length;a<=t;++a){for(var o=new Array(t),s=0;s<t;++s)o[s]=Math.pow(a+1-i,s);n[a]=o}if(r.apply(void 0,n))return!0}return!1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(10)),i=o(n(12)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(26));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t,n){(0,r.default)(this,e),this.initialized=!1,this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.azim=0,this.elev=0,this.vmicGains=new Array(this.nCh),this.vmicGainNodes=new Array(this.nCh),this.vmicCoeffs=new Array(this.order+1),this.vmicPattern="hypercardioid",this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createGain();for(var i=0;i<this.nCh;i++)this.vmicGainNodes[i]=this.ctx.createGain();for(this.SHxyz=new Array(this.nCh),this.SHxyz.fill(0),this.updatePattern(),this.updateOrientation(),i=0;i<this.nCh;i++)this.in.connect(this.vmicGainNodes[i],i,0),this.vmicGainNodes[i].connect(this.out);this.initialized=!0}return(0,i.default)(e,[{key:"updatePattern",value:function(){function e(e){for(var t=new Array(e+1),n=(e+1)*(e+1),r=0;r<=e;r++)t[r]=1/n;return t}switch(this.vmicPattern){case"cardioid":this.vmicCoeffs=function(e){for(var t=new Array(e+1),n=0;n<=e;n++)t[n]=a.factorial(e)*a.factorial(e)/(a.factorial(e+n+1)*a.factorial(e-n));return t}(this.order);break;case"supercardioid":this.vmicCoeffs=function(e){switch(e){case 1:var t=[.366,.2113];break;case 2:t=[.2362,.1562,.059];break;case 3:t=[.1768,.1281,.0633,.0175];break;case 4:t=[.1414,.1087,.0623,.0247,.0054];break;default:return void console.error("Orders should be in the range of 1-4 at the moment.")}return t}(this.order);break;case"hypercardioid":this.vmicCoeffs=e(this.order);break;case"max_rE":this.vmicCoeffs=function(e){var t=new Array(e+1);t[0]=1;for(var n=0,r=0,i=0,o=1;o<e+1;o++)i=a.recurseLegendrePoly(o,[Math.cos(2.406809/(e+1.51))],n,r),t[o]=i[0][0],r=n,n=i;var s=0;for(o=0;o<=e;o++)s+=t[o]*(2*o+1);for(o=0;o<=e;o++)t[o]=t[o]/s;return t}(this.order);break;default:this.vmicPattern="hypercardioid",this.vmicCoeffs=e(this.order)}this.updateGains()}},{key:"updateOrientation",value:function(){for(var e=this.azim*Math.PI/180,t=this.elev*Math.PI/180,n=a.computeRealSH(this.order,[[e,t]]),r=0;r<this.nCh;r++)this.SHxyz[r]=n[r][0];this.updateGains()}},{key:"updateGains",value:function(){for(var e,t=0;t<=this.order;t++)for(var n=-t;n<=t;n++)e=t*t+t+n,this.vmicGains[e]=this.vmicCoeffs[t]*this.SHxyz[e];for(var r=0;r<this.nCh;r++)this.vmicGainNodes[r].gain.value=this.vmicGains[r]}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}n(70);var o=function(){function e(t,n){(0,r.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.fftSize=2048,this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.analysers=new Array(this.nCh),this.analBuffers=new Array(this.nCh);for(var i=0;i<this.nCh;i++)this.analysers[i]=this.ctx.createAnalyser(),this.analysers[i].fftSize=this.fftSize,this.analysers[i].smoothingTimeConstant=0,this.analBuffers[i]=new Float32Array(this.fftSize),this.in.connect(this.analysers[i],i,0),this.analysers[i].connect(this.out,0,i)}return(0,i.default)(e,[{key:"updateBuffers",value:function(){for(var e=0;e<this.nCh;e++)this.analysers[e].getFloatTimeDomainData(this.analBuffers[e])}},{key:"computeRMS",value:function(){var e=new Array(this.nCh);e.fill(0);for(var t=0;t<this.nCh;t++){for(var n=0;n<this.fftSize;n++)e[t]=e[t]+this.analBuffers[t][n]*this.analBuffers[t][n];e[t]=Math.sqrt(e[t]/this.fftSize)}return e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(10)),i=u(n(12));n(70);var a=s(n(68)),o=s(n(26));function s(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function u(e){return e&&e.__esModule?e:{default:e}}var l=n(31),c=function(){function e(t,n,i){(0,r.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.fftSize=2048,this.analysers=new Array(this.nCh),this.analBuffers=new Array(this.nCh),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh);for(var a=0;a<this.nCh;a++)this.analysers[a]=this.ctx.createAnalyser(),this.analysers[a].fftSize=this.fftSize,this.analysers[a].smoothingTimeConstant=0,this.analBuffers[a]=new Float32Array(this.fftSize);for(var s=0;s<this.nCh;s++)this.in.connect(this.out,s,s),this.in.connect(this.analysers[s],s,0);var u=l.getTdesign(4*n);this.td_dirs_rad=l.deg2rad(u),this.SHmtx=o.computeRealSH(this.order,this.td_dirs_rad),this.mode=i}return(0,i.default)(e,[{key:"updateBuffers",value:function(){for(var e=0;e<this.nCh;e++)this.analysers[e].getFloatTimeDomainData(this.analBuffers[e])}},{key:"computePowermap",value:function(){for(var e=this.td_dirs_rad.length,t=a.dot(a.transpose(this.SHmtx),this.analBuffers),n=new Array(e),r=0;r<e;r++){for(var i=0;i<this.fftSize;i++){var s=0;s+=t[r][i]*t[r][i]}s=s/this.fftSize;n[r]=[this.td_dirs_rad[r][0],this.td_dirs_rad[r][1],s]}return 0==this.mode?n:1==this.mode?o.forwardSHT(2*this.order,n):void 0}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}n(70);var o=function(){function e(t){(0,r.default)(this,e),this.ctx=t,this.fftSize=2048,this.in=this.ctx.createChannelSplitter(4),this.out=this.ctx.createChannelMerger(4),this.gains=new Array(3);for(var n=0;n<3;n++)this.gains[n]=this.ctx.createGain(),this.gains[n].gain.value=1/Math.sqrt(3);for(this.analysers=new Array(4),this.analBuffers=new Array(4),n=0;n<4;n++)this.analysers[n]=this.ctx.createAnalyser(),this.analysers[n].fftSize=this.fftSize,this.analysers[n].smoothingTimeConstant=0,this.analBuffers[n]=new Float32Array(this.fftSize);for(this.in.connect(this.out,0,0),this.in.connect(this.analysers[0],0,0),this.in.connect(this.gains[1],1,0),this.in.connect(this.gains[2],2,0),this.in.connect(this.gains[0],3,0),n=0;n<3;n++)this.gains[n].connect(this.analysers[n+1],0,0),this.gains[n].connect(this.out,0,n+1)}return(0,i.default)(e,[{key:"updateBuffers",value:function(){for(var e=0;e<4;e++)this.analysers[e].getFloatTimeDomainData(this.analBuffers[e])}},{key:"computeIntensity",value:function(){for(var e,t,n,r=0,i=0,a=0,o=0,s=0,u=0,l=0,c=0;c<this.fftSize;c++)r+=this.analBuffers[0][c]*this.analBuffers[1][c],i+=this.analBuffers[0][c]*this.analBuffers[2][c],a+=this.analBuffers[0][c]*this.analBuffers[3][c],o+=this.analBuffers[0][c]*this.analBuffers[0][c],s+=this.analBuffers[1][c]*this.analBuffers[1][c],u+=this.analBuffers[2][c]*this.analBuffers[2][c],l+=this.analBuffers[3][c]*this.analBuffers[3][c];return e=[r,i,a],n=1-Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2])/((t=(o+s+u+l)/2)+1e-7),[180*Math.atan2(i,r)/Math.PI,180*Math.atan2(e[2],Math.sqrt(e[0]*e[0]+e[1]*e[1]))/Math.PI,n,t]}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(){function e(t,n,i,a){(0,r.default)(this,e),this.context=t,this.order=n,this.nCh=(n+1)*(n+1),this.nChGroups=Math.ceil(this.nCh/8),this.buffers=new Array,this.loadCount=0,this.loaded=!1,this.onLoad=a,this.urls=new Array(this.nChGroups);var o=i.slice(i.length-3,i.length);this.fileExt=o;for(var s=0;s<this.nChGroups;s++)s==this.nChGroups-1?this.urls[s]=i.slice(0,i.length-4)+"_"+u(8*s+1,2)+"-"+u(this.nCh,2)+"ch."+o:this.urls[s]=i.slice(0,i.length-4)+"_"+u(8*s+1,2)+"-"+u(8*s+8,2)+"ch."+o;function u(e,t){return("000000000"+e).substr(-t)}}return(0,i.default)(e,[{key:"loadBuffers",value:function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer";var r=this;n.onload=function(){r.context.decodeAudioData(n.response,(function(n){n?(r.buffers[t]=n,r.loadCount++,r.loadCount==r.nChGroups&&(r.loaded=!0,r.concatBuffers(),console.log("HOAloader: all buffers loaded and concatenated"),r.onLoad(r.concatBuffer))):alert("error decoding file data: "+e)}),(function(t){alert("Browser cannot decode audio data:  "+e+"\n\nError: "+t+"\n\n(If you re using Safari and get a null error, this is most likely due to Apple's shady plan going on to stop the .ogg format from easing web developer's life :)")}))},n.onerror=function(){alert("HOAloader: XHR error")},n.send()}},{key:"load",value:function(){for(var e=0;e<this.nChGroups;++e)this.loadBuffers(this.urls[e],e)}},{key:"concatBuffers",value:function(){if(this.loaded){var e=this.nCh,t=this.nChGroups,n=this.buffers[0].length;this.buffers.forEach((function(e){n=Math.max(n,e.length)}));var r=this.buffers[0].sampleRate,i=[1,2,3,4,5,6,7,8];"ogg"==this.fileExt.toLowerCase()&&(console.log("Loading of 8chan OGG files [Chrome/Firefox]: remap channels to correct order!"),i=[1,3,2,7,8,5,6,4]),this.concatBuffer=this.context.createBuffer(e,n,r);for(var a=0;a<t;a++)for(var o=0;o<this.buffers[a].numberOfChannels;o++)this.concatBuffer.getChannelData(8*a+o).set(this.buffers[a].getChannelData(i[o]-1))}}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(10)),i=a(n(12));function a(e){return e&&e.__esModule?e:{default:e}}var o=n(31),s=function(){function e(t,n,i){(0,r.default)(this,e),this.context=t,this.order=n,this.nCh=(n+1)*(n+1),this.onLoad=i,this.vls_dirs_deg=o.getTdesign(2*this.order),this.nVLS=this.vls_dirs_deg.length,this.nearestLookupRes=[5,5]}return(0,i.default)(e,[{key:"load",value:function(e){var t=this,n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.onload=function(){t.parseHrirFromJSON(n.response),t.nearestLookup=o.createNearestLookup(t.hrir_dirs_deg,t.nearestLookupRes);var e=o.findNearest(t.vls_dirs_deg,t.nearestLookup,t.nearestLookupRes);t.nearest_dirs_deg=t.getClosestDirs(e,t.hrir_dirs_deg),t.vls_hrirs=t.getClosestHrirFilters(e,t.hrirs),t.computeDecFilters()},n.send()}},{key:"parseHrirFromJSON",value:function(e){var t=this;this.fs=e.leaves[6].data[0],this.nHrirs=e.leaves[4].data.length,this.nSamples=e.leaves[8].data[0][1].length,this.hrir_dirs_deg=[],e.leaves[4].data.forEach((function(e){t.hrir_dirs_deg.push([e[0],e[1]])})),this.hrirs=[],e.leaves[8].data.forEach((function(e){var n=new Float64Array(e[0]),r=new Float64Array(e[1]);t.hrirs.push([n,r])}))}},{key:"getClosestDirs",value:function(e,t){for(var n=e.length,r=[],i=0;i<n;i++)r.push(t[e[i]]);return r}},{key:"getClosestHrirFilters",value:function(e,t){for(var n=e.length,r=[],i=0;i<n;i++)r.push(t[e[i]]);return r}},{key:"computeDecFilters",value:function(){this.decodingMatrix=o.getAmbiBinauralDecMtx(this.nearest_dirs_deg,this.order),this.hoaBuffer=this.getHoaFilterFromHrirFilter(this.nCh,this.nSamples,this.fs,this.vls_hrirs,this.decodingMatrix),this.onLoad(this.hoaBuffer)}},{key:"getHoaFilterFromHrirFilter",value:function(e,t,n,r,i){t>r[0][0].length&&(t=r[0][0].length);for(var a=this.context.createBuffer(e,t,n),o=0;o<e;o++){for(var s=new Float32Array(t),u=0;u<r.length;u++)for(var l=0;l<t;l++)s[l]+=i[u][o]*r[u][0][l];a.getChannelData(o).set(s)}return a}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(10)),i=o(n(12)),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(332));function o(e){return e&&e.__esModule?e:{default:e}}var s=n(31),u=function(){function e(t,n,i){(0,r.default)(this,e),this.context=t,this.order=n,this.nCh=(n+1)*(n+1),this.onLoad=i,this.hrtfSet=new a.HrtfSet({audioContext:this.context,coordinateSystem:"sofaSpherical"}),this.wishedSpeakerPos=s.getTdesign(2*this.order)}return(0,i.default)(e,[{key:"load",value:function(e){var t=this;this.hrtfSet.load(e).then((function(){var e=[];t.hrirBuffer=[];for(var n=0;n<t.wishedSpeakerPos.length;n++)e.push(t.hrtfSet.nearest(t.wishedSpeakerPos[n]).position),t.hrirBuffer.push(t.hrtfSet.nearest(t.wishedSpeakerPos[n]).fir);for(var r=0,i=0;i<t.wishedSpeakerPos.length;i++)t.wishedSpeakerPos[i][0]<0&&(t.wishedSpeakerPos[i][0]+=360),r+=Math.sqrt(Math.pow(t.wishedSpeakerPos[i][0]-e[i][0],2)+Math.pow(t.wishedSpeakerPos[i][1]-e[i][1],2));console.log("summed / average angular dist between asked and present pos:",Math.round(100*r)/100,"deg /",Math.round(r/t.wishedSpeakerPos.length*100)/100,"deg"),t.decodingMatrix=s.getAmbisonicDecMtx(e,t.order),t.hoaBuffer=t.getHoaFilterFromHrirFilter(),t.onLoad(t.hoaBuffer)}))}},{key:"getHoaFilterFromHrirFilter",value:function(){for(var e=this.hrirBuffer[0].length,t=this.hrirBuffer[0].sampleRate,n=this.context.createBuffer(this.nCh,e,t),r=0;r<this.nCh;r++){for(var i=new Float32Array(e),a=0;a<this.hrirBuffer.length;a++)for(var o=0;o<e;o++)i[o]+=this.decodingMatrix[a][r]*this.hrirBuffer[a].getChannelData(0)[o];n.getChannelData(r).set(i)}return n}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDataBase=t.HrtfSet=void 0;var r=a(n(333)),i=a(n(349));function a(e){return e&&e.__esModule?e:{default:e}}t.HrtfSet=r.default,t.ServerDataBase=i.default,t.default={HrtfSet:r.default,ServerDataBase:i.default}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HrtfSet=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(356)),a=d(n(334)),o=n(116),s=n(336),u=d(n(337)),l=d(n(339)),c=n(341);
/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @fileOverview Container for HRTF set: load a set from an URL and get
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * filters from corresponding positions.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author Jean-Philippe.Lambert@ircam.fr
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @copyright 2015-2016 IRCAM, Paris, France
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @license BSD-3-Clause
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */function d(e){return e&&e.__esModule?e:{default:e}}function h(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=t.HrtfSet=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};f(this,e),this._audioContext=t.audioContext,this._ready=!1,this.coordinateSystem=t.coordinateSystem,this.filterCoordinateSystem=t.filterCoordinateSystem,this.filterPositions=t.filterPositions,this.filterAfterLoad=t.filterAfterLoad}return r(e,[{key:"applyFilterPositions",value:function(){var e=this,t=this._filterPositions.map((function(t){return e._kdt.nearest({x:t[0],y:t[1],z:t[2]},1).pop()[0]}));t=[].concat(h(new Set(t))),this._kdt=l.default.tree.createKdTree(t,l.default.distanceSquared,["x","y","z"])}},{key:"load",value:function(e){var t=this,n=e.split(".").pop(),r="sofa"===n?e+".json":e;return void 0!==this._filterPositions&&!this.filterAfterLoad&&"sofa"===n?Promise.all([this._loadMetaAndPositions(e),this._loadDataSet(e)]).then((function(n){var r=n[0],i=n[1];return t._loadSofaPartial(e,r,i).then((function(){return t._ready=!0,t}))})).catch((function(){return t._loadSofaFull(r).then((function(){return t.applyFilterPositions(),t._ready=!0,t}))})):this._loadSofaFull(r).then((function(){return void 0!==t._filterPositions&&t.filterAfterLoad&&t.applyFilterPositions(),t._ready=!0,t}))}},{key:"export",value:function(){var e=this,t=void 0,n=u.default.systemType(this.filterCoordinateSystem);switch(n){case"cartesian":t=this._sofaSourcePosition.map((function(e){return u.default.glToSofaCartesian([],e)}));break;case"spherical":t=this._sofaSourcePosition.map((function(e){return u.default.glToSofaSpherical([],e)}));break;default:throw new Error("Bad source position type "+n+" for export.")}var r=this._sofaSourcePosition.map((function(t){for(var n=e._kdt.nearest({x:t[0],y:t[1],z:t[2]},1).pop()[0].fir,r=[],i=0;i<n.numberOfChannels;++i)r.push([].concat(h(n.getChannelData(i))));return r}));return(0,s.stringifySofa)({name:this._sofaName,metaData:this._sofaMetaData,ListenerPosition:[0,0,0],ListenerPositionType:"cartesian",ListenerUp:[0,0,1],ListenerUpType:"cartesian",ListenerView:[1,0,0],ListenerViewType:"cartesian",SourcePositionType:n,SourcePosition:t,DataSamplingRate:this._audioContext.sampleRate,DataDelay:this._sofaDelay,DataIR:r,RoomVolume:this._sofaRoomVolume})}},{key:"nearest",value:function(e){var t=u.default.systemToGl([],e,this.coordinateSystem),n=this._kdt.nearest({x:t[0],y:t[1],z:t[2]},1).pop(),r=n[0];return u.default.glToSystem(t,[r.x,r.y,r.z],this.coordinateSystem),{distance:n[1],fir:r.fir,index:r.index,position:t}}},{key:"nearestFir",value:function(e){return this.nearest(e).fir}},{key:"_createKdTree",value:function(e){var t=this,n=e.map((function(e){var n=e[2],r=t._audioContext.createBuffer(n.length,n[0].length,t._audioContext.sampleRate);return n.forEach((function(e,t){r.getChannelData(t).set(e)})),{index:e[0],x:e[1][0],y:e[1][1],z:e[1][2],fir:r}}));return this._sofaSourcePosition=n.map((function(e){return[e.x,e.y,e.z]})),this._kdt=l.default.tree.createKdTree(n,l.default.distanceSquared,["x","y","z"]),this}},{key:"_generateIndicesPositionsFirs",value:function(e,t,n,r){var i=this,a=n.map((function(n,a){var o=n.length;if(2!==o)throw new Error("Bad number of channels for IR index "+e[a]+" ("+o+" instead of 2)");if(2!==r[0].length)throw new Error("Bad delay format for IR index "+e[a]+" (first element in Data.Delay is "+r[0]+" instead of [[delayL, delayR]] )");var s=void 0!==r[a]?r[a]:r[0],u=n.map((function(t,n){if(s[n]<0)throw new Error("Negative delay detected (not handled at the moment): delay index "+e[a]+" channel "+n);return(0,c.resampleFloat32Array)({inputSamples:t,inputDelay:s[n],inputSampleRate:i._sofaSampleRate,outputSampleRate:i._audioContext.sampleRate})}));return Promise.all(u).then((function(n){return[e[a],t[a],n]})).catch((function(e){throw new Error("Unable to re-sample impulse response "+a+". "+e.message)}))}));return Promise.all(a)}},{key:"_loadDataSet",value:function(e){return new Promise((function(t,n){var r=e+".dds",i=new window.XMLHttpRequest;i.open("GET",r),i.onerror=function(){n(new Error("Unable to GET "+r+", status "+i.status+" "+i.responseText))},i.onload=function(){if(i.status<200||i.status>=300)i.onerror();else try{var e=(0,o.parseDataSet)(i.response);t(e)}catch(e){n(new Error("Unable to parse "+r+". "+e.message))}},i.send()}))}},{key:"_loadMetaAndPositions",value:function(e){var t=this;return new Promise((function(n,r){var i=e+".json?ListenerPosition,ListenerUp,ListenerView,SourcePosition,Data.Delay,Data.SamplingRate,EmitterPosition,ReceiverPosition,RoomVolume",a=new window.XMLHttpRequest;a.open("GET",i),a.onerror=function(){r(new Error("Unable to GET "+i+", status "+a.status+" "+a.responseText))},a.onload=function(){if(a.status<200||a.status>=300)a.onerror();else try{var o=(0,s.parseSofa)(a.response);t._setMetaData(o,e);var u=t._sourcePositionsToGl(o).map((function(e,t){return{x:e[0],y:e[1],z:e[2],index:t}})),c=l.default.tree.createKdTree(u,l.default.distanceSquared,["x","y","z"]),d=t._filterPositions.map((function(e){return c.nearest({x:e[0],y:e[1],z:e[2]},1).pop()[0].index}));d=[].concat(h(new Set(d))),t._sofaUrl=e,n(d)}catch(e){r(new Error("Unable to parse "+i+". "+e.message))}},a.send()}))}},{key:"_loadSofaFull",value:function(e){var t=this;return new Promise((function(n,r){var i=new window.XMLHttpRequest;i.open("GET",e),i.onerror=function(){r(new Error("Unable to GET "+e+", status "+i.status+" "+i.responseText))},i.onload=function(){if(i.status<200||i.status>=300)i.onerror();else try{var a=(0,s.parseSofa)(i.response);t._setMetaData(a,e);var o=t._sourcePositionsToGl(a);t._generateIndicesPositionsFirs(o.map((function(e,t){return t})),o,a["Data.IR"].data,a["Data.Delay"].data).then((function(r){t._createKdTree(r),t._sofaUrl=e,n(t)}))}catch(t){r(new Error("Unable to parse "+e+". "+t.message))}},i.send()}))}},{key:"_loadSofaPartial",value:function(e,t,n){var r=this,i=t.map((function(t){return new Promise((function(i,a){var o=e+".json?SourcePosition["+t+"][0:1:"+(n.SourcePosition.C-1)+"],Data.IR["+t+"][0:1:"+(n["Data.IR"].R-1)+"][0:1:"+(n["Data.IR"].N-1)+"]",u=new window.XMLHttpRequest;u.open("GET",o),u.onerror=function(){a(new Error("Unable to GET "+o+", status "+u.status+" "+u.responseText))},u.onload=function(){(u.status<200||u.status>=300)&&u.onerror();try{var e=(0,s.parseSofa)(u.response),n=r._sourcePositionsToGl(e);r._generateIndicesPositionsFirs([t],n,e["Data.IR"].data,e["Data.Delay"].data).then((function(e){i(e[0])}))}catch(e){a(new Error("Unable to parse "+o+". "+e.message))}},u.send()}))}));return Promise.all(i).then((function(e){return r._createKdTree(e),r}))}},{key:"_setMetaData",value:function(e,t){if(void 0!==e.metaData.DataType&&"FIR"!==e.metaData.DataType)throw new Error("According to meta-data, SOFA data type is not FIR");var n=(new Date).toISOString();this._sofaName=void 0!==e.name?""+e.name:"HRTF.sofa",this._sofaMetaData=void 0!==e.metaData?e.metaData:{},void 0!==t&&(this._sofaMetaData.OriginalUrl=t),this._sofaMetaData.Converter="Ircam "+a.default.name+" "+a.default.version+" javascript API ",this._sofaMetaData.DateConverted=n,this._sofaSampleRate=void 0!==e["Data.SamplingRate"]?e["Data.SamplingRate"].data[0]:48e3,this._sofaSampleRate!==this._audioContext.sampleRate&&(this._sofaMetaData.OriginalSampleRate=this._sofaSampleRate),this._sofaDelay=void 0!==e["Data.Delay"]?e["Data.Delay"].data:[0,0],this._sofaRoomVolume=void 0!==e.RoomVolume?e.RoomVolume.data[0]:void 0;var r=u.default.sofaToSofaCartesian([],e.ListenerPosition.data[0],(0,s.conformSofaCoordinateSystem)(e.ListenerPosition.Type||"cartesian")),o=u.default.sofaToSofaCartesian([],e.ListenerView.data[0],(0,s.conformSofaCoordinateSystem)(e.ListenerView.Type||"cartesian")),l=u.default.sofaToSofaCartesian([],e.ListenerUp.data[0],(0,s.conformSofaCoordinateSystem)(e.ListenerUp.Type||"cartesian"));this._sofaToGl=i.mat4.lookAt([],r,o,l)}},{key:"_sourcePositionsToGl",value:function(e){var t=this,n=e.SourcePosition.data;switch(void 0!==e.SourcePosition.Type?e.SourcePosition.Type:"spherical"){case"cartesian":n.forEach((function(e){i.vec3.transformMat4(e,e,t._sofaToGl)}));break;case"spherical":n.forEach((function(e){u.default.sofaSphericalToSofaCartesian(e,e),i.vec3.transformMat4(e,e,t._sofaToGl)}));break;default:throw new Error("Bad source position type")}return n}},{key:"coordinateSystem",set:function(e){this._coordinateSystem=void 0!==e?e:"gl"},get:function(){return this._coordinateSystem}},{key:"filterCoordinateSystem",set:function(e){this._filterCoordinateSystem=void 0!==e?e:this.coordinateSystem},get:function(){return this._filterCoordinateSystem}},{key:"filterPositions",set:function(e){if(void 0===e)this._filterPositions=void 0;else switch(this.filterCoordinateSystem){case"gl":this._filterPositions=e.map((function(e){return e.slice(0)}));break;case"sofaCartesian":this._filterPositions=e.map((function(e){return u.default.sofaCartesianToGl([],e)}));break;case"sofaSpherical":this._filterPositions=e.map((function(e){return u.default.sofaSphericalToGl([],e)}));break;default:throw new Error("Bad filter coordinate system")}},get:function(){var e=void 0;if(void 0!==this._filterPositions)switch(this.filterCoordinateSystem){case"gl":e=this._filterPositions.map((function(e){return e.slice(0)}));break;case"sofaCartesian":e=this._filterPositions.map((function(e){return u.default.glToSofaCartesian([],e)}));break;case"sofaSpherical":e=this._filterPositions.map((function(e){return u.default.glToSofaSpherical([],e)}));break;default:throw new Error("Bad filter coordinate system")}return e}},{key:"filterAfterLoad",set:function(e){this._filterAfterLoad=void 0!==e&&e},get:function(){return this._filterAfterLoad}},{key:"isReady",get:function(){return this._ready}},{key:"sofaName",get:function(){return this._sofaName}},{key:"sofaUrl",get:function(){return this._sofaUrl}},{key:"sofaSampleRate",get:function(){return this._sofaSampleRate}},{key:"sofaMetaData",get:function(){return this._sofaMetaData}}]),e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=t.name=t.license=t.description=void 0;var r,i=n(335),a=(r=i)&&r.__esModule?r:{default:r};var o=a.default.description;
/**
 * @fileOverview Information on the library, from the `package.json` file.
 *
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2016 IRCAM, Paris, France
 * @license BSD-3-Clause
 */t.description=o;var s=a.default.license;t.license=s;var u=a.default.name;t.name=u;var l=a.default.version;t.version=l,t.default={description:o,license:s,name:u,version:l}},function(e){e.exports=JSON.parse('{"_from":"github:Ircam-RnD/serveSofaHrir","_id":"serve-sofa-hrir@0.4.2","_inBundle":false,"_integrity":"","_location":"/serve-sofa-hrir","_phantomChildren":{},"_requested":{"type":"git","raw":"serve-sofa-hrir@github:Ircam-RnD/serveSofaHrir","name":"serve-sofa-hrir","escapedName":"serve-sofa-hrir","rawSpec":"github:Ircam-RnD/serveSofaHrir","saveSpec":"github:Ircam-RnD/serveSofaHrir","fetchSpec":null,"gitCommittish":null},"_requiredBy":["/ambisonics"],"_resolved":"github:Ircam-RnD/serveSofaHrir#71df5cec963f5f99482ee51b44814a4b7f504847","_spec":"serve-sofa-hrir@github:Ircam-RnD/serveSofaHrir","_where":"/Users/tommi/Desktop/hoastIEM/hoast-player/node_modules/ambisonics","authors":["Jean-Philippe.Lambert@ircam.fr","Arnau Julià <arnau.julia@gmail.com>","Samuel.Goldszmidt@ircam.fr","David.Poirier-Quinot@ircam.fr"],"bugs":{"url":"https://github.com/Ircam-RnD/serveSofaHrir/issues"},"bundleDependencies":false,"dependencies":{"fractional-delay":"git://github.com/Ircam-RnD/fractional-delay.git#gh-pages","gl-matrix":"^2.4.0","kd.tree":"github:akshaylive/node-kdt#39bc780704a324393bca68a17cf7bc71be8544c6"},"deprecated":false,"description":"Utility to fetch and shape sofa formated HRIR from server","devDependencies":{"babel-cli":"^6.5.1","babel-eslint":"^4.1.8","babel-preset-es2015":"^6.5.0","babelify":"^7.2.0","blue-tape":"^0.1.11","browserify":"^12.0.2","esdoc":"^0.4.6","eslint":"^1.10.3","eslint-config-airbnb":"^1.0.2","eslint-plugin-html":"^1.4.0","jscs":"2.11.0","jscs-jsdoc":"^1.3.1","tape":"^4.4.0","tape-run":"^2.1.2","testling":"^1.7.1","watch":"^0.17.1"},"engines":{"node":"0.12 || 4","npm":">=1.0.0 <3.0.0"},"exports":"serveSofaHrir","homepage":"https://github.com/Ircam-RnD/serveSofaHrir#readme","license":"BSD-3-Clause","main":"./dist/","name":"serve-sofa-hrir","repository":{"type":"git","url":"git+https://github.com/Ircam-RnD/serveSofaHrir.git"},"scripts":{"browserify":"browserify ./src/index.js -t [ babelify ] --standalone serveSofaHrir > serveSofaHrir.js","bundle":"npm run lint && npm run test && npm run doc && npm run compile && npm run browserify","compile":"rm -rf ./dist && babel ./src/ --out-dir ./dist/","doc":"esdoc -c esdoc.json","lint":"eslint ./src/ ./test/ && jscs --verbose ./src/ ./test/","lint-examples":"eslint -c examples/.eslintrc ./examples/*.html","test":"browserify test/*/*.js -t [ babelify ] --exclude \'test/*/*_listen.js*\' --exclude \'test/*/*_issues.js\' | tape-run","test-browser":"browserify test/*/*.js -t [ babelify ] --exclude \'test/*/*_listen.js*\' --exclude \'test/*/*_issues.js\' | testling -u","test-issues":"browserify test/*/*_issues.js -t [ babelify ] | tape-run","test-listen":"browserify test/*/*_listen.js -t [ babelify ] | tape-run","watch":"watch \'npm run browserify && echo $( date ): browserified\' ./src/"},"standalone":"serveSofaHrir","version":"0.4.2"}')},function(e,t,n){"use strict";
/**
 * @fileOverview Parser functions for SOFA files
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2015 IRCAM, Paris, France
 * @license BSD-3-Clause
 */
function r(e){try{var t=JSON.parse(e),n={};if(n.name=t.name,void 0!==t.attributes){n.metaData={};var r=t.attributes.find((function(e){return"NC_GLOBAL"===e.name}));void 0!==r&&r.attributes.forEach((function(e){n.metaData[e.name]=e.value[0]}))}if(void 0!==t.leaves)t.leaves.forEach((function(e){n[e.name]={},e.attributes.forEach((function(t){n[e.name][t.name]=t.value[0]})),n[e.name].shape=e.shape,n[e.name].data=e.data}));return n}catch(e){throw new Error("Unable to parse SOFA string. "+e.message)}}function i(e){var t=void 0;switch(e){case"cartesian":t="sofaCartesian";break;case"spherical":t="sofaSpherical";break;default:throw new Error("Bad SOFA type "+e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseSofa=r,t.stringifySofa=function(e){var t={};void 0!==e.name&&(t.name=e.name);if(void 0!==e.metaData){t.attributes=[];var n={name:"NC_GLOBAL",attributes:[]};for(var r in e.metaData)e.metaData.hasOwnProperty(r)&&n.attributes.push({name:r,value:[e.metaData[r]]});t.attributes.push(n)}var i="Float64",a=void 0;if(t.leaves=[],[["ListenerPosition","ListenerPositionType"],["ListenerUp","ListenerUpType"],["ListenerView","ListenerViewType"]].forEach((function(n){var r=n[0],o=e[r],s=e[n[1]];if(void 0!==o){switch(s){case"cartesian":a=[{name:"Type",value:["cartesian"]},{name:"Units",value:["metre, metre, metre"]}];break;case"spherical":a=[{name:"Type",value:["spherical"]},{name:"Units",value:["degree, degree, metre"]}];break;default:throw new Error("Unknown coordinate system type "+s+" for "+o)}t.leaves.push({name:r,type:i,attributes:a,shape:[1,3],data:[o]})}})),void 0!==e.SourcePosition){switch(e.SourcePositionType){case"cartesian":a=[{name:"Type",value:["cartesian"]},{name:"Units",value:["metre, metre, metre"]}];break;case"spherical":a=[{name:"Type",value:["spherical"]},{name:"Units",value:["degree, degree, metre"]}];break;default:throw new Error("Unknown coordinate system type "+e.SourcePositionType)}t.leaves.push({name:"SourcePosition",type:i,attributes:a,shape:[e.SourcePosition.length,e.SourcePosition[0].length],data:e.SourcePosition})}if(void 0===e.DataSamplingRate)throw new Error("No data sampling-rate");t.leaves.push({name:"Data.SamplingRate",type:i,attributes:[{name:"Unit",value:"hertz"}],shape:[1],data:[e.DataSamplingRate]});void 0!==e.DataDelay&&t.leaves.push({name:"Data.Delay",type:i,attributes:[],shape:[1,e.DataDelay.length],data:e.DataDelay});if(void 0===e.DataIR)throw new Error("No data IR");t.leaves.push({name:"Data.IR",type:i,attributes:[],shape:[e.DataIR.length,e.DataIR[0].length,e.DataIR[0][0].length],data:e.DataIR});void 0!==e.RoomVolume&&t.leaves.push({name:"RoomVolume",type:i,attributes:[{name:"Units",value:["cubic metre"]}],shape:[1],data:[e.RoomVolume]});return t.nodes=[],JSON.stringify(t)},t.conformSofaCoordinateSystem=i,t.default={parseSofa:r,conformSofaCoordinateSystem:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sofaCartesianToGl=o,t.glToSofaCartesian=s,t.sofaCartesianToSofaSpherical=u,t.sofaSphericalToSofaCartesian=l,t.sofaSphericalToGl=c,t.glToSofaSpherical=d,t.sofaToSofaCartesian=h,t.spat4CartesianToGl=f,t.glToSpat4Cartesian=p,t.spat4CartesianToSpat4Spherical=g,t.spat4SphericalToSpat4Cartesian=m,t.spat4SphericalToGl=v,t.glToSpat4Spherical=y,t.systemType=_,t.systemToGl=T,t.glToSystem=E;var r,i=n(338),a=(r=i)&&r.__esModule?r:{default:r};function o(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=0-r,e[1]=i,e[2]=0-n,e}
/**
 * @fileOverview Coordinate systems conversions. openGL, SOFA, and Spat4 (Ircam).
 *
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2015-2016 IRCAM, Paris, France
 * @license BSD-3-Clause
 */function s(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=0-i,e[1]=0-n,e[2]=r,e}function u(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r;return e[0]=(a.default.atan2(r,n)+360)%360,e[1]=a.default.atan2(i,Math.sqrt(o)),e[2]=Math.sqrt(o+i*i),e}function l(e,t){var n=t[0],r=t[1],i=t[2],o=a.default.cos(r);return e[0]=i*o*a.default.cos(n),e[1]=i*o*a.default.sin(n),e[2]=i*a.default.sin(r),e}function c(e,t){var n=t[0],r=t[1],i=t[2],o=a.default.cos(r);return e[0]=0-i*o*a.default.sin(n),e[1]=i*a.default.sin(r),e[2]=0-i*o*a.default.cos(n),e}function d(e,t){var n=0-t[2],r=0-t[0],i=t[1],o=n*n+r*r;return e[0]=(a.default.atan2(r,n)+360)%360,e[1]=a.default.atan2(i,Math.sqrt(o)),e[2]=Math.sqrt(o+i*i),e}function h(e,t,n){switch(n){case"sofaCartesian":e[0]=t[0],e[1]=t[1],e[2]=t[2];break;case"sofaSpherical":l(e,t);break;default:throw new Error("Bad coordinate system")}return e}function f(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=i,e[2]=0-r,e}function p(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=0-i,e[2]=r,e}function g(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r;return e[0]=a.default.atan2(n,r),e[1]=a.default.atan2(i,Math.sqrt(o)),e[2]=Math.sqrt(o+i*i),e}function m(e,t){var n=t[0],r=t[1],i=t[2],o=a.default.cos(r);return e[0]=i*o*a.default.sin(n),e[1]=i*o*a.default.cos(n),e[2]=i*a.default.sin(r),e}function v(e,t){var n=t[0],r=t[1],i=t[2],o=a.default.cos(r);return e[0]=i*o*a.default.sin(n),e[1]=i*a.default.sin(r),e[2]=0-i*o*a.default.cos(n),e}function y(e,t){var n=t[0],r=0-t[2],i=t[1],o=n*n+r*r;return e[0]=a.default.atan2(n,r),e[1]=a.default.atan2(i,Math.sqrt(o)),e[2]=Math.sqrt(o+i*i),e}function _(e){var t=void 0;if("sofaCartesian"===e||"spat4Cartesian"===e||"gl"===e)t="cartesian";else{if("sofaSpherical"!==e&&"spat4Spherical"!==e)throw new Error("Unknown coordinate system type "+e);t="spherical"}return t}function T(e,t,n){switch(n){case"gl":e[0]=t[0],e[1]=t[1],e[2]=t[2];break;case"sofaCartesian":o(e,t);break;case"sofaSpherical":c(e,t);break;case"spat4Cartesian":f(e,t);break;case"spat4Spherical":v(e,t);break;default:throw new Error("Bad coordinate system")}return e}function E(e,t,n){switch(n){case"gl":e[0]=t[0],e[1]=t[1],e[2]=t[2];break;case"sofaCartesian":s(e,t);break;case"sofaSpherical":d(e,t);break;case"spat4Cartesian":p(e,t);break;case"spat4Spherical":y(e,t);break;default:throw new Error("Bad coordinate system")}return e}t.default={glToSofaCartesian:s,glToSofaSpherical:d,glToSpat4Cartesian:p,glToSpat4Spherical:y,glToSystem:E,sofaCartesianToGl:o,sofaCartesianToSofaSpherical:u,sofaSphericalToGl:c,sofaSphericalToSofaCartesian:l,sofaToSofaCartesian:h,spat4CartesianToGl:f,spat4CartesianToSpat4Spherical:g,spat4SphericalToGl:v,spat4SphericalToSpat4Cartesian:m,systemToGl:T,systemType:_}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toRadian=a,t.fromRadian=o,t.cos=s,t.sin=u,t.atan2=l;
/**
 * @fileOverview Convert to and from degree
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2015-2016 IRCAM, Paris, France
 * @license BSD-3-Clause
 */
var r=t.toRadianFactor=Math.PI/180,i=t.fromRadianFactor=1/r;function a(e){return e*r}function o(e){return e*i}function s(e){return Math.cos(e*r)}function u(e){return Math.sin(e*r)}function l(e,t){return Math.atan2(e,t)*i}t.default={atan2:l,cos:s,fromRadian:o,fromRadianFactor:i,sin:u,toRadian:a,toRadianFactor:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tree=void 0,t.distanceSquared=o,t.distance=s;var r,i=n(340),a=(r=i)&&r.__esModule?r:{default:r};
/**
 * @fileOverview Helpers for k-d tree.
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2015-2016 IRCAM, Paris, France
 * @license BSD-3-Clause
 */
function o(e,t){var n=t.x-e.x,r=t.y-e.y,i=t.z-e.z;return n*n+r*r+i*i}function s(e,t){return Math.sqrt(this.distanceSquared(e,t))}t.tree=a.default,t.default={distance:s,distanceSquared:o,tree:a.default}},function(e,t){
/**
 * AUTHOR OF INITIAL JS LIBRARY
 * k-d Tree JavaScript - V 1.0
 *
 * https://github.com/ubilabs/kd-tree-javascript
 *
 * @author Mircea Pricop <pricop@ubilabs.net>, 2012
 * @author Martin Kleppe <kleppe@ubilabs.net>, 2012
 * @author Ubilabs http://ubilabs.net, 2012
 * @license MIT License <http://www.opensource.org/licenses/mit-license.php>
 */
function n(e,t,n){this.obj=e,this.left=null,this.right=null,this.parent=n,this.dimension=t}function r(e,t,r){var a=this;this.root=function e(t,i,a){var o,s,u=i%r.length;return 0===t.length?null:1===t.length?new n(t[0],u,a):(t.sort((function(e,t){return e[r[u]]-t[r[u]]})),(s=new n(t[o=Math.floor(t.length/2)],u,a)).left=e(t.slice(0,o),i+1,s),s.right=e(t.slice(o+1),i+1,s),s)}(e,0,null),this.insert=function(e){var t,i,a=function t(n,i){if(null===n)return i;var a=r[n.dimension];return e[a]<n.obj[a]?t(n.left,n):t(n.right,n)}(this.root,null);null!==a?(t=new n(e,(a.dimension+1)%r.length,a),i=r[a.dimension],e[i]<a.obj[i]?a.left=t:a.right=t):this.root=new n(e,0,null)},this.remove=function(e){var t;null!==(t=function t(n){if(null===n)return null;if(n.obj===e)return n;var i=r[n.dimension];return e[i]<n.obj[i]?t(n.left):t(n.right)}(a.root))&&function e(t){var n,i,o;if(null===t.left&&null===t.right)return null===t.parent?void(a.root=null):(o=r[t.parent.dimension],void(t.obj[o]<t.parent.obj[o]?t.parent.left=null:t.parent.right=null));i=(n=null!==t.left?function e(t,n){var i,a,o,s,u;return null===t?null:(i=r[n],t.dimension===n?null!==t.right?e(t.right,n):t:(a=t.obj[i],o=e(t.left,n),s=e(t.right,n),u=t,null!==o&&o.obj[i]>a&&(u=o),null!==s&&s.obj[i]>u.obj[i]&&(u=s),u))}(t.left,t.dimension):function e(t,n){var i,a,o,s,u;return null===t?null:(i=r[n],t.dimension===n?null!==t.left?e(t.left,n):t:(a=t.obj[i],o=e(t.left,n),s=e(t.right,n),u=t,null!==o&&o.obj[i]<a&&(u=o),null!==s&&s.obj[i]<u.obj[i]&&(u=s),u))}(t.right,t.dimension)).obj,e(n),t.obj=i}(t)},this.nearest=function(e,n,o){var s,u,l;if(l=new i((function(e){return-e[1]})),o)for(s=0;s<n;s+=1)l.push([null,o]);for(function i(o){if(!a.root)return[];var s,u,c,d,h=r[o.dimension],f=t(e,o.obj),p={};function g(e,t){l.push([e,t]),l.size()>n&&l.pop()}for(d=0;d<r.length;d+=1)d===o.dimension?p[r[d]]=e[r[d]]:p[r[d]]=o.obj[r[d]];u=t(p,o.obj),null!==o.right||null!==o.left?(i(s=null===o.right?o.left:null===o.left?o.right:e[h]<o.obj[h]?o.left:o.right),(l.size()<n||f<l.peek()[1])&&g(o,f),(l.size()<n||Math.abs(u)<l.peek()[1])&&null!==(c=s===o.left?o.right:o.left)&&i(c)):(l.size()<n||f<l.peek()[1])&&g(o,f)}(a.root),u=[],s=0;s<n&&s<l.content.length;s+=1)l.content[s][0]&&u.push([l.content[s][0].obj,l.content[s][1]]);return u},this.balanceFactor=function(){return function e(t){return null===t?0:Math.max(e(t.left),e(t.right))+1}(a.root)/(Math.log(function e(t){return null===t?0:e(t.left)+e(t.right)+1}(a.root))/Math.log(2))}}function i(e){this.content=[],this.scoreFunction=e}i.prototype={push:function(e){this.content.push(e),this.bubbleUp(this.content.length-1)},pop:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.sinkDown(0)),e},peek:function(){return this.content[0]},remove:function(e){for(var t=this.content.length,n=0;n<t;n++)if(this.content[n]==e){var r=this.content.pop();return void(n!=t-1&&(this.content[n]=r,this.scoreFunction(r)<this.scoreFunction(e)?this.bubbleUp(n):this.sinkDown(n)))}throw new Error("Node not found.")},size:function(){return this.content.length},bubbleUp:function(e){for(var t=this.content[e];e>0;){var n=Math.floor((e+1)/2)-1,r=this.content[n];if(!(this.scoreFunction(t)<this.scoreFunction(r)))break;this.content[n]=t,this.content[e]=r,e=n}},sinkDown:function(e){for(var t=this.content.length,n=this.content[e],r=this.scoreFunction(n);;){var i=2*(e+1),a=i-1,o=null;if(a<t){var s=this.content[a],u=this.scoreFunction(s);u<r&&(o=a)}if(i<t){var l=this.content[i];this.scoreFunction(l)<(null==o?r:u)&&(o=i)}if(null==o)break;this.content[e]=this.content[o],this.content[o]=n,e=o}}},e.exports={createKdTree:function(e,t,n){return new r(e,t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resampleFloat32Array=o;var r,i=n(342),a=(r=i)&&r.__esModule?r:{default:r};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new Promise((function(t,n){var r=e.inputSamples,i=e.inputSampleRate,o=void 0!==e.inputDelay?e.inputDelay:0,s=void 0!==e.outputSampleRate?e.outputSampleRate:i;if(i===s&&0===o)t(new Float32Array(r));else try{var u=Math.ceil(r.length*s/i),l=new window.OfflineAudioContext(1,u,s),c=l.createBuffer(1,r.length,i),d=new a.default(i,1);d.setDelay(o/i),c.getChannelData(0).set(d.process(r));var h=l.createBufferSource();h.buffer=c,h.connect(l.destination),h.start(),l.oncomplete=function(e){var n=e.renderedBuffer.getChannelData(0);t(n)},l.startRendering()}catch(e){n(new Error("Unable to re-sample Float32Array. "+e.message))}}));return t}
/**
   * @fileOverview Audio utilities
   * @author Jean-Philippe.Lambert@ircam.fr
   * @copyright 2016 IRCAM, Paris, France
   * @license BSD-3-Clause
   */t.default={resampleFloat32Array:o}},function(e,t,n){e.exports=n(343)},function(e,t,n){"use strict";var r=n(344).default,i=n(348).default;Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(t,n){i(this,e),this.delayTime=0,this.posRead=0,this.posWrite=0,this.fracXi1=0,this.fracYi1=0,this.intDelay=0,this.fracDelay=0,this.a1=void 0,this.sampleRate=t,this.maxDelayTime=n||1,this.bufferSize=this.maxDelayTime*this.sampleRate,this.bufferSize%1!=0&&(this.bufferSize=parseInt(this.bufferSize)+1),this.buffer=new Float32Array(this.bufferSize)}return r(e,[{key:"setDelay",value:function(e){if(!(e<this.maxDelayTime))throw new Error("delayTime > maxDelayTime");this.delayTime=e;var t=e*this.sampleRate;this.intDelay=parseInt(t),this.fracDelay=t-this.intDelay,this.resample(),0!==this.fracDelay&&this.updateThiranCoefficient()}},{key:"getDelay",value:function(){return this.delayTime}},{key:"process",value:function(e){for(var t=new Float32Array(e.length),n=0;n<e.length;n+=1)this.buffer[this.posWrite]=e[n],t[n]=this.buffer[this.posRead],this.updatePointers();return 0===this.fracDelay?t:t=new Float32Array(this.fractionalThiranProcess(t))}},{key:"updatePointers",value:function(){this.posWrite===this.buffer.length-1?this.posWrite=0:this.posWrite=this.posWrite+1,this.posRead===this.buffer.length-1?this.posRead=0:this.posRead=this.posRead+1}},{key:"updateThiranCoefficient",value:function(){this.a1=(1-this.fracDelay)/(1+this.fracDelay)}},{key:"resample",value:function(){if(this.posWrite-this.intDelay<0){var e=this.intDelay-this.posWrite;this.posRead=this.buffer.length-e}else this.posRead=this.posWrite-this.intDelay}},{key:"fractionalThiranProcess",value:function(e){for(var t,n,r=new Float32Array(e.length),i=this.fracXi1,a=this.fracYi1,o=0;o<e.length;o+=1)t=e[o],n=this.a1*t+i-this.a1*a,i=t,a=n,r[o]=n;return this.fracXi1=i,this.fracYi1=a,r}}]),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";var r=n(345).default;t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),r(e,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),t.__esModule=!0},function(e,t,n){e.exports={default:n(346),__esModule:!0}},function(e,t,n){var r=n(347);e.exports=function(e,t,n){return r.setDesc(e,t,n)}},function(e,t){var n=Object;e.exports={create:n.create,getProto:n.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:n.getOwnPropertyDescriptor,setDesc:n.defineProperty,setDescs:n.defineProperties,getKeys:n.keys,getNames:n.getOwnPropertyNames,getSymbols:n.getOwnPropertySymbols,each:[].forEach}},function(e,t,n){"use strict";t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.__esModule=!0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerDataBase=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(350),o=(r=a)&&r.__esModule?r:{default:r},s=n(116);
/**
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @fileOverview Access a remote catalogue from a SOFA server, and get URLs
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * with filtering.
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      *
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @author Jean-Philippe.Lambert@ircam.fr
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @copyright 2015-2016 IRCAM, Paris, France
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * @license BSD-3-Clause
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=t.ServerDataBase=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(u(this,e),this._server=t.serverUrl,void 0===this._server){var n="https:"===window.location.protocol?"https:":"http:";this._server=n+"//bili2.ircam.fr"}this._catalogue={},this._urls=[]}return i(e,[{key:"loadCatalogue",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._server+"/catalog.xml",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._catalogue,r=new Promise((function(r,i){var a=new window.XMLHttpRequest;a.open("GET",t),a.onerror=function(){i(new Error("Unable to GET "+t+", status "+a.status+" "+a.responseText))},a.onload=function(){if(a.status<200||a.status>=300)a.onerror();else{var s=(0,o.default)(a.response),u=s.querySelector("dataset"),l=s.querySelectorAll("dataset > catalogRef");if(0===l.length){n.urls=[];for(var c=s.querySelectorAll("dataset > dataset"),d=0;d<c.length;++d){var h=e._server+u.getAttribute("name")+"/"+c[d].getAttribute("name");e._urls.push(h),n.urls.push(h)}r(t)}else{for(var f=[],p=0;p<l.length;++p){var g=l[p].getAttribute("name"),m=e._server+u.getAttribute("name")+"/"+l[p].getAttribute("xlink:href");n[g]={},f.push(e.loadCatalogue(m,n[g]))}Promise.all(f).then((function(){e._urls.sort(),r(t)})).catch((function(e){i(e)}))}}},a.send()}));return r}},{key:"getUrls",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[e.convention,e.dataBase,e.equalisation,e.sampleRate,e.sosOrder],n="number"==typeof e.freePattern?e.freePattern.toString():e.freePattern,r=t.reduce((function(e,t){return e+"/"+(void 0!==t?"[^/]*(?:"+t+")[^/]*":"[^/]*")}),""),i=new RegExp(r,"i"),a=this._urls.filter((function(e){return i.test(e)}));if(void 0!==n){var o=n.split(/\s+/);o.forEach((function(e){i=new RegExp(e,"i"),a=a.filter((function(e){return i.test(e)}))}))}return a}},{key:"getDataSetDefinitions",value:function(e){return new Promise((function(t,n){var r=e+".dds",i=new window.XMLHttpRequest;i.open("GET",r),i.onerror=function(){n(new Error("Unable to GET "+r+", status "+i.status+" "+i.responseText))},i.onload=function(){i.status<200||i.status>=300?i.onerror():t((0,s.parseDataSet)(i.response))},i.send()}))}},{key:"getSourcePositions",value:function(e){return new Promise((function(t,n){var r=e+".json?SourcePosition",i=new window.XMLHttpRequest;i.open("GET",r),i.onerror=function(){n(new Error("Unable to GET "+r+", status "+i.status+" "+i.responseText))},i.onload=function(){if(i.status<200||i.status>=300)i.onerror();else try{var e=JSON.parse(i.response);if("SourcePosition"!==e.leaves[0].name)throw new Error("SourcePosition not found");t(e.leaves[0].data)}catch(e){n(new Error("Unable to parse response from "+r+". "+e.message))}},i.send()}))}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});
/**
 * @fileOverview Simple XML parser, as a DOM parser.
 * @author Jean-Philippe.Lambert@ircam.fr
 * @copyright 2015-2016 IRCAM, Paris, France
 * @license BSD-3-Clause
 */
var r=t.parseXml=void 0;if(void 0!==window.DOMParser)t.parseXml=r=function(e){return(new window.DOMParser).parseFromString(e,"text/xml")};else{if(void 0===window.ActiveXObject||!new window.ActiveXObject("Microsoft.XMLDOM"))throw new Error("No XML parser found");t.parseXml=r=function(e){var t=new window.ActiveXObject("Microsoft.XMLDOM");return t.async="false",t.loadXML(e),t}}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fuma2acn=t.n3d2sn3d=t.sn3d2n3d=t.acn2wxyz=t.wxyz2acn=void 0;var r,i=n(10),a=(r=i)&&r.__esModule?r:{default:r};t.wxyz2acn=function e(t){(0,a.default)(this,e),this.ctx=t,this.in=this.ctx.createChannelSplitter(4),this.out=this.ctx.createChannelMerger(4),this.gains=new Array(4);for(var n=0;n<4;n++)this.gains[n]=this.ctx.createGain(),this.gains[n].gain.value=0==n?Math.SQRT2:Math.sqrt(3),this.gains[n].connect(this.out,0,n);this.in.connect(this.gains[0],0,0),this.in.connect(this.gains[3],1,0),this.in.connect(this.gains[1],2,0),this.in.connect(this.gains[2],3,0)},t.acn2wxyz=function e(t){(0,a.default)(this,e),this.ctx=t,this.in=this.ctx.createChannelSplitter(4),this.out=this.ctx.createChannelMerger(4),this.gains=new Array(4);for(var n=0;n<4;n++)this.gains[n]=this.ctx.createGain(),this.gains[n].gain.value=0==n?Math.SQRT1_2:1/Math.sqrt(3),this.gains[n].connect(this.out,0,n);this.in.connect(this.gains[0],0,0),this.in.connect(this.gains[2],1,0),this.in.connect(this.gains[3],2,0),this.in.connect(this.gains[1],3,0)},t.sn3d2n3d=function e(t,n){(0,a.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.gains=new Array(this.nCh);for(var r=0;r<this.nCh;r++){var i=Math.floor(Math.sqrt(r));this.gains[r]=this.ctx.createGain(),this.gains[r].gain.value=Math.sqrt(2*i+1),this.in.connect(this.gains[r],r,0),this.gains[r].connect(this.out,0,r)}},t.n3d2sn3d=function e(t,n){(0,a.default)(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.gains=new Array(this.nCh);for(var r=0;r<this.nCh;r++){var i=Math.floor(Math.sqrt(r));this.gains[r]=this.ctx.createGain(),this.gains[r].gain.value=1/Math.sqrt(2*i+1),this.in.connect(this.gains[r],r,0),this.gains[r].connect(this.out,0,r)}},t.fuma2acn=function e(t,n){(0,a.default)(this,e),n>3&&(console.log("FuMa specifiction is supported up to 3rd order"),n=3);var r=[Math.sqrt(2),Math.sqrt(3),Math.sqrt(3),Math.sqrt(3),Math.sqrt(15)/2,Math.sqrt(15)/2,Math.sqrt(5),Math.sqrt(15)/2,Math.sqrt(15)/2,Math.sqrt(35/8),Math.sqrt(35)/3,Math.sqrt(224/45),Math.sqrt(7),Math.sqrt(224/45),Math.sqrt(35)/3,Math.sqrt(35/8)];if(this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.gains=[],this.remapArray=[],this.remapArray.push(0,2,3,1),n>1)for(var i,o=0,s=0;s<this.nCh;s++)if(i=[],s>=(o+1)*(o+1)){for(var u=((o+=1)+1)*(o+1);u<(o+2)*(o+2);u++)(u+o%2)%2==0?i.push(u):i.unshift(u);this.remapArray=this.remapArray.concat(i)}for(s=0;s<this.nCh;s++)this.gains[s]=this.ctx.createGain(),this.gains[s].gain.value=r[s],this.in.connect(this.gains[s],this.remapArray[s],0),this.gains[s].connect(this.out,0,s)}},function(e,t,n){var r=n(353),i=n(354);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1},o=(r(i,a),i.locals?i.locals:{});e.exports=o},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},a=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var a=e[i],u=t.base?a[0]+t.base:a[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var d=s(c),h={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(h)):o.push({identifier:c,updater:m(h,t),references:1}),r.push(c)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=a(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,d=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function h(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=d(t,i);else{var a=document.createTextNode(i),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(a,o[t]):e.appendChild(a)}}function f(e,t,n){var r=n.css,i=n.media,a=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,g=0;function m(e,t){var n,r,i;if(t.singleton){var a=g++;n=p||(p=l(t)),r=h.bind(null,n,a,!1),i=h.bind(null,n,a,!0)}else n=l(t),r=f.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);o[i].references--}for(var a=u(e,t),l=0;l<n.length;l++){var c=s(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=a}}}},function(e,t,n){(t=n(355)(!1)).push([e.i,'@charset "UTF-8";\n.vjs-modal-dialog .vjs-modal-dialog-content, .video-js .vjs-modal-dialog, .vjs-button > .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.vjs-button > .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  text-align: center;\n}\n\n@font-face {\n  font-family: VideoJS;\n  src: url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play, .video-js .vjs-play-control .vjs-icon-placeholder, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play:before, .video-js .vjs-play-control .vjs-icon-placeholder:before, .video-js .vjs-big-play-button .vjs-icon-placeholder:before {\n  content: "\\f101";\n}\n\n.vjs-icon-play-circle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-play-circle:before {\n  content: "\\f102";\n}\n\n.vjs-icon-pause, .video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-pause:before, .video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before {\n  content: "\\f103";\n}\n\n.vjs-icon-volume-mute, .video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-mute:before, .video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before {\n  content: "\\f104";\n}\n\n.vjs-icon-volume-low, .video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-low:before, .video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before {\n  content: "\\f105";\n}\n\n.vjs-icon-volume-mid, .video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-mid:before, .video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before {\n  content: "\\f106";\n}\n\n.vjs-icon-volume-high, .video-js .vjs-mute-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-volume-high:before, .video-js .vjs-mute-control .vjs-icon-placeholder:before {\n  content: "\\f107";\n}\n\n.vjs-icon-fullscreen-enter, .video-js .vjs-fullscreen-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-fullscreen-enter:before, .video-js .vjs-fullscreen-control .vjs-icon-placeholder:before {\n  content: "\\f108";\n}\n\n.vjs-icon-fullscreen-exit, .video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-fullscreen-exit:before, .video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before {\n  content: "\\f109";\n}\n\n.vjs-icon-square {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-square:before {\n  content: "\\f10a";\n}\n\n.vjs-icon-spinner {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-spinner:before {\n  content: "\\f10b";\n}\n\n.vjs-icon-subtitles, .video-js .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder, .video-js .vjs-subtitles-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-subtitles:before, .video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before, .video-js .vjs-subtitles-button .vjs-icon-placeholder:before {\n  content: "\\f10c";\n}\n\n.vjs-icon-captions, .video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,\n.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder, .video-js .vjs-captions-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-captions:before, .video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,\n.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before, .video-js .vjs-captions-button .vjs-icon-placeholder:before {\n  content: "\\f10d";\n}\n\n.vjs-icon-chapters, .video-js .vjs-chapters-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-chapters:before, .video-js .vjs-chapters-button .vjs-icon-placeholder:before {\n  content: "\\f10e";\n}\n\n.vjs-icon-share {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-share:before {\n  content: "\\f10f";\n}\n\n.vjs-icon-cog {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cog:before {\n  content: "\\f110";\n}\n\n.vjs-icon-circle, .vjs-seek-to-live-control .vjs-icon-placeholder, .video-js .vjs-volume-level, .video-js .vjs-play-progress {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle:before, .vjs-seek-to-live-control .vjs-icon-placeholder:before, .video-js .vjs-volume-level:before, .video-js .vjs-play-progress:before {\n  content: "\\f111";\n}\n\n.vjs-icon-circle-outline {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle-outline:before {\n  content: "\\f112";\n}\n\n.vjs-icon-circle-inner-circle {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-circle-inner-circle:before {\n  content: "\\f113";\n}\n\n.vjs-icon-hd {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-hd:before {\n  content: "\\f114";\n}\n\n.vjs-icon-cancel, .video-js .vjs-control.vjs-close-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-cancel:before, .video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before {\n  content: "\\f115";\n}\n\n.vjs-icon-replay, .video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-replay:before, .video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before {\n  content: "\\f116";\n}\n\n.vjs-icon-facebook {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-facebook:before {\n  content: "\\f117";\n}\n\n.vjs-icon-gplus {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-gplus:before {\n  content: "\\f118";\n}\n\n.vjs-icon-linkedin {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-linkedin:before {\n  content: "\\f119";\n}\n\n.vjs-icon-twitter {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-twitter:before {\n  content: "\\f11a";\n}\n\n.vjs-icon-tumblr {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-tumblr:before {\n  content: "\\f11b";\n}\n\n.vjs-icon-pinterest {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-pinterest:before {\n  content: "\\f11c";\n}\n\n.vjs-icon-audio-description, .video-js .vjs-descriptions-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-audio-description:before, .video-js .vjs-descriptions-button .vjs-icon-placeholder:before {\n  content: "\\f11d";\n}\n\n.vjs-icon-audio, .video-js .vjs-audio-button .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-audio:before, .video-js .vjs-audio-button .vjs-icon-placeholder:before {\n  content: "\\f11e";\n}\n\n.vjs-icon-next-item {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-next-item:before {\n  content: "\\f11f";\n}\n\n.vjs-icon-previous-item {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-previous-item:before {\n  content: "\\f120";\n}\n\n.vjs-icon-picture-in-picture-enter, .video-js .vjs-picture-in-picture-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-picture-in-picture-enter:before, .video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before {\n  content: "\\f121";\n}\n\n.vjs-icon-picture-in-picture-exit, .video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder {\n  font-family: VideoJS;\n  font-weight: normal;\n  font-style: normal;\n}\n.vjs-icon-picture-in-picture-exit:before, .video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before {\n  content: "\\f122";\n}\n\n.video-js {\n  display: block;\n  vertical-align: top;\n  box-sizing: border-box;\n  color: #fff;\n  background-color: #000;\n  position: relative;\n  padding: 0;\n  font-size: 10px;\n  line-height: 1;\n  font-weight: normal;\n  font-style: normal;\n  font-family: Arial, Helvetica, sans-serif;\n  word-break: initial;\n}\n.video-js:-moz-full-screen {\n  position: absolute;\n}\n.video-js:-webkit-full-screen {\n  width: 100% !important;\n  height: 100% !important;\n}\n\n.video-js[tabindex="-1"] {\n  outline: none;\n}\n\n.video-js *,\n.video-js *:before,\n.video-js *:after {\n  box-sizing: inherit;\n}\n\n.video-js ul {\n  font-family: inherit;\n  font-size: inherit;\n  line-height: inherit;\n  list-style-position: outside;\n  margin-left: 0;\n  margin-right: 0;\n  margin-top: 0;\n  margin-bottom: 0;\n}\n\n.video-js.vjs-fluid,\n.video-js.vjs-16-9,\n.video-js.vjs-4-3 {\n  width: 100%;\n  max-width: 100%;\n  height: 0;\n}\n\n.video-js.vjs-16-9 {\n  padding-top: 56.25%;\n}\n\n.video-js.vjs-4-3 {\n  padding-top: 75%;\n}\n\n.video-js.vjs-fill {\n  width: 100%;\n  height: 100%;\n}\n\n.video-js .vjs-tech {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\nbody.vjs-full-window {\n  padding: 0;\n  margin: 0;\n  height: 100%;\n}\n\n.vjs-full-window .video-js.vjs-fullscreen {\n  position: fixed;\n  overflow: hidden;\n  z-index: 1000;\n  left: 0;\n  top: 0;\n  bottom: 0;\n  right: 0;\n}\n\n.video-js.vjs-fullscreen {\n  width: 100% !important;\n  height: 100% !important;\n  padding-top: 0 !important;\n}\n\n.video-js.vjs-fullscreen.vjs-user-inactive {\n  cursor: none;\n}\n\n.vjs-hidden {\n  display: none !important;\n}\n\n.vjs-disabled {\n  opacity: 0.5;\n  cursor: default;\n}\n\n.video-js .vjs-offscreen {\n  height: 1px;\n  left: -9999px;\n  position: absolute;\n  top: 0;\n  width: 1px;\n}\n\n.vjs-lock-showing {\n  display: block !important;\n  opacity: 1;\n  visibility: visible;\n}\n\n.vjs-no-js {\n  padding: 20px;\n  color: #fff;\n  background-color: #000;\n  font-size: 18px;\n  font-family: Arial, Helvetica, sans-serif;\n  text-align: center;\n  width: 300px;\n  height: 150px;\n  margin: 0px auto;\n}\n\n.vjs-no-js a,\n.vjs-no-js a:visited {\n  color: #66A8CC;\n}\n\n.video-js .vjs-big-play-button {\n  font-size: 3em;\n  line-height: 1.5em;\n  height: 1.63332em;\n  width: 3em;\n  display: block;\n  position: absolute;\n  top: 10px;\n  left: 10px;\n  padding: 0;\n  cursor: pointer;\n  opacity: 1;\n  border: 0.06666em solid #fff;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n  border-radius: 0.3em;\n  transition: all 0.4s;\n}\n.vjs-big-play-centered .vjs-big-play-button {\n  top: 50%;\n  left: 50%;\n  margin-top: -0.81666em;\n  margin-left: -1.5em;\n}\n\n.video-js:hover .vjs-big-play-button,\n.video-js .vjs-big-play-button:focus {\n  border-color: #fff;\n  background-color: #73859f;\n  background-color: rgba(115, 133, 159, 0.5);\n  transition: all 0s;\n}\n\n.vjs-controls-disabled .vjs-big-play-button,\n.vjs-has-started .vjs-big-play-button,\n.vjs-using-native-controls .vjs-big-play-button,\n.vjs-error .vjs-big-play-button {\n  display: none;\n}\n\n.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button {\n  display: block;\n}\n\n.video-js button {\n  background: none;\n  border: none;\n  color: inherit;\n  display: inline-block;\n  font-size: inherit;\n  line-height: inherit;\n  text-transform: none;\n  text-decoration: none;\n  transition: none;\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n}\n\n.vjs-control .vjs-button {\n  width: 100%;\n  height: 100%;\n}\n\n.video-js .vjs-control.vjs-close-button {\n  cursor: pointer;\n  height: 3em;\n  position: absolute;\n  right: 0;\n  top: 0.5em;\n  z-index: 2;\n}\n.video-js .vjs-modal-dialog {\n  background: rgba(0, 0, 0, 0.8);\n  background: linear-gradient(180deg, rgba(0, 0, 0, 0.8), rgba(255, 255, 255, 0));\n  overflow: auto;\n}\n\n.video-js .vjs-modal-dialog > * {\n  box-sizing: border-box;\n}\n\n.vjs-modal-dialog .vjs-modal-dialog-content {\n  font-size: 1.2em;\n  line-height: 1.5;\n  padding: 20px 24px;\n  z-index: 1;\n}\n\n.vjs-menu-button {\n  cursor: pointer;\n}\n\n.vjs-menu-button.vjs-disabled {\n  cursor: default;\n}\n\n.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu {\n  display: none;\n}\n\n.vjs-menu .vjs-menu-content {\n  display: block;\n  padding: 0;\n  margin: 0;\n  font-family: Arial, Helvetica, sans-serif;\n  overflow: auto;\n}\n\n.vjs-menu .vjs-menu-content > * {\n  box-sizing: border-box;\n}\n\n.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu {\n  display: none;\n}\n\n.vjs-menu li {\n  list-style: none;\n  margin: 0;\n  padding: 0.2em 0;\n  line-height: 1.4em;\n  font-size: 1.2em;\n  text-align: center;\n  text-transform: lowercase;\n}\n\n.vjs-menu li.vjs-menu-item:focus,\n.vjs-menu li.vjs-menu-item:hover,\n.js-focus-visible .vjs-menu li.vjs-menu-item:hover {\n  background-color: #73859f;\n  background-color: rgba(115, 133, 159, 0.5);\n}\n\n.vjs-menu li.vjs-selected,\n.vjs-menu li.vjs-selected:focus,\n.vjs-menu li.vjs-selected:hover,\n.js-focus-visible .vjs-menu li.vjs-selected:hover {\n  background-color: #fff;\n  color: #2B333F;\n}\n\n.vjs-menu li.vjs-menu-title {\n  text-align: center;\n  text-transform: uppercase;\n  font-size: 1em;\n  line-height: 2em;\n  padding: 0;\n  margin: 0 0 0.3em 0;\n  font-weight: bold;\n  cursor: default;\n}\n\n.vjs-menu-button-popup .vjs-menu {\n  display: none;\n  position: absolute;\n  bottom: 0;\n  width: 10em;\n  left: -3em;\n  height: 0em;\n  margin-bottom: 1.5em;\n  border-top-color: rgba(43, 51, 63, 0.7);\n}\n\n.vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n  position: absolute;\n  width: 100%;\n  bottom: 1.5em;\n  max-height: 15em;\n}\n\n.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 5em;\n}\n\n.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 10em;\n}\n\n.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 14em;\n}\n\n.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,\n.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content {\n  max-height: 25em;\n}\n\n.vjs-workinghover .vjs-menu-button-popup:hover .vjs-menu,\n.vjs-menu-button-popup .vjs-menu.vjs-lock-showing {\n  display: block;\n}\n\n.video-js .vjs-menu-button-inline {\n  transition: all 0.4s;\n  overflow: hidden;\n}\n\n.video-js .vjs-menu-button-inline:before {\n  width: 2.222222222em;\n}\n\n.video-js .vjs-menu-button-inline:hover,\n.video-js .vjs-menu-button-inline:focus,\n.video-js .vjs-menu-button-inline.vjs-slider-active,\n.video-js.vjs-no-flex .vjs-menu-button-inline {\n  width: 12em;\n}\n\n.vjs-menu-button-inline .vjs-menu {\n  opacity: 0;\n  height: 100%;\n  width: auto;\n  position: absolute;\n  left: 4em;\n  top: 0;\n  padding: 0;\n  margin: 0;\n  transition: all 0.4s;\n}\n\n.vjs-menu-button-inline:hover .vjs-menu,\n.vjs-menu-button-inline:focus .vjs-menu,\n.vjs-menu-button-inline.vjs-slider-active .vjs-menu {\n  display: block;\n  opacity: 1;\n}\n\n.vjs-no-flex .vjs-menu-button-inline .vjs-menu {\n  display: block;\n  opacity: 1;\n  position: relative;\n  width: auto;\n}\n\n.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu,\n.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,\n.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu {\n  width: auto;\n}\n\n.vjs-menu-button-inline .vjs-menu-content {\n  width: auto;\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n}\n\n.video-js .vjs-control-bar {\n  display: none;\n  width: 100%;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  height: 3em;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n}\n\n.vjs-has-started .vjs-control-bar {\n  display: flex;\n  visibility: visible;\n  opacity: 1;\n  transition: visibility 0.1s, opacity 0.1s;\n}\n\n.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  visibility: visible;\n  opacity: 0;\n  transition: visibility 1s, opacity 1s;\n}\n\n.vjs-controls-disabled .vjs-control-bar,\n.vjs-using-native-controls .vjs-control-bar,\n.vjs-error .vjs-control-bar {\n  display: none !important;\n}\n\n.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar {\n  opacity: 1;\n  visibility: visible;\n}\n\n.vjs-has-started.vjs-no-flex .vjs-control-bar {\n  display: table;\n}\n\n.video-js .vjs-control {\n  position: relative;\n  text-align: center;\n  margin: 0;\n  padding: 0;\n  height: 100%;\n  width: 4em;\n  flex: none;\n}\n\n.vjs-button > .vjs-icon-placeholder:before {\n  font-size: 1.8em;\n  line-height: 1.67;\n}\n\n.video-js .vjs-control:focus:before,\n.video-js .vjs-control:hover:before,\n.video-js .vjs-control:focus {\n  text-shadow: 0em 0em 1em white;\n}\n\n.video-js .vjs-control-text {\n  border: 0;\n  clip: rect(0 0 0 0);\n  height: 1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  width: 1px;\n}\n\n.vjs-no-flex .vjs-control {\n  display: table-cell;\n  vertical-align: middle;\n}\n\n.video-js .vjs-custom-control-spacer {\n  display: none;\n}\n\n.video-js .vjs-progress-control {\n  cursor: pointer;\n  flex: auto;\n  display: flex;\n  align-items: center;\n  min-width: 4em;\n  touch-action: none;\n}\n\n.video-js .vjs-progress-control.disabled {\n  cursor: default;\n}\n\n.vjs-live .vjs-progress-control {\n  display: none;\n}\n\n.vjs-liveui .vjs-progress-control {\n  display: flex;\n  align-items: center;\n}\n\n.vjs-no-flex .vjs-progress-control {\n  width: auto;\n}\n\n.video-js .vjs-progress-holder {\n  flex: auto;\n  transition: all 0.2s;\n  height: 0.3em;\n}\n\n.video-js .vjs-progress-control .vjs-progress-holder {\n  margin: 0 10px;\n}\n\n.video-js .vjs-progress-control:hover .vjs-progress-holder {\n  font-size: 1.6666666667em;\n}\n\n.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled {\n  font-size: 1em;\n}\n\n.video-js .vjs-progress-holder .vjs-play-progress,\n.video-js .vjs-progress-holder .vjs-load-progress,\n.video-js .vjs-progress-holder .vjs-load-progress div {\n  position: absolute;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  width: 0;\n}\n\n.video-js .vjs-play-progress {\n  background-color: #fff;\n}\n.video-js .vjs-play-progress:before {\n  font-size: 0.9em;\n  position: absolute;\n  right: -0.5em;\n  top: -0.3333333333em;\n  z-index: 1;\n}\n\n.video-js .vjs-load-progress {\n  background: rgba(115, 133, 159, 0.5);\n}\n\n.video-js .vjs-load-progress div {\n  background: rgba(115, 133, 159, 0.75);\n}\n\n.video-js .vjs-time-tooltip {\n  background-color: #fff;\n  background-color: rgba(255, 255, 255, 0.8);\n  border-radius: 0.3em;\n  color: #000;\n  float: right;\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 1em;\n  padding: 6px 8px 8px 8px;\n  pointer-events: none;\n  position: absolute;\n  top: -3.4em;\n  visibility: hidden;\n  z-index: 1;\n}\n\n.video-js .vjs-progress-holder:focus .vjs-time-tooltip {\n  display: none;\n}\n\n.video-js .vjs-progress-control:hover .vjs-time-tooltip,\n.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip {\n  display: block;\n  font-size: 0.6em;\n  visibility: visible;\n}\n\n.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip {\n  font-size: 1em;\n}\n\n.video-js .vjs-progress-control .vjs-mouse-display {\n  display: none;\n  position: absolute;\n  width: 1px;\n  height: 100%;\n  background-color: #000;\n  z-index: 1;\n}\n\n.vjs-no-flex .vjs-progress-control .vjs-mouse-display {\n  z-index: 0;\n}\n\n.video-js .vjs-progress-control:hover .vjs-mouse-display {\n  display: block;\n}\n\n.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display {\n  visibility: hidden;\n  opacity: 0;\n  transition: visibility 1s, opacity 1s;\n}\n\n.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display {\n  display: none;\n}\n\n.vjs-mouse-display .vjs-time-tooltip {\n  color: #fff;\n  background-color: #000;\n  background-color: rgba(0, 0, 0, 0.8);\n}\n\n.video-js .vjs-slider {\n  position: relative;\n  cursor: pointer;\n  padding: 0;\n  margin: 0 0.45em 0 0.45em;\n  /* iOS Safari */\n  -webkit-touch-callout: none;\n  /* Safari */\n  -webkit-user-select: none;\n  /* Konqueror HTML */\n  /* Firefox */\n  -moz-user-select: none;\n  /* Internet Explorer/Edge */\n  -ms-user-select: none;\n  /* Non-prefixed version, currently supported by Chrome and Opera */\n  user-select: none;\n  background-color: #73859f;\n  background-color: rgba(115, 133, 159, 0.5);\n}\n\n.video-js .vjs-slider.disabled {\n  cursor: default;\n}\n\n.video-js .vjs-slider:focus {\n  text-shadow: 0em 0em 1em white;\n  box-shadow: 0 0 1em #fff;\n}\n\n.video-js .vjs-mute-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js .vjs-volume-control {\n  cursor: pointer;\n  margin-right: 1em;\n  display: flex;\n}\n\n.video-js .vjs-volume-control.vjs-volume-horizontal {\n  width: 5em;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control {\n  visibility: visible;\n  opacity: 0;\n  width: 1px;\n  height: 1px;\n  margin-left: -1px;\n}\n\n.video-js .vjs-volume-panel {\n  transition: width 1s;\n}\n.video-js .vjs-volume-panel:hover .vjs-volume-control, .video-js .vjs-volume-panel:active .vjs-volume-control, .video-js .vjs-volume-panel:focus .vjs-volume-control, .video-js .vjs-volume-panel .vjs-volume-control:hover, .video-js .vjs-volume-panel .vjs-volume-control:active, .video-js .vjs-volume-panel .vjs-mute-control:hover ~ .vjs-volume-control, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active {\n  visibility: visible;\n  opacity: 1;\n  position: relative;\n  transition: visibility 0.1s, opacity 0.1s, height 0.1s, width 0.1s, left 0s, top 0s;\n}\n.video-js .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control:hover.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-mute-control:hover ~ .vjs-volume-control.vjs-volume-horizontal, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal {\n  width: 5em;\n  height: 3em;\n}\n.video-js .vjs-volume-panel:hover .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control:hover.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-mute-control:hover ~ .vjs-volume-control.vjs-volume-vertical, .video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical {\n  left: -3.5em;\n}\n.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:hover, .video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active, .video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active {\n  width: 9em;\n  transition: width 0.1s;\n}\n.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only {\n  width: 4em;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical {\n  height: 8em;\n  width: 3em;\n  left: -3000em;\n  transition: visibility 1s, opacity 1s, height 1s 1s, width 1s 1s, left 1s 1s, top 1s 1s;\n}\n\n.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal {\n  transition: visibility 1s, opacity 1s, height 1s 1s, width 1s, left 1s 1s, top 1s 1s;\n}\n\n.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal {\n  width: 5em;\n  height: 3em;\n  visibility: visible;\n  opacity: 1;\n  position: relative;\n  transition: none;\n}\n\n.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,\n.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical {\n  position: absolute;\n  bottom: 3em;\n  left: 0.5em;\n}\n\n.video-js .vjs-volume-panel {\n  display: flex;\n}\n\n.video-js .vjs-volume-bar {\n  margin: 1.35em 0.45em;\n}\n\n.vjs-volume-bar.vjs-slider-horizontal {\n  width: 5em;\n  height: 0.3em;\n}\n\n.vjs-volume-bar.vjs-slider-vertical {\n  width: 0.3em;\n  height: 5em;\n  margin: 1.35em auto;\n}\n\n.video-js .vjs-volume-level {\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  background-color: #fff;\n}\n.video-js .vjs-volume-level:before {\n  position: absolute;\n  font-size: 0.9em;\n}\n\n.vjs-slider-vertical .vjs-volume-level {\n  width: 0.3em;\n}\n.vjs-slider-vertical .vjs-volume-level:before {\n  top: -0.5em;\n  left: -0.3em;\n}\n\n.vjs-slider-horizontal .vjs-volume-level {\n  height: 0.3em;\n}\n.vjs-slider-horizontal .vjs-volume-level:before {\n  top: -0.3em;\n  right: -0.5em;\n}\n\n.video-js .vjs-volume-panel.vjs-volume-panel-vertical {\n  width: 4em;\n}\n\n.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level {\n  height: 100%;\n}\n\n.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level {\n  width: 100%;\n}\n\n.video-js .vjs-volume-vertical {\n  width: 3em;\n  height: 8em;\n  bottom: 8em;\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.7);\n}\n\n.video-js .vjs-volume-horizontal .vjs-menu {\n  left: -2em;\n}\n\n.vjs-poster {\n  display: inline-block;\n  vertical-align: middle;\n  background-repeat: no-repeat;\n  background-position: 50% 50%;\n  background-size: contain;\n  background-color: #000000;\n  cursor: pointer;\n  margin: 0;\n  padding: 0;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: 100%;\n}\n\n.vjs-has-started .vjs-poster {\n  display: none;\n}\n\n.vjs-audio.vjs-has-started .vjs-poster {\n  display: block;\n}\n\n.vjs-using-native-controls .vjs-poster {\n  display: none;\n}\n\n.video-js .vjs-live-control {\n  display: flex;\n  align-items: flex-start;\n  flex: auto;\n  font-size: 1em;\n  line-height: 3em;\n}\n\n.vjs-no-flex .vjs-live-control {\n  display: table-cell;\n  width: auto;\n  text-align: left;\n}\n\n.video-js:not(.vjs-live) .vjs-live-control,\n.video-js.vjs-liveui .vjs-live-control {\n  display: none;\n}\n\n.video-js .vjs-seek-to-live-control {\n  cursor: pointer;\n  flex: none;\n  display: inline-flex;\n  height: 100%;\n  padding-left: 0.5em;\n  padding-right: 0.5em;\n  font-size: 1em;\n  line-height: 3em;\n  width: auto;\n  min-width: 4em;\n}\n\n.vjs-no-flex .vjs-seek-to-live-control {\n  display: table-cell;\n  width: auto;\n  text-align: left;\n}\n\n.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,\n.video-js:not(.vjs-live) .vjs-seek-to-live-control {\n  display: none;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge {\n  cursor: auto;\n}\n\n.vjs-seek-to-live-control .vjs-icon-placeholder {\n  margin-right: 0.5em;\n  color: #888;\n}\n\n.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder {\n  color: red;\n}\n\n.video-js .vjs-time-control {\n  flex: none;\n  font-size: 1em;\n  line-height: 3em;\n  min-width: 2em;\n  width: auto;\n  padding-left: 1em;\n  padding-right: 1em;\n}\n\n.vjs-live .vjs-time-control {\n  display: none;\n}\n\n.video-js .vjs-current-time,\n.vjs-no-flex .vjs-current-time {\n  display: none;\n}\n\n.video-js .vjs-duration,\n.vjs-no-flex .vjs-duration {\n  display: none;\n}\n\n.vjs-time-divider {\n  display: none;\n  line-height: 3em;\n}\n\n.vjs-live .vjs-time-divider {\n  display: none;\n}\n\n.video-js .vjs-play-control {\n  cursor: pointer;\n}\n\n.video-js .vjs-play-control .vjs-icon-placeholder {\n  flex: none;\n}\n\n.vjs-text-track-display {\n  position: absolute;\n  bottom: 3em;\n  left: 0;\n  right: 0;\n  top: 0;\n  pointer-events: none;\n}\n\n.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display {\n  bottom: 1em;\n}\n\n.video-js .vjs-text-track {\n  font-size: 1.4em;\n  text-align: center;\n  margin-bottom: 0.1em;\n}\n\n.vjs-subtitles {\n  color: #fff;\n}\n\n.vjs-captions {\n  color: #fc6;\n}\n\n.vjs-tt-cue {\n  display: block;\n}\n\nvideo::-webkit-media-text-track-display {\n  transform: translateY(-3em);\n}\n\n.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display {\n  transform: translateY(-1.5em);\n}\n\n.video-js .vjs-picture-in-picture-control {\n  cursor: pointer;\n  flex: none;\n}\n.video-js .vjs-fullscreen-control {\n  cursor: pointer;\n  flex: none;\n}\n.vjs-playback-rate > .vjs-menu-button,\n.vjs-playback-rate .vjs-playback-rate-value {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.vjs-playback-rate .vjs-playback-rate-value {\n  pointer-events: none;\n  font-size: 1.5em;\n  line-height: 2;\n  text-align: center;\n}\n\n.vjs-playback-rate .vjs-menu {\n  width: 4em;\n  left: 0em;\n}\n\n.vjs-error .vjs-error-display .vjs-modal-dialog-content {\n  font-size: 1.4em;\n  text-align: center;\n}\n\n.vjs-error .vjs-error-display:before {\n  color: #fff;\n  content: "X";\n  font-family: Arial, Helvetica, sans-serif;\n  font-size: 4em;\n  left: 0;\n  line-height: 1;\n  margin-top: -0.5em;\n  position: absolute;\n  text-shadow: 0.05em 0.05em 0.1em #000;\n  text-align: center;\n  top: 50%;\n  vertical-align: middle;\n  width: 100%;\n}\n\n.vjs-loading-spinner {\n  display: none;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n  opacity: 0.85;\n  text-align: left;\n  border: 6px solid rgba(43, 51, 63, 0.7);\n  box-sizing: border-box;\n  background-clip: padding-box;\n  width: 50px;\n  height: 50px;\n  border-radius: 25px;\n  visibility: hidden;\n}\n\n.vjs-seeking .vjs-loading-spinner,\n.vjs-waiting .vjs-loading-spinner {\n  display: block;\n  -webkit-animation: vjs-spinner-show 0s linear 0.3s forwards;\n          animation: vjs-spinner-show 0s linear 0.3s forwards;\n}\n\n.vjs-loading-spinner:before,\n.vjs-loading-spinner:after {\n  content: "";\n  position: absolute;\n  margin: -6px;\n  box-sizing: inherit;\n  width: inherit;\n  height: inherit;\n  border-radius: inherit;\n  opacity: 1;\n  border: inherit;\n  border-color: transparent;\n  border-top-color: white;\n}\n\n.vjs-seeking .vjs-loading-spinner:before,\n.vjs-seeking .vjs-loading-spinner:after,\n.vjs-waiting .vjs-loading-spinner:before,\n.vjs-waiting .vjs-loading-spinner:after {\n  -webkit-animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\n  animation: vjs-spinner-spin 1.1s cubic-bezier(0.6, 0.2, 0, 0.8) infinite, vjs-spinner-fade 1.1s linear infinite;\n}\n\n.vjs-seeking .vjs-loading-spinner:before,\n.vjs-waiting .vjs-loading-spinner:before {\n  border-top-color: white;\n}\n\n.vjs-seeking .vjs-loading-spinner:after,\n.vjs-waiting .vjs-loading-spinner:after {\n  border-top-color: white;\n  -webkit-animation-delay: 0.44s;\n  animation-delay: 0.44s;\n}\n\n@keyframes vjs-spinner-show {\n  to {\n    visibility: visible;\n  }\n}\n@-webkit-keyframes vjs-spinner-show {\n  to {\n    visibility: visible;\n  }\n}\n@keyframes vjs-spinner-spin {\n  100% {\n    transform: rotate(360deg);\n  }\n}\n@-webkit-keyframes vjs-spinner-spin {\n  100% {\n    -webkit-transform: rotate(360deg);\n  }\n}\n@keyframes vjs-spinner-fade {\n  0% {\n    border-top-color: #73859f;\n  }\n  20% {\n    border-top-color: #73859f;\n  }\n  35% {\n    border-top-color: white;\n  }\n  60% {\n    border-top-color: #73859f;\n  }\n  100% {\n    border-top-color: #73859f;\n  }\n}\n@-webkit-keyframes vjs-spinner-fade {\n  0% {\n    border-top-color: #73859f;\n  }\n  20% {\n    border-top-color: #73859f;\n  }\n  35% {\n    border-top-color: white;\n  }\n  60% {\n    border-top-color: #73859f;\n  }\n  100% {\n    border-top-color: #73859f;\n  }\n}\n.vjs-chapters-button .vjs-menu ul {\n  width: 24em;\n}\n\n.video-js .vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder {\n  vertical-align: middle;\n  display: inline-block;\n  margin-bottom: -0.1em;\n}\n\n.video-js .vjs-subs-caps-button + .vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  content: "";\n  font-size: 1.5em;\n  line-height: inherit;\n}\n\n.video-js .vjs-audio-button + .vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder {\n  vertical-align: middle;\n  display: inline-block;\n  margin-bottom: -0.1em;\n}\n\n.video-js .vjs-audio-button + .vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before {\n  font-family: VideoJS;\n  content: " ";\n  font-size: 1.5em;\n  line-height: inherit;\n}\n\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-current-time,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-time-divider,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-duration,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-remaining-time,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-playback-rate,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-chapters-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-descriptions-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-captions-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-subtitles-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-audio-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-control, .video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-current-time,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-time-divider,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-duration,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-remaining-time,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-playback-rate,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-chapters-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-descriptions-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-captions-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-subtitles-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-audio-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-control, .video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-current-time,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-time-divider,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-duration,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-remaining-time,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-playback-rate,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-chapters-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-descriptions-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-captions-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-subtitles-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-audio-button,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-control {\n  display: none;\n}\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,\n.video-js:not(.vjs-fullscreen).vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active, .video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,\n.video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active {\n  width: auto;\n  width: initial;\n}\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small:not(.vjs-liveui) .vjs-subs-caps-button, .video-js:not(.vjs-fullscreen).vjs-layout-x-small:not(.vjs-live) .vjs-subs-caps-button, .video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-subs-caps-button {\n  display: none;\n}\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-custom-control-spacer, .video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-custom-control-spacer {\n  flex: auto;\n  display: block;\n}\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui.vjs-no-flex .vjs-custom-control-spacer, .video-js:not(.vjs-fullscreen).vjs-layout-tiny.vjs-no-flex .vjs-custom-control-spacer {\n  width: auto;\n}\n.video-js:not(.vjs-fullscreen).vjs-layout-x-small.vjs-liveui .vjs-progress-control, .video-js:not(.vjs-fullscreen).vjs-layout-tiny .vjs-progress-control {\n  display: none;\n}\n\n.vjs-modal-dialog.vjs-text-track-settings {\n  background-color: #2B333F;\n  background-color: rgba(43, 51, 63, 0.75);\n  color: #fff;\n  height: 70%;\n}\n\n.vjs-text-track-settings .vjs-modal-dialog-content {\n  display: table;\n}\n\n.vjs-text-track-settings .vjs-track-settings-colors,\n.vjs-text-track-settings .vjs-track-settings-font,\n.vjs-text-track-settings .vjs-track-settings-controls {\n  display: table-cell;\n}\n\n.vjs-text-track-settings .vjs-track-settings-controls {\n  text-align: right;\n  vertical-align: bottom;\n}\n\n@supports (display: grid) {\n  .vjs-text-track-settings .vjs-modal-dialog-content {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: 1fr;\n    padding: 20px 24px 0px 24px;\n  }\n\n  .vjs-track-settings-controls .vjs-default-button {\n    margin-bottom: 20px;\n  }\n\n  .vjs-text-track-settings .vjs-track-settings-controls {\n    grid-column: 1/-1;\n  }\n\n  .vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,\n.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content,\n.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content {\n    grid-template-columns: 1fr;\n  }\n}\n.vjs-track-setting > select {\n  margin-right: 1em;\n  margin-bottom: 0.5em;\n}\n\n.vjs-text-track-settings fieldset {\n  margin: 5px;\n  padding: 3px;\n  border: none;\n}\n\n.vjs-text-track-settings fieldset span {\n  display: inline-block;\n}\n\n.vjs-text-track-settings fieldset span > select {\n  max-width: 7.3em;\n}\n\n.vjs-text-track-settings legend {\n  color: #fff;\n  margin: 0 0 5px 0;\n}\n\n.vjs-text-track-settings .vjs-label {\n  position: absolute;\n  clip: rect(1px 1px 1px 1px);\n  clip: rect(1px, 1px, 1px, 1px);\n  display: block;\n  margin: 0 0 5px 0;\n  padding: 0;\n  border: 0;\n  height: 1px;\n  width: 1px;\n  overflow: hidden;\n}\n\n.vjs-track-settings-controls button:focus,\n.vjs-track-settings-controls button:active {\n  outline-style: solid;\n  outline-width: medium;\n  background-image: linear-gradient(0deg, #fff 88%, #73859f 100%);\n}\n\n.vjs-track-settings-controls button:hover {\n  color: rgba(43, 51, 63, 0.75);\n}\n\n.vjs-track-settings-controls button {\n  background-color: #fff;\n  background-image: linear-gradient(-180deg, #fff 88%, #73859f 100%);\n  color: #2B333F;\n  cursor: pointer;\n  border-radius: 2px;\n}\n\n.vjs-track-settings-controls .vjs-default-button {\n  margin-right: 1em;\n}\n\n@media print {\n  .video-js > *:not(.vjs-tech):not(.vjs-poster) {\n    visibility: hidden;\n  }\n}\n.vjs-resize-manager {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  border: none;\n  z-index: -1000;\n}\n\n.js-focus-visible .video-js *:focus:not(.focus-visible) {\n  outline: none;\n  background: none;\n}\n\n.video-js *:focus:not(:focus-visible),\n.video-js .vjs-menu *:focus:not(:focus-visible) {\n  outline: none;\n  background: none;\n}\n',""]),e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(o=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),a=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(a).concat([i]).join("\n")}var o,s,u;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var a=0;a<this.length;a++){var o=this[a][0];null!=o&&(i[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"EPSILON",(function(){return f})),n.d(r,"ARRAY_TYPE",(function(){return p})),n.d(r,"RANDOM",(function(){return g})),n.d(r,"setMatrixArrayType",(function(){return m})),n.d(r,"toRadian",(function(){return y})),n.d(r,"equals",(function(){return _}));var i={};n.r(i),n.d(i,"create",(function(){return T})),n.d(i,"clone",(function(){return E})),n.d(i,"copy",(function(){return M})),n.d(i,"identity",(function(){return b})),n.d(i,"fromValues",(function(){return A})),n.d(i,"set",(function(){return w})),n.d(i,"transpose",(function(){return S})),n.d(i,"invert",(function(){return x})),n.d(i,"adjoint",(function(){return D})),n.d(i,"determinant",(function(){return I})),n.d(i,"multiply",(function(){return C})),n.d(i,"rotate",(function(){return N})),n.d(i,"scale",(function(){return L})),n.d(i,"fromRotation",(function(){return O})),n.d(i,"fromScaling",(function(){return R})),n.d(i,"str",(function(){return j})),n.d(i,"frob",(function(){return P})),n.d(i,"LDU",(function(){return k})),n.d(i,"add",(function(){return U})),n.d(i,"subtract",(function(){return B})),n.d(i,"exactEquals",(function(){return F})),n.d(i,"equals",(function(){return z})),n.d(i,"multiplyScalar",(function(){return G})),n.d(i,"multiplyScalarAndAdd",(function(){return H})),n.d(i,"mul",(function(){return Y})),n.d(i,"sub",(function(){return V}));var a={};n.r(a),n.d(a,"create",(function(){return Q})),n.d(a,"clone",(function(){return q})),n.d(a,"copy",(function(){return W})),n.d(a,"identity",(function(){return X})),n.d(a,"fromValues",(function(){return K})),n.d(a,"set",(function(){return Z})),n.d(a,"invert",(function(){return J})),n.d(a,"determinant",(function(){return $})),n.d(a,"multiply",(function(){return ee})),n.d(a,"rotate",(function(){return te})),n.d(a,"scale",(function(){return ne})),n.d(a,"translate",(function(){return re})),n.d(a,"fromRotation",(function(){return ie})),n.d(a,"fromScaling",(function(){return ae})),n.d(a,"fromTranslation",(function(){return oe})),n.d(a,"str",(function(){return se})),n.d(a,"frob",(function(){return ue})),n.d(a,"add",(function(){return le})),n.d(a,"subtract",(function(){return ce})),n.d(a,"multiplyScalar",(function(){return de})),n.d(a,"multiplyScalarAndAdd",(function(){return he})),n.d(a,"exactEquals",(function(){return fe})),n.d(a,"equals",(function(){return pe})),n.d(a,"mul",(function(){return ge})),n.d(a,"sub",(function(){return me}));var o={};n.r(o),n.d(o,"create",(function(){return ve})),n.d(o,"fromMat4",(function(){return ye})),n.d(o,"clone",(function(){return _e})),n.d(o,"copy",(function(){return Te})),n.d(o,"fromValues",(function(){return Ee})),n.d(o,"set",(function(){return Me})),n.d(o,"identity",(function(){return be})),n.d(o,"transpose",(function(){return Ae})),n.d(o,"invert",(function(){return we})),n.d(o,"adjoint",(function(){return Se})),n.d(o,"determinant",(function(){return xe})),n.d(o,"multiply",(function(){return De})),n.d(o,"translate",(function(){return Ie})),n.d(o,"rotate",(function(){return Ce})),n.d(o,"scale",(function(){return Ne})),n.d(o,"fromTranslation",(function(){return Le})),n.d(o,"fromRotation",(function(){return Oe})),n.d(o,"fromScaling",(function(){return Re})),n.d(o,"fromMat2d",(function(){return je})),n.d(o,"fromQuat",(function(){return Pe})),n.d(o,"normalFromMat4",(function(){return ke})),n.d(o,"projection",(function(){return Ue})),n.d(o,"str",(function(){return Be})),n.d(o,"frob",(function(){return Fe})),n.d(o,"add",(function(){return ze})),n.d(o,"subtract",(function(){return Ge})),n.d(o,"multiplyScalar",(function(){return He})),n.d(o,"multiplyScalarAndAdd",(function(){return Ye})),n.d(o,"exactEquals",(function(){return Ve})),n.d(o,"equals",(function(){return Qe})),n.d(o,"mul",(function(){return qe})),n.d(o,"sub",(function(){return We}));var s={};n.r(s),n.d(s,"create",(function(){return Xe})),n.d(s,"clone",(function(){return Ke})),n.d(s,"copy",(function(){return Ze})),n.d(s,"fromValues",(function(){return Je})),n.d(s,"set",(function(){return $e})),n.d(s,"identity",(function(){return et})),n.d(s,"transpose",(function(){return tt})),n.d(s,"invert",(function(){return nt})),n.d(s,"adjoint",(function(){return rt})),n.d(s,"determinant",(function(){return it})),n.d(s,"multiply",(function(){return at})),n.d(s,"translate",(function(){return ot})),n.d(s,"scale",(function(){return st})),n.d(s,"rotate",(function(){return ut})),n.d(s,"rotateX",(function(){return lt})),n.d(s,"rotateY",(function(){return ct})),n.d(s,"rotateZ",(function(){return dt})),n.d(s,"fromTranslation",(function(){return ht})),n.d(s,"fromScaling",(function(){return ft})),n.d(s,"fromRotation",(function(){return pt})),n.d(s,"fromXRotation",(function(){return gt})),n.d(s,"fromYRotation",(function(){return mt})),n.d(s,"fromZRotation",(function(){return vt})),n.d(s,"fromRotationTranslation",(function(){return yt})),n.d(s,"fromQuat2",(function(){return _t})),n.d(s,"getTranslation",(function(){return Tt})),n.d(s,"getScaling",(function(){return Et})),n.d(s,"getRotation",(function(){return Mt})),n.d(s,"fromRotationTranslationScale",(function(){return bt})),n.d(s,"fromRotationTranslationScaleOrigin",(function(){return At})),n.d(s,"fromQuat",(function(){return wt})),n.d(s,"frustum",(function(){return St})),n.d(s,"perspective",(function(){return xt})),n.d(s,"perspectiveFromFieldOfView",(function(){return Dt})),n.d(s,"ortho",(function(){return It})),n.d(s,"lookAt",(function(){return Ct})),n.d(s,"targetTo",(function(){return Nt})),n.d(s,"str",(function(){return Lt})),n.d(s,"frob",(function(){return Ot})),n.d(s,"add",(function(){return Rt})),n.d(s,"subtract",(function(){return jt})),n.d(s,"multiplyScalar",(function(){return Pt})),n.d(s,"multiplyScalarAndAdd",(function(){return kt})),n.d(s,"exactEquals",(function(){return Ut})),n.d(s,"equals",(function(){return Bt})),n.d(s,"mul",(function(){return Ft})),n.d(s,"sub",(function(){return zt}));var u={};n.r(u),n.d(u,"create",(function(){return Gt})),n.d(u,"clone",(function(){return Ht})),n.d(u,"length",(function(){return Yt})),n.d(u,"fromValues",(function(){return Vt})),n.d(u,"copy",(function(){return Qt})),n.d(u,"set",(function(){return qt})),n.d(u,"add",(function(){return Wt})),n.d(u,"subtract",(function(){return Xt})),n.d(u,"multiply",(function(){return Kt})),n.d(u,"divide",(function(){return Zt})),n.d(u,"ceil",(function(){return Jt})),n.d(u,"floor",(function(){return $t})),n.d(u,"min",(function(){return en})),n.d(u,"max",(function(){return tn})),n.d(u,"round",(function(){return nn})),n.d(u,"scale",(function(){return rn})),n.d(u,"scaleAndAdd",(function(){return an})),n.d(u,"distance",(function(){return on})),n.d(u,"squaredDistance",(function(){return sn})),n.d(u,"squaredLength",(function(){return un})),n.d(u,"negate",(function(){return ln})),n.d(u,"inverse",(function(){return cn})),n.d(u,"normalize",(function(){return dn})),n.d(u,"dot",(function(){return hn})),n.d(u,"cross",(function(){return fn})),n.d(u,"lerp",(function(){return pn})),n.d(u,"hermite",(function(){return gn})),n.d(u,"bezier",(function(){return mn})),n.d(u,"random",(function(){return vn})),n.d(u,"transformMat4",(function(){return yn})),n.d(u,"transformMat3",(function(){return _n})),n.d(u,"transformQuat",(function(){return Tn})),n.d(u,"rotateX",(function(){return En})),n.d(u,"rotateY",(function(){return Mn})),n.d(u,"rotateZ",(function(){return bn})),n.d(u,"angle",(function(){return An})),n.d(u,"str",(function(){return wn})),n.d(u,"exactEquals",(function(){return Sn})),n.d(u,"equals",(function(){return xn})),n.d(u,"sub",(function(){return In})),n.d(u,"mul",(function(){return Cn})),n.d(u,"div",(function(){return Nn})),n.d(u,"dist",(function(){return Ln})),n.d(u,"sqrDist",(function(){return On})),n.d(u,"len",(function(){return Rn})),n.d(u,"sqrLen",(function(){return jn})),n.d(u,"forEach",(function(){return Pn}));var l={};n.r(l),n.d(l,"create",(function(){return kn})),n.d(l,"clone",(function(){return Un})),n.d(l,"fromValues",(function(){return Bn})),n.d(l,"copy",(function(){return Fn})),n.d(l,"set",(function(){return zn})),n.d(l,"add",(function(){return Gn})),n.d(l,"subtract",(function(){return Hn})),n.d(l,"multiply",(function(){return Yn})),n.d(l,"divide",(function(){return Vn})),n.d(l,"ceil",(function(){return Qn})),n.d(l,"floor",(function(){return qn})),n.d(l,"min",(function(){return Wn})),n.d(l,"max",(function(){return Xn})),n.d(l,"round",(function(){return Kn})),n.d(l,"scale",(function(){return Zn})),n.d(l,"scaleAndAdd",(function(){return Jn})),n.d(l,"distance",(function(){return $n})),n.d(l,"squaredDistance",(function(){return er})),n.d(l,"length",(function(){return tr})),n.d(l,"squaredLength",(function(){return nr})),n.d(l,"negate",(function(){return rr})),n.d(l,"inverse",(function(){return ir})),n.d(l,"normalize",(function(){return ar})),n.d(l,"dot",(function(){return or})),n.d(l,"lerp",(function(){return sr})),n.d(l,"random",(function(){return ur})),n.d(l,"transformMat4",(function(){return lr})),n.d(l,"transformQuat",(function(){return cr})),n.d(l,"str",(function(){return dr})),n.d(l,"exactEquals",(function(){return hr})),n.d(l,"equals",(function(){return fr})),n.d(l,"sub",(function(){return pr})),n.d(l,"mul",(function(){return gr})),n.d(l,"div",(function(){return mr})),n.d(l,"dist",(function(){return vr})),n.d(l,"sqrDist",(function(){return yr})),n.d(l,"len",(function(){return _r})),n.d(l,"sqrLen",(function(){return Tr})),n.d(l,"forEach",(function(){return Er}));var c={};n.r(c),n.d(c,"create",(function(){return Mr})),n.d(c,"identity",(function(){return br})),n.d(c,"setAxisAngle",(function(){return Ar})),n.d(c,"getAxisAngle",(function(){return wr})),n.d(c,"multiply",(function(){return Sr})),n.d(c,"rotateX",(function(){return xr})),n.d(c,"rotateY",(function(){return Dr})),n.d(c,"rotateZ",(function(){return Ir})),n.d(c,"calculateW",(function(){return Cr})),n.d(c,"slerp",(function(){return Nr})),n.d(c,"random",(function(){return Lr})),n.d(c,"invert",(function(){return Or})),n.d(c,"conjugate",(function(){return Rr})),n.d(c,"fromMat3",(function(){return jr})),n.d(c,"fromEuler",(function(){return Pr})),n.d(c,"str",(function(){return kr})),n.d(c,"clone",(function(){return Yr})),n.d(c,"fromValues",(function(){return Vr})),n.d(c,"copy",(function(){return Qr})),n.d(c,"set",(function(){return qr})),n.d(c,"add",(function(){return Wr})),n.d(c,"mul",(function(){return Xr})),n.d(c,"scale",(function(){return Kr})),n.d(c,"dot",(function(){return Zr})),n.d(c,"lerp",(function(){return Jr})),n.d(c,"length",(function(){return $r})),n.d(c,"len",(function(){return ei})),n.d(c,"squaredLength",(function(){return ti})),n.d(c,"sqrLen",(function(){return ni})),n.d(c,"normalize",(function(){return ri})),n.d(c,"exactEquals",(function(){return ii})),n.d(c,"equals",(function(){return ai})),n.d(c,"rotationTo",(function(){return oi})),n.d(c,"sqlerp",(function(){return si})),n.d(c,"setAxes",(function(){return ui}));var d={};n.r(d),n.d(d,"create",(function(){return li})),n.d(d,"clone",(function(){return ci})),n.d(d,"fromValues",(function(){return di})),n.d(d,"fromRotationTranslationValues",(function(){return hi})),n.d(d,"fromRotationTranslation",(function(){return fi})),n.d(d,"fromTranslation",(function(){return pi})),n.d(d,"fromRotation",(function(){return gi})),n.d(d,"fromMat4",(function(){return mi})),n.d(d,"copy",(function(){return vi})),n.d(d,"identity",(function(){return yi})),n.d(d,"set",(function(){return _i})),n.d(d,"getReal",(function(){return Ti})),n.d(d,"getDual",(function(){return Ei})),n.d(d,"setReal",(function(){return Mi})),n.d(d,"setDual",(function(){return bi})),n.d(d,"getTranslation",(function(){return Ai})),n.d(d,"translate",(function(){return wi})),n.d(d,"rotateX",(function(){return Si})),n.d(d,"rotateY",(function(){return xi})),n.d(d,"rotateZ",(function(){return Di})),n.d(d,"rotateByQuatAppend",(function(){return Ii})),n.d(d,"rotateByQuatPrepend",(function(){return Ci})),n.d(d,"rotateAroundAxis",(function(){return Ni})),n.d(d,"add",(function(){return Li})),n.d(d,"multiply",(function(){return Oi})),n.d(d,"mul",(function(){return Ri})),n.d(d,"scale",(function(){return ji})),n.d(d,"dot",(function(){return Pi})),n.d(d,"lerp",(function(){return ki})),n.d(d,"invert",(function(){return Ui})),n.d(d,"conjugate",(function(){return Bi})),n.d(d,"length",(function(){return Fi})),n.d(d,"len",(function(){return zi})),n.d(d,"squaredLength",(function(){return Gi})),n.d(d,"sqrLen",(function(){return Hi})),n.d(d,"normalize",(function(){return Yi})),n.d(d,"str",(function(){return Vi})),n.d(d,"exactEquals",(function(){return Qi})),n.d(d,"equals",(function(){return qi}));var h={};n.r(h),n.d(h,"create",(function(){return Wi})),n.d(h,"clone",(function(){return Xi})),n.d(h,"fromValues",(function(){return Ki})),n.d(h,"copy",(function(){return Zi})),n.d(h,"set",(function(){return Ji})),n.d(h,"add",(function(){return $i})),n.d(h,"subtract",(function(){return ea})),n.d(h,"multiply",(function(){return ta})),n.d(h,"divide",(function(){return na})),n.d(h,"ceil",(function(){return ra})),n.d(h,"floor",(function(){return ia})),n.d(h,"min",(function(){return aa})),n.d(h,"max",(function(){return oa})),n.d(h,"round",(function(){return sa})),n.d(h,"scale",(function(){return ua})),n.d(h,"scaleAndAdd",(function(){return la})),n.d(h,"distance",(function(){return ca})),n.d(h,"squaredDistance",(function(){return da})),n.d(h,"length",(function(){return ha})),n.d(h,"squaredLength",(function(){return fa})),n.d(h,"negate",(function(){return pa})),n.d(h,"inverse",(function(){return ga})),n.d(h,"normalize",(function(){return ma})),n.d(h,"dot",(function(){return va})),n.d(h,"cross",(function(){return ya})),n.d(h,"lerp",(function(){return _a})),n.d(h,"random",(function(){return Ta})),n.d(h,"transformMat2",(function(){return Ea})),n.d(h,"transformMat2d",(function(){return Ma})),n.d(h,"transformMat3",(function(){return ba})),n.d(h,"transformMat4",(function(){return Aa})),n.d(h,"rotate",(function(){return wa})),n.d(h,"angle",(function(){return Sa})),n.d(h,"str",(function(){return xa})),n.d(h,"exactEquals",(function(){return Da})),n.d(h,"equals",(function(){return Ia})),n.d(h,"len",(function(){return Ca})),n.d(h,"sub",(function(){return Na})),n.d(h,"mul",(function(){return La})),n.d(h,"div",(function(){return Oa})),n.d(h,"dist",(function(){return Ra})),n.d(h,"sqrDist",(function(){return ja})),n.d(h,"sqrLen",(function(){return Pa})),n.d(h,"forEach",(function(){return ka}));var f=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,g=Math.random;function m(e){p=e}var v=Math.PI/180;function y(e){return e*v}function _(e,t){return Math.abs(e-t)<=f*Math.max(1,Math.abs(e),Math.abs(t))}function T(){var e=new p(4);return p!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function E(e){var t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function M(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function b(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function A(e,t,n,r){var i=new p(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function w(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function S(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function x(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}function D(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function I(e){return e[0]*e[3]-e[2]*e[1]}function C(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*s+a*u,e[1]=i*s+o*u,e[2]=r*l+a*c,e[3]=i*l+o*c,e}function N(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=r*-s+a*u,e[3]=i*-s+o*u,e}function L(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1];return e[0]=r*s,e[1]=i*s,e[2]=a*u,e[3]=o*u,e}function O(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function R(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function j(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function P(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2))}function k(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function U(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function B(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function F(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function z(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],u=t[2],l=t[3];return Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=f*Math.max(1,Math.abs(a),Math.abs(l))}function G(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function H(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}var Y=C,V=B;function Q(){var e=new p(6);return p!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function q(e){var t=new p(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function W(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function X(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function K(e,t,n,r,i,a){var o=new p(6);return o[0]=e,o[1]=t,o[2]=n,o[3]=r,o[4]=i,o[5]=a,o}function Z(e,t,n,r,i,a,o){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e}function J(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=n*a-r*i;return u?(u=1/u,e[0]=a*u,e[1]=-r*u,e[2]=-i*u,e[3]=n*u,e[4]=(i*s-a*o)*u,e[5]=(r*o-n*s)*u,e):null}function $(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=n[0],c=n[1],d=n[2],h=n[3],f=n[4],p=n[5];return e[0]=r*l+a*c,e[1]=i*l+o*c,e[2]=r*d+a*h,e[3]=i*d+o*h,e[4]=r*f+a*p+s,e[5]=i*f+o*p+u,e}function te(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*l,e[1]=i*c+o*l,e[2]=r*-l+a*c,e[3]=i*-l+o*c,e[4]=s,e[5]=u,e}function ne(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=n[0],c=n[1];return e[0]=r*l,e[1]=i*l,e[2]=a*c,e[3]=o*c,e[4]=s,e[5]=u,e}function re(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=n[0],c=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=r*l+a*c+s,e[5]=i*l+o*c+u,e}function ie(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function ae(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function oe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function se(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function ue(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+1)}function le(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function ce(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function de(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function he(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function fe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pe(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=t[0],l=t[1],c=t[2],d=t[3],h=t[4],p=t[5];return Math.abs(n-u)<=f*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-c)<=f*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(a-d)<=f*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-h)<=f*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(s-p)<=f*Math.max(1,Math.abs(s),Math.abs(p))}var ge=ee,me=ce;function ve(){var e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function ye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function _e(e){var t=new p(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Te(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ee(e,t,n,r,i,a,o,s,u){var l=new p(9);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=a,l[6]=o,l[7]=s,l[8]=u,l}function Me(e,t,n,r,i,a,o,s,u,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e}function be(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ae(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function we(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],d=c*o-s*l,h=-c*a+s*u,f=l*a-o*u,p=n*d+r*h+i*f;return p?(p=1/p,e[0]=d*p,e[1]=(-c*r+i*l)*p,e[2]=(s*r-i*o)*p,e[3]=h*p,e[4]=(c*n-i*u)*p,e[5]=(-s*n+i*a)*p,e[6]=f*p,e[7]=(-l*n+r*u)*p,e[8]=(o*n-r*a)*p,e):null}function Se(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8];return e[0]=o*c-s*l,e[1]=i*l-r*c,e[2]=r*s-i*o,e[3]=s*u-a*c,e[4]=n*c-i*u,e[5]=i*a-n*s,e[6]=a*l-o*u,e[7]=r*u-n*l,e[8]=n*o-r*a,e}function xe(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8];return t*(l*a-o*u)+n*(-l*i+o*s)+r*(u*i-a*s)}function De(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],h=n[0],f=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],_=n[7],T=n[8];return e[0]=h*r+f*o+p*l,e[1]=h*i+f*s+p*c,e[2]=h*a+f*u+p*d,e[3]=g*r+m*o+v*l,e[4]=g*i+m*s+v*c,e[5]=g*a+m*u+v*d,e[6]=y*r+_*o+T*l,e[7]=y*i+_*s+T*c,e[8]=y*a+_*u+T*d,e}function Ie(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],h=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=u,e[6]=h*r+f*o+l,e[7]=h*i+f*s+c,e[8]=h*a+f*u+d,e}function Ce(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],h=Math.sin(n),f=Math.cos(n);return e[0]=f*r+h*o,e[1]=f*i+h*s,e[2]=f*a+h*u,e[3]=f*o-h*r,e[4]=f*s-h*i,e[5]=f*u-h*a,e[6]=l,e[7]=c,e[8]=d,e}function Ne(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Le(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function Oe(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Re(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function je(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Pe(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,d=r*s,h=i*o,f=i*s,p=i*u,g=a*o,m=a*s,v=a*u;return e[0]=1-d-p,e[3]=c-v,e[6]=h+m,e[1]=c+v,e[4]=1-l-p,e[7]=f-g,e[2]=h-m,e[5]=f+g,e[8]=1-l-d,e}function ke(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,_=n*u-i*o,T=n*l-a*o,E=r*u-i*s,M=r*l-a*s,b=i*l-a*u,A=c*g-d*p,w=c*m-h*p,S=c*v-f*p,x=d*m-h*g,D=d*v-f*g,I=h*v-f*m,C=y*I-_*D+T*x+E*S-M*w+b*A;return C?(C=1/C,e[0]=(s*I-u*D+l*x)*C,e[1]=(u*S-o*I-l*w)*C,e[2]=(o*D-s*S+l*A)*C,e[3]=(i*D-r*I-a*x)*C,e[4]=(n*I-i*S+a*w)*C,e[5]=(r*S-n*D-a*A)*C,e[6]=(g*b-m*M+v*E)*C,e[7]=(m*T-p*b-v*_)*C,e[8]=(p*M-g*T+v*y)*C,e):null}function Ue(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Be(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Fe(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2))}function ze(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function Ge(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function He(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function Ye(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function Ve(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Qe(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],d=t[0],h=t[1],p=t[2],g=t[3],m=t[4],v=t[5],y=t[6],_=t[7],T=t[8];return Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-h)<=f*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-p)<=f*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-g)<=f*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(o-m)<=f*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(s-v)<=f*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=f*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-_)<=f*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(c-T)<=f*Math.max(1,Math.abs(c),Math.abs(T))}var qe=De,We=Ge;function Xe(){var e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ke(e){var t=new p(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ze(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Je(e,t,n,r,i,a,o,s,u,l,c,d,h,f,g,m){var v=new p(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=i,v[5]=a,v[6]=o,v[7]=s,v[8]=u,v[9]=l,v[10]=c,v[11]=d,v[12]=h,v[13]=f,v[14]=g,v[15]=m,v}function $e(e,t,n,r,i,a,o,s,u,l,c,d,h,f,p,g,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e[8]=l,e[9]=c,e[10]=d,e[11]=h,e[12]=f,e[13]=p,e[14]=g,e[15]=m,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function nt(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*o,_=n*u-i*o,T=n*l-a*o,E=r*u-i*s,M=r*l-a*s,b=i*l-a*u,A=c*g-d*p,w=c*m-h*p,S=c*v-f*p,x=d*m-h*g,D=d*v-f*g,I=h*v-f*m,C=y*I-_*D+T*x+E*S-M*w+b*A;return C?(C=1/C,e[0]=(s*I-u*D+l*x)*C,e[1]=(i*D-r*I-a*x)*C,e[2]=(g*b-m*M+v*E)*C,e[3]=(h*M-d*b-f*E)*C,e[4]=(u*S-o*I-l*w)*C,e[5]=(n*I-i*S+a*w)*C,e[6]=(m*T-p*b-v*_)*C,e[7]=(c*b-h*T+f*_)*C,e[8]=(o*D-s*S+l*A)*C,e[9]=(r*S-n*D-a*A)*C,e[10]=(p*M-g*T+v*y)*C,e[11]=(d*T-c*M-f*y)*C,e[12]=(s*w-o*x-u*A)*C,e[13]=(n*x-r*w+i*A)*C,e[14]=(g*_-p*E-m*y)*C,e[15]=(c*E-d*_+h*y)*C,e):null}function rt(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],u=t[6],l=t[7],c=t[8],d=t[9],h=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15];return e[0]=s*(h*v-f*m)-d*(u*v-l*m)+g*(u*f-l*h),e[1]=-(r*(h*v-f*m)-d*(i*v-a*m)+g*(i*f-a*h)),e[2]=r*(u*v-l*m)-s*(i*v-a*m)+g*(i*l-a*u),e[3]=-(r*(u*f-l*h)-s*(i*f-a*h)+d*(i*l-a*u)),e[4]=-(o*(h*v-f*m)-c*(u*v-l*m)+p*(u*f-l*h)),e[5]=n*(h*v-f*m)-c*(i*v-a*m)+p*(i*f-a*h),e[6]=-(n*(u*v-l*m)-o*(i*v-a*m)+p*(i*l-a*u)),e[7]=n*(u*f-l*h)-o*(i*f-a*h)+c*(i*l-a*u),e[8]=o*(d*v-f*g)-c*(s*v-l*g)+p*(s*f-l*d),e[9]=-(n*(d*v-f*g)-c*(r*v-a*g)+p*(r*f-a*d)),e[10]=n*(s*v-l*g)-o*(r*v-a*g)+p*(r*l-a*s),e[11]=-(n*(s*f-l*d)-o*(r*f-a*d)+c*(r*l-a*s)),e[12]=-(o*(d*m-h*g)-c*(s*m-u*g)+p*(s*h-u*d)),e[13]=n*(d*m-h*g)-c*(r*m-i*g)+p*(r*h-i*d),e[14]=-(n*(s*m-u*g)-o*(r*m-i*g)+p*(r*u-i*s)),e[15]=n*(s*h-u*d)-o*(r*h-i*d)+c*(r*u-i*s),e}function it(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],u=e[7],l=e[8],c=e[9],d=e[10],h=e[11],f=e[12],p=e[13],g=e[14],m=e[15];return(t*o-n*a)*(d*m-h*g)-(t*s-r*a)*(c*m-h*p)+(t*u-i*a)*(c*g-d*p)+(n*s-r*o)*(l*m-h*f)-(n*u-i*o)*(l*g-d*f)+(r*u-i*s)*(l*p-c*f)}function at(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=t[8],h=t[9],f=t[10],p=t[11],g=t[12],m=t[13],v=t[14],y=t[15],_=n[0],T=n[1],E=n[2],M=n[3];return e[0]=_*r+T*s+E*d+M*g,e[1]=_*i+T*u+E*h+M*m,e[2]=_*a+T*l+E*f+M*v,e[3]=_*o+T*c+E*p+M*y,_=n[4],T=n[5],E=n[6],M=n[7],e[4]=_*r+T*s+E*d+M*g,e[5]=_*i+T*u+E*h+M*m,e[6]=_*a+T*l+E*f+M*v,e[7]=_*o+T*c+E*p+M*y,_=n[8],T=n[9],E=n[10],M=n[11],e[8]=_*r+T*s+E*d+M*g,e[9]=_*i+T*u+E*h+M*m,e[10]=_*a+T*l+E*f+M*v,e[11]=_*o+T*c+E*p+M*y,_=n[12],T=n[13],E=n[14],M=n[15],e[12]=_*r+T*s+E*d+M*g,e[13]=_*i+T*u+E*h+M*m,e[14]=_*a+T*l+E*f+M*v,e[15]=_*o+T*c+E*p+M*y,e}function ot(e,t,n){var r=n[0],i=n[1],a=n[2],o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return t===e?(e[12]=t[0]*r+t[4]*i+t[8]*a+t[12],e[13]=t[1]*r+t[5]*i+t[9]*a+t[13],e[14]=t[2]*r+t[6]*i+t[10]*a+t[14],e[15]=t[3]*r+t[7]*i+t[11]*a+t[15]):(o=t[0],s=t[1],u=t[2],l=t[3],c=t[4],d=t[5],h=t[6],f=t[7],p=t[8],g=t[9],m=t[10],v=t[11],e[0]=o,e[1]=s,e[2]=u,e[3]=l,e[4]=c,e[5]=d,e[6]=h,e[7]=f,e[8]=p,e[9]=g,e[10]=m,e[11]=v,e[12]=o*r+c*i+p*a+t[12],e[13]=s*r+d*i+g*a+t[13],e[14]=u*r+h*i+m*a+t[14],e[15]=l*r+f*i+v*a+t[15]),e}function st(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function ut(e,t,n,r){var i,a,o,s,u,l,c,d,h,p,g,m,v,y,_,T,E,M,b,A,w,S,x,D,I=r[0],C=r[1],N=r[2],L=Math.sqrt(I*I+C*C+N*N);return L<f?null:(I*=L=1/L,C*=L,N*=L,i=Math.sin(n),o=1-(a=Math.cos(n)),s=t[0],u=t[1],l=t[2],c=t[3],d=t[4],h=t[5],p=t[6],g=t[7],m=t[8],v=t[9],y=t[10],_=t[11],T=I*I*o+a,E=C*I*o+N*i,M=N*I*o-C*i,b=I*C*o-N*i,A=C*C*o+a,w=N*C*o+I*i,S=I*N*o+C*i,x=C*N*o-I*i,D=N*N*o+a,e[0]=s*T+d*E+m*M,e[1]=u*T+h*E+v*M,e[2]=l*T+p*E+y*M,e[3]=c*T+g*E+_*M,e[4]=s*b+d*A+m*w,e[5]=u*b+h*A+v*w,e[6]=l*b+p*A+y*w,e[7]=c*b+g*A+_*w,e[8]=s*S+d*x+m*D,e[9]=u*S+h*x+v*D,e[10]=l*S+p*x+y*D,e[11]=c*S+g*x+_*D,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function lt(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],u=t[7],l=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+l*r,e[5]=o*i+c*r,e[6]=s*i+d*r,e[7]=u*i+h*r,e[8]=l*i-a*r,e[9]=c*i-o*r,e[10]=d*i-s*r,e[11]=h*i-u*r,e}function ct(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[8],c=t[9],d=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-l*r,e[1]=o*i-c*r,e[2]=s*i-d*r,e[3]=u*i-h*r,e[8]=a*r+l*i,e[9]=o*r+c*i,e[10]=s*r+d*i,e[11]=u*r+h*i,e}function dt(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],u=t[3],l=t[4],c=t[5],d=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+l*r,e[1]=o*i+c*r,e[2]=s*i+d*r,e[3]=u*i+h*r,e[4]=l*i-a*r,e[5]=c*i-o*r,e[6]=d*i-s*r,e[7]=h*i-u*r,e}function ht(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ft(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t,n){var r,i,a,o=n[0],s=n[1],u=n[2],l=Math.sqrt(o*o+s*s+u*u);return l<f?null:(o*=l=1/l,s*=l,u*=l,r=Math.sin(t),a=1-(i=Math.cos(t)),e[0]=o*o*a+i,e[1]=s*o*a+u*r,e[2]=u*o*a-s*r,e[3]=0,e[4]=o*s*a-u*r,e[5]=s*s*a+i,e[6]=u*s*a+o*r,e[7]=0,e[8]=o*u*a+s*r,e[9]=s*u*a-o*r,e[10]=u*u*a+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function gt(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mt(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vt(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function yt(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,u=i+i,l=a+a,c=r*s,d=r*u,h=r*l,f=i*u,p=i*l,g=a*l,m=o*s,v=o*u,y=o*l;return e[0]=1-(f+g),e[1]=d+y,e[2]=h-v,e[3]=0,e[4]=d-y,e[5]=1-(c+g),e[6]=p+m,e[7]=0,e[8]=h+v,e[9]=p-m,e[10]=1-(c+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function _t(e,t){var n=new p(3),r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=r*r+i*i+a*a+o*o;return d>0?(n[0]=2*(s*o+c*r+u*a-l*i)/d,n[1]=2*(u*o+c*i+l*r-s*a)/d,n[2]=2*(l*o+c*a+s*i-u*r)/d):(n[0]=2*(s*o+c*r+u*a-l*i),n[1]=2*(u*o+c*i+l*r-s*a),n[2]=2*(l*o+c*a+s*i-u*r)),yt(e,t,n),e}function Tt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function Et(e,t){var n=t[0],r=t[1],i=t[2],a=t[4],o=t[5],s=t[6],u=t[8],l=t[9],c=t[10];return e[0]=Math.sqrt(n*n+r*r+i*i),e[1]=Math.sqrt(a*a+o*o+s*s),e[2]=Math.sqrt(u*u+l*l+c*c),e}function Mt(e,t){var n=t[0]+t[5]+t[10],r=0;return n>0?(r=2*Math.sqrt(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function bt(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=i+i,l=a+a,c=o+o,d=i*u,h=i*l,f=i*c,p=a*l,g=a*c,m=o*c,v=s*u,y=s*l,_=s*c,T=r[0],E=r[1],M=r[2];return e[0]=(1-(p+m))*T,e[1]=(h+_)*T,e[2]=(f-y)*T,e[3]=0,e[4]=(h-_)*E,e[5]=(1-(d+m))*E,e[6]=(g+v)*E,e[7]=0,e[8]=(f+y)*M,e[9]=(g-v)*M,e[10]=(1-(d+p))*M,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function At(e,t,n,r,i){var a=t[0],o=t[1],s=t[2],u=t[3],l=a+a,c=o+o,d=s+s,h=a*l,f=a*c,p=a*d,g=o*c,m=o*d,v=s*d,y=u*l,_=u*c,T=u*d,E=r[0],M=r[1],b=r[2],A=i[0],w=i[1],S=i[2],x=(1-(g+v))*E,D=(f+T)*E,I=(p-_)*E,C=(f-T)*M,N=(1-(h+v))*M,L=(m+y)*M,O=(p+_)*b,R=(m-y)*b,j=(1-(h+g))*b;return e[0]=x,e[1]=D,e[2]=I,e[3]=0,e[4]=C,e[5]=N,e[6]=L,e[7]=0,e[8]=O,e[9]=R,e[10]=j,e[11]=0,e[12]=n[0]+A-(x*A+C*w+O*S),e[13]=n[1]+w-(D*A+N*w+R*S),e[14]=n[2]+S-(I*A+L*w+j*S),e[15]=1,e}function wt(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,u=i+i,l=n*o,c=r*o,d=r*s,h=i*o,f=i*s,p=i*u,g=a*o,m=a*s,v=a*u;return e[0]=1-d-p,e[1]=c+v,e[2]=h-m,e[3]=0,e[4]=c-v,e[5]=1-l-p,e[6]=f+g,e[7]=0,e[8]=h+m,e[9]=f-g,e[10]=1-l-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function St(e,t,n,r,i,a,o){var s=1/(n-t),u=1/(i-r),l=1/(a-o);return e[0]=2*a*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*u,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*u,e[10]=(o+a)*l,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*a*2*l,e[15]=0,e}function xt(e,t,n,r,i){var a=1/Math.tan(t/2),o=void 0;return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}function Dt(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),u=2/(o+s),l=2/(i+a);return e[0]=u,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=l,e[6]=0,e[7]=0,e[8]=-(o-s)*u*.5,e[9]=(i-a)*l*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function It(e,t,n,r,i,a,o){var s=1/(t-n),u=1/(r-i),l=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(o+a)*l,e[15]=1,e}function Ct(e,t,n,r){var i=void 0,a=void 0,o=void 0,s=void 0,u=void 0,l=void 0,c=void 0,d=void 0,h=void 0,p=void 0,g=t[0],m=t[1],v=t[2],y=r[0],_=r[1],T=r[2],E=n[0],M=n[1],b=n[2];return Math.abs(g-E)<f&&Math.abs(m-M)<f&&Math.abs(v-b)<f?et(e):(c=g-E,d=m-M,h=v-b,i=_*(h*=p=1/Math.sqrt(c*c+d*d+h*h))-T*(d*=p),a=T*(c*=p)-y*h,o=y*d-_*c,(p=Math.sqrt(i*i+a*a+o*o))?(i*=p=1/p,a*=p,o*=p):(i=0,a=0,o=0),s=d*o-h*a,u=h*i-c*o,l=c*a-d*i,(p=Math.sqrt(s*s+u*u+l*l))?(s*=p=1/p,u*=p,l*=p):(s=0,u=0,l=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=u,e[6]=d,e[7]=0,e[8]=o,e[9]=l,e[10]=h,e[11]=0,e[12]=-(i*g+a*m+o*v),e[13]=-(s*g+u*m+l*v),e[14]=-(c*g+d*m+h*v),e[15]=1,e)}function Nt(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=r[0],u=r[1],l=r[2],c=i-n[0],d=a-n[1],h=o-n[2],f=c*c+d*d+h*h;f>0&&(c*=f=1/Math.sqrt(f),d*=f,h*=f);var p=u*h-l*d,g=l*c-s*h,m=s*d-u*c;return(f=p*p+g*g+m*m)>0&&(p*=f=1/Math.sqrt(f),g*=f,m*=f),e[0]=p,e[1]=g,e[2]=m,e[3]=0,e[4]=d*m-h*g,e[5]=h*p-c*m,e[6]=c*g-d*p,e[7]=0,e[8]=c,e[9]=d,e[10]=h,e[11]=0,e[12]=i,e[13]=a,e[14]=o,e[15]=1,e}function Lt(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Ot(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2)+Math.pow(e[2],2)+Math.pow(e[3],2)+Math.pow(e[4],2)+Math.pow(e[5],2)+Math.pow(e[6],2)+Math.pow(e[7],2)+Math.pow(e[8],2)+Math.pow(e[9],2)+Math.pow(e[10],2)+Math.pow(e[11],2)+Math.pow(e[12],2)+Math.pow(e[13],2)+Math.pow(e[14],2)+Math.pow(e[15],2))}function Rt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function jt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function Pt(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function kt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Ut(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Bt(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=e[8],d=e[9],h=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],_=t[0],T=t[1],E=t[2],M=t[3],b=t[4],A=t[5],w=t[6],S=t[7],x=t[8],D=t[9],I=t[10],C=t[11],N=t[12],L=t[13],O=t[14],R=t[15];return Math.abs(n-_)<=f*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(r-T)<=f*Math.max(1,Math.abs(r),Math.abs(T))&&Math.abs(i-E)<=f*Math.max(1,Math.abs(i),Math.abs(E))&&Math.abs(a-M)<=f*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(o-b)<=f*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(s-A)<=f*Math.max(1,Math.abs(s),Math.abs(A))&&Math.abs(u-w)<=f*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(l-S)<=f*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-x)<=f*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(d-D)<=f*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(h-I)<=f*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(p-C)<=f*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(g-N)<=f*Math.max(1,Math.abs(g),Math.abs(N))&&Math.abs(m-L)<=f*Math.max(1,Math.abs(m),Math.abs(L))&&Math.abs(v-O)<=f*Math.max(1,Math.abs(v),Math.abs(O))&&Math.abs(y-R)<=f*Math.max(1,Math.abs(y),Math.abs(R))}var Ft=at,zt=jt;function Gt(){var e=new p(3);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ht(e){var t=new p(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Yt(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function Vt(e,t,n){var r=new p(3);return r[0]=e,r[1]=t,r[2]=n,r}function Qt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function qt(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Wt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Xt(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Kt(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function Zt(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Jt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function $t(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function en(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function tn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function nn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function rn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function an(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function on(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.sqrt(n*n+r*r+i*i)}function sn(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function un(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function ln(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function cn(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function dn(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function hn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fn(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2];return e[0]=i*u-a*s,e[1]=a*o-r*u,e[2]=r*s-i*o,e}function pn(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function gn(e,t,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,l=o*(a-1),c=o*(3-2*a);return e[0]=t[0]*s+n[0]*u+r[0]*l+i[0]*c,e[1]=t[1]*s+n[1]*u+r[1]*l+i[1]*c,e[2]=t[2]*s+n[2]*u+r[2]*l+i[2]*c,e}function mn(e,t,n,r,i,a){var o=1-a,s=o*o,u=a*a,l=s*o,c=3*a*s,d=3*u*o,h=u*a;return e[0]=t[0]*l+n[0]*c+r[0]*d+i[0]*h,e[1]=t[1]*l+n[1]*c+r[1]*d+i[1]*h,e[2]=t[2]*l+n[2]*c+r[2]*d+i[2]*h,e}function vn(e,t){t=t||1;var n=2*g()*Math.PI,r=2*g()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function yn(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,e}function _n(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function Tn(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],l=t[2],c=i*l-a*u,d=a*s-r*l,h=r*u-i*s,f=i*h-a*d,p=a*c-r*h,g=r*d-i*c,m=2*o;return c*=m,d*=m,h*=m,f*=2,p*=2,g*=2,e[0]=s+c+f,e[1]=u+d+p,e[2]=l+h+g,e}function En(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function Mn(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function bn(e,t,n,r){var i=[],a=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],e[0]=a[0]+n[0],e[1]=a[1]+n[1],e[2]=a[2]+n[2],e}function An(e,t){var n=Vt(e[0],e[1],e[2]),r=Vt(t[0],t[1],t[2]);dn(n,n),dn(r,r);var i=hn(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function wn(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Sn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function xn(e,t){var n=e[0],r=e[1],i=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=f*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))}var Dn,In=Xt,Cn=Kt,Nn=Zt,Ln=on,On=sn,Rn=Yt,jn=un,Pn=(Dn=Gt(),function(e,t,n,r,i,a){var o=void 0,s=void 0;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,o=n;o<s;o+=t)Dn[0]=e[o],Dn[1]=e[o+1],Dn[2]=e[o+2],i(Dn,Dn,a),e[o]=Dn[0],e[o+1]=Dn[1],e[o+2]=Dn[2];return e});function kn(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Un(e){var t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Bn(e,t,n,r){var i=new p(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function Fn(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function zn(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function Gn(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function Hn(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function Yn(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function Vn(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function Qn(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function qn(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Wn(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function Xn(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function Kn(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Zn(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function Jn(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function $n(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return Math.sqrt(n*n+r*r+i*i+a*a)}function er(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],a=t[3]-e[3];return n*n+r*r+i*i+a*a}function tr(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.sqrt(t*t+n*n+r*r+i*i)}function nr(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function rr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function ir(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function ar(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a;return o>0&&(o=1/Math.sqrt(o),e[0]=n*o,e[1]=r*o,e[2]=i*o,e[3]=a*o),e}function or(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function sr(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e[3]=s+r*(n[3]-s),e}function ur(e,t){var n,r,i,a,o,s;t=t||1;do{o=(n=2*g()-1)*n+(r=2*g()-1)*r}while(o>=1);do{s=(i=2*g()-1)*i+(a=2*g()-1)*a}while(s>=1);var u=Math.sqrt((1-o)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*u,e[3]=t*a*u,e}function lr(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function cr(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],u=n[2],l=n[3],c=l*r+s*a-u*i,d=l*i+u*r-o*a,h=l*a+o*i-s*r,f=-o*r-s*i-u*a;return e[0]=c*l+f*-o+d*-u-h*-s,e[1]=d*l+f*-s+h*-o-c*-u,e[2]=h*l+f*-u+c*-s-d*-o,e[3]=t[3],e}function dr(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function hr(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function fr(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],u=t[2],l=t[3];return Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=f*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(a-l)<=f*Math.max(1,Math.abs(a),Math.abs(l))}var pr=Hn,gr=Yn,mr=Vn,vr=$n,yr=er,_r=tr,Tr=nr,Er=function(){var e=kn();return function(t,n,r,i,a,o){var s=void 0,u=void 0;for(n||(n=4),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],a(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();function Mr(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function br(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Ar(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function wr(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>f?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function Sr(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+o*s+i*l-a*u,e[1]=i*c+o*u+a*s-r*l,e[2]=a*c+o*l+r*u-i*s,e[3]=o*c-r*s-i*u-a*l,e}function xr(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=a*u-i*s,e[3]=o*u-r*s,e}function Dr(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-a*s,e[1]=i*u+o*s,e[2]=a*u+r*s,e[3]=o*u-i*s,e}function Ir(e,t,n){n*=.5;var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=a*u+o*s,e[3]=o*u-a*s,e}function Cr(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function Nr(e,t,n,r){var i=t[0],a=t[1],o=t[2],s=t[3],u=n[0],l=n[1],c=n[2],d=n[3],h=void 0,p=void 0,g=void 0,m=void 0,v=void 0;return(p=i*u+a*l+o*c+s*d)<0&&(p=-p,u=-u,l=-l,c=-c,d=-d),1-p>f?(h=Math.acos(p),g=Math.sin(h),m=Math.sin((1-r)*h)/g,v=Math.sin(r*h)/g):(m=1-r,v=r),e[0]=m*i+v*u,e[1]=m*a+v*l,e[2]=m*o+v*c,e[3]=m*s+v*d,e}function Lr(e){var t=g(),n=g(),r=g(),i=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e}function Or(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*n+r*r+i*i+a*a,s=o?1/o:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=a*s,e}function Rr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function jr(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(n>0)r=Math.sqrt(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var a=(i+1)%3,o=(i+2)%3;r=Math.sqrt(t[3*i+i]-t[3*a+a]-t[3*o+o]+1),e[i]=.5*r,r=.5/r,e[3]=(t[3*a+o]-t[3*o+a])*r,e[a]=(t[3*a+i]+t[3*i+a])*r,e[o]=(t[3*o+i]+t[3*i+o])*r}return e}function Pr(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var a=Math.sin(t),o=Math.cos(t),s=Math.sin(n),u=Math.cos(n),l=Math.sin(r),c=Math.cos(r);return e[0]=a*u*c-o*s*l,e[1]=o*s*c+a*u*l,e[2]=o*u*l-a*s*c,e[3]=o*u*c+a*s*l,e}function kr(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Ur,Br,Fr,zr,Gr,Hr,Yr=Un,Vr=Bn,Qr=Fn,qr=zn,Wr=Gn,Xr=Sr,Kr=Zn,Zr=or,Jr=sr,$r=tr,ei=$r,ti=nr,ni=ti,ri=ar,ii=hr,ai=fr,oi=(Ur=Gt(),Br=Vt(1,0,0),Fr=Vt(0,1,0),function(e,t,n){var r=hn(t,n);return r<-.999999?(fn(Ur,Br,t),Rn(Ur)<1e-6&&fn(Ur,Fr,t),dn(Ur,Ur),Ar(e,Ur,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(fn(Ur,t,n),e[0]=Ur[0],e[1]=Ur[1],e[2]=Ur[2],e[3]=1+r,ri(e,e))}),si=(zr=Mr(),Gr=Mr(),function(e,t,n,r,i,a){return Nr(zr,t,i,a),Nr(Gr,n,r,a),Nr(e,zr,Gr,2*a*(1-a)),e}),ui=(Hr=ve(),function(e,t,n,r){return Hr[0]=n[0],Hr[3]=n[1],Hr[6]=n[2],Hr[1]=r[0],Hr[4]=r[1],Hr[7]=r[2],Hr[2]=-t[0],Hr[5]=-t[1],Hr[8]=-t[2],ri(e,jr(e,Hr))});function li(){var e=new p(8);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function ci(e){var t=new p(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function di(e,t,n,r,i,a,o,s){var u=new p(8);return u[0]=e,u[1]=t,u[2]=n,u[3]=r,u[4]=i,u[5]=a,u[6]=o,u[7]=s,u}function hi(e,t,n,r,i,a,o){var s=new p(8);s[0]=e,s[1]=t,s[2]=n,s[3]=r;var u=.5*i,l=.5*a,c=.5*o;return s[4]=u*r+l*n-c*t,s[5]=l*r+c*e-u*n,s[6]=c*r+u*t-l*e,s[7]=-u*e-l*t-c*n,s}function fi(e,t,n){var r=.5*n[0],i=.5*n[1],a=.5*n[2],o=t[0],s=t[1],u=t[2],l=t[3];return e[0]=o,e[1]=s,e[2]=u,e[3]=l,e[4]=r*l+i*u-a*s,e[5]=i*l+a*o-r*u,e[6]=a*l+r*s-i*o,e[7]=-r*o-i*s-a*u,e}function pi(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function gi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function mi(e,t){var n=Mr();Mt(n,t);var r=new p(3);return Tt(r,t),fi(e,n,r),e}function vi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function yi(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function _i(e,t,n,r,i,a,o,s,u){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=a,e[5]=o,e[6]=s,e[7]=u,e}var Ti=Qr;function Ei(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var Mi=Qr;function bi(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Ai(e,t){var n=t[4],r=t[5],i=t[6],a=t[7],o=-t[0],s=-t[1],u=-t[2],l=t[3];return e[0]=2*(n*l+a*o+r*u-i*s),e[1]=2*(r*l+a*s+i*o-n*u),e[2]=2*(i*l+a*u+n*s-r*o),e}function wi(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=.5*n[0],u=.5*n[1],l=.5*n[2],c=t[4],d=t[5],h=t[6],f=t[7];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=o*s+i*l-a*u+c,e[5]=o*u+a*s-r*l+d,e[6]=o*l+r*u-i*s+h,e[7]=-r*s-i*u-a*l+f,e}function Si(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=s*o+c*r+u*a-l*i,h=u*o+c*i+l*r-s*a,f=l*o+c*a+s*i-u*r,p=c*o-s*r-u*i-l*a;return xr(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=d*o+p*r+h*a-f*i,e[5]=h*o+p*i+f*r-d*a,e[6]=f*o+p*a+d*i-h*r,e[7]=p*o-d*r-h*i-f*a,e}function xi(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=s*o+c*r+u*a-l*i,h=u*o+c*i+l*r-s*a,f=l*o+c*a+s*i-u*r,p=c*o-s*r-u*i-l*a;return Dr(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=d*o+p*r+h*a-f*i,e[5]=h*o+p*i+f*r-d*a,e[6]=f*o+p*a+d*i-h*r,e[7]=p*o-d*r-h*i-f*a,e}function Di(e,t,n){var r=-t[0],i=-t[1],a=-t[2],o=t[3],s=t[4],u=t[5],l=t[6],c=t[7],d=s*o+c*r+u*a-l*i,h=u*o+c*i+l*r-s*a,f=l*o+c*a+s*i-u*r,p=c*o-s*r-u*i-l*a;return Ir(e,t,n),r=e[0],i=e[1],a=e[2],o=e[3],e[4]=d*o+p*r+h*a-f*i,e[5]=h*o+p*i+f*r-d*a,e[6]=f*o+p*a+d*i-h*r,e[7]=p*o-d*r-h*i-f*a,e}function Ii(e,t,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=t[0],u=t[1],l=t[2],c=t[3];return e[0]=s*o+c*r+u*a-l*i,e[1]=u*o+c*i+l*r-s*a,e[2]=l*o+c*a+s*i-u*r,e[3]=c*o-s*r-u*i-l*a,s=t[4],u=t[5],l=t[6],c=t[7],e[4]=s*o+c*r+u*a-l*i,e[5]=u*o+c*i+l*r-s*a,e[6]=l*o+c*a+s*i-u*r,e[7]=c*o-s*r-u*i-l*a,e}function Ci(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],u=n[1],l=n[2],c=n[3];return e[0]=r*c+o*s+i*l-a*u,e[1]=i*c+o*u+a*s-r*l,e[2]=a*c+o*l+r*u-i*s,e[3]=o*c-r*s-i*u-a*l,s=n[4],u=n[5],l=n[6],c=n[7],e[4]=r*c+o*s+i*l-a*u,e[5]=i*c+o*u+a*s-r*l,e[6]=a*c+o*l+r*u-i*s,e[7]=o*c-r*s-i*u-a*l,e}function Ni(e,t,n,r){if(Math.abs(r)<f)return vi(e,t);var i=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);r*=.5;var a=Math.sin(r),o=a*n[0]/i,s=a*n[1]/i,u=a*n[2]/i,l=Math.cos(r),c=t[0],d=t[1],h=t[2],p=t[3];e[0]=c*l+p*o+d*u-h*s,e[1]=d*l+p*s+h*o-c*u,e[2]=h*l+p*u+c*s-d*o,e[3]=p*l-c*o-d*s-h*u;var g=t[4],m=t[5],v=t[6],y=t[7];return e[4]=g*l+y*o+m*u-v*s,e[5]=m*l+y*s+v*o-g*u,e[6]=v*l+y*u+g*s-m*o,e[7]=y*l-g*o-m*s-v*u,e}function Li(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function Oi(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[4],u=n[5],l=n[6],c=n[7],d=t[4],h=t[5],f=t[6],p=t[7],g=n[0],m=n[1],v=n[2],y=n[3];return e[0]=r*y+o*g+i*v-a*m,e[1]=i*y+o*m+a*g-r*v,e[2]=a*y+o*v+r*m-i*g,e[3]=o*y-r*g-i*m-a*v,e[4]=r*c+o*s+i*l-a*u+d*y+p*g+h*v-f*m,e[5]=i*c+o*u+a*s-r*l+h*y+p*m+f*g-d*v,e[6]=a*c+o*l+r*u-i*s+f*y+p*v+d*m-h*g,e[7]=o*c-r*s-i*u-a*l+p*y-d*g-h*m-f*v,e}var Ri=Oi;function ji(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var Pi=Zr;function ki(e,t,n,r){var i=1-r;return Pi(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e}function Ui(e,t){var n=Gi(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function Bi(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Fi=$r,zi=Fi,Gi=ti,Hi=Gi;function Yi(e,t){var n=Gi(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,a=t[2]/n,o=t[3]/n,s=t[4],u=t[5],l=t[6],c=t[7],d=r*s+i*u+a*l+o*c;e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=(s-r*d)/n,e[5]=(u-i*d)/n,e[6]=(l-a*d)/n,e[7]=(c-o*d)/n}return e}function Vi(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function Qi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function qi(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],l=e[7],c=t[0],d=t[1],h=t[2],p=t[3],g=t[4],m=t[5],v=t[6],y=t[7];return Math.abs(n-c)<=f*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-d)<=f*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-h)<=f*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(a-p)<=f*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-g)<=f*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(s-m)<=f*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(u-v)<=f*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-y)<=f*Math.max(1,Math.abs(l),Math.abs(y))}function Wi(){var e=new p(2);return p!=Float32Array&&(e[0]=0,e[1]=0),e}function Xi(e){var t=new p(2);return t[0]=e[0],t[1]=e[1],t}function Ki(e,t){var n=new p(2);return n[0]=e,n[1]=t,n}function Zi(e,t){return e[0]=t[0],e[1]=t[1],e}function Ji(e,t,n){return e[0]=t,e[1]=n,e}function $i(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function ea(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function ta(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function na(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function ra(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ia(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function aa(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function oa(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function sa(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ua(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function la(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function ca(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}function da(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function ha(e){var t=e[0],n=e[1];return Math.sqrt(t*t+n*n)}function fa(e){var t=e[0],n=e[1];return t*t+n*n}function pa(e,t){return e[0]=-t[0],e[1]=-t[1],e}function ga(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function ma(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i),e}function va(e,t){return e[0]*t[0]+e[1]*t[1]}function ya(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function _a(e,t,n,r){var i=t[0],a=t[1];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e}function Ta(e,t){t=t||1;var n=2*g()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function Ea(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function Ma(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function ba(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function Aa(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function wa(e,t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=Math.sin(r),s=Math.cos(r);return e[0]=i*s-a*o+n[0],e[1]=i*o+a*s+n[1],e}function Sa(e,t){var n=e[0],r=e[1],i=t[0],a=t[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)}function xa(e){return"vec2("+e[0]+", "+e[1]+")"}function Da(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ia(e,t){var n=e[0],r=e[1],i=t[0],a=t[1];return Math.abs(n-i)<=f*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-a)<=f*Math.max(1,Math.abs(r),Math.abs(a))}var Ca=ha,Na=ea,La=ta,Oa=na,Ra=ca,ja=da,Pa=fa,ka=function(){var e=Wi();return function(t,n,r,i,a,o){var s=void 0,u=void 0;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,t.length):t.length,s=r;s<u;s+=n)e[0]=t[s],e[1]=t[s+1],a(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}}();n.d(t,"glMatrix",(function(){return r})),n.d(t,"mat2",(function(){return i})),n.d(t,"mat2d",(function(){return a})),n.d(t,"mat3",(function(){return o})),n.d(t,"mat4",(function(){return s})),n.d(t,"quat",(function(){return c})),n.d(t,"quat2",(function(){return d})),n.d(t,"vec2",(function(){return h})),n.d(t,"vec3",(function(){return u})),n.d(t,"vec4",(function(){return l}))},function(e,t,n){"use strict";n.r(t);n(120),n(121);var r=n(44),i=(n(290),n(46));function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.order=n,this.nCh=(n+1)*(n+1),this.mtx=numeric.identity(this.nCh),this.in=this.ctx.createChannelSplitter(this.nCh),this.out=this.ctx.createChannelMerger(this.nCh),this.gain=new Array(this.nCh);for(var r=0;r<this.nCh;r++){this.gain[r]=new Array(this.nCh);for(var i=0;i<this.nCh;i++)this.gain[r][i]=this.ctx.createGain(),this.gain[r][i].gain.value=this.mtx[r][i],this.in.connect(this.gain[r][i],i,0),this.gain[r][i].connect(this.out,0,r)}}var t,n,r;return t=e,(n=[{key:"updateMtx",value:function(e){this.mtx=e;for(var t=0;t<this.nCh;t++)for(var n=0;n<this.nCh;n++)this.gain[t][n].gain.value=this.mtx[t][n]}},{key:"printGainMtx",value:function(){console.log(this)}}])&&a(t.prototype,n),r&&a(t,r),e}(),s=[[[.64625,24461e-9,-4089e-7,.20862,50219e-9,-52748e-8,-.1093,-78951e-8,.14164,21747e-8,-79888e-8,48411e-8,44694e-8,-.093541,-90626e-8,.049019,50964e-8,-48203e-8,92489e-8,43532e-8,.02554,37256e-8,-.037707,-83965e-8,-.025445],[24406e-9,.58558,-41143e-8,38856e-9,.14513,50484e-9,33858e-8,-5266e-7,25715e-8,.14072,-22435e-9,-.040347,57186e-8,54592e-8,1218e-7,52198e-8,.086187,-23946e-8,-.041983,36777e-9,-68321e-8,43714e-8,11039e-8,79005e-8,54782e-8],[-41095e-8,-41143e-8,.54842,-61474e-8,-5266e-7,42247e-8,26998e-9,.087242,-5966e-7,-28013e-8,73651e-8,-69342e-9,-.073972,-34061e-8,.064364,-48763e-8,97077e-9,79363e-8,-2939e-7,-12281e-8,43887e-8,-.084714,-68878e-8,.023305,-28636e-8],[.19849,38828e-9,-61123e-8,.80458,93387e-9,-5152e-7,-.16302,-.0011348,.22524,31308e-8,-79098e-8,53699e-8,6568e-7,-.14343,-.0012054,.09861,66164e-8,-50598e-8,.0010547,42777e-8,.044786,51993e-8,-.06468,-.0010368,-.005522],[5007e-8,.12861,-51876e-8,93477e-9,.74158,-2227e-8,47805e-8,-67306e-8,43128e-8,.25473,-19268e-8,-.072517,72336e-8,79392e-8,12221e-8,81618e-8,.16658,-50117e-8,-.078524,90285e-9,-97769e-8,55924e-8,2361e-7,94543e-8,83181e-8],[-53486e-8,51058e-9,42512e-8,-53024e-8,-18728e-9,.54246,17457e-8,62628e-8,10378e-8,-17933e-8,.084803,94887e-9,-38837e-8,-86558e-9,32679e-8,59316e-8,-31921e-8,.08438,95179e-9,-.043767,41066e-8,-17795e-8,49007e-9,94514e-10,59243e-8],[-.10942,34082e-8,22597e-9,-.155,48623e-8,16632e-8,.59766,30628e-9,-.11113,27213e-8,25502e-8,-26441e-8,-42634e-9,.10856,-11253e-9,-.040205,-16775e-8,15033e-8,-31258e-8,-15558e-8,-.054583,-43195e-9,.055009,-64321e-9,.020717],[-79322e-8,-51876e-8,.071127,-.0011409,-67306e-8,61665e-8,39219e-9,.65142,-.0010244,-37954e-8,.0011148,-84578e-9,-.13605,-64922e-8,.1291,-77723e-8,7844e-8,.0012888,-37488e-8,-17509e-8,86799e-8,-.15496,-.001181,.059043,-42839e-8],[.14124,25889e-8,-592e-6,.2102,43602e-8,11808e-8,-.11045,-.0010182,.69736,45932e-8,1479e-7,38072e-10,60212e-8,-.11147,-91345e-8,.15847,35583e-8,-22808e-10,21347e-8,-10435e-8,.03617,41567e-8,-.064123,-64686e-8,.092688],[22089e-8,.14043,-26296e-8,31846e-8,.23004,-18435e-8,25461e-8,-36269e-8,45478e-8,.77017,-44779e-8,-.072371,36414e-8,5903e-7,-19878e-9,59567e-8,.22612,-7213e-7,-.08933,12329e-8,-74496e-8,28962e-8,38758e-8,3379e-7,5309e-7],[-79789e-8,-26105e-9,73409e-8,-8018e-7,-19331e-8,.063567,26358e-8,.0011215,12331e-8,-44427e-8,.65129,89263e-9,-6662e-7,-13017e-8,70771e-8,83994e-8,-62751e-8,.17635,-27017e-9,-.087071,60488e-8,-31948e-8,36444e-9,23471e-8,84011e-8],[49378e-8,-.040321,-75659e-9,55307e-8,-.066254,96763e-9,-26913e-8,-93945e-9,19178e-9,-.072552,94236e-9,.53533,87417e-9,-63206e-9,13943e-9,-48195e-8,-.047059,-78326e-9,.062868,-70113e-9,-84252e-9,49647e-9,16646e-8,10368e-8,-58817e-8],[4444e-7,5667e-7,-.074704,65323e-8,7277e-7,-37858e-8,-47253e-9,-.12171,59911e-8,38479e-8,-656e-6,77767e-9,.61874,33408e-8,-.10117,45402e-8,-14948e-8,-74103e-8,3734e-7,16911e-9,-44109e-8,.15258,70315e-8,-.038455,24201e-8],[-.09601,54403e-8,-34849e-8,-.14309,79927e-8,-918e-7,.086601,-66395e-8,-.10716,61085e-8,-14028e-8,-61614e-9,3471e-7,.62695,-77092e-8,-.051024,16023e-8,-10633e-8,1919e-7,48363e-9,-.096681,2607e-7,.09402,-74571e-8,.0019158],[-90935e-8,14083e-8,.064898,-.0012115,14918e-8,31277e-8,-9.9481e-7,.10959,-91848e-8,-17227e-10,68618e-8,1483e-8,-.10023,-75551e-8,.62343,-57355e-8,-20829e-8,.0010125,50756e-9,-15674e-8,.0010724,-.13186,-.001046,.11144,-26243e-8],[.051801,52227e-8,-47921e-8,.097067,82131e-8,59196e-8,-.04061,-76706e-8,.13419,60936e-8,853e-6,-4871e-7,45284e-8,-.049994,-56946e-8,.69569,13044e-9,37685e-8,-54845e-8,-51755e-8,.014479,25727e-8,-.055169,-29779e-8,.2151],[51658e-8,.088775,11285e-8,67289e-8,.16423,-32031e-8,-18918e-8,1013e-7,35665e-8,.19258,-62824e-8,-.047327,-17334e-8,12974e-8,-20709e-8,-24617e-10,.71786,-81442e-8,-.062173,11207e-8,-24106e-8,-12571e-8,51769e-8,-52429e-8,-18112e-8],[-45845e-8,-24851e-8,78155e-8,-48969e-8,-51038e-8,.084815,14762e-8,.0012812,-22354e-9,-72528e-8,.1468,-84189e-9,-74318e-8,-96694e-9,.0010287,34062e-8,-81659e-8,.69566,-45531e-8,-.089395,3471e-7,-43499e-8,-84247e-9,63284e-8,33745e-8],[93369e-8,-.043038,-29946e-8,.0010751,-.077832,91543e-9,-3188e-7,-38777e-8,2427e-7,-.083693,-27488e-9,.037125,38519e-8,18917e-8,38876e-9,-52703e-8,-.062622,-44958e-8,.59638,-63301e-9,-5158e-7,26879e-8,44977e-8,44357e-8,-73249e-8],[43394e-8,39403e-9,-11519e-8,43287e-8,92062e-9,-.044092,-16019e-8,-16586e-8,-90741e-9,12205e-8,-.076371,-68027e-9,11431e-9,42146e-9,-15562e-8,-50978e-8,10852e-8,-.090178,-63215e-9,.55076,-30071e-8,-10061e-8,-44091e-9,-18634e-8,-52989e-8],[.024287,-68098e-8,44025e-8,.046456,-98422e-8,41334e-8,-.055264,87045e-8,.035731,-76679e-8,61854e-8,-78956e-9,-44819e-8,-.076,.0010755,.015605,-26965e-8,37256e-8,-50905e-8,-30948e-8,.5861,-35748e-8,-.068219,.0010858,-.0080666],[36278e-8,4236e-7,-.088187,50613e-8,55013e-8,-16319e-8,-46573e-9,-.1555,40323e-8,29887e-8,-29669e-8,41029e-9,.12447,24422e-8,-.12393,2491e-7,-10458e-8,-41303e-8,25301e-8,-98766e-9,-34343e-8,.68038,48316e-8,-.062931,9542e-8],[-.036394,97977e-9,-6982e-7,-.067832,21983e-8,59647e-9,.055717,-.0011988,-.063915,37975e-8,53604e-9,16491e-8,72268e-8,.070836,-.0010605,-.050376,52623e-8,-72473e-9,44212e-8,-53054e-9,-.067734,50953e-8,.57914,-7305e-7,-.034854],[-83493e-8,79998e-8,.026126,-.0010351,97432e-8,16225e-10,-53865e-9,.058505,-6492e-7,37984e-8,21376e-8,92154e-9,-.038997,-72785e-8,.082227,-29911e-8,-49514e-8,60306e-8,43943e-8,-18093e-8,.0010741,-.061081,-72224e-8,.64196,-93765e-9],[-.026973,53825e-8,-27366e-8,-.0017445,82228e-8,56764e-8,.021988,-41243e-8,.09185,53812e-8,81817e-8,-57411e-8,23488e-8,.0017919,-25756e-8,.18228,-15563e-8,35494e-8,-72595e-8,-51764e-8,-.0087198,97547e-9,-.034296,-95702e-9,.76345]],[[.587,10936e-9,21995e-8,.22357,-12525e-8,52665e-8,-.12183,24653e-8,.16726,-42001e-8,87024e-8,-17717e-9,-27965e-8,-.1162,-20894e-8,.079485,-72313e-8,63269e-8,-11138e-8,-55681e-8,.043034,-16766e-8,-.058607,-75764e-8,-.0027889],[13453e-9,.5122,41908e-8,-9663e-8,.14497,46143e-8,-18693e-9,58522e-8,-35626e-8,.14812,76269e-8,-.041486,-66906e-8,-40991e-9,-47655e-9,-52001e-8,.10853,60956e-8,-.049085,-3212e-7,-53337e-9,-62472e-8,-27486e-8,-85503e-8,-43094e-8],[22731e-8,41908e-8,.47752,19813e-8,58522e-8,-42166e-10,-50531e-9,.087118,-1388e-7,3751e-7,-16618e-8,-35399e-9,-.070649,6476e-8,.066165,-44804e-8,-54522e-9,-59191e-8,13014e-8,-94357e-9,-21832e-8,-.08609,-98574e-9,.031453,-5487e-7],[.19052,-10907e-8,17584e-8,.76943,-33859e-8,54445e-8,-.19196,15457e-8,.27705,-67656e-8,8991e-7,-41963e-9,-22123e-8,-.17887,-32998e-8,.14113,-97169e-8,65186e-8,-24377e-8,-58218e-8,.069117,-10029e-8,-.09471,-89466e-8,.022901],[-14079e-8,.091335,55927e-8,-34253e-8,.6736,61634e-8,23739e-9,78045e-8,-61504e-8,.29159,.0010097,-.081031,-89889e-8,-98872e-9,-68201e-9,-74007e-8,.21073,78527e-8,-.093753,-42078e-8,41262e-9,-84257e-8,-47826e-8,-.0011437,-5475e-7],[55581e-8,47424e-8,-21353e-10,60115e-8,66261e-8,.46752,-2822e-7,-14037e-8,-41528e-9,46736e-8,.084676,14672e-8,-86235e-9,-57514e-9,-58129e-8,-65502e-8,45509e-9,.079704,50601e-8,-.038675,-25213e-8,-49656e-9,-1754e-8,-.0010075,-83182e-8],[-.12272,-14076e-9,-35527e-9,-.16574,18466e-9,-24961e-8,.54282,-35473e-9,-.13781,81276e-9,-41996e-8,-75118e-9,41261e-9,.13968,46084e-9,-.069897,12341e-8,-3151e-7,-14685e-8,28454e-8,-.063923,1529e-8,.070979,13473e-8,.0015837],[23571e-8,55927e-8,.034616,1624e-7,78045e-8,-15434e-8,-49681e-9,.57853,-28336e-8,49872e-8,-53035e-8,-54614e-9,-.14532,58476e-9,.14795,-68265e-8,-72608e-9,-.0012119,16021e-8,-3101e-8,-2336e-7,-.16497,-20779e-8,.074562,-79425e-8],[.16674,-37376e-8,-16977e-8,.22789,-63911e-8,-97983e-9,-.13551,-32386e-8,.66329,-73505e-8,-16578e-8,-11944e-8,21977e-8,-.15126,-35402e-8,.20173,-68928e-8,-12466e-8,-49324e-8,98012e-9,.057386,22846e-8,-.091151,-33529e-8,.10988],[-46008e-8,.14922,3115e-7,-7135e-7,.2117,38666e-8,10637e-8,43339e-8,-72197e-8,.73371,6142e-7,-.081181,-50759e-8,-20602e-8,-4241e-8,-60208e-8,.30099,42817e-8,-.11561,-25057e-8,35043e-8,-47818e-8,-56969e-8,-62459e-8,-32467e-8],[87755e-8,74968e-8,-18303e-8,94845e-8,.0010383,.015795,-4539e-7,-53665e-8,-70515e-9,71283e-8,.56617,24289e-8,83571e-9,-10334e-8,-.0011916,-.001037,28558e-9,.19361,81459e-8,-.088821,-38316e-8,12401e-8,-2744e-8,-.0017587,-.0012989],[-12527e-9,-.041911,-15593e-9,-40766e-9,-.060723,17501e-8,-79366e-9,-28841e-9,-13596e-8,-.081693,29976e-8,.4658,45291e-9,-1566e-7,-58756e-10,-23345e-8,-.064719,25926e-8,.078461,-1366e-7,20827e-8,61588e-9,-11007e-8,41947e-9,-24589e-8],[-27333e-8,-65289e-8,-.074051,-23434e-8,-91748e-8,-8159e-8,56771e-9,-.098597,1763e-7,-59474e-8,52732e-9,75544e-9,.55085,-85288e-9,-.1093,54703e-8,78646e-9,59813e-8,-16846e-8,21206e-8,27729e-8,.18439,12369e-8,-.058698,65847e-8],[-.12401,-42674e-9,75271e-9,-.17794,-10753e-8,-27989e-9,.068014,76141e-9,-.13726,-22709e-8,-5717e-8,-15054e-8,-10325e-8,.57506,-11153e-8,-.079334,-37814e-8,-55202e-9,-36816e-8,58381e-9,-.11968,-6759e-8,.12818,-34618e-8,-.017439],[-26384e-8,-11929e-8,.069338,-38999e-8,-17077e-8,-60613e-8,64088e-9,.084731,-36054e-8,-11379e-8,-.0012344,25475e-10,-.10651,-11662e-8,.55842,-30142e-8,2581e-8,-.0016245,-51097e-9,42263e-8,24084e-8,-.15779,-28213e-8,.13738,-21951e-8],[.08773,-51248e-8,-46167e-8,.13578,-74876e-8,-66335e-8,-.070682,-7181e-7,.12241,-6334e-7,-.0010966,-19813e-8,58602e-8,-.075445,-34127e-8,.63319,-34374e-8,-78187e-8,-6792e-7,70974e-8,.029344,48856e-8,-.079183,19165e-8,.24662],[-75913e-8,.1168,-12719e-8,-.0010153,.20442,-37202e-9,16034e-8,-17643e-8,-69473e-8,.19208,-10178e-8,-.065659,19822e-8,-34109e-8,27693e-9,-31539e-8,.68451,-18867e-8,-.085002,43521e-9,73445e-8,18409e-8,-55823e-8,32967e-8,-19921e-9],[55398e-8,53374e-8,-64303e-8,59676e-8,71701e-8,.083751,-29748e-8,-.0012756,-50365e-9,44194e-8,.098569,19308e-8,70265e-8,-80763e-9,-.0015965,-64309e-8,-94928e-9,.62729,60047e-8,-.088009,-21995e-8,6881e-7,-90439e-10,-.001667,-75426e-8],[-12064e-8,-.052475,15649e-8,-25972e-8,-.091997,52931e-8,-14448e-8,20598e-8,-52079e-8,-.097269,88753e-8,-.0051841,-21779e-8,-37285e-8,-32722e-9,-73475e-8,-.086445,72645e-8,.52063,-39696e-8,48166e-8,-1717e-7,-41294e-8,-29842e-8,-67731e-8],[-56349e-8,-29988e-8,-98596e-9,-61614e-8,-41066e-8,-.040634,30788e-8,-57013e-9,35928e-9,-27584e-8,-.054116,-10789e-8,21971e-8,90579e-9,36152e-8,67102e-8,-74605e-10,-.090099,-35018e-8,.47806,22216e-8,19329e-8,17083e-9,82013e-8,87003e-8],[.038195,-62543e-9,-22772e-8,.074183,17895e-9,-27043e-8,-.067145,-26393e-8,.055714,31949e-8,-43415e-8,20617e-8,30397e-8,-.052367,19648e-8,.033209,72351e-8,-29696e-8,46785e-8,25631e-8,.5135,20764e-8,-.072454,76991e-8,2467e-7],[-13864e-8,-5743e-7,-.097476,-86233e-9,-8102e-7,-39066e-9,20131e-9,-.16797,18998e-8,-52754e-8,98761e-9,85299e-9,.093169,-49658e-9,-.13214,42683e-8,67516e-9,56963e-8,-11564e-8,17115e-8,16617e-8,.62967,13685e-8,-.085793,47754e-8],[-.05284,-31082e-8,-1308e-7,-.10398,-53831e-8,-38177e-9,.074059,-25608e-8,-.090313,-62992e-8,-61739e-9,-92038e-9,1683e-7,.052794,-29875e-8,-.064083,-60017e-8,-36338e-9,-39615e-8,35458e-9,-.071162,17938e-8,.51628,-30385e-8,-.045999],[-81926e-8,-91472e-8,.04043,-98663e-8,-.0012783,-996e-6,18071e-8,.073818,-39491e-8,-80468e-8,-.0017808,89624e-9,-.0605,-32221e-8,.042798,19881e-8,18949e-8,-.0017505,-25602e-8,86978e-8,78885e-8,-.079564,-32601e-8,.56016,49632e-8],[-.010655,-37483e-8,-5194e-7,.03283,-49429e-8,-75177e-8,.007781,-77663e-8,.10793,-32154e-8,-.0012254,-20055e-8,64903e-8,-.016619,-27053e-8,.14045,-52848e-9,-82206e-8,-58626e-8,82325e-8,-.0024109,51115e-8,-.043315,41371e-8,.69773]],[[.53332,-86478e-8,27166e-8,.23291,-.0014148,-14464e-8,-.13098,40892e-8,.18602,-.0013398,-26134e-8,26761e-8,-30622e-8,-.1348,16256e-8,.10507,-7004e-7,-2715e-7,8021e-8,96284e-9,.058845,-19821e-8,-.078358,-19865e-8,.021045],[-90985e-8,.44769,-11815e-8,-.0011527,.14455,27429e-8,60892e-8,-18031e-8,-3661e-7,.15062,48797e-8,-.041865,14747e-8,35878e-8,-74965e-9,60646e-8,.12104,50935e-8,-.053368,-96561e-9,41347e-10,1167e-7,-89577e-9,70802e-9,.0012522],[28759e-8,-11815e-8,.41457,3356e-7,-18031e-8,-47149e-8,-28169e-9,.086711,11326e-8,-16492e-8,-91004e-8,-40426e-9,-.066605,1799e-7,.065367,-12066e-8,-99163e-9,-.0010352,-14725e-8,43378e-8,-39039e-8,-.083296,1111e-7,.034984,-26994e-8],[.17421,-.0010423,29403e-8,.73101,-.0017132,-15908e-8,-.2161,43704e-8,.32079,-.0016401,-29144e-8,32487e-8,-31571e-8,-.20973,16503e-8,.18008,-88877e-8,-31458e-8,98381e-9,10185e-8,.091587,-17934e-8,-.1232,-22674e-8,.054197],[-.0014152,.049946,-16761e-8,-.0018015,.60492,3823e-7,94954e-8,-25934e-8,-59625e-8,.3182,67573e-8,-.087543,2054e-7,56198e-8,-12312e-8,90336e-8,.24329,70609e-8,-.10563,-10217e-8,-34285e-10,1616e-7,-15295e-8,68444e-9,.0019108],[-16086e-8,29014e-8,-49595e-8,-19003e-8,43639e-8,.40162,32538e-9,-8087e-7,-6638e-8,40177e-8,.087628,19764e-8,73131e-8,-68853e-9,-416e-6,56337e-9,25116e-8,.074795,5755e-7,-.035127,17509e-8,74014e-8,-50437e-9,24938e-8,1179e-7],[-.13364,53735e-8,61261e-10,-.16983,88139e-8,14409e-9,.49172,25862e-9,-.15788,796e-6,22049e-9,-32706e-8,-89418e-9,.17035,55162e-10,-.097012,30599e-8,22108e-9,-39624e-8,1177e-8,-.07533,-1754e-7,.088908,-63338e-9,-.020377],[40229e-8,-16761e-8,-.0060338,46373e-8,-25934e-8,-73061e-8,-20827e-9,.50675,14908e-8,-24644e-8,-.0014207,-6202e-8,-.15157,28546e-8,.1619,-17743e-8,-16457e-8,-.0016442,-22065e-8,66734e-8,-58746e-8,-.16949,16686e-8,.086096,-38442e-8],[.18672,-20498e-8,57035e-9,.23363,-35963e-8,-3498e-8,-.15352,76583e-9,.62827,-41958e-8,-78058e-9,-25584e-9,-61877e-9,-.18721,-45833e-10,.24698,-38487e-8,-11782e-8,-18337e-8,2439e-8,.079212,-27086e-9,-.11941,-12286e-8,.13485],[-.0012036,.15644,-13455e-8,-.0015501,.1786,30698e-8,76583e-8,-21707e-8,-59149e-8,.68216,54237e-8,-.084436,16329e-8,40189e-8,-13412e-8,61452e-8,.36417,5664e-7,-.1366,-78115e-9,91856e-9,13422e-8,-19129e-8,-6161e-9,.001454],[-26978e-8,47869e-8,-90884e-8,-3231e-7,71541e-8,-.033353,49152e-9,-.001493,-12892e-8,65943e-8,.48346,36997e-8,.0013348,-12564e-8,-80979e-8,6484e-8,42316e-8,.20587,.0010421,-.090794,30344e-8,.0013566,-98268e-9,36915e-8,16723e-8],[22108e-8,-.043628,-572e-7,28283e-8,-.052084,23844e-8,-31699e-8,-91147e-9,-23164e-10,-.085377,46214e-8,.40214,93055e-9,-39136e-8,-33124e-9,-38245e-8,-.077651,48058e-8,.095957,-33935e-8,41676e-8,9877e-8,-90395e-9,59714e-9,-6221e-7],[-28637e-8,13378e-8,-.074912,-31889e-8,201e-6,65439e-8,-58413e-9,-.069798,-11168e-8,18324e-8,.0012592,67431e-9,.48303,-33506e-8,-.10772,78951e-9,11568e-8,.0014198,21008e-8,-60998e-8,60184e-8,.21086,-15305e-8,-.071426,19194e-8],[-.14805,25645e-8,21451e-8,-.20869,4223e-7,-81669e-9,.044261,35151e-8,-.1633,33068e-8,-15524e-8,-35567e-8,-3827e-7,.52375,13231e-8,-.10609,-21583e-9,-1659e-7,-61963e-8,88258e-9,-.14476,-44808e-8,.16406,-25556e-8,-.040697],[93291e-9,-43083e-9,.074033,97733e-9,-81333e-9,-2876e-7,-61962e-10,.051506,-28197e-10,-10843e-8,-59761e-8,-13327e-9,-.103,64884e-9,.49105,-1126e-7,-11984e-8,-79528e-8,-59505e-9,24068e-8,-11644e-8,-.17428,45472e-9,.16356,-18319e-8],[.11808,73649e-8,-16218e-8,.17022,.0011718,69683e-9,-.097733,-25267e-8,.10725,97467e-8,10306e-8,-44825e-8,1442e-7,-.098128,-16722e-8,.57495,20865e-8,56758e-9,-55838e-8,-30894e-9,.045411,56194e-9,-.10397,-57899e-9,.28097],[-43129e-8,.13428,-62207e-9,-5877e-7,.23464,14304e-8,15382e-8,-11574e-8,-39076e-8,.17521,26077e-8,-.079679,80071e-9,-75027e-9,-11694e-8,-12457e-8,.64054,26654e-8,-.10168,-98848e-9,31663e-8,83163e-9,-21019e-8,-90779e-9,12033e-8],[-24497e-8,43596e-8,-94313e-8,-30588e-8,65136e-8,.08692,42003e-9,-.0015776,-15911e-8,60025e-8,.041647,34299e-8,.0013693,-12071e-8,-96417e-8,-54095e-10,38228e-8,.54472,95989e-8,-.079407,2771e-7,.0014047,-11755e-8,15227e-8,92483e-9],[-38413e-9,-.058893,-16951e-8,-47598e-9,-.10358,61439e-8,-32203e-8,-26882e-8,-21846e-8,-.10533,.0011687,-.050337,25149e-8,-61088e-8,-11326e-8,-4818e-7,-.10448,.0012144,.44441,-72985e-8,85798e-8,2478e-7,-24241e-8,12905e-8,-62427e-8],[8632e-8,-54223e-9,40836e-8,98225e-9,-5074e-8,-.04042,62587e-10,66197e-8,38134e-9,-48001e-9,-.030707,-30475e-8,-6105e-7,77506e-9,32101e-8,-12032e-9,-10096e-8,-.082863,-67652e-8,.4097,-14358e-8,-621e-6,38371e-9,-24809e-8,-30663e-9],[.04866,70266e-9,-41611e-8,.099601,10626e-8,17813e-8,-.083395,-66127e-8,.075838,18568e-8,32842e-8,36065e-8,66412e-8,-.027901,-23518e-8,.05308,34727e-8,33957e-8,8165e-7,-1603e-7,.44254,7028e-7,-.071921,47772e-8,.012711],[-12703e-8,85424e-9,-.10275,-11532e-8,12754e-8,5968e-7,-15922e-8,-.17746,-38296e-9,1223e-7,.0011538,69515e-9,.052386,-38879e-8,-.1311,-10053e-9,94817e-9,.0013138,1888e-7,-55874e-8,59095e-8,.56611,-13321e-8,-.098787,-81604e-10],[-.065256,-13081e-8,73937e-9,-.13753,-22989e-8,-30907e-9,.09636,11609e-8,-.11766,-27166e-8,-67881e-9,-25943e-9,-97473e-9,.033249,51346e-9,-.078993,-25628e-8,-99628e-9,-13762e-8,22714e-9,-.069944,-83109e-9,.45469,-53426e-9,-.058191],[-29594e-8,99494e-9,.049968,-35676e-8,12462e-8,36576e-8,-33474e-9,.086916,-19831e-8,61055e-9,63375e-8,57795e-9,-.075546,-295e-6,-58358e-8,-58434e-9,-41169e-9,52313e-8,15845e-8,-37978e-8,58641e-8,-.08738,-13265e-8,.47959,27647e-9],[.0020659,.0012258,-26624e-8,.067349,.00198,9976e-8,-.0057097,-40732e-8,.13285,.0017418,16042e-8,-65422e-8,23053e-8,-.037488,-24598e-8,.096915,59714e-8,12964e-8,-71902e-8,-38515e-9,.0068276,73255e-9,-.051904,-34608e-9,.62072]],[[.48444,15705e-8,58138e-8,.23811,25076e-8,-78536e-9,-.13719,.001163,.20144,19008e-8,-14565e-8,-1639e-7,-76151e-8,-.15006,.0014598,.13013,-18133e-9,-16595e-8,-26e-5,50548e-9,.073115,-89218e-8,-.097071,.0016982,.048857],[17215e-8,.38846,-65903e-9,21316e-8,.13935,-13323e-8,-20532e-8,-10281e-8,-23094e-10,.14819,-22673e-8,-.040915,80807e-9,-22636e-8,-54913e-9,-27833e-8,.12757,-92678e-9,-.055125,3184e-7,15229e-8,6414e-8,-96775e-9,1837e-9,-45754e-8],[61109e-8,-65903e-9,.35838,94798e-8,-10281e-8,-14845e-9,-15306e-8,.08465,.0010105,-10222e-8,-34107e-9,-24325e-9,-.0619,2259e-7,.064114,.0010426,-83146e-9,-89249e-9,-87359e-9,-79612e-9,-63941e-8,-.077718,47262e-8,.037663,96853e-8],[.15672,17553e-8,89285e-8,.69162,27738e-8,-83992e-9,-.23513,.001773,.35838,20084e-8,-16309e-8,-18922e-8,-.0012033,-.23771,.0021601,.22071,-45266e-9,-20707e-8,-30368e-8,51592e-9,.11269,-.0014222,-.15119,.0024199,.092031],[24882e-8,.0094769,-90311e-9,30505e-8,.53203,-16443e-8,-30259e-8,-1474e-7,-17625e-9,.33037,-25437e-8,-.090134,10815e-8,-33687e-8,-10491e-8,-42944e-8,.26907,10882e-9,-.11424,4593e-7,22694e-8,89423e-9,-15092e-8,-59171e-9,-69527e-8],[-92222e-9,-14872e-8,-15659e-9,-11091e-8,-2157e-7,.3417,16689e-9,-30375e-9,-48598e-9,-84998e-9,.087448,22263e-8,-67316e-9,-4351e-8,-10367e-8,41892e-10,24221e-8,.069441,41653e-8,-.031127,10555e-8,-14221e-8,-35079e-9,-22712e-8,13486e-9],[-.14266,-18914e-8,-8919e-8,-.17176,-30667e-8,13866e-10,.4438,-21036e-8,-.17376,-27394e-8,15337e-10,86478e-9,3286e-8,.1967,-42605e-8,-.12354,-10311e-8,74302e-10,70957e-9,14004e-9,-.089046,69609e-10,.10947,-72788e-8,-.046798],[.0012135,-90311e-9,-.042955,.0018682,-1474e-7,-28181e-9,-34599e-8,.43639,.0019308,-16348e-8,-65168e-9,-36498e-9,-.15255,37109e-8,.17014,.0019167,-16223e-8,-15886e-8,-12883e-8,-11878e-8,-.0011711,-.17104,8794e-7,.098231,.0017221],[.20541,-62541e-9,95077e-8,.23881,-11243e-8,-22095e-9,-.16761,.0018385,.59489,-1414e-7,-6632e-8,-1976e-8,-.001411,-.2195,.0019884,.28939,-15078e-8,-14134e-8,-81978e-9,18392e-9,.10153,-.0017145,-.14964,.0018591,.16726],[12932e-8,.16276,-74602e-9,14876e-8,.14306,15032e-9,-20484e-8,-13808e-8,-71847e-9,.61862,12821e-8,-.082671,90833e-9,-25889e-8,-15266e-8,-35192e-8,.41002,51557e-8,-.15037,2309e-7,20645e-8,92048e-9,-14105e-8,-17511e-8,-52657e-8],[-14842e-8,-22003e-8,-35125e-9,-18659e-8,-29277e-8,-.077332,22808e-9,-68584e-9,-10973e-8,-11312e-9,.39913,4181e-7,-11415e-8,-77315e-9,-20593e-8,-51534e-9,61841e-8,.20652,82151e-8,-.087635,17692e-8,-24959e-8,-72164e-9,-43527e-8,-52264e-9],[-18098e-8,-.045053,-39744e-9,-22934e-8,-.042624,21136e-8,95729e-9,-63247e-9,-8602e-8,-.084034,43093e-8,.34299,64502e-9,20865e-9,-2296e-8,891e-7,-.08624,49619e-8,.1094,-32486e-8,10291e-8,68014e-9,-20778e-9,4026e-8,21294e-8],[-72477e-8,68217e-9,-.076931,-.0011552,1054e-7,-77841e-9,89586e-9,-.042325,-.0013635,10851e-8,-14792e-8,40949e-9,.4145,-4378e-7,-.099758,-.0015731,1016e-7,-89748e-9,12253e-8,25352e-8,97249e-8,.22552,-69284e-8,-.080646,-.0015946],[-.16753,-19196e-8,31996e-8,-.23729,-31368e-8,-52091e-9,.025255,58348e-8,-.18871,-30567e-8,-993e-7,14531e-9,-56788e-8,.47294,44567e-8,-.13302,-18374e-8,-10782e-8,-88898e-9,55598e-9,-.16661,-72129e-8,.19598,10743e-8,-.06796],[.0015377,-25959e-9,.080991,.0023032,-67475e-9,-10658e-8,-62865e-8,.021978,.0021052,-12947e-8,-22261e-8,-44344e-10,-.093965,11932e-8,.4231,.0017358,-20395e-8,-30352e-8,-34348e-9,83179e-9,-.0010386,-.18248,8454e-7,.18239,.0012725],[.14612,-32247e-8,95961e-8,.20726,-53661e-8,99127e-10,-.12473,.0018012,.099974,-51256e-8,-23151e-9,1569e-7,-.001569,-.12095,.0016626,.51792,-26493e-8,-12389e-8,1405e-7,15289e-9,.062144,-.0019548,-.12832,.0010848,.30653],[-13553e-8,.14362,-56113e-9,-19031e-8,.26223,36192e-8,32342e-9,-12864e-8,-15404e-8,.16177,83212e-8,-.090793,80524e-9,-51527e-9,-20398e-8,-10685e-8,.5881,.0013166,-.11309,-30246e-8,13275e-8,11472e-8,-86653e-9,-28441e-8,-62521e-9],[-13634e-8,93663e-10,-99665e-9,-19483e-8,13414e-8,.094062,2275e-8,-18303e-8,-1814e-7,52852e-8,-.0095829,39039e-8,-21695e-10,-687e-7,-28476e-8,-18419e-8,.0011742,.45221,90964e-8,-.064164,15775e-8,-11335e-8,-98091e-9,-44028e-8,-20584e-8],[-26444e-8,-.061956,-10478e-8,-33816e-8,-.11346,38545e-8,71931e-9,-16927e-8,-17618e-8,-.11111,81581e-8,-.087784,1556e-7,-93349e-9,-85086e-9,12929e-9,-.11722,.001052,.36706,-51528e-8,30359e-8,15566e-8,-10045e-8,39986e-9,15386e-8],[39057e-9,35566e-8,-10735e-8,45511e-9,57303e-8,-.04125,10956e-9,-17653e-8,28536e-9,45023e-8,-.0082026,-34614e-8,2897e-7,49348e-9,90994e-10,26493e-9,-1845e-8,-.068135,-56418e-8,.34248,-76252e-9,41041e-8,31322e-9,34378e-8,45599e-9],[.056827,11455e-8,-69085e-8,.12211,18667e-8,10644e-8,-.10395,-.0013113,.096197,20931e-8,19859e-8,99635e-9,.0010888,-.012363,-.0012891,.074171,20063e-8,21633e-8,29313e-8,-89983e-9,.37372,.001344,-.068601,-98811e-8,.028622],[-78321e-8,36515e-9,-.10259,-.0012578,6083e-8,-14815e-8,68033e-9,-.18576,-.0015243,80516e-9,-2866e-7,40842e-9,.015151,-52644e-8,-.12867,-.0018046,11091e-8,-24219e-8,10614e-8,34752e-8,.0011171,.49093,-79147e-8,-.10704,-.0018639],[-.074733,-63458e-9,54333e-8,-.16723,-10994e-8,-12217e-9,.12284,.0010458,-.14661,-12609e-8,-37071e-9,-85744e-10,-82189e-8,.023297,.0011035,-.097792,-11469e-8,-79587e-9,-58657e-9,11575e-9,-.066173,-.0010052,.39489,98594e-8,-.072602],[.0017706,18058e-9,.056467,.0025726,-22476e-9,-22454e-8,-96359e-8,.10296,.001999,-1281e-7,-45862e-8,4024e-8,-.089975,-30459e-8,-.034888,.0011367,-25475e-8,-51506e-8,73723e-9,39399e-8,-63475e-8,-.091869,63725e-8,.39532,3378e-7],[.015382,-41929e-8,82433e-8,.10313,-69277e-8,-13914e-9,-.021293,.0015129,.16707,-642e-6,-69987e-9,23399e-8,-.0014455,-.062138,.0012068,.064233,-28881e-8,-17e-5,24544e-8,49782e-9,.019169,-.0018323,-.061826,42494e-8,.53265]],[[.44202,40148e-8,76252e-8,.2418,69148e-8,40455e-8,-.14126,.0013649,.21217,77214e-8,85235e-8,19886e-9,-.0012121,-.16032,.0010716,.14831,66569e-8,.0011326,32045e-8,-41324e-8,.08267,-.0014352,-.11085,38083e-8,.07076],[45229e-8,.33814,35116e-8,60261e-8,.13559,56961e-8,-1892e-7,62533e-8,347e-6,.14691,.0011388,-.040013,-54973e-8,48693e-9,47693e-8,32998e-9,.1308,.0013702,-.055003,-5729e-7,-40204e-8,-63701e-8,15351e-8,11438e-8,-19864e-8],[84881e-8,35116e-8,.31037,.0011743,62533e-8,36543e-8,-42546e-8,.083721,77183e-8,73287e-8,77461e-8,-16323e-9,-.059947,-90962e-9,.064185,2282e-7,6605e-7,.0010054,18224e-8,-48082e-8,-43698e-8,-.074061,16859e-8,.038769,-24283e-8],[.14275,48067e-8,97279e-8,.65234,83274e-8,51499e-8,-.24792,.001763,.38476,95146e-8,.001086,58219e-9,-.0015491,-.2587,.0014587,.25315,8684e-7,.0014461,46617e-8,-52282e-8,.1277,-.0018599,-.17274,67351e-8,.12383],[6976e-7,-.020151,57712e-8,93453e-8,.46597,85161e-8,-2562e-7,.0010288,57539e-8,.33434,.0017116,-.090205,-90024e-8,14492e-8,79005e-8,14526e-8,.2882,.0020849,-.11926,-8542e-7,-71624e-8,-.0010416,28602e-8,19969e-8,-16291e-8],[50799e-8,64419e-8,40796e-8,70073e-8,.0010877,.29045,-24447e-8,73004e-8,45162e-8,.0011524,.088387,-18332e-9,-74621e-8,-30414e-9,49029e-8,9559e-8,86e-5,.069551,33892e-8,-.030071,-28584e-8,-95654e-8,13034e-8,-50365e-9,-25183e-8],[-.14972,-95569e-9,-26888e-8,-.17246,-14087e-8,-12882e-8,.39844,-4883e-7,-.18289,-14157e-8,-26824e-8,-15274e-8,41425e-8,.21405,-41871e-8,-.14274,-13982e-8,-35366e-8,-43473e-8,11714e-8,-.10164,48774e-8,.1279,-22877e-8,-.069111],[.001393,57712e-8,-.069385,.0019511,.0010288,60475e-8,-70159e-8,.37378,.0013518,.0012085,.0012891,-22865e-9,-.15221,-15831e-8,.17375,52832e-8,.0010931,.0016961,30878e-8,-78767e-8,-71005e-8,-.17472,28944e-8,.10817,-20149e-8],[.21974,17631e-8,49545e-8,.24148,33537e-8,25131e-8,-.17497,95633e-8,.55831,45889e-8,53359e-8,34421e-9,-80504e-8,-.24118,98187e-8,.31986,55078e-8,71787e-8,20026e-8,-25457e-8,.11901,-.001042,-.17468,82739e-8,.19955],[64423e-8,.17111,59511e-8,88397e-8,.11706,72437e-8,-20026e-8,.0010631,63029e-8,.55124,.0014769,-.077863,-92558e-8,2e-4,82453e-8,33545e-8,.43193,.0018528,-.15489,-73186e-8,-74652e-8,-.0010712,32252e-8,22032e-8,12895e-8],[98781e-8,.0011382,7974e-7,.0013641,.0019318,-.10658,-47052e-8,.0014347,88574e-8,.0020714,.32588,-28867e-9,-.0014493,-50069e-9,99971e-8,19855e-8,.0015906,.20395,60875e-8,-.084602,-5653e-7,-.0018601,26231e-8,-43029e-10,-47917e-8],[12712e-8,-.046678,62591e-9,19812e-8,-.035038,12794e-8,-21591e-8,11466e-8,10456e-8,-.079367,25635e-8,.28925,-11353e-8,-32246e-8,86519e-9,-77592e-9,-.089373,2953e-7,.11661,-1649e-7,37097e-8,-14818e-8,-15551e-8,1226e-8,-27836e-8],[-.0012036,-4853e-7,-.082189,-.001672,-86159e-8,-62776e-8,58845e-8,-.024668,-.001128,-.0010078,-.0013249,70083e-10,.35208,10162e-8,-.089757,-39213e-8,-90823e-8,-.0016976,-28732e-8,84211e-8,65765e-8,.23066,-25913e-8,-.083384,25083e-8],[-.17937,18078e-8,11703e-8,-.25832,35527e-8,96921e-9,.012463,19859e-8,-.20813,42213e-8,21008e-8,-27835e-8,-20882e-8,.42088,99087e-9,-.15339,32082e-8,28486e-8,-55112e-8,-12448e-8,-.17967,-25339e-8,.21602,-94357e-9,-.091088],[82362e-8,33316e-8,.089844,.0012299,59836e-8,27608e-8,-43865e-8,.0020521,.0010629,71118e-8,61945e-8,-12425e-9,-.082757,-14717e-8,.35835,78325e-8,65128e-8,91638e-8,18071e-8,-31766e-8,-36391e-8,-.18237,19855e-8,.19069,482e-6],[.16385,-10881e-8,-19721e-9,.23533,-11923e-8,-67339e-9,-.1446,7471e-8,.097909,15365e-9,-1373e-7,-67753e-9,-38962e-10,-.13718,41929e-8,.46334,25452e-8,-17683e-8,-24153e-8,64349e-9,.075072,-15112e-8,-.14571,89591e-8,.32201],[41159e-8,.14389,43121e-8,61134e-8,.28286,32997e-8,-12503e-8,77231e-8,57592e-8,.1543,71035e-8,-.097865,-67016e-8,11889e-8,60314e-8,53101e-8,.52683,98224e-8,-.11741,-35311e-8,-44773e-8,-77728e-8,23417e-8,1585e-7,48727e-8],[.001155,.0010941,89343e-8,.0015988,.0018833,.10731,-54556e-8,.0016309,.0010497,.0020791,-.039323,-36125e-9,-.0015922,-50256e-9,.001248,25118e-8,.0016994,.36626,57137e-8,-.050197,-66744e-8,-.0020477,31862e-8,28802e-8,-55351e-8],[57188e-8,-.060864,33962e-8,82764e-8,-.11934,54431e-8,-60614e-8,61227e-8,45791e-8,-.1136,.0010935,-.11231,-56344e-8,-6964e-7,46817e-8,-14755e-8,-.12223,.0013001,.2935,-62101e-8,58257e-8,-68794e-8,-25315e-8,10089e-8,-74315e-8],[-41535e-8,-49844e-8,-48794e-8,-5697e-7,-84098e-8,-.045268,18181e-8,-86714e-8,-36808e-8,-90085e-8,.0048159,-26568e-9,91042e-8,-1036e-8,-54623e-8,-84657e-9,-70009e-8,-.054693,-3546e-7,.2816,27527e-8,.0011728,-12969e-8,15604e-8,19055e-8],[.059634,-52659e-8,-5936e-7,.13525,-96789e-8,-34532e-8,-.12358,-.0010504,.11093,-.0011082,-73267e-8,40108e-8,97468e-8,-.0070676,-75686e-8,.091678,-87415e-8,-9757e-7,61263e-8,38215e-8,.31028,.0011655,-.063395,-11247e-8,.044566],[-.0012082,-46667e-8,-.099419,-.0017059,-82704e-8,-71353e-8,58222e-8,-.19554,-.0012378,-96785e-8,-.0015092,-10671e-9,-.0079951,88965e-9,-.12901,-59069e-8,-87487e-8,-.001942,-31624e-8,96018e-8,68344e-8,.41463,-28798e-8,-.10927,-55779e-10],[-.078503,15722e-8,1922e-7,-.18593,29636e-8,14907e-8,.14733,36705e-8,-.16959,3659e-7,32034e-8,-88382e-9,-31541e-8,.022851,36133e-8,-.11541,34724e-8,4377e-7,-10804e-8,-16181e-8,-.060452,-40633e-8,.33726,27747e-8,-.085698],[-7213e-8,-10087e-8,.057061,62398e-9,-17285e-8,-2823e-7,-23261e-9,.11613,49086e-8,-19396e-8,-52822e-8,-27229e-10,-.09956,-12264e-8,-.055426,9739e-7,-17538e-8,-45373e-8,-68199e-9,46836e-8,17883e-8,-.090157,36088e-9,.31648,.0012946],[.021411,-20532e-8,-32344e-8,.12628,-26089e-8,-31626e-8,-.031478,-46198e-8,.20041,-12018e-8,-66794e-8,-20602e-8,4717e-7,-.082611,18783e-9,.050641,1389e-7,-90184e-8,-64047e-8,311e-6,.031205,39892e-8,-.070278,80208e-8,.44958]],[[.40316,97095e-8,99913e-9,.2426,.0017327,18476e-8,-.14377,24888e-8,.22102,.001926,37541e-8,-48221e-8,-73085e-9,-.16939,52259e-8,.16682,.0014628,4507e-7,-52419e-8,-23218e-8,.09214,-97122e-9,-.12489,94897e-8,.096164],[.0011362,.29173,16858e-8,.0015704,.12614,-26681e-8,-91183e-8,28868e-8,8099e-7,.14047,-56541e-8,-.037962,-29858e-8,-78441e-8,15645e-8,-32267e-8,.12945,-68934e-8,-.053516,45284e-8,23514e-8,-36481e-8,-24425e-8,-10367e-8,-.001389],[94016e-9,16858e-8,.26716,18925e-8,28868e-8,41397e-8,43045e-9,.079058,36333e-8,30359e-8,86588e-8,-50296e-9,-.056349,15258e-8,.062593,60509e-8,21318e-8,.0010832,-15912e-9,-55893e-8,-27358e-8,-.068758,15149e-8,.039611,81559e-8],[.13228,.0011912,21105e-8,.61458,.0021277,20704e-8,-.25676,4877e-7,.40544,.0023668,42403e-8,-60166e-8,-23861e-8,-.27883,86504e-8,.28706,.0017987,51844e-8,-66642e-8,-26497e-8,.14364,-33022e-8,-.19624,.0014176,.16239],[.0017991,-.044327,24263e-8,.0024888,.39875,-42694e-8,-.0014548,41814e-8,.001284,.32241,-90188e-8,-.086415,-43464e-8,-.0012639,23471e-8,-51389e-8,.29731,-.0010909,-.12094,72633e-8,3996e-7,-53883e-8,-4006e-7,-12618e-8,-.0022086],[25674e-8,-3126e-7,48579e-8,33971e-8,-56023e-8,.24416,-16906e-8,85861e-8,15308e-8,-60345e-8,.083148,24398e-8,-90172e-8,-10389e-8,52328e-8,-96919e-9,-39941e-8,.066366,37446e-8,-.027849,-37933e-9,-.0011618,-18085e-9,-21985e-8,-29948e-8],[-.15553,-66484e-8,48584e-9,-.17521,-.0011936,-88586e-9,.358,52076e-9,-.19132,-.0013331,-18543e-8,36979e-8,-15891e-8,.22539,-15517e-8,-.16184,-.0010144,-2353e-7,45103e-8,11839e-8,-.11408,-21548e-8,.14668,-53016e-8,-.0947],[27268e-8,24263e-8,-.088784,49754e-8,41814e-8,64278e-8,-39684e-10,.31338,78126e-8,44629e-8,.001346,-78411e-9,-.14454,20367e-8,.16866,.0011645,32852e-8,.0016858,-37775e-9,-87385e-8,-47646e-8,-.17364,25643e-8,.11589,.0014901],[.23342,25287e-8,41354e-8,.25015,45307e-8,13694e-9,-.18242,85147e-8,.52822,50588e-8,38207e-9,-1339e-7,-67932e-8,-.26094,.0010563,.34555,38704e-8,76748e-9,-15547e-8,-28524e-9,.13748,-9519e-7,-.20139,.001218,.23553],[.0015629,.17568,17617e-8,.0021644,.096375,-34853e-8,-.0012751,31099e-8,.0011176,.48181,-72899e-8,-.071156,-32534e-8,-.0011204,19939e-8,-44793e-8,.43225,-85536e-8,-.15324,60764e-8,3741e-7,-42098e-8,-36246e-8,-21175e-9,-.0019251],[43525e-8,-59259e-8,89215e-8,57877e-8,-.0010587,-.12667,-2942e-7,.0015786,26763e-8,-.0011318,.25475,46455e-8,-.0016633,-19256e-8,9629e-7,-14645e-8,-73119e-8,.1852,71547e-8,-.075621,-44847e-9,-.002151,-44315e-9,-40572e-8,-47267e-8],[-37434e-8,-.047505,-62965e-10,-52655e-8,-.029068,19205e-8,34708e-8,-16352e-9,-2723e-7,-.072787,40841e-8,.24078,1898e-8,35139e-8,-24025e-9,12194e-8,-.089246,51529e-8,.11552,-29458e-8,-19634e-8,37054e-9,13786e-8,-27444e-9,50339e-8],[-18074e-9,-26265e-8,-.085672,-1184e-7,-45432e-8,-6997e-7,-17939e-8,-.011662,-48413e-8,-48715e-8,-.0014684,8619e-8,.29319,-3444e-7,-.077336,-.0010029,-35832e-8,-.0018435,43966e-9,9622e-7,47866e-8,.22235,-27469e-8,-.082705,-.0014656],[-.18869,-40897e-8,15451e-8,-.27903,-74227e-8,-1801e-8,.010647,26875e-8,-.23045,-8359e-7,-47806e-9,27181e-8,-32097e-8,.37586,11852e-8,-.17684,-63783e-8,-83842e-9,38006e-8,36067e-9,-.18524,-43396e-8,.2285,-20391e-8,-.1178],[68456e-8,14306e-9,.097378,.0010926,34138e-9,1519e-7,-37244e-8,-.0099051,.0011492,61342e-9,31987e-8,-21212e-9,-.0703,-15895e-8,.29838,.0011739,10391e-8,40281e-8,-43018e-9,-21411e-8,-29993e-8,-.17438,12637e-8,.18804,.0011534],[.18082,-86642e-8,64785e-8,.26691,-.0015476,-17429e-8,-.16604,.0012662,.11135,-.0017199,-33333e-8,44279e-8,-.0011964,-.15775,.0012444,.41926,-.0013011,-33642e-8,49739e-8,20756e-8,.090038,-.0016788,-.16346,90992e-8,.32714],[55785e-8,.13763,25212e-9,77483e-8,.29689,-48908e-9,-46339e-8,64373e-9,40257e-8,.15847,-85516e-9,-.10331,-63983e-9,-41596e-8,11121e-8,-15603e-8,.47191,-34873e-9,-.12151,12819e-8,15056e-8,-12127e-8,-14047e-8,19466e-8,-68277e-8],[35248e-8,-55084e-8,85755e-8,47792e-8,-97485e-8,.11766,-25549e-8,.0015199,24629e-8,-.0010126,-.057906,45542e-8,-.0016097,-19379e-8,92818e-8,-5331e-8,-58803e-8,.28216,72187e-8,-.034802,54857e-10,-.0020932,-68083e-9,-39288e-8,-26146e-8],[-17352e-8,-.057598,59669e-9,-25811e-8,-.12308,25212e-8,23272e-8,89262e-9,-13422e-8,-.1172,539e-6,-.12464,-89466e-9,30541e-8,12514e-9,81309e-9,-.12677,69735e-8,.22573,-36486e-8,-27295e-8,-7921e-8,15052e-8,-10931e-8,30421e-8],[-25862e-8,51177e-8,-56368e-8,-34792e-8,91816e-8,-.04813,17966e-8,-.0010017,-16985e-8,.001002,.013837,-363e-6,.0010667,12531e-8,-61424e-8,73961e-9,69895e-8,-.039143,-52955e-8,.22623,86785e-10,.0013966,29305e-9,25767e-8,2765e-7],[.063586,-58865e-9,-26679e-8,.14778,-8961e-8,-89961e-9,-.14286,-51388e-8,.12696,-87192e-9,-17072e-8,-59372e-9,4722e-7,-.013822,-4949e-7,.11081,-65395e-9,-17935e-8,-1734e-7,91599e-9,.2548,64238e-8,-.061235,-34786e-8,.063742],[-50262e-9,-25496e-8,-.091137,-19443e-8,-449e-6,-75562e-8,-19651e-8,-.20009,-6526e-7,-49898e-8,-.0015913,97489e-9,-.019618,-39953e-8,-.13108,-.0012977,-40072e-8,-.0020052,76378e-9,.0010588,58271e-8,.34342,-33172e-8,-.11132,-.0018716],[-.083624,-36825e-9,14958e-8,-.2033,-68343e-9,-24842e-9,.17179,29489e-8,-.19401,-78596e-9,-57215e-9,30952e-9,-26135e-8,.036792,31012e-8,-.13849,-61442e-9,-85831e-9,47999e-9,301e-7,-.058195,-36068e-8,.29068,26831e-8,-.10346],[.0012543,-28534e-8,.054862,.0018951,-46579e-8,-61893e-8,-91931e-8,.12817,.0015589,-42752e-8,-.0012952,65325e-9,-.10903,-72899e-8,-.060411,9776e-7,-15552e-8,-.0016209,-21023e-9,83681e-8,38409e-9,-.091029,-10858e-8,.24714,38317e-8],[.032457,-.0015601,76732e-8,.15257,-.0027899,-23378e-8,-.045992,.0014697,.23832,-.0031031,-44103e-8,81544e-8,-.0014756,-.10783,.0012929,.057873,-.0023485,-42459e-8,93693e-8,29218e-8,.047159,-.0020718,-.083996,63964e-8,.37707]],[[.3697,-30446e-8,-4065e-7,.24299,-59382e-8,33247e-8,-.14569,-85327e-8,.22625,-7804e-7,73048e-8,20374e-8,77063e-8,-.17607,-.0010365,.17805,-83589e-8,.001,29869e-8,-47461e-8,.099396,.0011748,-.13548,-.0011391,.11219],[-35032e-8,.25386,3102e-7,-5267e-7,.12027,-30093e-9,32853e-8,57574e-8,-38838e-8,.13811,-74718e-9,-.037067,-59737e-8,3536e-7,43568e-8,-16076e-8,.13004,-10179e-8,-.053062,10783e-8,-19978e-8,-82269e-8,16926e-8,45257e-9,53777e-9],[-44376e-8,3102e-7,.23031,-72294e-8,57574e-8,-72904e-9,34717e-8,.074327,-74323e-8,69448e-8,-17593e-8,-15131e-8,-.053923,32344e-8,.060797,-72093e-8,62878e-8,-28841e-8,-16626e-8,11188e-8,-68783e-9,-.06503,10986e-8,.038773,-67862e-8],[.12654,-42486e-8,-65718e-8,.57902,-84164e-8,42558e-8,-.26151,-.0013736,.41584,-.0011388,93683e-8,27494e-8,.0012288,-.29399,-.0016621,.30941,-.0012766,.0012865,39518e-8,-60965e-8,.15666,.0018564,-.21509,-.0018214,.18901],[-62454e-8,-.055853,51208e-8,-95467e-8,.34562,-63609e-9,57698e-8,95223e-8,-7567e-7,.31076,-15532e-8,-.082956,-98858e-8,618e-6,72521e-8,-41328e-8,.30407,-21636e-8,-.12246,19716e-8,-3358e-7,-.0013653,29093e-8,85656e-9,-79485e-9],[4825e-7,-33332e-9,-79314e-9,69336e-8,-70246e-9,.20569,-38427e-8,-16053e-8,44261e-8,-83185e-9,.078463,10196e-8,16292e-8,-3393e-7,-17043e-8,3877e-8,-55662e-9,.06655,22543e-8,-.027371,10353e-8,24637e-8,-11319e-8,-16473e-8,-38307e-8],[-.15991,27171e-8,29848e-8,-.17891,52488e-8,-21653e-8,.32263,60879e-8,-.19613,67421e-8,-47791e-8,-18349e-8,-57312e-8,.23028,67324e-8,-.17356,68565e-8,-65015e-8,-27301e-8,3345e-7,-.12439,-856e-6,.16139,62866e-8,-.11227],[-92951e-8,51208e-8,-.098996,-.0015071,95223e-8,-14003e-8,70352e-8,.26128,-.0015426,.0011521,-34786e-8,-25274e-8,-.13474,62773e-8,.15825,-.0014912,.0010488,-59734e-8,-28149e-8,20673e-8,-82478e-9,-.17063,19294e-8,.11733,-.0013982],[.24156,-24086e-8,-66378e-8,.2564,-51657e-8,15208e-8,-.18573,-.0013828,.49644,-80043e-8,33875e-8,11908e-8,.0011916,-.27206,-.0016966,.35685,-.0010745,47968e-8,13629e-8,-20874e-8,.15147,.0017655,-.22144,-.0019126,.26152],[-7177e-7,.18121,49785e-8,-.0011317,.090331,-66544e-9,63446e-8,92905e-8,-.0010175,.42494,-16538e-8,-.066305,-95819e-8,66307e-8,72193e-8,-77331e-8,.42033,-24369e-8,-.14902,19542e-8,-31264e-8,-.0013248,29505e-8,12229e-8,-51483e-8],[9415e-7,-84164e-9,-17683e-8,.0013555,-17397e-8,-.13363,-75394e-8,-37048e-8,87065e-8,-21096e-8,.19926,20745e-8,35368e-8,-67092e-8,-44269e-8,86667e-9,-16182e-8,.16687,4482e-7,-.067643,21407e-8,54566e-8,-22532e-8,-50571e-8,-73446e-8],[22322e-8,-.048633,-87731e-9,33044e-8,-.027025,11534e-8,-20901e-8,-16532e-8,2236e-7,-.067894,25544e-8,.19994,19821e-8,-22571e-8,-11109e-8,38687e-9,-.087588,34744e-8,.11058,-18469e-8,13839e-8,29783e-8,-1083e-7,36999e-9,-16359e-8],[83245e-8,-54546e-8,-.088847,.001337,-.0010144,1496e-7,-65871e-8,-.0063706,.0013149,-.0012207,35485e-8,29532e-8,.24337,-61645e-8,-.065953,.0011873,-.0010925,5679e-7,36408e-8,-21708e-8,14896e-8,.20688,-21619e-8,-.076746,.0010215],[-.1933,25762e-8,22894e-8,-.29359,4944e-7,-12542e-8,.016062,44798e-8,-.24811,62358e-8,-27931e-8,-17628e-8,-44527e-8,.33781,42411e-8,-.19464,60442e-8,-37406e-8,-26689e-8,22608e-8,-.1848,-6451e-7,.23197,26496e-8,-.13757],[-.0011136,21496e-8,.10248,-.0017987,40435e-8,-13645e-8,76256e-8,-.015238,-.0018685,50395e-8,-3712e-7,-92689e-9,-.058153,58826e-8,.24457,-.0018623,48933e-8,-72148e-8,-84416e-9,17988e-8,11055e-8,-.15928,10655e-8,.17395,-.0018068],[.18695,-28704e-9,-62528e-8,.2843,-1325e-7,-19342e-8,-.17883,-.0013007,.12466,-38164e-8,-41889e-8,-82037e-9,.0010589,-.17164,-.0016392,.3805,-78713e-8,-54502e-8,-21604e-8,3054e-7,.1009,.0015273,-.17467,-.0019363,.32325],[-66997e-8,.12767,28303e-8,-.0011063,.3033,-2635e-8,52504e-8,53342e-8,-.0011781,.16978,-78278e-9,-.10659,-53076e-8,49742e-8,4449e-7,-.0011934,.42495,-14896e-8,-.12431,86754e-9,-11366e-8,-72911e-8,17698e-8,15633e-8,-.0011587],[.0010358,-97778e-9,-27085e-8,.0014964,-2058e-7,.12771,-82475e-8,-59464e-8,97995e-8,-26377e-8,-.057901,22639e-8,51877e-8,-72925e-8,-81466e-8,14e-5,-23822e-8,.21853,48546e-8,-.025236,22561e-8,82354e-8,-23458e-8,-.0010738,-74341e-8],[29165e-8,-.053233,-17349e-9,42366e-8,-.12458,22962e-8,-27711e-8,-36742e-9,25499e-8,-.12114,50413e-8,-.12471,97552e-9,-30307e-8,6216e-9,-397e-7,-.12984,6854e-7,.17263,-33533e-8,2025e-7,18781e-8,-14821e-8,11522e-8,-37873e-8],[-59701e-8,15949e-8,12838e-8,-86077e-8,30614e-8,-.051393,51186e-8,25347e-8,-53689e-8,36596e-8,.01486,-18584e-8,-24731e-8,49493e-8,25594e-8,-81601e-10,3032e-7,-.029642,-34748e-8,.18071,-22618e-8,-35744e-8,19816e-8,21694e-8,54758e-8],[.065877,-12584e-8,-40058e-10,.15509,-23451e-8,-28281e-9,-.15801,30981e-9,.1386,-26931e-8,-56633e-9,10533e-8,27187e-9,-.0287,1875e-7,.12577,-19496e-8,-86406e-9,18128e-8,-20545e-9,.21177,42194e-10,-.062911,45903e-8,.080377],[.0012247,-63944e-8,-.080771,.0019515,-.0011922,21149e-8,-94651e-8,-.20002,.0018873,-.0014352,50942e-8,37108e-8,-.020502,-85716e-8,-.13306,.0016603,-.0012794,8382e-7,48757e-8,-29208e-8,16085e-8,.28359,-28202e-8,-.10975,.0013765],[-.086589,69317e-9,-4755e-8,-.21319,11977e-8,95566e-10,.1902,-11179e-8,-.21175,11692e-8,22413e-9,-49254e-9,73957e-9,.057113,-18954e-8,-.15899,45834e-9,43471e-9,-76457e-9,89291e-10,-.059278,11824e-8,.25426,-30213e-8,-.12042],[-.0011904,-31552e-8,.047495,-.0019194,-57784e-8,-15623e-8,69871e-8,.1307,-.0020526,-66467e-8,-44682e-8,20376e-8,-.11135,39305e-8,-.059026,-.0021515,-52885e-8,-92251e-8,29328e-8,17116e-8,42264e-8,-.086715,-65963e-9,.18866,-.0021962],[.03526,62267e-9,-57369e-8,.16194,43163e-9,-44176e-8,-.052454,-.0011912,.26243,-17322e-8,-96537e-8,-21713e-8,91984e-8,-.12386,-.0015342,.076072,-61591e-8,-.0012872,-48821e-8,67944e-8,.059606,.0012904,-.095965,-.0018767,.32546]],[[.33938,13333e-8,-27637e-8,.24211,27273e-8,-51689e-8,-.1462,-52298e-8,.2318,38753e-8,-.0012045,-871e-7,54413e-8,-.18091,-42838e-8,.19241,46006e-8,-.0018644,-13072e-8,68563e-8,.10499,77272e-8,-.14509,-13652e-8,.13474],[15382e-8,.21796,-48112e-8,24382e-8,.10768,-26877e-8,-14304e-8,-94626e-8,21766e-8,.12788,-5806e-7,-.034082,88342e-8,-15992e-8,-95152e-8,15509e-8,.124,-76218e-8,-.049857,39486e-8,90239e-9,.0012554,-85679e-9,-71192e-8,75991e-9],[-34153e-8,-48112e-8,.1982,-4981e-7,-94626e-8,33417e-9,28501e-8,.068396,-33669e-8,-.0012887,86208e-9,18188e-8,-.050765,27071e-8,.059043,-77048e-9,-.0014584,15724e-8,13649e-8,-43358e-9,-94499e-9,-.061338,12389e-8,.040115,1849e-7],[.12487,20462e-8,-34994e-8,.54835,41838e-8,-73107e-8,-.2635,-66975e-8,.42539,59568e-8,-.0017087,-12712e-8,69183e-8,-.3065,-57578e-8,.33603,71043e-8,-.0026584,-18384e-8,97061e-8,.16787,9947e-7,-.23347,-24999e-8,.22589],[30504e-8,-.065722,-8759e-7,48332e-8,.29053,-40635e-8,-27625e-8,-.0017279,43498e-8,.28367,-87603e-8,-.075317,.0016094,-30128e-8,-.0017555,31742e-8,.29583,-.0011415,-.11762,60551e-8,15676e-8,.0022946,-15672e-8,-.0013486,1674e-7],[-74739e-8,-34447e-8,35437e-9,-.0011371,-62934e-8,.17159,53669e-8,78023e-9,-96178e-8,-73026e-8,.068783,18185e-8,-63909e-9,4302e-7,11022e-8,-62653e-8,-6022e-7,.061316,21896e-8,-.024637,11288e-9,-10139e-8,13111e-8,14754e-8,-22012e-8],[-.16253,-11838e-8,1884e-7,-.18373,-23735e-8,27898e-8,.29214,36102e-8,-.20202,-323e-6,65273e-8,87009e-9,-37469e-8,.23063,30903e-8,-.18706,-35632e-8,.0010127,13901e-8,-38227e-8,-.13163,-54106e-8,.17343,12538e-8,-.13421],[-5519e-7,-8759e-7,-.10261,-8133e-7,-.0017279,74819e-9,46529e-8,.21712,-57479e-8,-.0023654,19078e-8,33243e-8,-.12286,45054e-8,.14679,-18678e-8,-.0026981,3416e-7,25214e-8,-98342e-9,-1654e-7,-.16528,2139e-7,.12026,20233e-8],[.25108,16471e-8,-12109e-8,.27143,33878e-8,-51542e-8,-.19196,-25426e-8,.47751,49367e-8,-.0012177,-76954e-9,24412e-8,-.28338,-30216e-8,.37092,61352e-8,-.0019322,-84209e-9,67926e-8,.16422,38435e-8,-.24084,-3295e-7,.29162],[40992e-8,.1791,-.0010705,65031e-8,.082773,-31298e-8,-3509e-7,-.0021227,5994e-7,.36873,-66838e-8,-.05962,.0019652,-36224e-8,-.0021968,46604e-8,.39387,-84539e-8,-.13904,48462e-8,15136e-8,.0028141,-17577e-8,-.0017682,29101e-8],[-.0016052,-61728e-8,95579e-9,-.0024497,-.0011257,-.13547,.0011546,20749e-8,-.0020936,-.0012975,.14856,33912e-8,-17422e-8,93045e-8,28161e-8,-.0014012,-.0010495,.13788,42547e-8,-.05519,19491e-9,-27308e-8,28765e-8,35897e-8,-55487e-8],[-99164e-9,-.047706,60748e-9,-15085e-8,-.024335,69083e-9,10335e-8,12247e-8,-10849e-8,-.061059,15574e-8,.16463,-12586e-8,12331e-8,12268e-8,-28924e-9,-.082717,21893e-8,.10015,-11194e-8,-8697e-8,-19384e-8,69805e-9,84571e-9,63608e-9],[61047e-8,78452e-8,-.089851,89543e-8,.0015454,-58137e-9,-5143e-7,-.005483,61809e-8,.0021067,-15007e-8,-31088e-8,.20145,-4961e-7,-.058199,1652e-7,.0023843,-27251e-8,-25912e-8,78598e-9,18378e-8,.18696,-2322e-7,-.073902,-29881e-8],[-.19593,-11584e-8,12614e-8,-.30567,-22732e-8,99577e-9,.027499,2488e-7,-.26654,-29537e-8,23728e-8,91578e-9,-25518e-8,.30929,2352e-7,-.21581,-29879e-8,37229e-8,15077e-8,-15594e-8,-.18062,-38118e-8,.23232,14091e-8,-.16201],[-20294e-8,-72266e-8,.10655,-32853e-8,-.0014413,10961e-8,18175e-8,-.01145,-32346e-8,-.002013,27208e-8,2669e-7,-.051436,19917e-8,.20487,-30157e-8,-.0023681,46751e-8,1902e-7,-1448e-7,-88264e-9,-.14692,11663e-8,.16128,-29419e-8],[.19817,91305e-9,13336e-8,.31025,19183e-8,-20506e-8,-.19601,20786e-8,.15428,30098e-8,-50635e-8,27028e-10,-2617e-7,-.1927,-33449e-10,.36026,41974e-8,-86838e-8,66831e-9,25657e-8,.11411,-31197e-8,-.1888,-43534e-8,.31928],[44894e-8,.11462,-.001051,71425e-8,.30023,-34528e-9,-3486e-7,-.0021005,68528e-8,.18342,-57004e-9,-.10716,.0019221,-32249e-8,-.0022397,58605e-8,.39167,-81808e-10,-.12622,91263e-9,63144e-9,.0027677,-13227e-8,-.0019345,44583e-8],[-.0022133,-5432e-7,18372e-8,-.003395,-9823e-7,.13079,.0015892,39141e-8,-.0029564,-.0011025,-.055007,33035e-8,-33673e-8,.0012824,50444e-8,-.0020753,-82452e-8,.16353,45353e-8,-.015618,37776e-9,-51807e-8,39802e-8,60128e-8,-98184e-8],[-12904e-8,-.047295,-15155e-8,-18928e-8,-.12151,11037e-9,14423e-8,-29272e-8,-10758e-8,-.12225,3917e-8,-.11865,24504e-8,17751e-8,-3012e-7,35895e-9,-.13131,8655e-8,.12962,-38289e-9,-13811e-8,31558e-8,10259e-8,-25319e-8,19752e-8],[81682e-8,41613e-8,-43288e-9,.0012462,76637e-8,-.051606,-60466e-8,-95489e-9,.0010539,90114e-8,.015796,-23273e-8,81973e-9,-50966e-8,-13213e-8,68094e-8,7628e-7,-.019079,-29851e-8,.14176,41469e-9,13253e-8,-17558e-8,-1706e-7,22654e-8],[.068688,6431e-8,24013e-9,.16087,11801e-8,20148e-8,-.16877,35621e-9,.14904,12873e-8,46473e-8,-65248e-9,-36497e-9,-.047843,23943e-10,.13991,79721e-9,7197e-7,-11766e-8,-2331e-7,.17976,-30341e-9,-.069454,-50757e-9,.097775],[71936e-8,9656e-7,-.069785,.001069,.0019093,-91666e-9,-61423e-8,-.19608,77783e-8,.0026165,-23325e-8,-39541e-8,-.014194,-60713e-8,-.1378,29088e-8,.0029827,-41365e-8,-35173e-8,1267e-7,24023e-8,.23924,-29585e-8,-.11498,-21214e-8],[-.091135,-16788e-9,5147e-8,-.2222,-28598e-9,-84955e-9,.2047,10151e-8,-.22818,-24611e-9,-1984e-7,19606e-9,-99587e-9,.083339,98436e-9,-.18086,2.5708e-7,-31285e-8,36666e-9,10063e-8,-.065865,-14565e-8,.23194,61992e-9,-.14079],[33703e-8,-31046e-8,.042786,42621e-8,-6492e-7,14648e-8,-27355e-8,.13605,74611e-9,-98486e-8,35348e-8,91197e-9,-.11806,-2263e-7,-.043261,-46585e-8,-.0013,5814e-7,23848e-9,-19158e-8,75866e-9,-.094091,-67492e-9,.15119,-.0010431],[.049763,15764e-9,25546e-8,.18481,3964e-8,88669e-9,-.067998,42573e-8,.29301,96758e-9,1717e-7,74907e-9,-5189e-7,-.14755,11117e-8,.10827,20384e-8,15821e-8,19734e-8,-14462e-8,.075987,-67251e-8,-.11483,-56106e-8,.29147]],[[.31363,-41101e-8,53517e-9,.24148,-81202e-8,23273e-8,-.147,36807e-9,.23417,-.0010772,58812e-8,29418e-8,-46975e-9,-.18483,-17434e-8,.19896,-.0011403,.0010566,45549e-8,-25734e-8,.10964,67167e-9,-.15213,-53544e-8,.14545],[-51527e-8,.19046,20222e-8,-78816e-8,.10169,24513e-8,50206e-8,43499e-8,-60158e-8,.12481,52734e-8,-.033124,-32469e-8,56687e-8,60977e-8,-24747e-8,.12357,71933e-8,-.049267,-26743e-8,-32219e-8,-47777e-8,3205e-7,8151e-7,16694e-8],[12129e-8,20222e-8,.17107,11911e-8,43499e-8,-85475e-9,-31851e-9,.062795,-7016e-8,69824e-8,-21551e-8,-19332e-9,-.048365,75361e-9,.056424,-33496e-8,98882e-8,-35721e-8,77751e-9,16866e-8,-16816e-8,-.058979,12642e-8,.038952,-60143e-8],[.12617,-57528e-8,-49614e-9,.52022,-.0011369,39165e-8,-.26331,-19226e-8,.42636,-.0015154,97857e-8,38822e-8,16688e-8,-.31495,-48291e-8,.3489,-.001623,.0017216,5782e-7,-45565e-8,.17701,42577e-8,-.24717,-91837e-8,.24574],[-93034e-8,-.064638,4467e-7,-.0014232,.2536,34399e-8,87887e-8,94768e-8,-.0011031,.26675,73335e-8,-.070658,-74521e-8,96546e-8,.0012639,-49521e-8,.29184,99138e-8,-.11537,-34817e-8,-50443e-8,-.0010977,52891e-8,.0015908,21612e-8],[28975e-8,33393e-8,-96852e-9,48711e-8,60873e-8,.14458,-13859e-8,-20809e-8,59526e-8,73448e-8,.06217,-48062e-9,2406e-7,-4176e-8,-22413e-8,72625e-8,68815e-8,.060039,1153e-7,-.0241,-19933e-8,41336e-8,29679e-9,-17256e-8,82785e-8],[-.16417,37565e-8,95406e-9,-.18898,72766e-8,-74836e-9,.26692,22552e-8,-.20549,93949e-8,-20414e-8,-23063e-8,-23971e-8,.22812,31544e-8,-.1937,95554e-8,-4162e-7,-31512e-8,52811e-9,-.1363,-4426e-7,.18098,38961e-8,-.14614],[17306e-9,4467e-7,-.10092,-89715e-9,94768e-8,-18624e-8,93328e-9,.1807,-37553e-8,.0014834,-46275e-8,-7699e-8,-.1111,2634e-7,.1325,-75346e-8,.0020386,-75819e-8,89057e-9,34369e-8,-31126e-8,-.15799,27604e-8,.11556,-.0011219],[.25367,-29197e-8,-31992e-8,.2797,-58706e-8,48483e-8,-.19405,-69142e-8,.45488,-82095e-8,.001177,14757e-8,62707e-8,-.28743,-89643e-8,.37172,-96186e-8,.0019564,17162e-8,-63432e-8,.17251,.0010063,-.2527,-.0010748,.30696],[-.0010337,.17852,73966e-8,-.0015876,.08755,247e-6,92589e-8,.001541,-.0012804,.33134,51567e-8,-.056696,-.0012947,9693e-7,.0019145,-68737e-8,.37037,6814e-7,-.13175,-20737e-8,-4202e-7,-.0019102,50205e-8,.0021826,10906e-9],[77306e-8,55917e-8,-25475e-8,.0012775,.0010114,-.12865,-42263e-8,-53764e-8,.0014708,.0012114,.11512,-37407e-9,5976e-7,-21176e-8,-5721e-7,.0016764,.0011281,.11844,30404e-8,-.047719,-38947e-8,99724e-8,374e-8,-43967e-8,.0018042],[35095e-8,-.047367,46489e-9,51691e-8,-.025226,12056e-8,-29071e-8,80985e-9,36127e-8,-.058053,28332e-8,.13652,-11437e-8,-26834e-8,20468e-9,95741e-9,-.079582,41831e-8,.08966,-22776e-8,71205e-9,-17042e-8,-10649e-8,-1175e-7,-1975e-7],[-20886e-9,-27094e-8,-.089692,76135e-9,-59833e-8,22642e-8,-12201e-8,-.0084482,31949e-8,-.0010051,55144e-8,-13828e-9,.16915,-32414e-8,-.052153,62607e-8,-.0014978,8743e-7,-20102e-8,-41577e-8,40043e-8,.16776,-32617e-8,-.067064,91082e-8],[-.19592,33672e-8,24777e-8,-.31235,63843e-8,36841e-9,.041285,50228e-8,-.27931,80155e-8,67902e-9,-1613e-7,-53484e-8,.28773,4977e-7,-.23054,7834e-7,38558e-9,-16209e-8,-92233e-9,-.17457,-84217e-8,.22892,3281e-7,-.17829],[-53338e-8,68132e-8,.10645,-89894e-8,.0013983,-18669e-8,44845e-8,-.007567,-9981e-7,.0020511,-45789e-8,-24116e-8,-.044536,48119e-8,.16977,-.0010721,.0025859,-75462e-8,-16352e-8,29275e-8,-16821e-8,-.13042,28627e-8,.14167,-.001116],[.19758,11229e-8,-56847e-8,.31717,1954e-7,55568e-8,-.20212,-.0011413,.17323,17001e-8,.0013154,-16545e-8,.0010217,-.204,-.0012566,.34107,-62759e-10,.0020696,-33049e-8,-79975e-8,.12255,.0014647,-.1964,-.001194,.31157],[-79257e-8,.10212,.0010424,-.0012342,.29167,36944e-9,63214e-8,.0021379,-.0010948,.19632,5963e-8,-.10615,-.0019008,58818e-8,.0024813,-79718e-8,.36644,50026e-9,-.1277,31289e-9,-10946e-8,-.0028105,26101e-8,.0025254,-43315e-8],[.0014898,46433e-8,-41705e-8,.0024096,82563e-8,.13259,-94155e-8,-86901e-8,.002555,9719e-7,-.041282,44921e-9,91805e-8,-65006e-8,-9323e-7,.0026071,88969e-8,.13126,44808e-8,-.013553,-40724e-8,.001486,-17593e-8,-75507e-8,.0025091],[41859e-8,-.042133,23062e-8,59588e-8,-.11749,40682e-8,-29089e-8,45331e-8,38224e-8,-.12324,92864e-8,-.10748,-46171e-8,-19069e-8,42452e-8,44434e-9,-.1327,.001338,.099632,-65792e-8,-81039e-9,-68567e-8,-23324e-10,23859e-8,-30934e-8],[-20477e-8,-18918e-8,23108e-8,-36868e-8,-32215e-8,-.052357,40246e-9,47061e-8,-55055e-8,-36239e-8,.010402,-91112e-9,-52555e-8,-81005e-9,45227e-8,-80463e-8,-31958e-8,-.017613,-37083e-8,.11385,29881e-8,-8453e-7,-10644e-8,25635e-8,-.0010424],[.070773,-13904e-8,-32558e-8,.16356,-23926e-8,-2213e-7,-.17425,-61284e-8,.1558,-25608e-8,-52461e-8,-9.537e-7,66974e-8,-.06671,-45871e-8,.14993,-18182e-8,-82728e-8,-1138e-7,31716e-8,.15713,96922e-8,-.077784,8.8884e-7,.11179],[33757e-8,-38402e-8,-.059394,64421e-8,-84014e-8,3727e-7,-45108e-8,-.18799,82986e-8,-.0013897,89475e-8,-4.7474e-7,-.0041612,-69089e-8,-.1388,99795e-8,-.0020381,.0013971,-23956e-8,-64896e-8,59044e-8,.20779,-54188e-8,-.11449,.0011069],[-.094363,28314e-9,99717e-9,-.22618,4212e-8,99806e-9,.21228,19137e-8,-.23799,32568e-9,23459e-8,21108e-9,-21177e-8,.10733,15223e-8,-.19737,20976e-10,36229e-8,80665e-9,-14877e-8,-.073989,-31651e-8,.21727,21217e-9,-.15805],[-.0011939,91547e-8,.0339,-.001848,.0018285,-10146e-8,81456e-8,.12917,-.0016949,.0025287,-24643e-8,-46318e-8,-.11427,6066e-7,-.033049,-.0013819,.0029092,-4337e-7,-55738e-8,73783e-9,17608e-8,-.090871,17404e-8,.12049,-.0010266],[.0528,42988e-8,-66133e-8,.18711,80881e-8,51955e-8,-.072458,-.0012989,.30275,95112e-8,.0012079,-38218e-8,.0011314,-.15757,-.0013723,.13589,76198e-8,.0018195,-64908e-8,-80352e-8,.086229,.0015389,-.12785,-.0012231,.27476]],[[.29045,-19386e-8,33846e-8,.24015,-30362e-8,79368e-9,-.1471,72776e-8,.23683,-21266e-8,11931e-8,10437e-8,-6044e-7,-.18797,97645e-8,.20739,12741e-8,-3.0863e-7,11287e-8,-99209e-9,.11372,-93099e-8,-.15887,.0012408,.15985],[-33292e-8,.16481,12625e-8,-4302e-7,.091774,-1032e-7,27397e-8,19551e-8,-10452e-8,.11645,-22452e-8,-.030856,-23047e-8,22894e-8,-4.156e-7,40487e-8,.11854,-28269e-8,-.047069,18907e-8,-81065e-9,-25071e-8,51118e-9,-40697e-8,95421e-8],[38016e-8,12625e-8,.14747,63746e-8,19551e-8,-11345e-8,-2503e-7,.056524,73849e-8,13353e-8,-21944e-8,-46073e-9,-.044907,-19615e-8,.053296,84981e-8,-92775e-9,-20869e-8,-15926e-9,16279e-8,-87622e-9,-.05557,-90548e-9,.038687,94219e-8],[.12996,-1008e-7,57366e-8,.49704,-89492e-9,-4.3725e-7,-.26233,.0012225,.42788,15476e-8,-98236e-9,63941e-9,-.0010361,-.32219,.0015939,.36383,67869e-8,-42181e-8,64931e-9,20211e-9,.18558,-.0015887,-.26073,.001951,.27055],[-3125e-7,-.06335,8656e-8,-33772e-8,.21756,-14365e-8,26579e-8,69326e-9,16977e-8,.24287,-30651e-8,-.064279,-14379e-8,20183e-8,-29677e-8,9364e-7,.27887,-3605e-7,-.10989,28118e-8,-10104e-8,-47922e-9,-69226e-10,-97369e-8,.001743],[28667e-8,-14912e-8,-18702e-8,37142e-8,-27616e-8,.12097,-20976e-8,-31949e-8,10624e-8,-3139e-7,.052814,13161e-8,36107e-8,-14092e-8,-12854e-8,-31256e-8,-22636e-8,.05411,23135e-8,-.021404,-69653e-10,458e-6,83242e-10,29954e-8,-77938e-8],[-.16479,54774e-9,-17635e-8,-.19487,62772e-9,22013e-9,.24652,-38361e-8,-.21044,-30252e-9,92824e-9,-36722e-9,29275e-8,.22523,-54734e-8,-.20198,-24616e-8,25528e-8,-44489e-9,-46544e-9,-.13974,4417e-7,.18724,-75543e-8,-.16031],[84634e-8,8656e-8,-.096328,.0014031,69326e-9,-96532e-9,-57623e-8,.15046,.001569,-15503e-8,-14429e-8,-14165e-9,-.09869,-47007e-8,.11873,.0017271,-63031e-8,76602e-10,52303e-9,13956e-8,-13941e-8,-.14787,-22188e-8,.11125,.0018375],[.25746,39376e-8,68788e-8,.29354,84694e-8,-29521e-8,-.19924,.0014372,.44269,.0013247,-7664e-7,-18164e-8,-.0012845,-.29378,.001743,.3764,.0018012,-.0013953,-21411e-8,42942e-8,.18087,-.0019587,-.26486,.0019128,.32349],[24354e-8,.17281,-20233e-8,53579e-8,.089972,-60847e-9,-17272e-8,-53103e-8,97191e-8,.2982,-1086e-7,-.053558,41438e-8,-21374e-8,-99896e-8,.0015633,.34482,-40383e-9,-.12373,17149e-8,-20413e-9,81243e-8,-22345e-8,-.0016922,.002134],[33741e-8,-25173e-8,-23102e-8,36699e-8,-45932e-8,-.12087,-2287e-7,-35189e-8,-14622e-8,-49631e-8,.085425,24982e-8,44699e-8,-92711e-9,43156e-9,-92808e-8,-29431e-8,.094375,46004e-8,-.037718,-62161e-9,50714e-8,12375e-8,84243e-8,-.001782],[-44085e-9,-.045788,69947e-9,-80966e-9,-.02565,76953e-9,28161e-9,15138e-8,-114e-6,-.054933,17899e-8,.1136,-14572e-8,2408e-8,19016e-8,-15699e-8,-.075974,25944e-8,.078971,-14462e-8,13622e-9,-24071e-8,16391e-9,21318e-8,-19717e-8],[-60683e-8,-13574e-8,-.087044,-.0010229,-17505e-8,15339e-8,37017e-8,-.011445,-.0012176,-11982e-9,28185e-8,31503e-9,.14218,25236e-8,-.047953,-.0014527,39824e-8,21762e-8,-3954e-8,-21997e-8,22431e-8,.14755,91709e-9,-.062981,-.0016681],[-.19604,-88342e-9,-69582e-9,-.31846,-19448e-8,136e-6,.057827,-15664e-8,-.29254,-31688e-8,34247e-8,31302e-9,83448e-9,.27546,-2666e-7,-.24727,-4532e-7,59049e-8,24414e-9,-21155e-8,-.17065,10994e-8,.22808,-44386e-8,-.19708],[.0012459,-37507e-8,.10482,.002017,-83384e-8,26734e-8,-92596e-8,-39943e-8,.0020711,-.0013628,6843e-7,19743e-8,-.041372,-83657e-8,.14487,.0020101,-.0019481,.0012222,27478e-8,-37889e-8,2116e-8,-.11804,-42826e-8,.12604,.0018552],[.20181,91367e-8,77771e-8,.33038,.00182,-6184e-7,-.21156,.0015965,.20056,.0025104,-.0014899,-44294e-8,-.001503,-.22048,.0017973,.33501,.0028789,-.0024249,-51249e-8,87227e-8,.1332,-.0022881,-.20773,.0017181,.30767],[.0011846,.090921,-68709e-8,.0019608,.27976,13415e-8,-92284e-8,-.0014981,.0021129,.20873,34383e-8,-.10405,.0013388,-90885e-8,-.0019949,.0021747,.35291,63742e-8,-.12963,-1305e-7,13964e-8,.0021713,-54773e-8,-.0024732,.0021122],[-21634e-8,-14533e-8,92864e-9,-54784e-8,-23808e-8,.12853,22216e-8,31995e-8,-.0011178,-15997e-8,-.031125,23098e-8,-17508e-8,37336e-8,82619e-8,-.0019099,15368e-8,.10421,48221e-8,-.01043,-18391e-8,-44737e-8,41755e-8,.0016355,-.0027269],[-26734e-8,-.037612,23219e-8,-39272e-8,-.11244,1239e-7,20125e-8,45644e-8,-28285e-8,-.12357,29748e-8,-.094137,-46538e-8,16555e-8,4268e-7,-94726e-9,-.1347,45836e-8,.079807,-23167e-8,-89577e-10,-69224e-8,54434e-9,23575e-8,11938e-8],[-18904e-8,23937e-8,16051e-8,-20847e-8,454e-6,-.050161,11755e-8,25999e-8,64079e-9,54247e-8,.0080357,-21963e-8,-30953e-8,30322e-9,43752e-9,47663e-8,44747e-8,-.013477,-39561e-8,.090187,67312e-9,-37214e-8,-86365e-9,-41222e-8,92463e-8],[.074596,18043e-8,-18927e-8,.16779,32798e-8,-18207e-8,-.17772,-39237e-8,.1633,37715e-8,-40984e-8,-78995e-9,39768e-8,-.086576,-42944e-8,.1596,30001e-8,-57962e-8,-70109e-9,27513e-8,.1438,63364e-8,-.089728,-37077e-8,.12485],[-9118e-7,58168e-9,-.049475,-.0015219,23785e-8,38495e-9,56294e-8,-.17617,-.0017657,61966e-8,-37834e-10,-78528e-9,.0050053,38663e-8,-.13813,-.0020483,.001232,-2705e-7,-19727e-8,-56402e-9,31636e-8,.18438,13442e-8,-.11671,-.0023007],[-.099706,-35423e-9,64061e-9,-.23182,-65586e-9,85321e-9,.21754,12907e-8,-.24796,-79844e-9,19928e-8,11406e-9,-1432e-7,.13193,12082e-8,-.21392,-74321e-9,30357e-8,34169e-10,-12832e-8,-.085603,-22861e-8,.21236,60459e-9,-.17638],[.0016477,-.0010298,.028378,.0026151,-.0020929,75964e-8,-.0013266,.12467,.0024708,-.0029939,.0017874,48445e-8,-.11351,-.0013014,-.017793,.002053,-.0036317,.0027874,55021e-8,-.00108,32505e-8,-.09551,-71119e-8,.1028,.0014826],[.064155,.0011563,76615e-8,.1999,.0022549,-80822e-8,-.083472,.0015552,.31614,.0029892,-.0019024,-56956e-8,-.0015247,-.1724,.001654,.16657,.0032106,-.0029779,-65872e-8,.0011248,.098179,-.0023275,-.14457,.0013883,.26835]],[[.27052,-.001436,24056e-9,.23917,-.0028499,-54443e-8,-.14703,24454e-9,.23882,-.0038187,-.0012727,.0010131,23912e-9,-.18998,-64801e-10,.2139,-.0040951,-.0019369,.0016263,83273e-8,.11631,12545e-8,-.16369,-33997e-9,.17142],[-.0019515,.14345,-57781e-8,-.0029966,.08358,32768e-9,.0018556,-.0011404,-.0023531,.10912,50985e-9,-.028823,.0011654,.002111,-.0010782,-.0010762,.11366,29823e-9,-.044832,1348e-8,-.001189,.0017445,.0013382,-62124e-8,52216e-8],[59075e-9,-57781e-8,.12778,65753e-9,-.0011404,-37678e-8,33153e-9,.051499,24357e-9,-.001528,-87548e-8,34631e-8,-.04238,14416e-8,.050743,-15329e-9,-.0016521,-.0013164,49174e-8,58088e-8,-22242e-8,-.05365,18269e-8,.038504,-31696e-9],[.13538,-.0019229,-25937e-9,.47744,-.0038238,-71777e-8,-.26029,-81103e-9,.42736,-.0051387,-.0016807,.0013721,1523e-7,-.32632,-11057e-8,.37476,-.0055362,-.0025657,.002221,.0010994,.19131,34934e-8,-.27065,-9022e-8,.2911],[-.0033615,-.058997,-98035e-8,-.0051712,.18887,-13633e-9,.0032167,-.001938,-.0040798,.2212,-75105e-9,-.058421,.0019794,.0036859,-.0018423,-.0018997,.26369,-19354e-8,-.10344,13176e-8,-.0021087,.002969,.0023602,-.0010834,83761e-8],[-.0010239,69745e-9,-52082e-8,-.001564,10797e-8,.10192,89749e-8,-.0010213,-.0012455,95463e-9,.045322,52197e-9,.0010554,93737e-8,-93762e-8,-6246e-7,35843e-9,.049444,19563e-8,-.019513,-3998e-7,.0015741,53343e-8,-47946e-8,1459e-7],[-.16435,.0011544,11504e-8,-.20005,.0023018,36143e-8,.22944,24497e-8,-.21454,.0030995,84711e-8,-85703e-8,-29204e-8,.22094,25204e-8,-.20833,.0033415,.0012922,-.0014224,-56141e-8,-.14058,-50995e-8,.19027,16216e-8,-.17177],[-22873e-10,-98035e-8,-.088896,-44527e-9,-.001938,-6253e-7,15278e-8,.1276,-7753e-8,-.0026037,-.0014564,59025e-8,-.08882,35321e-8,.10732,-72894e-9,-.0028283,-.0021986,84205e-8,96736e-8,-43656e-8,-.13928,37951e-8,.1065,-10997e-9],[.25877,-82526e-8,-10511e-8,.3055,-.0016586,-31702e-8,-.20332,-21784e-8,.43316,-.0022689,-75011e-8,60929e-8,2634e-7,-.29756,-20478e-8,.37971,-.0025178,-.0011681,.0010126,48456e-8,.18624,45028e-8,-.27311,-90541e-9,.33708],[-.0034965,.16496,-.0010127,-.0053979,.092325,-13122e-8,.0033758,-.0020087,-.0043032,.27064,-3505e-7,-.050731,.002046,.0039092,-.0019343,-.0020877,.31891,-6118e-7,-.11535,31747e-8,-.0022814,.0030793,.002543,-.0011934,70796e-8],[-.0020495,2748e-8,-.0010182,-.0031352,-51434e-10,-.1104,.001801,-.0020009,-.0025091,-10387e-8,.06507,17701e-8,.0020684,.0018882,-.0018489,-.0012817,-24281e-8,.076343,50134e-8,-.030616,-81303e-8,.0030947,.0010818,-97213e-8,2445e-7],[95378e-8,-.043572,17236e-8,.0014806,-.025887,14049e-8,-96524e-8,34307e-8,.0011795,-.051932,33754e-8,.094967,-35902e-8,-.0011673,32613e-8,55501e-8,-.071864,52507e-8,.068541,-25241e-8,75578e-8,-54992e-8,-79332e-8,1867e-7,-24692e-8],[96068e-9,.0010234,-.083964,19316e-8,.0020222,67088e-8,-2506e-7,-.016473,20405e-8,.0027121,.0015621,-62473e-8,.12265,-47578e-8,-.046765,14802e-8,.0029348,.0023558,-90097e-8,-.0010398,52118e-8,.13215,-46521e-8,-.060467,17351e-9],[-.19455,99376e-8,25611e-8,-.32071,.001995,22368e-8,.073016,52072e-8,-.30174,.0027074,52759e-8,-78674e-8,-57122e-8,.26649,50716e-8,-.26093,.0029457,81e-5,-.0013573,-35824e-8,-.16625,-91999e-8,.22638,30052e-8,-.21366],[-2028e-7,-5021e-7,.10161,-32663e-8,-.0010023,-2716e-7,26754e-8,.0075454,-26122e-8,-.0013715,-64341e-8,30177e-8,-.040308,39223e-8,.127,-10422e-8,-.0015379,-.0010007,43253e-8,42735e-8,-33573e-8,-.10862,33126e-8,.11364,11826e-8],[.20358,68167e-8,-11362e-8,.33856,.0013218,20958e-8,-.21747,-2086e-7,.22523,.0016934,47477e-8,-46823e-8,21089e-8,-.23384,-15306e-8,.33487,.0016653,67555e-8,-72812e-8,-32795e-8,.14197,28044e-8,-.21749,3.8801e-7,.30878],[-.0023134,.079781,-68389e-8,-.0036041,.26221,-24794e-8,.0022661,-.0013689,-.0029609,.21287,-6069e-7,-.099662,.0013793,.0026748,-.0013673,-.0016085,.33829,-97056e-8,-.12854,45669e-8,-.0016048,.0020917,.001796,-95473e-8,11929e-8],[-.0023854,-18445e-8,-.0011255,-.0036604,-43244e-8,.12241,.0021001,-.0022221,-.0029637,-68904e-8,-.020342,34067e-8,.0022961,.0022114,-.0020862,-.001582,-88912e-8,.086794,78118e-8,-.0097905,-9577e-7,.0034577,.001279,-.0011712,14324e-8],[.0010514,-.032932,51891e-9,.0016518,-.1049,33754e-8,-.0011337,10854e-8,.0013379,-.12017,79532e-8,-.081346,-1296e-7,-.0014491,1059e-7,65171e-8,-.13315,.001209,.065427,-56652e-8,.0010425,-2212e-7,-.0010417,56938e-9,-25425e-8],[.0012794,99963e-9,65467e-8,.001958,23615e-8,-.047728,-.0011378,.0012879,.0015614,37589e-8,.0042213,-20188e-8,-.0013344,-.0012082,.0011919,7824e-7,48081e-8,-.012883,-46896e-8,.072991,54548e-8,-.0020019,-70392e-8,6276e-7,-18862e-8],[.07712,-34151e-8,-32763e-8,.16921,-70456e-8,69349e-9,-.17684,-65083e-8,.16769,-98104e-8,15721e-8,35371e-8,68507e-8,-.10197,-61266e-8,.16632,-.0010921,23327e-8,69117e-8,-86107e-9,.13433,.0010508,-.10026,-33766e-8,.13581],[39676e-8,.0012374,-.042038,66488e-8,.0024503,79998e-8,-57081e-8,-.16485,5864e-7,.0032968,.0018695,-76649e-8,.015281,-88201e-8,-.13727,33578e-8,.0035845,.0028364,-.0011196,-.0012475,80497e-8,.17063,-76093e-8,-.11918,-5248e-8],[-.10433,34436e-8,15666e-8,-.23516,69767e-8,28921e-9,.21847,31705e-8,-.25435,9588e-7,69421e-9,-28729e-8,-33433e-8,.15174,31545e-8,-.2267,.0010619,10757e-8,-51113e-8,-52363e-9,-.096238,-52625e-8,.21063,20975e-8,-.19233],[-30178e-8,40814e-8,.023414,-43206e-8,78453e-8,35814e-8,223e-6,.11772,-27684e-8,99378e-8,80895e-8,-25652e-8,-.11005,17371e-8,-.0039195,-20196e-9,96066e-8,.0011504,-37232e-8,-54321e-8,1126e-8,-.098365,55787e-9,.093704,26963e-8],[.074793,.0019177,-23909e-10,.21074,.0037741,62253e-8,-.093374,3195e-8,.32537,.0049637,.0014372,-.0013877,-74083e-9,-.18444,10552e-8,.19589,.0051284,.0021279,-.0022517,-97008e-8,.10835,-22347e-8,-.15978,18829e-8,.27267]],[[.25276,-28176e-8,-44466e-8,.23765,-55342e-8,11908e-8,-.14703,-91486e-8,.23962,-74835e-8,30165e-8,10422e-8,82233e-8,-.19228,-.0010663,.21816,-82947e-8,51706e-8,65875e-9,-20674e-8,.11967,.0012279,-.1687,-.0011014,.17948],[-41535e-8,.12546,1095e-7,-63558e-8,.076819,-90303e-9,30309e-8,23622e-8,-54197e-8,.1032,-2105e-7,-.027274,-2451e-7,24487e-8,28123e-8,-35021e-8,.11038,-33965e-8,-.043541,83716e-9,30029e-9,-41534e-8,85989e-9,28225e-8,-95256e-9],[-58113e-8,1095e-7,.11038,-92378e-8,23622e-8,-18624e-8,42234e-8,.04565,-90377e-8,36002e-8,-44229e-8,-95328e-9,-.038688,36099e-8,.046627,-8138e-7,46523e-8,-6907e-7,-17824e-8,2869e-7,31447e-9,-.049914,17233e-8,.036557,-67989e-8],[.14132,-36379e-8,-65107e-8,.46047,-70888e-8,20146e-8,-.25841,-.0013441,.42496,-947e-6,50554e-8,12155e-8,.0012052,-.33036,-.0015825,.38127,-.0010296,85711e-8,48334e-9,-34055e-8,.19799,.0018073,-.28047,-.0016631,.30529],[-70468e-8,-.052361,24524e-8,-.0010719,.16753,-14424e-8,49971e-8,52249e-8,-90118e-8,.20487,-33771e-8,-.054155,-53594e-8,37972e-8,6088e-7,-56077e-8,.25226,-55406e-8,-.098985,12104e-8,95459e-9,-89116e-8,10485e-8,59184e-8,-11164e-8],[16442e-8,-12982e-8,-26109e-8,27764e-8,-25494e-8,.0859,-18333e-8,-52526e-8,28392e-8,-35954e-8,.038079,-29316e-10,52919e-8,-2505e-7,-53049e-8,25677e-8,-44216e-8,.043958,-10253e-8,-.017209,17504e-8,80898e-8,-20965e-8,-3725e-7,19908e-8],[-.16379,88912e-9,19612e-8,-.20564,16386e-8,-13263e-8,.21649,40744e-8,-.219,20741e-8,-32717e-8,21755e-9,-32958e-8,.21854,51536e-8,-.21373,21423e-8,-54031e-8,12925e-8,22118e-8,-.14218,-47182e-8,.19357,62042e-8,-.1805],[-.0010891,24524e-8,-.081549,-.0017375,52249e-8,-33272e-8,79218e-8,.10714,-.0017191,78502e-8,-78792e-8,-19759e-8,-.077945,68152e-8,.094342,-.0015789,99872e-8,-.0012239,-35531e-8,51228e-8,56411e-9,-.12712,33334e-8,.097961,-.0013593],[.25846,-17624e-8,-55747e-8,.3158,-3306e-7,19611e-8,-.20761,-.0011614,.4251,-41045e-8,48507e-8,47461e-9,.001056,-.30187,-.0013865,.38002,-38595e-8,81069e-8,-1147e-8,-31262e-8,.19222,.0016179,-.28094,-.0014815,.34372],[-74521e-8,.15765,37423e-8,-.0011199,.098284,-16117e-8,5086e-7,78847e-8,-9082e-7,.25433,-38296e-8,-.05009,-79674e-8,35017e-8,90337e-8,-50357e-8,.30328,-64513e-8,-.1111,1325e-7,16133e-8,-.0012991,47633e-9,85834e-8,2398e-8],[45065e-8,-24271e-8,-55566e-8,74826e-8,-47821e-8,-.099721,-47422e-8,-.0011151,74343e-8,-68471e-8,.049512,-29274e-9,.0011256,-61818e-8,-.0011161,6448e-7,-86609e-8,.060939,-25372e-8,-.024338,39939e-8,.0017163,-49586e-8,-76142e-8,46809e-8],[-51005e-9,-.041712,-11415e-8,-91757e-9,-.027483,-88668e-9,10584e-8,-23355e-8,-83246e-9,-.051463,-21336e-8,.080631,24018e-8,19052e-8,-24434e-8,-46651e-9,-.070524,-32747e-8,.0606,17337e-8,-21012e-8,37945e-8,18009e-8,-18879e-8,10298e-9],[87556e-8,-26047e-8,-.078867,.001396,-55152e-8,33051e-8,-59061e-8,-.01893,.0014058,-81987e-8,78373e-8,21142e-8,.1054,-44583e-8,-.043881,.0013435,-.0010273,.0012196,38013e-8,-51144e-8,-1829e-7,.11603,-16833e-8,-.055965,.0012345],[-.19422,-98994e-9,46959e-10,-.32371,-2185e-7,-16141e-8,.08924,1849e-8,-.31072,-32823e-8,-39114e-8,15436e-8,56124e-9,.26406,10485e-8,-.27361,-40231e-8,-62977e-8,34667e-8,26064e-8,-.16567,12198e-8,.22843,28814e-8,-.228],[-.0010786,29268e-8,.096011,-.0017387,61232e-8,-22083e-8,82578e-8,.012546,-.0017507,90281e-8,-5152e-7,-19936e-8,-.038186,77514e-8,.11051,-.0016452,.0011277,-77807e-8,-32487e-8,33763e-8,-67789e-9,-.097962,44249e-8,.0993,-.001455],[.20364,81143e-9,-43204e-8,.3425,18524e-8,14473e-8,-.22114,-91287e-8,.24484,31758e-8,35168e-8,-36423e-9,86661e-8,-.24537,-.0010981,.33417,48459e-8,57997e-8,-45047e-9,-20675e-8,.1506,.0013828,-.22698,-.0011679,.30702],[-52055e-8,.073002,45752e-8,-75655e-8,.24915,-16941e-8,33123e-8,95539e-8,-54164e-8,.22123,-41328e-8,-.096585,-94805e-8,1774e-7,.0010842,-15814e-8,.33511,-71435e-8,-.13,16871e-8,18532e-8,-.0015168,-57319e-9,.0010217,33234e-8],[8024e-7,-29732e-8,-72008e-8,.0013133,-59377e-8,.11455,-79505e-8,-.0014378,.0012758,-87333e-8,-.010949,-48287e-9,.0014564,-98305e-8,-.0014126,.0010724,-.0011474,.075531,-34045e-8,-.0099532,57053e-8,.0022081,-7505e-7,-90432e-8,74143e-8],[-42043e-8,-.030403,-19319e-8,-67762e-8,-.10004,-26387e-8,47902e-8,-38828e-8,-59004e-8,-.1197,-63081e-8,-.067976,39782e-8,65041e-8,-38694e-8,-36315e-8,-.13511,-9784e-7,.058187,45897e-8,-506e-6,6123e-7,51227e-8,-26242e-8,-41583e-9],[-34122e-8,16811e-9,33001e-8,-55732e-8,25029e-9,-.044369,35211e-8,66244e-8,-52954e-8,47358e-9,.0015492,1204e-7,-67195e-8,44782e-8,66102e-8,-42097e-8,10957e-8,-.01229,33236e-8,.059427,-28339e-8,-.0010273,34599e-8,44584e-8,-25205e-8],[.081858,32311e-8,3279e-7,.17381,66398e-8,1063e-7,-.1764,66498e-8,.17432,93412e-8,24892e-8,-27717e-8,-69455e-8,-.11772,67028e-8,.17375,.001072,37898e-8,-50761e-8,-16467e-8,.13046,-.0010925,-.11256,46328e-8,.14581],[.0010558,-43696e-8,-.034625,.0016946,-91447e-8,41481e-8,-67486e-8,-.14998,.0017626,-.0013398,97981e-8,33096e-8,.021187,-46163e-8,-.13092,.0017829,-.0016498,.0015128,57192e-8,-6435e-7,-33079e-8,.15675,-13896e-8,-.11625,.0017665],[-.11037,-17816e-8,-94945e-9,-.24028,-36954e-8,-72093e-9,.2188,-19029e-8,-.26125,-52802e-8,-1727e-7,15634e-8,21737e-8,.17038,-17052e-8,-.23868,-62143e-8,-27371e-8,29062e-8,1131e-7,-.10797,35024e-8,.21354,-64823e-9,-.20704],[-91442e-8,25483e-8,.018567,-.0014996,52175e-8,55323e-9,79734e-8,.10772,-.0015311,75523e-8,1512e-7,-12357e-8,-.1036,88457e-8,.0042628,-.0014452,93133e-8,29302e-8,-14831e-8,-90688e-9,-34836e-8,-.097142,61696e-8,.083344,-.0012649],[.082637,33001e-8,-31924e-8,.21635,68187e-8,51283e-9,-.10067,-68463e-8,.32636,.0010164,11916e-8,-10474e-8,70262e-8,-.19233,-81089e-8,.21563,.0013192,19457e-8,-43017e-9,-40629e-9,.11634,.0011786,-.17193,-8138e-7,.27475]],[[.2374,49985e-9,-48501e-9,.2364,66211e-9,66793e-8,-.14678,-10908e-8,.2403,-42657e-10,.0016095,-54027e-9,66755e-9,-.19358,-17984e-8,.22189,-1955e-7,.0025947,-87825e-9,-.0010025,.12166,95689e-9,-.1722,-29432e-8,.18679],[14155e-8,.11013,72578e-8,18826e-8,.070788,65739e-9,-15279e-8,.0014768,38822e-9,.097326,15764e-8,-.025654,-.0014458,-17226e-8,.001578,-219e-6,.10643,24392e-8,-.041754,-11985e-8,1196e-7,-.0022169,-84349e-9,.0013174,-53501e-8],[-47168e-9,72578e-8,.09591,-8393e-8,.0014768,63208e-10,32661e-10,.041218,-12852e-8,.0020962,48557e-10,-41298e-8,-.035995,-33465e-9,.043502,-20116e-8,.0024909,-33814e-9,-57725e-8,-38536e-9,88752e-9,-.047565,-41577e-9,.035238,-29082e-8],[.1477,-10964e-9,-89775e-9,.44628,-7761e-8,93646e-8,-.25598,-19954e-8,.42231,-25929e-8,.0022595,-1851e-8,13753e-8,-.33214,-31043e-8,.38643,-5945e-7,.0036508,-26955e-9,-.0014049,.20212,20526e-8,-.28737,-47953e-8,.31814],[1232e-7,-.045378,.0013091,12428e-8,.1497,11686e-8,-14854e-8,.0026671,-13901e-8,.18939,28051e-8,-.049957,-.002607,-15714e-8,.002863,-57309e-8,.23894,43522e-8,-.093392,-21207e-8,13118e-8,-.0040017,-36068e-9,.0024177,-.0010955],[.0013177,93466e-9,26883e-9,.0020749,1893e-7,.072924,-.0011274,4411e-8,.0018676,25786e-8,.032488,-86552e-9,-90846e-9,-.0011811,-2274e-8,.0013641,27958e-8,.039651,-16109e-8,-.015518,4266e-7,-15072e-8,-7309e-7,-17893e-8,67053e-8],[-.1624,-32604e-9,-91872e-10,-.20999,-35826e-9,-40094e-8,.20539,-10493e-9,-.22265,24815e-9,-9672e-7,76022e-10,39394e-9,.21538,36749e-9,-.21831,1689e-7,-.001563,-20236e-9,59966e-8,-.14196,63831e-9,.19481,13924e-8,-.18837],[-11889e-8,.0013091,-.073038,-20745e-8,.0026671,-12471e-9,35755e-9,.092153,-29098e-8,.0037944,-51718e-9,-7438e-7,-.069905,-26597e-9,.084612,-42259e-8,.004525,-1666e-7,-.0010397,-32296e-9,14633e-8,-.1177,-50776e-9,.091044,-58389e-8],[.25704,-26586e-8,-15078e-8,.32469,-58899e-8,60944e-8,-.21112,-32407e-8,.41937,-95945e-8,.0014784,15377e-8,27688e-8,-.30478,-43124e-8,.38131,-.0013736,.0024114,24146e-8,-91383e-8,.19609,43244e-8,-.28644,-5498e-7,.35056],[-19411e-8,.14865,.0015514,-40267e-8,.10139,12224e-8,13952e-8,.0031683,-6922e-7,.23874,29431e-8,-.048778,-.0030885,18077e-8,.0034302,-.0011203,.28648,4589e-7,-.10572,-22256e-8,-25383e-9,-.0047515,22355e-8,.0029557,-.0016115],[.0028023,19604e-8,23624e-9,.0044183,39746e-8,-.088639,-.0023958,21763e-9,.0039954,54289e-8,.039259,-17976e-8,-12463e-8,-.0025112,-1385e-7,.0029519,59185e-8,.050258,-33354e-8,-.020166,90218e-8,-2084e-7,-.0015597,-48307e-8,.0015077],[-60345e-9,-.039237,-15299e-8,-74461e-9,-.027982,-61026e-9,24327e-9,-31259e-8,-16556e-9,-.049984,-14564e-8,.068721,30186e-8,-20909e-9,-34114e-8,72871e-9,-.067994,-22783e-8,.053059,9931e-8,75234e-9,46258e-8,-63299e-9,-3006e-7,17491e-8],[14531e-9,-.0012336,-.07403,41505e-9,-.0025111,-50329e-9,55133e-9,-.022434,13717e-8,-.0035677,-10095e-8,69899e-8,.093083,1244e-7,-.043276,30169e-8,-.0042464,-81399e-9,97384e-8,13196e-8,-18494e-8,.10475,1137e-7,-.053598,50822e-8],[-.1927,28933e-9,-49121e-9,-.32388,89803e-9,-20292e-8,.10279,-92329e-9,-.31648,19333e-8,-49178e-8,-68421e-9,1128e-7,.26204,-57746e-9,-.28385,34135e-8,-80247e-8,-17798e-8,30028e-8,-.16457,17274e-8,.22978,43394e-9,-.24117],[-27041e-8,99298e-8,.090145,-45026e-8,.0020342,-13283e-8,18799e-8,.017784,-51026e-8,.0029223,-34546e-8,-56297e-8,-.037642,16044e-8,.098962,-58082e-8,.0035371,-64208e-8,-79011e-8,17153e-8,33164e-9,-.090708,8677e-8,.089185,-65987e-8],[.20333,-581e-6,-23411e-8,.34495,-.0012155,13604e-8,-.22333,-49346e-8,.26273,-.0018049,34485e-8,35661e-8,46808e-8,-.25502,-59207e-8,.33726,-.0022928,6044e-7,54307e-8,-20419e-8,.15791,74373e-8,-.23563,-63442e-8,.31016],[-79982e-8,.066175,.0014235,-.0013722,.2327,76351e-9,69247e-8,.0029196,-.001596,.22157,18563e-8,-.091767,-.0028333,80749e-8,.0032081,-.0018334,.32683,2933e-7,-.12811,-14257e-8,-31465e-8,-.0043773,66041e-8,.0028591,-.0020561],[.0037409,23062e-8,-94262e-9,.0059123,469e-6,.10603,-.0031955,-23637e-8,.0053925,64381e-8,-.0027747,-21324e-8,93345e-9,-.0033548,-49762e-8,.0040677,70756e-8,.068432,-39792e-8,-.010934,.0011971,14107e-8,-.0020999,-96487e-8,.0022153],[87447e-10,-.027426,90602e-9,41684e-9,-.093025,-97407e-9,-9996e-8,18131e-8,73544e-9,-.11533,-23218e-8,-.056803,-18727e-8,-23204e-8,17693e-8,95111e-9,-.13268,-36527e-8,.052108,15086e-8,29739e-8,-28761e-8,-25662e-8,11065e-8,99207e-9],[-.0015425,-17211e-8,-99033e-9,-.0024306,-34783e-8,-.041083,.0013155,-18587e-8,-.0021953,-47641e-8,-.0013977,14172e-8,25108e-8,.0013741,-96514e-9,-.0016182,-52521e-8,-.013258,25029e-8,.049542,-48693e-8,40101e-8,84871e-8,15264e-8,-82123e-8],[.084997,-61103e-9,99842e-9,.17577,-13652e-8,-20206e-8,-.17312,20188e-8,.17827,-20131e-8,-4846e-7,12441e-8,-19724e-8,-.1287,21222e-8,.17893,-23222e-8,-77256e-8,29363e-8,30848e-8,.12715,-29932e-8,-.12201,17071e-8,.15431],[16694e-9,-.0015392,-.029621,54701e-9,-.0031383,-5836e-8,72159e-9,-.1375,19189e-8,-.0044722,-10933e-8,86864e-8,.027452,15854e-8,-.12571,42647e-8,-.0053484,-56056e-9,.0012079,16148e-8,-23711e-8,.14846,14071e-8,-.11444,72139e-8],[-.11546,83771e-9,-38661e-9,-.24377,18506e-8,25352e-9,.21673,-75814e-9,-.26593,28775e-8,59404e-9,-95164e-9,79906e-9,.18444,-67767e-9,-.24805,37832e-8,89945e-9,-20034e-8,-40765e-9,-.11745,12046e-8,.21648,-27318e-9,-.21979],[-51014e-8,21939e-8,.014907,-8307e-7,47355e-8,-33998e-8,44256e-8,.098137,-83376e-8,74064e-8,-84518e-8,-12414e-8,-.096711,48442e-8,.011531,-77322e-8,.0010057,-.0014301,-18402e-8,5324e-7,-18428e-8,-.09538,33002e-8,.077874,-678e-6],[.091151,-80783e-8,-30383e-8,.22326,-.0016605,-31276e-8,-.10852,-63553e-8,.32773,-.0023928,-73349e-8,49021e-8,629e-6,-.20009,-72759e-8,.23465,-.0029099,-.0011259,72361e-8,46718e-8,.12379,.001007,-.18345,-70653e-8,.28206]],[[.2231,94076e-8,82348e-8,.23411,.0019197,-63238e-8,-.14592,.0017436,.24057,.0027074,-.0015573,-65781e-8,-.0016521,-.19443,.0021163,.22635,.0031593,-.0025895,-.0010767,99446e-8,.12357,-.0026459,-.17593,.0023041,.19631],[.0013673,.095478,-66815e-8,.0021577,.062385,12773e-8,-.0012949,-.0013902,.0018851,.087626,30956e-8,-.023049,.0013742,-.0015058,-.0015675,.0012435,.097884,50736e-8,-.038244,-18416e-8,81219e-8,.0021874,-.0010492,-.0014602,36719e-8],[.0010491,-66815e-8,.082991,.0017171,-.0013902,26992e-8,-90887e-8,.036216,.0017514,-.0020372,64841e-8,43308e-8,-.032334,-.0010044,.039427,.0016654,-.0025272,.0010332,6856e-7,-42244e-8,36714e-8,-.043531,-72888e-8,.03311,.0014988],[.15367,.0012947,.001287,.43417,.0026465,-94796e-8,-.25364,.0027299,.42067,.0037431,-.0023348,-91029e-8,-.0025834,-.33404,.0033307,.39343,.0043875,-.003884,-.0014973,.0014895,.20656,-.0041459,-.29515,.0036578,.33458],[.0024155,-.040895,-.0012921,.0038177,.13003,22835e-8,-.0022947,-.0026885,.0033503,.16891,55536e-8,-.044486,.0026558,-.0026796,-.0030339,.0022374,.21858,91641e-8,-.085181,-32781e-8,.0014568,.0042266,-.0018805,-.0028324,71331e-8],[-.0011781,1829e-7,39834e-8,-.0018981,37347e-8,.061611,.0010757,80752e-8,-.0018064,53669e-8,.026463,-92821e-9,-81621e-8,.0012323,83413e-8,-.0014793,65367e-8,.033591,-11559e-8,-.013066,-57575e-8,-.0012639,8886e-7,63039e-8,-98034e-8],[-.16071,-70683e-8,-57986e-8,-.21401,-.0014469,46557e-8,.19658,-.0012318,-.22708,-.002047,.001146,51512e-8,.0011578,.21362,-.0015146,-.2247,-.0023958,.0019032,86709e-8,-73426e-8,-.14229,.0018563,.19709,-.0016877,-.199],[.0021021,-.0012921,-.065543,.0034478,-.0026885,46867e-8,-.0018231,.078342,.003538,-.0039412,.0011277,83549e-8,-.061136,-.0020211,.074462,.0033993,-.0048925,.0018025,.0013207,-73352e-8,74127e-8,-.10595,-.0014779,.083251,.0031056],[.25695,69216e-8,.001215,.33595,.0014271,-74963e-8,-.21676,.0025886,.41964,.00205,-.0018482,-48928e-8,-.0024461,-.31123,.003195,.38811,.0024639,-.0030821,-81336e-8,.0011729,.20216,-.0039485,-.29527,.0035741,.36243],[.0026784,.13681,-.0016983,.0042462,.098507,27421e-8,-.0025529,-.0035352,.0037642,.21921,67149e-8,-.045911,.0034865,-.0029984,-.0039982,.0025859,.26513,.0011215,-.098422,-39315e-8,.0016419,.0055475,-.0021294,-.0037527,96313e-8],[-.0026941,38239e-8,81402e-8,-.0043408,7833e-7,-.079267,.0024568,.0016524,-.0041336,.0011329,.029244,-19111e-8,-.001668,.0028111,.0017153,-.0033909,.001394,.037897,-2348e-7,-.015152,-.0013075,-.0025863,.0020255,.0013154,-.0022582],[-56557e-8,-.036011,27028e-8,-89952e-8,-.026893,-73682e-10,56544e-8,56153e-8,-79118e-8,-.046861,-18418e-9,.058593,-55875e-8,69384e-8,62794e-8,-52417e-8,-.063835,-35547e-9,.046012,11129e-10,-42789e-8,-89016e-8,51389e-8,57389e-8,-15298e-8],[-.0018986,.0012413,-.067946,-.0031126,.002582,-47536e-8,.0016372,-.023252,-.0031951,.0037813,-.0011429,-80743e-8,.081175,.0018034,-.040968,-.0030743,.0046861,-.0018237,-.001281,74466e-8,-64075e-8,.092351,.0013104,-.050493,-.0028167],[-.19256,-56754e-8,-47469e-8,-.3259,-.0011692,37984e-8,.11659,-.0010148,-.32418,-.0016663,93469e-8,44043e-8,94118e-8,.26429,-.0012765,-.29695,-.0019672,.0015509,77163e-8,-60115e-8,-.16651,.001514,.23518,-.0014782,-.25835],[.0023078,-.001204,.083407,.0038052,-.0025073,28073e-8,-.0020145,.021064,.00396,-.0036835,68208e-8,76946e-8,-.036397,-.0022601,.088957,.0038921,-.0045902,.0011101,.0012075,-43879e-8,85315e-8,-.083456,-.0016891,.080495,.003669],[.20786,-16574e-8,.0010537,.35462,-31196e-8,-391e-6,-.22992,.0022598,.28667,-36985e-8,-96838e-8,12052e-8,-.0021345,-.27048,.0028332,.34908,-29317e-8,-.0016312,18967e-8,60273e-8,.16922,-.0034774,-.2503,.0032452,.32107],[.0020959,.059517,-.0018059,.0033471,.21463,27066e-8,-.0020035,-.0037626,.0030435,.2167,67066e-8,-.086112,.0036996,-.0023744,-.0042745,.0022377,.31601,.0011416,-.12458,-39074e-8,.0013032,.0058863,-.0017264,-.0040548,.0011101],[-.0040089,50864e-8,99198e-8,-.0064611,.0010488,.095754,.0036462,.0020198,-.0061643,.0015352,28526e-8,-25197e-8,-.0020323,.004163,.0021212,-.0050811,.0019236,.058204,-3093e-7,-.0096467,-.0019174,-.0031605,.0029964,.0016811,-.0034263],[-50173e-8,-.024477,22528e-8,-80974e-8,-.085329,61297e-9,54764e-8,46721e-8,-72357e-8,-.10922,14716e-8,-.047295,-47009e-8,72575e-8,51613e-8,-48914e-8,-.12834,22795e-8,.047498,-11177e-8,-52165e-8,-75082e-8,58116e-8,45793e-8,-15227e-8],[.0015931,-18769e-8,-49265e-8,.0025655,-38359e-8,-.036907,-.0014587,-99979e-8,.0024354,-55562e-8,-.0018568,8214e-8,.0010105,-.0016747,-.0010362,.0019828,-6882e-7,-.011326,83407e-9,.040614,79118e-8,.0015672,-.0012085,-79051e-8,.0012963],[.089774,90347e-9,-55354e-9,.18067,19639e-8,-12207e-9,-.17116,-10754e-8,.18521,29274e-8,-28768e-9,-12077e-8,12734e-8,-.14026,-81918e-9,.18706,35797e-8,-42008e-9,-26352e-8,25162e-9,.12701,20121e-8,-.13299,84066e-10,.16552],[-.0027483,.0017417,-.024578,-.004518,.0036231,-58487e-8,.0023669,-.12334,-.0046783,.005307,-.0014095,-.0011324,.029682,.0026113,-.11747,-.0045686,.0065791,-.002259,-.0017961,91668e-8,-918e-6,.13773,.0019123,-.11037,-.0042757],[-.12311,-19066e-8,-21344e-8,-.25182,-39939e-8,11943e-8,.21693,-46028e-8,-.2751,-58209e-8,29466e-8,16345e-8,4199e-7,.2001,-59617e-8,-.26136,-70835e-8,49072e-8,30387e-8,-1902e-7,-.12857,67908e-8,.22412,-72261e-8,-.23627],[.0022109,-69946e-8,.012637,.0036754,-.0014626,-1e-4,-.0019569,.089981,.003902,-.0021693,-22365e-8,42828e-8,-.090715,-.0022437,.018059,.0039532,-.0027469,-30619e-8,65448e-8,15832e-8,89905e-8,-.094565,-.0017344,.074646,.0038746],[.1067,-92034e-8,87377e-8,.24193,-.0018437,30622e-9,-.12365,.0018873,.33951,-.0025035,65633e-9,66869e-8,-.0017865,-.21679,.0024025,.25978,-.0027261,73903e-9,.0011045,-64954e-9,.13654,-.0029427,-.20188,.0028111,.29581]],[[.21133,-47612e-8,-76483e-8,.23289,-.0010025,-17291e-8,-.14566,-.0016019,.24057,-.0014421,-40751e-8,5252e-7,.0015887,-.19535,-.0018383,.22834,-.0016871,-61632e-8,.0010796,29451e-8,.12518,.0025582,-.1785,-.001787,.20075],[-64539e-8,.084493,-22056e-8,-.0010559,.05826,-29775e-8,80754e-8,-4416e-7,-92871e-8,.083272,-71686e-8,-.021894,47585e-8,.0011769,-41547e-8,-56611e-8,.094829,-.001143,-.036999,4746e-7,-98403e-8,74665e-8,.0010305,-21375e-8,-20295e-9],[-.0010488,-22056e-8,.072282,-.0016941,-4416e-7,99269e-9,97497e-8,.032569,-.0016192,-59625e-8,23929e-8,17016e-8,-.029788,.0011399,.03632,-.0013456,-63979e-8,38809e-8,29104e-8,-14393e-8,-56113e-8,-.041002,85234e-8,.031266,-94291e-8],[.15982,-75052e-8,-.0011307,.42405,-.0015747,-21137e-8,-.2515,-.0023769,.41758,-.002256,-49492e-8,80864e-8,.0023497,-.33467,-.0027608,.39538,-.0026264,-73661e-8,.001647,36523e-8,.20955,.0037983,-.29985,-.0027504,.34222],[-.0013317,-.033526,-35546e-8,-.0021695,.11922,-51243e-8,.0016351,-70868e-8,-.001896,.1587,-.0012343,-.041777,77279e-8,.0023521,-65005e-8,-.0011407,.20825,-.0019692,-.081061,81806e-8,-.0019346,.0012123,.0020344,-29104e-8,-16101e-9],[-46093e-8,-45609e-8,15066e-8,-71739e-8,-92772e-8,.052643,45661e-8,3061e-7,-5817e-7,-.0013039,.022544,30472e-8,-29453e-8,54603e-8,32994e-8,-28959e-8,-.0015145,.029984,48265e-8,-.011688,-33394e-8,-44583e-8,37954e-8,28534e-8,10406e-8],[-.15908,6628e-7,5781e-7,-.21748,.0013859,1346e-7,.18938,.0012165,-.23022,.0019893,31865e-8,-6555e-7,-.0012023,.2119,.0014165,-.22812,.0023377,48403e-8,-.0012939,-23494e-8,-.142,-.0019461,.1978,.0014176,-.20443],[-.0019709,-35546e-8,-.057688,-.0031951,-70868e-8,16881e-8,.0018341,.068351,-.0030909,-94685e-8,40826e-8,28146e-8,-.05498,.0021543,.066843,-.0026353,-99374e-8,66718e-8,48701e-8,-24187e-8,-.0010603,-.097323,.0016318,.076348,-.0019512],[.25427,-50579e-8,-86507e-8,.34205,-.0010505,-23963e-9,-.21954,-.0018426,.41602,-.00148,-43235e-9,53623e-8,.0017997,-.31362,-.0022301,.38891,-.0016773,-18685e-9,.001081,56694e-9,.20508,.0029486,-.29917,-.002401,.36609],[-.0017531,.12814,-30577e-8,-.0028408,.10089,-54293e-8,.0021205,-60051e-8,-.0024523,.20996,-.0013089,-.045341,67843e-8,.0030144,-50344e-8,-.0014239,.25473,-.0020906,-.095249,86931e-8,-.002448,.0010604,.0025724,-10029e-8,8546e-8],[-89141e-8,-92725e-8,29947e-8,-.0013834,-.0018869,-.069534,89343e-8,61018e-8,-.0011023,-.0026535,.024121,62182e-8,-58078e-8,.0010767,66798e-8,-50479e-8,-.0030843,.031982,9879e-7,-.012882,-67762e-8,-87799e-8,74947e-8,60089e-8,29856e-8],[8825e-7,-.033763,98602e-9,.0014255,-.027483,90299e-9,-9869e-7,1993e-7,.0012629,-.046368,2185e-7,.050922,-22095e-8,-.0013333,18843e-8,82123e-8,-.062595,35073e-8,.041161,-14621e-8,98582e-8,-35586e-8,-.0010981,95664e-9,17398e-8],[.0019534,41742e-8,-.062684,.0031619,83728e-8,-15186e-8,-.0018182,-.025069,.003043,.0011323,-36544e-8,-33025e-8,.072919,-.0021329,-.040217,.0025657,.0012167,-59404e-8,-57364e-8,21223e-8,.0010525,.084403,-.0016074,-.04829,.0018549],[-.19152,9388e-7,50733e-8,-.32551,.0019553,10352e-8,.1277,.001078,-.3278,.002801,24555e-8,-87583e-8,-.001057,.26527,.0012932,-.30433,.003294,3709e-7,-.0016868,-18949e-8,-.16756,-.0017285,.23831,.0013688,-.26834],[-.0016857,-82335e-9,.076813,-.0027708,-14993e-8,10932e-8,.0015736,.023785,-.0028006,-15579e-8,26998e-8,88473e-9,-.035693,.0018787,.080869,-.002602,-6568e-8,45884e-8,16838e-8,-15289e-8,-92071e-8,-.077902,.0014892,.072932,-.0022558],[.2067,30548e-9,-46622e-8,.35416,83359e-9,2298e-7,-.22996,-.001034,.29894,17354e-8,56818e-8,-14133e-9,9719e-7,-.27684,-.0014039,.3526,31038e-8,95083e-8,-26136e-9,-36539e-8,.17477,.0016585,-.25731,-.0018042,.32558],[-.0016503,.05573,-65069e-9,-.0026537,.20099,-38348e-8,.0019835,-10381e-8,-.0022314,.21443,-92636e-8,-.081616,17571e-8,.0027959,35954e-9,-.0011807,.30914,-.0014834,-.12203,6183e-7,-.0022652,26087e-8,.0023503,36093e-8,33021e-8],[-912e-6,-.0011106,36164e-8,-.0014017,-.0022619,.086998,94003e-8,74235e-8,-.0010555,-.0031842,.0052607,75004e-8,-69341e-8,.0011508,83988e-8,-34368e-8,-.0037062,.054659,.0011984,-.01063,-77288e-8,-.0010504,7977e-7,81388e-8,60624e-8],[.0017541,-.022982,93853e-9,.0028242,-.080029,28742e-9,-.0019067,19189e-8,.0025053,-.10539,71968e-9,-.038419,-22273e-8,-.0025208,18023e-8,.0016511,-.12596,1207e-7,.04509,-51481e-9,.0017913,-37105e-8,-.0020364,83206e-9,40926e-8],[63496e-8,57144e-8,-14922e-8,99076e-8,.0011635,-.033601,-64177e-8,-30211e-8,80419e-8,.0016376,-.0037522,-38505e-8,28066e-8,-78236e-8,-33032e-8,39848e-8,.0019055,-.012399,-6141e-7,.03472,49881e-8,41402e-8,-55703e-8,-30029e-8,-15121e-8],[.093128,-87242e-8,-61593e-9,.18322,-.0018112,-33842e-9,-.16756,-14297e-8,.18909,-.002595,-84342e-9,75645e-8,1319e-7,-.14787,-21403e-8,.19137,-.0030668,-13581e-8,.0014095,71871e-9,.12611,2372e-7,-.1404,-30687e-8,.17207],[.0027055,50172e-8,-.021536,.0044007,.0010036,-16237e-8,-.0025225,-.11218,.0043013,.0013456,-3918e-7,-41346e-8,.03284,-.0029774,-.11063,.0037444,.0014176,-64465e-8,-73249e-8,21496e-8,.0014699,.13109,-.0022811,-.10605,.0028891],[-.12799,59307e-8,27298e-8,-.25539,.0012323,21298e-9,.21407,58934e-8,-.27897,.0017625,49269e-9,-53479e-8,-56841e-8,.20971,74226e-8,-.26837,.0020725,67297e-9,-.0010141,-47214e-9,-.13585,-94388e-8,.2279,85389e-8,-.24599],[-83924e-8,4267e-7,.01034,-.0014573,88864e-8,85013e-10,79067e-8,.080861,-.0017169,.0013037,34866e-9,-28467e-8,-.083143,.0010027,.021161,-.0020124,.0016221,98968e-9,-46028e-8,-10372e-9,-47784e-8,-.09027,9257e-7,.070184,-.002334],[.11331,73778e-8,-11573e-8,.24654,.0015664,4424e-7,-.1298,-32136e-8,.33769,.0023157,.0010807,-70187e-8,24204e-8,-.22182,-66947e-8,.27174,.0028558,.0017624,-.0013773,-72386e-8,.14171,51581e-8,-.21008,-.0012605,.30244]],[[.2013,-18674e-8,-40977e-8,.23228,-36405e-8,-12887e-8,-.14538,-86363e-8,.24148,-49048e-8,-32847e-8,47852e-9,84291e-8,-.19585,-.0010164,.23172,-54677e-8,-57186e-8,-20322e-9,21969e-8,.12593,.0013597,-.18047,-.0010354,.20721],[-34685e-8,.074247,-12402e-8,-52963e-8,.053022,-11328e-8,24391e-8,-26873e-8,-45303e-8,.077015,-2798e-7,-.020187,27216e-8,17805e-8,-33034e-8,-30124e-8,.089348,-46905e-8,-.034663,17518e-8,58015e-9,46286e-8,25227e-9,-35657e-8,-1103e-7],[-56518e-8,-12402e-8,.063414,-92158e-8,-26873e-8,-16614e-8,5149e-7,.030112,-91364e-8,-41569e-8,-40144e-8,10131e-8,-.028067,59636e-8,.034456,-81585e-8,-55177e-8,-64521e-8,18913e-8,26174e-8,-27028e-8,-.039571,45237e-8,.030802,-65099e-8],[.16645,-18996e-8,-62475e-8,.41702,-36177e-8,-21748e-8,-.2499,-.0013182,.41682,-47488e-8,-55163e-8,93801e-10,.0012857,-.33504,-.0015564,.39977,-51448e-8,-95434e-8,-13192e-8,36696e-8,.21131,.0020767,-.3037,-.001595,.35282],[-48854e-8,-.027971,-27695e-8,-73546e-8,.10765,-21335e-8,29933e-8,-59613e-8,-62019e-8,.14623,-52812e-8,-.03838,60197e-8,14364e-8,-72261e-8,-40772e-8,.19465,-88869e-8,-.075419,32984e-8,21816e-8,.0010138,-92838e-9,-76319e-8,-15233e-8],[-19274e-8,-16306e-8,-26262e-8,-32635e-8,-33964e-8,.044952,20421e-8,-53641e-8,-34491e-8,-50029e-8,.018855,10068e-8,5415e-7,27543e-8,-56613e-8,-33669e-8,-6273e-7,.026085,15417e-8,-.010103,-17976e-8,8468e-7,24494e-8,-45008e-8,-30327e-8],[-.15729,-18656e-9,29499e-8,-.22034,-57523e-9,1328e-7,.18318,62294e-8,-.23332,-1101e-7,33455e-8,95352e-9,-60524e-8,.21017,73899e-8,-.23211,-16442e-8,57162e-8,25522e-8,-22574e-8,-.14112,-97716e-8,.19797,76478e-8,-.21093],[-.0011067,-27695e-8,-.049616,-.0018069,-59613e-8,-28507e-8,.0010091,.061858,-.001798,-91415e-8,-68852e-8,21913e-8,-.051156,.0011711,.062563,-.0016168,-.0012009,-.0011065,40113e-8,44745e-8,-53169e-8,-.091774,89277e-8,.072917,-.0013059],[.25342,18418e-9,-53627e-8,.35054,54972e-9,-22123e-8,-.22362,-.001135,.41699,10084e-8,-55633e-8,-96245e-9,.0011063,-.31747,-.0013509,.39398,14244e-8,-95274e-8,-25653e-8,36329e-8,.20789,.0017946,-.30366,-.001404,.37359],[-31771e-8,.11846,-43259e-8,-45526e-8,.099825,-27462e-8,94997e-9,-92479e-8,-36571e-8,.1986,-68226e-8,-.043761,92888e-8,-14762e-8,-.0011064,-23377e-8,.24221,-.001155,-.09074,42505e-8,44933e-8,.0015468,-34813e-8,-.0011454,-10198e-8],[-52766e-8,-35985e-8,-53391e-8,-88478e-8,-75125e-8,-.061078,54501e-8,-.0010901,-91648e-8,-.001111,.019557,22188e-8,.0010984,71679e-8,-.0011509,-86792e-8,-.0014013,.026235,34026e-8,-.01047,-44917e-8,.0017151,61981e-8,-91678e-8,-74874e-8],[-17641e-8,-.031093,11176e-8,-29721e-8,-.026859,30591e-9,23244e-8,23595e-8,-28296e-8,-.044507,76299e-9,.044299,-24297e-8,35478e-8,26887e-8,-21278e-8,-.059933,13076e-8,.036699,-45493e-9,-30536e-8,-4019e-7,33258e-8,25139e-8,-94425e-9],[.0010345,28069e-8,-.058073,.0016884,60314e-8,28698e-8,-94011e-8,-.027436,.0016802,92104e-8,69249e-8,-22702e-8,.066974,-.0010873,-.041114,.001512,.0012018,.0011114,-41929e-8,-44924e-8,48777e-8,.079263,-82579e-8,-.04871,.0012239],[-.19034,-2444e-7,24239e-8,-.32454,-52342e-8,16241e-8,.13709,51388e-8,-.33052,-77718e-8,40516e-8,26508e-8,-49573e-8,.26618,6184e-7,-.31105,-95782e-8,68165e-8,54823e-8,-27416e-8,-.16856,-80239e-8,.24124,65755e-8,-.27829],[-.0011081,-34774e-8,.071494,-.0018156,-74006e-8,-15856e-8,.0010154,.028119,-.0018241,-.0011194,-38273e-8,25426e-8,-.037219,.0011883,.077203,-.0016686,-.0014478,-6159e-7,44309e-8,24492e-8,-5473e-7,-.076816,92024e-8,.070376,-.0013866],[.20913,22496e-8,-37233e-8,.35904,46008e-8,-18722e-8,-.23271,-79276e-8,.31504,64806e-8,-46561e-8,-16837e-8,77334e-8,-.28564,-95727e-8,.36127,75063e-8,-78811e-8,-28733e-8,29339e-8,.18106,.0012658,-.26608,-.0010188,.33465],[84963e-9,.052382,-5571e-7,17865e-8,.18766,-29331e-8,-27621e-8,-.0011836,18806e-8,.20994,-73248e-8,-.076903,.0011801,-56632e-8,-.0014015,13191e-8,.30101,-.0012502,-.11842,45557e-8,65345e-8,.0019428,-62852e-8,-.0014294,43093e-10],[-96754e-8,-51675e-8,-63912e-8,-.0016072,-.001083,.078185,97014e-8,-.0013043,-.0016347,-.0016121,.0079833,31921e-8,.0013094,.0012388,-.0013789,-.0015057,-.0020524,.050354,4924e-7,-.010578,-73444e-8,.0020394,.0010368,-.0011048,-.0012466],[-69394e-8,-.021271,19483e-8,-.0011302,-.074072,35281e-10,76388e-8,4068e-7,-.0010388,-.099936,10649e-9,-.031056,-42128e-8,.0010285,44823e-8,-75137e-8,-.12139,25112e-9,.043023,-12284e-10,-7363e-7,-68809e-8,86357e-8,38901e-8,-31354e-8],[37037e-8,19832e-8,3188e-7,61685e-8,41386e-8,-.030053,-38582e-8,6499e-7,62399e-8,61231e-8,-.0042581,-11967e-8,-65333e-8,-50769e-8,68416e-8,56521e-8,77347e-8,-.011831,-18042e-8,.029331,32482e-8,-.0010165,-43409e-8,54187e-8,45129e-8],[.095555,42337e-8,11436e-9,.18453,8833e-7,-10025e-8,-.16336,21057e-9,.19159,.0012792,-24538e-8,-35687e-8,-27472e-9,-.15337,10234e-9,.19432,.0015399,-39922e-8,-65934e-8,16937e-8,.12543,-4234e-8,-.14617,-19446e-9,.17714],[.0014689,47696e-8,-.020051,.0024015,.0010178,33936e-8,-.0013345,-.10387,.002403,.0015391,81767e-8,-37548e-8,.036416,-.0015459,-.10635,.0021849,.0019836,.0013106,-68114e-8,-52628e-8,69154e-8,.1272,-.0011805,-.10495,.0018007],[-.13246,-27364e-8,10347e-8,-.25866,-57337e-8,93873e-9,.211,22088e-8,-.28239,-83314e-8,23232e-8,24413e-8,-21091e-8,.21733,27205e-8,-.27447,-.001005,38613e-8,464e-6,-15691e-8,-.1418,-34326e-8,.23114,30141e-8,-.25458],[-84761e-8,-35117e-8,.010279,-.001399,-73733e-8,96257e-9,78781e-8,.076047,-.0014315,-.0010985,23238e-8,22525e-8,-.079296,94095e-8,.027346,-.0013499,-.001398,37009e-8,35742e-8,-15889e-8,-45169e-8,-.091108,75352e-8,.070644,-.0011753],[.12401,30104e-8,-18076e-8,.25828,59544e-8,-11157e-8,-.13978,-39045e-8,.34268,80897e-8,-27245e-8,-13805e-8,38381e-8,-.23116,-48559e-8,.2872,90023e-8,-45398e-8,-13681e-8,15649e-8,.14854,64302e-8,-.22059,-53981e-8,.31211]]],u=[1,1.1,1.2,1.3,1.4,1.5,1.6,1.7,1.8,1.9,2,2.1,2.2,2.3,2.4,2.5];n(352);n.d(t,"initialize",(function(){return j}));for(var l,c,d,h,f,p,g,m,v,y,_,T,E,M,b=[],A=[],w=[],S=[],x=!1,D=!1,I=!1,C=!0,N=!1,L=Math.ceil(25/7),O=0;O<L;++O)b[O]=new Audio,A[O]=dashjs.MediaPlayer().create();var R=Object(r.default)("videojs-player");function j(e,t){p=t,h=e,function(){switch(M=(p+1)*(p+1),p){case 4:l=[8,8,8,4],c=["01-07ch","08-14ch","15-21ch","22-25ch"],d=4;break;case 3:l=[8,8,2],c=["01-07ch","08-14ch","15-16ch"],d=3;break;case 2:l=[8,2],c=["01-07ch","08-9ch"],d=2;break;case 1:l=[4],c=["01-04ch"],d=1;default:console.error("Error: Unsupported ambisonics order, choose order between 1 and 4.")}}(),R.src({type:"application/dash+xml",src:h+"/video.mpd"});for(var n=0;n<d;++n)A[n].initialize(b[n],h+"audio_"+c[n]+".mpd",!1);R.ready((function(){console.log("video player ready"),R.tech({IWillNotUseThisInPlugins:!0}).off("mouseup"),R.bigPlayButton.off("click")})),R.vr().on("initialized",(function(){D||I||(function(){console.log("setup audio!"),x=!1;var e=window.AudioContext||window.webkitAudioContext;f=new e,console.log(f),g=f.createChannelMerger(M),console.log(g),m=new i.sceneRotator(f,p),console.log(m),v=new o(f,4),console.log(v),y=new i.binDecoder(f,p),console.log(y);var t=new i.HOAloader(f,p,"irs/mls_o4_rev.wav",(function(e){y.updateFilters(e),x=!0,k()}));for(var n in t.load(),(E=f.createGain()).gain.value=1,A)S[n]=f.createChannelSplitter(l[n]),w[n]=f.createMediaElementSource(b[n]),w[n].channelCount=l[n],w[n].connect(S[n]);(function(){var e=[];-1!=navigator.userAgent.indexOf("Chrome")?(console.log("Chrome"),e=[0,1,2,-1,3,4,5,6]):-1!=navigator.userAgent.indexOf("Safari")?(console.error("Safari NOT SUPPORTED YET"),e=[1,2,0,5,6,3,4,-1]):-1!=navigator.userAgent.indexOf("Firefox")?(console.log("Firefox"),e=[1,2,0,5,6,3,4,-1]):console.error("Unsupported browser detected, player might not work as expected!");for(var t=0,n=0;n<d;++n)for(var r=0;r<l[n];++r){if(8===l[n]){if(-1===e[r])continue;S[n].connect(g,e[r],t)}else S[n].connect(g,r,t);++t}})(),g.connect(m.in),m.out.connect(v.in),v.out.connect(y.in),y.out.connect(E),E.connect(f.destination),D=!0}(),function(){console.log("setup video");var e=R.vr().controls3d;e.orbit.minDistance=-700,e.orbit.maxDistance=200,console.log(e),e.orbit.addEventListener("change",(function(){_=180*this.getAzimuthalAngle()/Math.PI,T=180*this.getPolarAngle()/Math.PI-90,m.yaw=_,m.pitch=T,m.updateRotMtx()})),e.orbit.addEventListener("zoom",(function(){if(this.currentDistance<=0){for(var e=Math.pow(2,-this.currentDistance/500),t=0;t<u.length;t++)if(e>u[u.length-t-1]){v.updateMtx(s[u.length-t-1]);break}}else v.updateMtx(s[0])})),I=!0}()),function(){console.log(R.vr().canvasPlayerControls);var e=R.vr().canvasPlayerControls;for(var t in e.canvas.removeEventListener("mouseup",e.onMoveEnd),e.canvas.addEventListener("mouseup",(function(){console.log("canvas mouseup"),U()||!R.paused()?e.onMoveEnd():U()||(console.log("not yet ready for playback"),N=!0,R.addClass("vjs-seeking"),R.bigPlayButton.hide(),C=!1,k())})),R.bigPlayButton.on("click",(function(){U()||(console.log("not yet ready for playback"),N=!0,R.addClass("vjs-seeking")),this.hide(),C=!1,k()})),A)A[t].on(dashjs.MediaPlayer.events.CAN_PLAY,(function(){console.log("audio canplay"),k()})),A[t].on(dashjs.MediaPlayer.events.BUFFER_LOADED,(function(){console.log("audio buffer loaded"),N&&k()})),A[t].on(dashjs.MediaPlayer.events.PLAYBACK_WAITING,(function(){console.log("audio waiting"),P()})),A[t].on(dashjs.MediaPlayer.events.PLAYBACK_SEEKING,(function(){console.log("audio seeking"),P()}));R.on("play",(function(){for(var e in console.log("play"),A)A[e].play()})),R.one("play",(function(){"running"!==f.state&&(f.resume(),console.log("resuming context"))})),R.on("pause",(function(){for(var e in console.log("pause"),A)A[e].pause()})),R.on("seeking",(function(){for(var e in console.log("seeking!"),P(),A)A[e].seek(this.currentTime())})),R.on("waiting",(function(){console.log("waiting"),P()})),R.on("canplay",(function(e){console.log("video canplay"),k()})),R.on("volumechange",(function(){E&&(E.gain.value=this.volume())})),R.on("playing",(function(){console.log("playing"),C=!1,N=!1,R.removeClass("vjs-seeking")})),R.on("loadeddata",(function(){console.log("loaded video data")}))}()}))}function P(){N||(N=!0,C=R.paused(),R.pause(),R.addClass("vjs-seeking"))}function k(){U()&&!C&&R.paused()?(console.log("resuming playback"),R.play()):U()||C?U?C?console.log("no need to hurry: playback was paused"):R.paused()||console.log("playback is running - no problem here?"):console.log("not ready for playback yet"):(console.log("WAITING!"),R.addClass("vjs-seeking"),console.log("videoPlayer.readyState(): "+R.readyState()),console.log("audio all ready states:"+A.every((function(e){return 4===e.getVideoElement().readyState}))),console.log("allBuffersLoaded:"+x))}function U(){return!!(R.readyState()>=3&&A.every((function(e){return 4===e.getVideoElement().readyState}))&&x)}R.vr({projection:"360"}),console.log(R),console.log(R.vr())}]);